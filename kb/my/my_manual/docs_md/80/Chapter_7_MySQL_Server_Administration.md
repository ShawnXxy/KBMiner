The MySQL Server

7.8.4 Using Client Programs in a Multiple-Server Environment ........................................... 1273
7.9  Debugging  MySQL ............................................................................................................ 1273
7.9.1 Debugging a MySQL Server ................................................................................... 1273
7.9.2 Debugging a MySQL Client ..................................................................................... 1279
7.9.3 The LOCK_ORDER Tool ........................................................................................ 1279
7.9.4 The DBUG Package ............................................................................................... 1285

MySQL Server (mysqld) is the main program that does most of the work in a MySQL installation. This
chapter provides an overview of MySQL Server and covers general server administration:

• Server configuration

• The data directory, particularly the mysql system schema

• The server log files

• Management of multiple servers on a single machine

For additional information on administrative topics, see also:

• Chapter 8, Security

• Chapter 9, Backup and Recovery

• Chapter 19, Replication

7.1 The MySQL Server

mysqld is the MySQL server. The following discussion covers these MySQL server configuration
topics:

• Startup options that the server supports. You can specify these options on the command line,

through configuration files, or both.

• Server system variables. These variables reflect the current state and values of the startup options,

some of which can be modified while the server is running.

• Server status variables. These variables contain counters and statistics about runtime operation.

• How to set the server SQL mode. This setting modifies certain aspects of SQL syntax and

semantics, for example for compatibility with code from other database systems, or to control the
error handling for particular situations.

• How the server manages client connections.

• Configuring and using IPv6 and network namespace support.

• Configuring and using time zone support.

• Using resource groups.

• Server-side help capabilities.

• Capabilities provided to enable client session state changes.

• The server shutdown process. There are performance and reliability considerations depending on

the type of table (transactional or nontransactional) and whether you use replication.

For listings of MySQL server variables and options that have been added, deprecated, or removed
in MySQL 8.0, see Section 1.4, “Server and Status Variables and Options Added, Deprecated, or
Removed in MySQL 8.0”.

746

Server Option, System Variable, and Status Variable Reference

Name

Cmd-Line

Option File System Var Status Var

Var Scope

Dynamic

clone_donor_timeout_after_network_failure

Yes

Yes

clone_enable_compression

Yes

Yes

clone_max_concurrency

Yes

Yes

clone_max_data_bandwidth

Yes

Yes

Yes
clone_max_network_bandwidth

Yes

Yes

Yes

Yes

Yes

clone_ssl_ca Yes

clone_ssl_cert Yes

clone_ssl_key Yes

clone_valid_donor_list

Yes

collation_connection

collation_database
(note 1)

collation_serverYes

Yes

Com_admin_commands

Com_alter_db

Com_alter_event

Com_alter_function

Com_alter_procedure

Com_alter_resource_group

Com_alter_server

Com_alter_table

Com_alter_tablespace

Com_alter_user

Com_alter_user_default_role

Com_analyze

Com_assign_to_keycache

Com_begin

Com_binlog

Com_call_procedure

Com_change_db

Com_change_master

Com_change_repl_filter

Com_change_replication_source

Com_check

Com_checksum

Com_clone

Com_commit

Com_create_db

Com_create_event

Com_create_function

Com_create_index

754

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Global

Global

Global

Global

Global

Global

Both

Both

Both

Both

Both

Both

Both

Both

Global

Both

Both

Both

Both

Global

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Global

Both

Both

Both

Both

Both

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Server Option, System Variable, and Status Variable Reference

Name

Cmd-Line

Option File System Var Status Var

Var Scope

Dynamic

Com_create_procedure

Com_create_resource_group

Com_create_role

Com_create_server

Com_create_table

Com_create_trigger

Com_create_udf

Com_create_user

Com_create_view

Com_dealloc_sql

Com_delete

Com_delete_multi

Com_do

Com_drop_db

Com_drop_event

Com_drop_function

Com_drop_index

Com_drop_procedure

Com_drop_resource_group

Com_drop_role

Com_drop_server

Com_drop_table

Com_drop_trigger

Com_drop_user

Com_drop_view

Com_empty_query

Com_execute_sql

Com_explain_other

Com_flush

Com_get_diagnostics

Com_grant

Com_grant_roles

Com_group_replication_start

Com_group_replication_stop

Com_ha_close

Com_ha_open

Com_ha_read

Com_help

Com_insert

Com_insert_select

Com_install_component

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Both

Global

Global

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Global

Global

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Global

Global

Global

Both

Both

Both

Both

Both

Both

Global

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

755

Server Option, System Variable, and Status Variable Reference

Name

Cmd-Line

Option File System Var Status Var

Var Scope

Dynamic

Com_install_plugin

Com_kill

Com_load

Com_lock_tables

Com_optimize

Com_preload_keys

Com_prepare_sql

Com_purge

Com_purge_before_date

Com_release_savepoint

Com_rename_table

Com_rename_user

Com_repair

Com_replace

Com_replace_select

Com_replica_start

Com_replica_stop

Com_reset

Com_resignal

Com_restart

Com_revoke

Com_revoke_all

Com_revoke_roles

Com_rollback

Com_rollback_to_savepoint

Com_savepoint

Com_select

Com_set_option

Com_set_resource_group

Com_set_role

Com_show_authors

Com_show_binlog_events

Com_show_binlogs

Com_show_charsets

Com_show_collations

Com_show_contributors

Com_show_create_db

Com_show_create_event

Com_show_create_func

Com_show_create_proc

Com_show_create_table

756

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Global

Both

Both

Both

Both

Both

Global

Global

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

Server Option, System Variable, and Status Variable Reference

Name

Cmd-Line

Option File System Var Status Var

Var Scope

Dynamic

Com_show_create_trigger

Com_show_create_user

Com_show_databases

Com_show_engine_logs

Com_show_engine_mutex

Com_show_engine_status

Com_show_errors

Com_show_events

Com_show_fields

Com_show_function_code

Com_show_function_status

Com_show_grants

Com_show_keys

Com_show_master_status

Com_show_ndb_status

Com_show_open_tables

Com_show_plugins

Com_show_privileges

Com_show_procedure_code

Com_show_procedure_status

Com_show_processlist

Com_show_profile

Com_show_profiles

Com_show_relaylog_events

Com_show_replica_status

Com_show_replicas

Com_show_slave_hosts

Com_show_slave_status

Com_show_status

Com_show_storage_engines

Com_show_table_status

Com_show_tables

Com_show_triggers

Com_show_variables

Com_show_warnings

Com_shutdown

Com_signal

Com_slave_start

Com_slave_stop

Com_stmt_close

Com_stmt_execute

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

757

Server Option, System Variable, and Status Variable Reference

Cmd-Line

Option File System Var Status Var

Var Scope

Dynamic

Name

initialize-
insecure

innodb

Yes

Yes

innodb_adaptive_flushing

Yes

Yes

Yes

Yes

innodb_adaptive_flushing_lwm

Yes

Yes

innodb_adaptive_hash_index

Yes

Yes

Yes
innodb_adaptive_hash_index_parts

Yes

Yes
innodb_adaptive_max_sleep_delay

Yes

Yes
innodb_api_bk_commit_interval

Yes

innodb_api_disable_rowlock

Yes

Yes

innodb_api_enable_binlog

Yes

innodb_api_enable_mdl

Yes

innodb_api_trx_level

Yes

Yes

Yes

Yes

innodb_autoextend_increment

Yes

Yes

innodb_autoinc_lock_mode

Yes

Yes

innodb_background_drop_list_empty

Yes

Yes

Innodb_buffer_pool_bytes_data

Innodb_buffer_pool_bytes_dirty

Yes
innodb_buffer_pool_chunk_size

Yes

innodb_buffer_pool_debug

Yes

Yes

innodb_buffer_pool_dump_at_shutdown

Yes

Yes

Yes
innodb_buffer_pool_dump_now

Yes

innodb_buffer_pool_dump_pct

Yes

Yes

Innodb_buffer_pool_dump_status

innodb_buffer_pool_filename

Yes

Yes

Yes
innodb_buffer_pool_in_core_file

Yes

innodb_buffer_pool_instances

Yes

Yes

Yes
innodb_buffer_pool_load_abort

Yes

innodb_buffer_pool_load_at_startup

Yes

Yes

innodb_buffer_pool_load_now

Yes

Yes

Innodb_buffer_pool_load_status

Innodb_buffer_pool_pages_data

Innodb_buffer_pool_pages_dirty

Innodb_buffer_pool_pages_flushed

Innodb_buffer_pool_pages_free

Innodb_buffer_pool_pages_latched

Innodb_buffer_pool_pages_misc

Innodb_buffer_pool_pages_total

Innodb_buffer_pool_read_ahead

Innodb_buffer_pool_read_ahead_evicted

Innodb_buffer_pool_read_ahead_rnd

764

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Yes

Yes

Yes

No

Yes

Yes

No

No

No

Yes

Yes

No

Yes

No

No

No

No

Yes

Yes

Yes

No

Yes

Yes

No

Yes

No

Yes

No

No

No

No

No

No

No

No

No

No

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Server Option, System Variable, and Status Variable Reference

Name

Cmd-Line

Option File System Var Status Var

Var Scope

Dynamic

Innodb_buffer_pool_read_requests

Innodb_buffer_pool_reads

Innodb_buffer_pool_resize_status

Innodb_buffer_pool_resize_status_code

Innodb_buffer_pool_resize_status_progress

innodb_buffer_pool_size

Yes

Yes

Yes

Innodb_buffer_pool_wait_free

Innodb_buffer_pool_write_requests

Yes
innodb_change_buffer_max_size
Yes

innodb_change_buffering

Yes

Yes

Yes
innodb_change_buffering_debug
Yes

innodb_checkpoint_disabled

Yes

Yes

innodb_checksum_algorithm

Yes

Yes

Yes
innodb_cmp_per_index_enabled
Yes

innodb_commit_concurrency

Yes

Yes

innodb_compress_debug

Yes

Yes

innodb_compression_failure_threshold_pct

Yes

Yes

innodb_compression_level

Yes

Yes

Yes
innodb_compression_pad_pct_max

Yes

innodb_concurrency_tickets

Yes

Yes

innodb_data_file_path

Yes

Yes

Innodb_data_fsyncs

innodb_data_home_dir

Yes

Yes

Innodb_data_pending_fsyncs

Innodb_data_pending_reads

Innodb_data_pending_writes

Innodb_data_read

Innodb_data_reads

Innodb_data_writes

Innodb_data_written

Innodb_dblwr_pages_written

Innodb_dblwr_writes

innodb_ddl_buffer_size

Yes

Yes

innodb_ddl_log_crash_reset_debug

Yes

Yes

innodb_ddl_threadsYes

innodb_deadlock_detect

Yes

innodb_dedicated_server

Yes

Yes

Yes

Yes

innodb_default_row_format

Yes

Yes

innodb_directoriesYes

Yes

Yes
innodb_disable_sort_file_cache

Yes

innodb_doublewriteYes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Session

Global

Session

Global

Global

Global

Global

Global

Global

No

No

No

No

No

Yes

No

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

No

No

No

No

No

No

No

No

No

No

No

Yes

Yes

Yes

Yes

No

Yes

No

Yes

Varies

765

Server Option, System Variable, and Status Variable Reference

Name

Cmd-Line

Option File System Var Status Var

Var Scope

Dynamic

Yes
innodb_doublewrite_batch_size

Yes

innodb_doublewrite_dir

Yes

innodb_doublewrite_files

Yes

Yes

Yes

innodb_doublewrite_pages

Yes

Yes

innodb_extend_and_initialize

Yes

Yes

innodb_fast_shutdown

Yes

Yes

innodb_fil_make_page_dirty_debug

Yes

Yes

innodb_file_per_table

Yes

innodb_fill_factorYes

Yes

Yes

innodb_flush_log_at_timeout

Yes

Yes

Yes
innodb_flush_log_at_trx_commit
Yes

innodb_flush_method

Yes

innodb_flush_neighbors

Yes

innodb_flush_syncYes

Yes

Yes

Yes

innodb_flushing_avg_loops

Yes

Yes

innodb_force_load_corrupted

Yes

Yes

innodb_force_recovery

Yes

innodb_fsync_threshold

Yes

Yes

Yes

innodb_ft_aux_table

innodb_ft_cache_size

Yes

Yes

innodb_ft_enable_diag_print

Yes

Yes

innodb_ft_enable_stopword

Yes

Yes

innodb_ft_max_token_size

Yes

innodb_ft_min_token_size

Yes

Yes

Yes

innodb_ft_num_word_optimize

Yes

Yes

innodb_ft_result_cache_limit

Yes

Yes

Yes
innodb_ft_server_stopword_table
Yes

innodb_ft_sort_pll_degree

Yes

Yes

innodb_ft_total_cache_size

Yes

Yes

Yes
innodb_ft_user_stopword_table

Yes

Innodb_have_atomic_builtins

innodb_idle_flush_pct

Yes

innodb_io_capacityYes

innodb_io_capacity_max

Yes

Yes

Yes

Yes

innodb_limit_optimistic_insert_debug

Yes

Yes

innodb_lock_wait_timeout

Yes

innodb_log_buffer_size

Yes

Yes

Yes

Yes
innodb_log_checkpoint_fuzzy_now

Yes

innodb_log_checkpoint_now

Yes

Yes

innodb_log_checksums

Yes

Yes

Yes
innodb_log_compressed_pages

Yes

766

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Both

Global

Global

Global

Global

Global

Global

Global

Both

Global

Global

Global

Global

Global

Both

Global

Global

Global

Global

Global

No

No

No

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

Yes

Yes

Yes

No

No

Yes

Yes

No

Yes

Yes

No

No

Yes

Yes

Yes

No

No

Yes

No

Yes

Yes

Yes

Yes

Yes

Varies

Yes

Yes

Yes

Yes

Server Option, System Variable, and Status Variable Reference

Name

Cmd-Line

Option File System Var Status Var

Var Scope

Dynamic

innodb_log_file_sizeYes

innodb_log_files_in_group

Yes

Yes

Yes

innodb_log_group_home_dir

Yes

Yes

Yes
innodb_log_spin_cpu_abs_lwm

Yes

Yes
innodb_log_spin_cpu_pct_hwm

Yes

innodb_log_wait_for_flush_spin_hwm

Yes

Yes

Innodb_log_waits

innodb_log_write_ahead_size

Yes

Yes

Innodb_log_write_requests

innodb_log_writer_threads

Yes

Yes

Innodb_log_writes

innodb_lru_scan_depth

Yes

Yes

innodb_max_dirty_pages_pct

Yes

Yes

Yes
innodb_max_dirty_pages_pct_lwm

Yes

innodb_max_purge_lag

Yes

Yes

innodb_max_purge_lag_delay

Yes

Yes

innodb_max_undo_log_size

Yes

Yes

innodb_merge_threshold_set_all_debug

Yes

Yes

innodb_monitor_disable

Yes

innodb_monitor_enable

Yes

innodb_monitor_reset

Yes

innodb_monitor_reset_all

Yes

Innodb_num_open_files

innodb_numa_interleave

Yes

innodb_old_blocks_pct

Yes

innodb_old_blocks_time

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes
innodb_online_alter_log_max_size

Yes

innodb_open_filesYes

Yes

innodb_optimize_fulltext_only

Yes

Yes

Innodb_os_log_fsyncs

Innodb_os_log_pending_fsyncs

Innodb_os_log_pending_writes

Innodb_os_log_written

innodb_page_cleaners

Yes

Yes

Innodb_page_size

innodb_page_sizeYes

Yes

Innodb_pages_created

Innodb_pages_read

Innodb_pages_written

innodb_parallel_read_threads

Yes

Yes

innodb_print_all_deadlocks

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

No

No

No

Yes

Yes

Yes

No

Yes

No

Yes

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

No

Yes

Yes

Yes

Varies

Yes

No

No

No

No

No

No

No

No

No

No

Session

Global

Yes

Yes

767

Server Option, System Variable, and Status Variable Reference

Name

Cmd-Line

Option File System Var Status Var

Var Scope

Dynamic

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

innodb_print_ddl_logs

Yes

innodb_purge_batch_size

Yes

Yes

Yes

innodb_purge_rseg_truncate_frequency

Yes

Yes

innodb_purge_threads

Yes

Yes

innodb_random_read_ahead

Yes

Yes

innodb_read_ahead_threshold

Yes

Yes

innodb_read_io_threads

Yes

innodb_read_onlyYes

Yes

Yes

innodb_redo_log_archive_dirs

Yes

Yes

innodb_redo_log_capacity

Yes

Yes

Innodb_redo_log_capacity_resized

Innodb_redo_log_checkpoint_lsn

Innodb_redo_log_current_lsn

Innodb_redo_log_enabled

innodb_redo_log_encrypt

Yes

Yes

Yes

Innodb_redo_log_flushed_to_disk_lsn

Innodb_redo_log_logical_size

Innodb_redo_log_physical_size

Innodb_redo_log_read_only

Innodb_redo_log_resize_status

Innodb_redo_log_uuid

innodb_replication_delay

Yes

Yes

innodb_rollback_on_timeout

Yes

Yes

innodb_rollback_segments

Yes

Yes

Innodb_row_lock_current_waits

Innodb_row_lock_time

Innodb_row_lock_time_avg

Innodb_row_lock_time_max

Innodb_row_lock_waits

Innodb_rows_deleted

Innodb_rows_inserted

Innodb_rows_read

Innodb_rows_updated

innodb_saved_page_number_debug

Yes

Yes

Yes
innodb_segment_reserve_factor
Yes

innodb_sort_buffer_size

Yes

innodb_spin_wait_delay

Yes

Yes

Yes

Yes
innodb_spin_wait_pause_multiplier

Yes

innodb_stats_auto_recalc

Yes

Yes

innodb_stats_include_delete_marked

Yes

Yes

innodb_stats_method

Yes

Yes

768

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Yes

Yes

Yes

No

Yes

Yes

No

No

Yes

Yes

No

No

No

No

Yes

No

No

No

No

No

No

Yes

No

Yes

No

No

No

No

No

No

No

No

No

Yes

Yes

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Server Option, System Variable, and Status Variable Reference

Name

Cmd-Line

Option File System Var Status Var

Var Scope

Dynamic

innodb_stats_on_metadata

Yes

Yes

innodb_stats_persistent

Yes

Yes

innodb_stats_persistent_sample_pages

Yes

Yes

innodb_stats_transient_sample_pages

Yes

Yes

innodb-
status-file

Yes

innodb_status_output

Yes

Yes

Yes

innodb_status_output_locks

Yes

Yes

innodb_strict_modeYes

innodb_sync_array_size

Yes

innodb_sync_debugYes

innodb_sync_spin_loops

Yes

Yes

Yes

Yes

Yes

Innodb_system_rows_deleted

Innodb_system_rows_inserted

Innodb_system_rows_read

Innodb_system_rows_updated

innodb_table_locksYes

Yes

innodb_temp_data_file_path

Yes

Yes

innodb_temp_tablespaces_dir

Yes

Yes

innodb_thread_concurrency

Yes

Yes

innodb_thread_sleep_delay

Yes

Yes

innodb_tmpdir Yes

Yes

Innodb_truncated_status_writes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

innodb_trx_purge_view_update_only_debug

Yes

Yes

Yes

Yes
innodb_trx_rseg_n_slots_debug

Yes

innodb_undo_directory

Yes

innodb_undo_log_encrypt

Yes

innodb_undo_log_truncate

Yes

innodb_undo_tablespaces

Yes

Yes

Yes

Yes

Yes

Innodb_undo_tablespaces_active

Innodb_undo_tablespaces_explicit

Innodb_undo_tablespaces_implicit

Innodb_undo_tablespaces_total

innodb_use_fdatasync

Yes

innodb_use_native_aio

Yes

Yes

Yes

Yes
innodb_validate_tablespace_paths

Yes

innodb_version

innodb_write_io_threads

Yes

Yes

insert_id

install

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Global

Global

Global

Both

Global

Global

Global

Global

Global

Global

Global

Both

Global

Global

Global

Global

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

No

Yes

No

No

No

No

Yes

No

No

Yes

Yes

Yes

No

Yes

Yes

No

Yes

Yes

Varies

No

No

No

No

Yes

No

No

No

No

Session

Yes

769

Server Option, System Variable, and Status Variable Reference

Name

install-
manual

Cmd-Line

Option File System Var Status Var

Var Scope

Dynamic

Yes

interactive_timeoutYes

Yes

Yes
internal_tmp_disk_storage_engine
Yes

Yes
internal_tmp_mem_storage_engine

Yes

join_buffer_sizeYes

keep_files_on_create

Yes

Yes

Yes

Key_blocks_not_flushed

Key_blocks_unused

Key_blocks_used

key_buffer_sizeYes

key_cache_age_threshold

Yes

key_cache_block_size

Yes

key_cache_division_limit

Yes

Key_read_requests

Key_reads

Key_write_requests

Key_writes

keyring_aws_cmk_id

Yes

keyring_aws_conf_file

Yes

keyring_aws_data_file

Yes

keyring_aws_regionYes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

keyring_encrypted_file_data

Yes

Yes

Yes
keyring_encrypted_file_password
Yes

keyring_file_dataYes

Yes

keyring_hashicorp_auth_path

Yes

Yes

keyring_hashicorp_ca_path

Yes

Yes

keyring_hashicorp_caching

Yes

Yes

keyring_hashicorp_commit_auth_path

keyring_hashicorp_commit_ca_path

keyring_hashicorp_commit_caching

keyring_hashicorp_commit_role_id

keyring_hashicorp_commit_server_url

keyring_hashicorp_commit_store_path

keyring_hashicorp_role_id

Yes

Yes

keyring_hashicorp_secret_id

Yes

Yes

keyring_hashicorp_server_url

Yes

Yes

keyring_hashicorp_store_path

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Both

Global

Both

Both

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Yes

Yes

Yes

Yes

Yes

No

No

No

Yes

Yes

Yes

Yes

No

No

No

No

Yes

No

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

No

No

No

No

No

Yes

Yes

Yes

Yes

Yes

Yes

keyring-
migration-
destination

770

Server Option, System Variable, and Status Variable Reference

Name

Cmd-Line

Option File System Var Status Var

Var Scope

Dynamic

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

keyring-
migration-
host

keyring-
migration-
password

keyring-
migration-
port

keyring-
migration-
socket

keyring-
migration-
source

keyring-
migration-to-
component

keyring-
migration-
user

keyring_oci_ca_certificate

Yes

keyring_oci_compartment

Yes

Yes

Yes

Yes
keyring_oci_encryption_endpoint
Yes

keyring_oci_key_fileYes

Yes

keyring_oci_key_fingerprint

Yes

Yes

keyring_oci_management_endpoint

Yes

Yes

keyring_oci_master_key

Yes

Yes

keyring_oci_secrets_endpoint

Yes

Yes

keyring_oci_tenancy

Yes

keyring_oci_userYes

Yes

Yes

keyring_oci_vaults_endpoint

Yes

Yes

keyring_oci_virtual_vault

Yes

keyring_okv_conf_dir

Yes

Yes

Yes

keyring_operations

large_files_support

large_page_size

large_pages Yes

Yes

last_insert_id

Last_query_cost

Last_query_partial_plans

lc_messages Yes

lc_messages_dirYes

lc_time_namesYes

license

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Session

Session

Session

Both

Global

Both

Global

No

No

No

No

No

No

No

No

No

No

No

No

Yes

Yes

No

No

No

Yes

No

No

Yes

No

Yes

No

771

Server Option, System Variable, and Status Variable Reference

Name

Cmd-Line

Option File System Var Status Var

Var Scope

Dynamic

local_infile

Yes

local-service Yes

lock_order

Yes

lock_order_debug_loop

Yes

Yes

Yes

Yes

Yes
lock_order_debug_missing_arc

Yes

Yes
lock_order_debug_missing_key

Yes

Yes
lock_order_debug_missing_unlock

Yes

lock_order_dependencies

Yes

Yes

Yes
lock_order_extra_dependencies

Yes

lock_order_output_directory

Yes

Yes

lock_order_print_txtYes

lock_order_trace_loop

Yes

Yes

Yes

lock_order_trace_missing_arc

Yes

Yes

lock_order_trace_missing_key

Yes

Yes

Yes
lock_order_trace_missing_unlock
Yes

lock_wait_timeoutYes

Yes

Locked_connects

locked_in_memory

log-bin

log_bin

Yes

Yes

log_bin_basename

log_bin_index Yes

Yes

Yes
log_bin_trust_function_creators

Yes

log_bin_use_v1_row_events

Yes

Yes

log_error

Yes

log_error_servicesYes

log_error_suppression_list

Yes

log_error_verbosityYes

log-isam

log_output

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes
log_queries_not_using_indexes

Yes

log_raw

Yes

log_replica_updatesYes

log-short-
format

Yes

log_slave_updatesYes

Yes

Yes

Yes

Yes

log_slow_admin_statements

Yes

Yes

log_slow_extraYes

Yes

log_slow_replica_statements

Yes

Yes

log_slow_slave_statements

Yes

Yes

Yes
log_statements_unsafe_for_binlog
Yes

772

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Yes

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

No

No

No

No

No

No

No

No

No

No

No

No

No

Yes

No

No

No

No

No

Yes

Yes

No

Yes

Yes

Yes

Yes

Yes

Yes

No

No

Yes

Yes

Yes

Yes

Yes

Server Option, System Variable, and Status Variable Reference

Name

Cmd-Line

Option File System Var Status Var

Var Scope

Dynamic

log_syslog

Yes

log_syslog_facilityYes

log_syslog_include_pid

Yes

log_syslog_tagYes

log-tc

log-tc-size

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

log_throttle_queries_not_using_indexes

Yes

Yes

log_timestampsYes

long_query_timeYes

low_priority_updates

Yes

lower_case_file_system

lower_case_table_names

Yes

mandatory_rolesYes

master-info-
file

Yes

master_info_repository

Yes

master-retry-
count

Yes

master_verify_checksum

Yes

max_allowed_packet

Yes

max_binlog_cache_size

Yes

max-binlog-
dump-events

Yes

max_binlog_sizeYes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

max_binlog_stmt_cache_size

Yes

Yes

max_connect_errors

Yes

max_connectionsYes

max_delayed_threads

Yes

max_digest_lengthYes

max_error_countYes

max_execution_time

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Max_execution_time_exceeded

Max_execution_time_set

Max_execution_time_set_failed

max_heap_table_size

Yes

Yes

max_insert_delayed_threads

max_join_size Yes

max_length_for_sort_data

Yes

max_points_in_geometry

Yes

max_prepared_stmt_count

Yes

max_relay_log_sizeYes

max_seeks_for_keyYes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Global

Global

Global

Both

Both

Global

Global

Global

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

No

Yes

Global

Yes

Global

Both

Global

Global

Global

Global

Global

Both

Global

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Global

Global

Both

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

Yes

Yes

No

No

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

773

Server Option, System Variable, and Status Variable Reference

Name

Cmd-Line

Option File System Var Status Var

Var Scope

Dynamic

max_sort_lengthYes

max_sp_recursion_depth

Yes

Max_used_connections

Max_used_connections_time

max_user_connections

Yes

max_write_lock_count

Yes

mecab_charset

mecab_rc_file Yes

memlock

Yes

- Variable:
locked_in_memory

Yes

Yes

Yes

Yes

Yes

Yes

metadata_locks_cache_size

Yes

Yes

Yes
metadata_locks_hash_instances
Yes

min_examined_row_limit

Yes

myisam-
block-size

Yes

Yes

Yes

myisam_data_pointer_size

Yes

Yes

myisam_max_sort_file_size

Yes

Yes

myisam_mmap_size

Yes

myisam_recover_options

Yes

myisam_repair_threads

Yes

myisam_sort_buffer_size

Yes

myisam_stats_method

Yes

myisam_use_mmapYes

mysql_firewall_mode

Yes

mysql_firewall_traceYes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

mysql_native_password_proxy_users

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

mysqlx

Yes

Yes

Mysqlx_aborted_clients

Mysqlx_address

mysqlx_bind_address

Yes

Yes

Yes

Mysqlx_bytes_received

Mysqlx_bytes_received_compressed_payload

Mysqlx_bytes_received_uncompressed_frame

Mysqlx_bytes_sent

Mysqlx_bytes_sent_compressed_payload

Mysqlx_bytes_sent_uncompressed_frame

Mysqlx_compression_algorithm

Yes
mysqlx_compression_algorithms
Yes

Mysqlx_compression_level

mysqlx_connect_timeout

Yes

Yes

Yes

Yes

774

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Both

Both

Global

Global

Both

Global

Global

Global

Global

Global

Both

Global

Global

Global

Global

Both

Both

Both

Global

Global

Global

Global

Global

Global

Global

Both

Both

Both

Both

Both

Both

Session

Global

Session

Global

Yes

Yes

No

No

Yes

Yes

No

No

No

No

Yes

Yes

Yes

No

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

No

No

No

No

No

No

No

No

No

Yes

No

Yes

Server Option, System Variable, and Status Variable Reference

Name

Cmd-Line

Option File System Var Status Var

Var Scope

Dynamic

Mysqlx_connection_accept_errors

Mysqlx_connection_errors

Mysqlx_connections_accepted

Mysqlx_connections_closed

Mysqlx_connections_rejected

Mysqlx_crud_create_view

Mysqlx_crud_delete

Mysqlx_crud_drop_view

Mysqlx_crud_find

Mysqlx_crud_insert

Mysqlx_crud_modify_view

Mysqlx_crud_update

Mysqlx_cursor_close

Mysqlx_cursor_fetch

Mysqlx_cursor_open

mysqlx_deflate_default_compression_level

Yes

Yes

Yes

Yes
mysqlx_deflate_max_client_compression_level

Yes

Yes

mysqlx_document_id_unique_prefix

Yes

Yes

mysqlx_enable_hello_notice

Yes

Yes

Mysqlx_errors_sent

Mysqlx_errors_unknown_message_type

Mysqlx_expect_close

Mysqlx_expect_open

mysqlx_idle_worker_thread_timeout

Yes

Yes

Mysqlx_init_error

mysqlx_interactive_timeout

Yes

Yes

mysqlx_lz4_default_compression_level

Yes

Yes

mysqlx_lz4_max_client_compression_level

Yes

Yes

mysqlx_max_allowed_packet

Yes

Yes

mysqlx_max_connections

Yes

Yes

Mysqlx_messages_sent

mysqlx_min_worker_threads

Yes

Yes

Mysqlx_notice_global_sent

Mysqlx_notice_other_sent

Mysqlx_notice_warning_sent

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Mysqlx_notified_by_group_replication

Mysqlx_port

mysqlx_port Yes

Yes

mysqlx_port_open_timeout

Yes

Yes

Yes

Yes

Mysqlx_prep_deallocate

Mysqlx_prep_execute

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Both

Both

Global

Global

Global

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Global

Global

Global

Global

Both

Both

Both

Both

Global

Both

Global

Global

Global

Global

Global

Both

Global

Both

Both

Both

Both

Global

Global

Global

Both

Both

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

Yes

Yes

Yes

Yes

No

No

No

No

Yes

No

Yes

Yes

Yes

Yes

Yes

No

Yes

No

No

No

No

No

No

No

No

No

775

Server Option, System Variable, and Status Variable Reference

Name

Cmd-Line

Option File System Var Status Var

Var Scope

Dynamic

Mysqlx_prep_prepare

mysqlx_read_timeout

Yes

Yes

Yes

Mysqlx_rows_sent

Mysqlx_sessions

Mysqlx_sessions_accepted

Mysqlx_sessions_closed

Mysqlx_sessions_fatal_error

Mysqlx_sessions_killed

Mysqlx_sessions_rejected

Mysqlx_socket

mysqlx_socketYes

Yes

Yes

Mysqlx_ssl_accept_renegotiates

Mysqlx_ssl_accepts

Mysqlx_ssl_active

mysqlx_ssl_caYes

mysqlx_ssl_capathYes

mysqlx_ssl_certYes

Mysqlx_ssl_cipher

mysqlx_ssl_cipherYes

Mysqlx_ssl_cipher_list

mysqlx_ssl_crlYes

mysqlx_ssl_crlpathYes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Mysqlx_ssl_ctx_verify_depth

Mysqlx_ssl_ctx_verify_mode

Mysqlx_ssl_finished_accepts

mysqlx_ssl_keyYes

Yes

Yes

Mysqlx_ssl_server_not_after

Mysqlx_ssl_server_not_before

Mysqlx_ssl_verify_depth

Mysqlx_ssl_verify_mode

Mysqlx_ssl_version

Mysqlx_stmt_create_collection

Mysqlx_stmt_create_collection_index

Mysqlx_stmt_disable_notices

Mysqlx_stmt_drop_collection

Mysqlx_stmt_drop_collection_index

Mysqlx_stmt_enable_notices

Mysqlx_stmt_ensure_collection

Mysqlx_stmt_execute_mysqlx

Mysqlx_stmt_execute_sql

Mysqlx_stmt_execute_xplugin

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Both

Session

No

Yes

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Both

Global

Global

Global

Both

Global

Both

Global

Global

Both

Both

Global

Global

Global

Global

Global

Global

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

776

Server Option, System Variable, and Status Variable Reference

Name

Cmd-Line

Option File System Var Status Var

Var Scope

Dynamic

Mysqlx_stmt_get_collection_options

Mysqlx_stmt_kill_client

Mysqlx_stmt_list_clients

Mysqlx_stmt_list_notices

Mysqlx_stmt_list_objects

Mysqlx_stmt_modify_collection_options

Mysqlx_stmt_ping

mysqlx_wait_timeout

Yes

Yes

Yes

Mysqlx_worker_threads

Mysqlx_worker_threads_active

mysqlx_write_timeout

Yes

Yes

mysqlx_zstd_default_compression_level

Yes

Yes

Yes

Yes

mysqlx_zstd_max_client_compression_level

Yes

Yes

Yes

named_pipe Yes

Yes

Yes
named_pipe_full_access_group

Yes

ndb_allow_copying_alter_table

Yes

Yes

Yes

Yes

Yes

Ndb_api_adaptive_send_deferred_count

Ndb_api_adaptive_send_deferred_count_replica

Ndb_api_adaptive_send_deferred_count_session

Ndb_api_adaptive_send_deferred_count_slave

Ndb_api_adaptive_send_forced_count

Ndb_api_adaptive_send_forced_count_replica

Ndb_api_adaptive_send_forced_count_session

Ndb_api_adaptive_send_forced_count_slave

Ndb_api_adaptive_send_unforced_count

Ndb_api_adaptive_send_unforced_count_replica

Ndb_api_adaptive_send_unforced_count_session

Ndb_api_adaptive_send_unforced_count_slave

Ndb_api_bytes_received_count

Ndb_api_bytes_received_count_replica

Ndb_api_bytes_received_count_session

Ndb_api_bytes_received_count_slave

Ndb_api_bytes_sent_count

Ndb_api_bytes_sent_count_replica

Ndb_api_bytes_sent_count_session

Ndb_api_bytes_sent_count_slave

Ndb_api_event_bytes_count

Ndb_api_event_bytes_count_injector

Ndb_api_event_data_count

Ndb_api_event_data_count_injector

Ndb_api_event_nondata_count

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Both

Both

Both

Both

Both

Both

Both

Session

Global

Global

Session

Global

Global

Global

Global

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Session

Global

Global

Global

Session

Global

Global

Global

Global

Global

Global

No

No

No

No

No

No

No

Yes

No

No

Yes

Yes

Yes

No

No

Yes

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

777

Server Option, System Variable, and Status Variable Reference

Name

Cmd-Line

Option File System Var Status Var

Var Scope

Dynamic

Ndb_api_event_nondata_count_injector

Ndb_api_pk_op_count

Ndb_api_pk_op_count_replica

Ndb_api_pk_op_count_session

Ndb_api_pk_op_count_slave

Ndb_api_pruned_scan_count

Ndb_api_pruned_scan_count_replica

Ndb_api_pruned_scan_count_session

Ndb_api_pruned_scan_count_slave

Ndb_api_range_scan_count

Ndb_api_range_scan_count_replica

Ndb_api_range_scan_count_session

Ndb_api_range_scan_count_slave

Ndb_api_read_row_count

Ndb_api_read_row_count_replica

Ndb_api_read_row_count_session

Ndb_api_read_row_count_slave

Ndb_api_scan_batch_count

Ndb_api_scan_batch_count_replica

Ndb_api_scan_batch_count_session

Ndb_api_scan_batch_count_slave

Ndb_api_table_scan_count

Ndb_api_table_scan_count_replica

Ndb_api_table_scan_count_session

Ndb_api_table_scan_count_slave

Ndb_api_trans_abort_count

Ndb_api_trans_abort_count_replica

Ndb_api_trans_abort_count_session

Ndb_api_trans_abort_count_slave

Ndb_api_trans_close_count

Ndb_api_trans_close_count_replica

Ndb_api_trans_close_count_session

Ndb_api_trans_close_count_slave

Ndb_api_trans_commit_count

Ndb_api_trans_commit_count_replica

Ndb_api_trans_commit_count_session

Ndb_api_trans_commit_count_slave

Ndb_api_trans_local_read_row_count

Ndb_api_trans_local_read_row_count_replica

Ndb_api_trans_local_read_row_count_session

Ndb_api_trans_local_read_row_count_slave

778

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Session

Global

Global

Global

Session

Global

Global

Global

Session

Global

Global

Global

Session

Global

Global

Global

Session

Global

Global

Global

Session

Global

Global

Global

Session

Global

Global

Global

Session

Global

Global

Global

Session

Global

Global

Global

Session

Global

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

Server Option, System Variable, and Status Variable Reference

Name

Cmd-Line

Option File System Var Status Var

Var Scope

Dynamic

Ndb_api_trans_start_count

Ndb_api_trans_start_count_replica

Ndb_api_trans_start_count_session

Ndb_api_trans_start_count_slave

Ndb_api_uk_op_count

Ndb_api_uk_op_count_replica

Ndb_api_uk_op_count_session

Ndb_api_uk_op_count_slave

Ndb_api_wait_exec_complete_count

Ndb_api_wait_exec_complete_count_replica

Ndb_api_wait_exec_complete_count_session

Ndb_api_wait_exec_complete_count_slave

Ndb_api_wait_meta_request_count

Ndb_api_wait_meta_request_count_replica

Ndb_api_wait_meta_request_count_session

Ndb_api_wait_meta_request_count_slave

Ndb_api_wait_nanos_count

Ndb_api_wait_nanos_count_replica

Ndb_api_wait_nanos_count_session

Ndb_api_wait_nanos_count_slave

Ndb_api_wait_scan_result_count

Ndb_api_wait_scan_result_count_replica

Ndb_api_wait_scan_result_count_session

Ndb_api_wait_scan_result_count_slave

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

ndb_applier_allow_skip_epoch

Yes

Yes

Yes
ndb_autoincrement_prefetch_sz

Yes

ndb_batch_sizeYes

Yes

ndb_blob_read_batch_bytes

Yes

Yes

ndb_blob_write_batch_bytes

Yes

Yes

ndb_clear_apply_status

Yes

ndb_cluster_connection_pool

Yes

Yes

ndb_cluster_connection_pool_nodeids

Yes

Yes

Ndb_cluster_node_id

Ndb_config_from_host

Ndb_config_from_port

Ndb_config_generation

Ndb_conflict_fn_epoch

Ndb_conflict_fn_epoch_trans

Ndb_conflict_fn_epoch2

Ndb_conflict_fn_epoch2_trans

Ndb_conflict_fn_max

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Session

Global

Global

Global

Session

Global

Global

Global

Session

Global

Global

Global

Session

Global

Global

Global

Session

Global

Global

Global

Session

Global

Global

Both

Both

Both

Both

Global

Global

Global

Global

Both

Both

Global

Global

Global

Global

Global

Global

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

Yes

Yes

Yes

Yes

Yes

No

No

No

No

No

No

No

No

No

No

No

779

Server Option, System Variable, and Status Variable Reference

Name

Cmd-Line

Option File System Var Status Var

Var Scope

Dynamic

Ndb_conflict_fn_max_del_win

Ndb_conflict_fn_max_del_win_ins

Ndb_conflict_fn_max_ins

Ndb_conflict_fn_old

Ndb_conflict_last_conflict_epoch

Ndb_conflict_last_stable_epoch

Ndb_conflict_reflected_op_discard_count

Ndb_conflict_reflected_op_prepare_count

Ndb_conflict_refresh_op_count

ndb_conflict_roleYes

Yes

Yes

Ndb_conflict_trans_conflict_commit_count

Ndb_conflict_trans_detect_iter_count

Ndb_conflict_trans_reject_count

Ndb_conflict_trans_row_conflict_count

Ndb_conflict_trans_row_reject_count

ndb-
connectstring

Yes

Yes

ndb_data_node_neighbour

Yes

Yes

ndb_dbg_check_shares

Yes

Yes

ndb_default_column_format

Yes

Yes

ndb_default_column_format

Yes

Yes

ndb_deferred_constraints

Yes

ndb_deferred_constraints

Yes

ndb_distributionYes

ndb_distributionYes

Yes

Yes

Yes

Yes

Ndb_epoch_delete_delete_count

ndb_eventbuffer_free_percent

Yes

Yes

ndb_eventbuffer_max_alloc

Yes

Yes

Ndb_execute_count

ndb_extra_loggingYes

Ndb_fetch_table_stats

ndb_force_sendYes

ndb_fully_replicatedYes

ndb_index_stat_enable

Yes

ndb_index_stat_option

Yes

ndb_join_pushdown

Yes

Yes

Yes

Yes

Yes

Ndb_last_commit_epoch_server

Ndb_last_commit_epoch_session

ndb_log_apply_status

Yes

ndb_log_apply_status

Yes

ndb_log_bin Yes

Yes

Yes

780

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Both

Global

Global

Both

Both

Global

Global

Global

Global

Global

Global

Global

Global

Both

Both

Both

Both

Both

Global

Session

Global

Global

Both

No

No

No

No

No

No

No

No

No

Yes

No

No

No

No

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

Yes

Yes

No

Yes

No

Yes

Yes

Yes

Yes

Yes

No

No

No

No

No

Server Option, System Variable, and Status Variable Reference

Name

Cmd-Line

Option File System Var Status Var

Var Scope

Dynamic

ndb_log_binlog_index

Yes

ndb_log_cache_size

Yes

ndb_log_empty_epochs

Yes

ndb_log_empty_epochs

Yes

ndb_log_empty_update

Yes

ndb_log_empty_update

Yes

ndb_log_exclusive_reads

Yes

ndb_log_exclusive_reads

Yes

ndb_log_fail_terminate

Yes

ndb_log_orig Yes

ndb_log_orig Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes
ndb_log_transaction_compression
Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

ndb_log_transaction_compression_level_zstd

Yes

Yes

Yes

Yes
ndb_log_transaction_dependency
Yes

ndb_log_transaction_id

Yes

Yes

ndb_log_transaction_id

ndb_log_update_as_write

Yes

ndb_log_update_minimal

Yes

ndb_log_updated_only

Yes

Yes

Yes

Yes

Ndb_metadata_blacklist_size

ndb_metadata_check

Yes

Yes

ndb_metadata_check_interval

Yes

Yes

Ndb_metadata_detected_count

Ndb_metadata_excluded_count

ndb_metadata_sync

Ndb_metadata_synced_count

ndb-mgmd-
host

Yes

ndb_nodeid Yes

Yes

Yes

Ndb_number_of_data_nodes

ndb_optimization_delay

Yes

Yes

ndb_optimized_node_selection

Yes

Yes

ndb_optimized_node_selection

Yes

Yes

Ndb_pruned_scan_count

Ndb_pushed_queries_defined

Ndb_pushed_queries_dropped

Ndb_pushed_queries_executed

Ndb_pushed_reads

ndb_read_backupYes

Yes

ndb_recv_thread_activation_threshold

Yes

Yes

ndb_recv_thread_cpu_mask

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Global

Global

Global

Both

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

No

No

Yes

Yes

No

No

No

Yes

Yes

Yes

No

Yes

Yes

No

No

Yes

No

No

No

Yes

Yes

No

No

No

No

No

No

Yes

Yes

Yes

781

Server Option, System Variable, and Status Variable Reference

Name

Cmd-Line

Option File System Var Status Var

Var Scope

Dynamic

ndb_replica_batch_size

Yes

Yes

ndb_replica_blob_write_batch_bytes

Yes

Yes

Ndb_replica_max_replicated_epoch

ndb_report_thresh_binlog_epoch_slip

Yes

Yes

ndb_report_thresh_binlog_mem_usage

Yes

Yes

ndb_row_checksum

Ndb_scan_count

ndb_schema_dist_lock_wait_timeout

Yes

Yes

ndb_schema_dist_timeout

Yes

ndb_schema_dist_timeout

Yes

Yes

Yes

ndb_schema_dist_upgrade_allowed

Yes

Yes

Ndb_schema_participant_count

ndb_show_foreign_key_mock_tables

Yes

Yes

ndb_slave_conflict_role

Yes

Yes

Ndb_slave_max_replicated_epoch

Ndb_system_name

ndb_table_no_logging

ndb_table_temporary

Ndb_trans_hint_count_session

Yes

ndb-transid-
mysql-
connection-
map

ndb_use_copying_alter_table

ndb_use_exact_count

ndb_use_transactions

Yes

Yes

ndb_version

ndb_version_string

ndb_wait_connected

Yes

ndb_wait_setupYes

ndbcluster

ndbinfo

Yes

Yes

ndbinfo_database

ndbinfo_max_bytesYes

ndbinfo_max_rowsYes

ndbinfo_offline

ndbinfo_show_hidden

Yes

ndbinfo_table_prefix

ndbinfo_version

net_buffer_lengthYes

net_read_timeoutYes

net_retry_countYes

Yes

Yes

Yes

Yes

Yes

Yes

782

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Global

Global

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Session

Session

Both

Both

Both

Both

Global

Global

Global

Global

Global

Both

Both

Global

Both

Global

Global

Both

Both

Both

Yes

Yes

No

Yes

Yes

Yes

No

Yes

No

No

No

No

Yes

Yes

No

No

Yes

Yes

No

No

Yes

Yes

No

No

No

No

No

Yes

Yes

Yes

Yes

No

No

Yes

Yes

Yes

Server Option, System Variable, and Status Variable Reference

Name

Cmd-Line

Option File System Var Status Var

Var Scope

Dynamic

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

net_write_timeoutYes

new

Yes

ngram_token_sizeYes

no-dd-
upgrade

no-defaults

no-monitor

Yes

Yes

Yes

Not_flushed_delayed_rows

offline_mode Yes

old

Yes

old_alter_tableYes

old-style-
user-limits

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Ongoing_anonymous_gtid_violating_transaction_count

Ongoing_anonymous_transaction_count

Ongoing_automatic_gtid_violating_transaction_count

Open_files

open_files_limitYes

Yes

Yes

Open_streams

Open_table_definitions

Open_tables

Opened_files

Opened_table_definitions

Opened_tables

optimizer_prune_level

Yes

optimizer_search_depth

Yes

optimizer_switchYes

optimizer_traceYes

optimizer_trace_features

Yes

optimizer_trace_limit

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes
optimizer_trace_max_mem_size
Yes

optimizer_trace_offset

Yes

Yes

original_commit_timestamp

original_server_version

parser_max_mem_size

Yes

partial_revokesYes

password_historyYes

password_require_current

Yes

password_reuse_interval

Yes

performance_schema

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Performance_schema_accounts_lost

Yes

Both

Both

Global

Global

Global

Global

Both

Global

Global

Global

Global

Global

Global

Global

Both

Global

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Session

Session

Both

Global

Global

Global

Global

Global

Global

Yes

Yes

No

No

Yes

No

Yes

No

No

No

No

No

No

No

No

No

No

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

No

783

Server Option, System Variable, and Status Variable Reference

Name

Cmd-Line

Option File System Var Status Var

Var Scope

Dynamic

Global

Global

Global

No

No

No

performance_schema_accounts_size

Yes

Yes

Yes

Performance_schema_cond_classes_lost

Performance_schema_cond_instances_lost

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

performance-
schema-
consumer-
events-
stages-
current

performance-
schema-
consumer-
events-
stages-
history

performance-
schema-
consumer-
events-
stages-
history-long

performance-
schema-
consumer-
events-
statements-
cpu

performance-
schema-
consumer-
events-
statements-
current

performance-
schema-
consumer-
events-
statements-
history

performance-
schema-
consumer-
events-
statements-
history-long

performance-
schema-
consumer-
events-
transactions-
current

784

Server Option, System Variable, and Status Variable Reference

Name

Cmd-Line

Option File System Var Status Var

Var Scope

Dynamic

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

performance-
schema-
consumer-
events-
transactions-
history

performance-
schema-
consumer-
events-
transactions-
history-long

performance-
schema-
consumer-
events-waits-
current

performance-
schema-
consumer-
events-waits-
history

performance-
schema-
consumer-
events-waits-
history-long

Yes

Yes

performance-
schema-
consumer-
global-
instrumentation

Yes

Yes

performance-
schema-
consumer-
statements-
digest

Yes

Yes

performance-
schema-
consumer-
thread-
instrumentation

Performance_schema_digest_lost

Yes
performance_schema_digests_size

Yes

Yes
performance_schema_error_size
Yes

Yes

Yes

Yes

performance_schema_events_stages_history_long_size

Yes

Yes

Yes

performance_schema_events_stages_history_size

Yes

Yes

Yes

Yes
performance_schema_events_statements_history_long_size

Yes

Yes

performance_schema_events_statements_history_size

Yes

Yes

Yes

Yes
performance_schema_events_transactions_history_long_size

Yes

Yes

Global

Global

Global

Global

Global

Global

Global

Global

No

No

No

No

No

No

No

No

785

Server Option, System Variable, and Status Variable Reference

Name

Cmd-Line

Option File System Var Status Var

Var Scope

Dynamic

performance_schema_events_transactions_history_size

Yes

Yes

Yes

performance_schema_events_waits_history_long_size

Yes

Yes

Yes

performance_schema_events_waits_history_size

Yes

Yes

Yes

Performance_schema_file_classes_lost

Performance_schema_file_handles_lost

Performance_schema_file_instances_lost

Performance_schema_hosts_lost

Yes
performance_schema_hosts_size
Yes

Yes

Performance_schema_index_stat_lost

Yes

Yes

performance-
schema-
instrument

Performance_schema_locker_lost

Yes

Yes

Yes

Yes

Yes

Yes

performance_schema_max_cond_classes

Yes

Yes

Yes

performance_schema_max_cond_instances

Yes

Yes

Yes

performance_schema_max_digest_length

Yes

Yes

Yes

Yes
performance_schema_max_digest_sample_age

Yes

Yes

performance_schema_max_file_classes

Yes

Yes

performance_schema_max_file_handles

Yes

Yes

performance_schema_max_file_instances

Yes

Yes

performance_schema_max_index_stat

Yes

Yes

Yes

Yes

Yes

Yes

performance_schema_max_memory_classes

Yes

Yes

Yes

performance_schema_max_metadata_locks

Yes

Yes

Yes

performance_schema_max_mutex_classes

Yes

Yes

Yes

performance_schema_max_mutex_instances

Yes

Yes

Yes

Yes
performance_schema_max_prepared_statements_instances

Yes

Yes

Yes
performance_schema_max_program_instances

Yes

Yes

performance_schema_max_rwlock_classes

Yes

Yes

Yes

performance_schema_max_rwlock_instances

Yes

Yes

Yes

performance_schema_max_socket_classes

Yes

Yes

Yes

performance_schema_max_socket_instances

Yes

Yes

Yes

performance_schema_max_sql_text_length

Yes

Yes

performance_schema_max_stage_classes

Yes

Yes

Yes

Yes

Yes
performance_schema_max_statement_classes

Yes

Yes

performance_schema_max_statement_stack

Yes

Yes

Yes

performance_schema_max_table_handles

Yes

Yes

Yes

performance_schema_max_table_instances

Yes

Yes

Yes

performance_schema_max_table_lock_stat

Yes

Yes

performance_schema_max_thread_classes

Yes

Yes

Yes

Yes

performance_schema_max_thread_instances

Yes

Yes

Yes

Performance_schema_memory_classes_lost

Yes

786

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

No

No

No

No

No

No

No

No

No

No

No

No

No

Yes

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

Server Option, System Variable, and Status Variable Reference

Name

Cmd-Line

Option File System Var Status Var

Var Scope

Dynamic

Performance_schema_metadata_lock_lost

Performance_schema_mutex_classes_lost

Performance_schema_mutex_instances_lost

Performance_schema_nested_statement_lost

Performance_schema_prepared_statements_lost

Performance_schema_program_lost

Performance_schema_rwlock_classes_lost

Performance_schema_rwlock_instances_lost

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Performance_schema_session_connect_attrs_longest_seenYes

Performance_schema_session_connect_attrs_lost

Yes

performance_schema_session_connect_attrs_size

Yes

Yes

Yes

performance_schema_setup_actors_size

Yes

Yes

performance_schema_setup_objects_size

Yes

Yes

performance_schema_show_processlist

Yes

Yes

Yes

Yes

Yes

Performance_schema_socket_classes_lost

Performance_schema_socket_instances_lost

Performance_schema_stage_classes_lost

Performance_schema_statement_classes_lost

Performance_schema_table_handles_lost

Performance_schema_table_instances_lost

Performance_schema_table_lock_stat_lost

Performance_schema_thread_classes_lost

Performance_schema_thread_instances_lost

Performance_schema_users_lost

Yes
performance_schema_users_size
Yes

Yes
persist_only_admin_x509_subject
Yes

persist_sensitive_variables_in_plaintext

Yes

Yes

persisted_globals_load

Yes

pid_file

plugin_dir

plugin-load

plugin-load-
add

plugin-xxx

port

port-open-
timeout

Yes

Yes

Yes

Yes

Yes

Yes

Yes

preload_buffer_sizeYes

Prepared_stmt_count

print-defaults Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

print_identified_with_as_hex

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

No

No

No

No

No

No

No

No

No

No

No

No

No

Yes

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

Global

No

Both

Global

Both

Yes

No

Yes

787

Server Option, System Variable, and Status Variable Reference

Cmd-Line

Option File System Var Status Var

Var Scope

Dynamic

Name

profiling

profiling_history_size

Yes

Yes

Yes
protocol_compression_algorithms
Yes

protocol_version

proxy_user

pseudo_replica_mode

pseudo_slave_mode

pseudo_thread_id

Queries

query_alloc_block_size

Yes

query_prealloc_sizeYes

Yes

Yes

Questions

rand_seed1

rand_seed2

range_alloc_block_size

Yes

Yes

Yes
range_optimizer_max_mem_size
Yes

rbr_exec_mode

read_buffer_sizeYes

read_only

Yes

read_rnd_buffer_size

Yes

regexp_stack_limitYes

regexp_time_limitYes

relay_log

Yes

relay_log_basename

relay_log_indexYes

relay_log_info_fileYes

relay_log_info_repository

Yes

relay_log_purgeYes

relay_log_recoveryYes

relay_log_space_limit

Yes

remove

Yes

replica_allow_batching

Yes

replica_checkpoint_group

Yes

replica_checkpoint_period

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

replica_compressed_protocol

Yes

Yes

replica_exec_modeYes

replica_load_tmpdirYes

Yes

Yes

replica_max_allowed_packet

Yes

Yes

replica_net_timeoutYes

Yes

Replica_open_temp_tables

replica_parallel_type

Yes

Yes

788

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Both

Both

Global

Global

Session

Session

Session

Session

Both

Both

Both

Both

Session

Session

Both

Both

Session

Both

Global

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Yes

Yes

Yes

No

No

Yes

Yes

Yes

No

Yes

Yes

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

No

No

No

Yes

Yes

No

No

Yes

Yes

Yes

Yes

Yes

No

Yes

Yes

No

Yes

Yes

Yes

Yes

Server Option, System Variable, and Status Variable Reference

Name

Cmd-Line

Option File System Var Status Var

Var Scope

Dynamic

Yes

Yes

Yes

Yes

Yes

Yes

Yes

replica_parallel_workers

Yes

Yes

Yes
replica_pending_jobs_size_max

Yes

Yes
replica_preserve_commit_order

Yes

Replica_rows_last_search_algorithm_used

replica_skip_errorsYes

Yes

replica_sql_verify_checksum

Yes

Yes

replica_transaction_retries

Yes

replica_type_conversions

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

replicate-do-
db

replicate-do-
table

replicate-
ignore-db

replicate-
ignore-table

replicate-
rewrite-db

replicate-
same-server-
id

replicate-
wild-do-table

replicate-
wild-ignore-
table

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

replication_optimize_for_static_plugin_config

Yes

Yes

Yes

replication_sender_observe_commit_only

Yes

Yes

report_host

Yes

report_passwordYes

report_port

report_user

Yes

Yes

require_row_format

Yes

Yes

Yes

Yes

require_secure_transport

Yes

Yes

Resource_group_supported

resultset_metadata

rewriter_enabled

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

rewriter_enabled_for_threads_without_privilege_checks

Yes

Rewriter_number_loaded_rules

Rewriter_number_reloads

Rewriter_number_rewritten_queries

Rewriter_reload_error

rewriter_verbose

rpl_read_size Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Session

Global

Global

Session

Global

Global

Global

Global

Global

Global

Global

Global

Yes

Yes

Yes

No

No

Yes

Yes

Yes

Yes

Yes

No

No

No

No

Yes

Yes

No

Yes

Yes

Yes

No

No

No

No

Yes

Yes

789

Server Option, System Variable, and Status Variable Reference

Name

Cmd-Line

Option File System Var Status Var

Var Scope

Dynamic

Rpl_semi_sync_master_clients

Yes
rpl_semi_sync_master_enabled

Yes

Yes

Rpl_semi_sync_master_net_avg_wait_time

Rpl_semi_sync_master_net_wait_time

Rpl_semi_sync_master_net_waits

Rpl_semi_sync_master_no_times

Rpl_semi_sync_master_no_tx

Rpl_semi_sync_master_status

Rpl_semi_sync_master_timefunc_failures

Yes
rpl_semi_sync_master_timeout

Yes

Yes
rpl_semi_sync_master_trace_level

Yes

Yes

Yes

Rpl_semi_sync_master_tx_avg_wait_time

Rpl_semi_sync_master_tx_wait_time

Rpl_semi_sync_master_tx_waits

rpl_semi_sync_master_wait_for_slave_count

Yes

Yes

Yes

rpl_semi_sync_master_wait_no_slave

Yes

Yes

Yes
rpl_semi_sync_master_wait_point
Yes

Yes

Yes

Rpl_semi_sync_master_wait_pos_backtraverse

Rpl_semi_sync_master_wait_sessions

Rpl_semi_sync_master_yes_tx

Yes
rpl_semi_sync_replica_enabled

Yes

Rpl_semi_sync_replica_status

Yes
rpl_semi_sync_replica_trace_level
Yes

rpl_semi_sync_slave_enabled

Yes

Yes

Rpl_semi_sync_slave_status

Yes
rpl_semi_sync_slave_trace_level
Yes

Rpl_semi_sync_source_clients

Yes
rpl_semi_sync_source_enabled

Yes

Rpl_semi_sync_source_net_avg_wait_time

Rpl_semi_sync_source_net_wait_time

Rpl_semi_sync_source_net_waits

Rpl_semi_sync_source_no_times

Rpl_semi_sync_source_no_tx

Rpl_semi_sync_source_status

Rpl_semi_sync_source_timefunc_failures

rpl_semi_sync_source_timeout

Yes

Yes

Yes
rpl_semi_sync_source_trace_level

Yes

Rpl_semi_sync_source_tx_avg_wait_time

Rpl_semi_sync_source_tx_wait_time

Rpl_semi_sync_source_tx_waits

Yes

Yes

Yes

Yes

Yes

Yes

Yes

rpl_semi_sync_source_wait_for_replica_count

Yes

Yes

Yes

790

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

No

Yes

No

No

No

No

No

No

No

Yes

Yes

No

No

No

Yes

Yes

Yes

No

No

No

Yes

No

Yes

Yes

No

Yes

No

Yes

No

No

No

No

No

No

No

Yes

Yes

No

No

No

Yes

Server Option, System Variable, and Status Variable Reference

Name

Cmd-Line

Option File System Var Status Var

Var Scope

Dynamic

rpl_semi_sync_source_wait_no_replica

Yes

Yes

Yes
rpl_semi_sync_source_wait_point
Yes

Yes

Yes

Rpl_semi_sync_source_wait_pos_backtraverse

Rpl_semi_sync_source_wait_sessions

Rpl_semi_sync_source_yes_tx

rpl_stop_replica_timeout

Yes

rpl_stop_slave_timeout

Yes

Rsa_public_key

safe-user-
create

Yes

Yes

Yes

Yes

schema_definition_cache

Yes

Yes

secondary_engine_cost_threshold

Secondary_engine_execution_count

secure_file_privYes

Yes

Select_full_join

Select_full_range_join

select_into_buffer_size

Yes

select_into_disk_sync

Yes

Yes

Yes

select_into_disk_sync_delay

Yes

Yes

Select_range

Select_range_check

Select_scan

server_id

Yes

server_id_bits Yes

server_uuid

session_track_gtidsYes

session_track_schema

Yes

Yes

Yes

Yes

Yes

session_track_state_change

Yes

Yes

Yes
session_track_system_variables
Yes

session_track_transaction_info

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

sha256_password_auto_generate_rsa_keys

Yes

Yes

Yes

sha256_password_private_key_path

Yes

Yes

Yes
sha256_password_proxy_users

Yes

sha256_password_public_key_path

Yes

Yes

shared_memoryYes

Yes

shared_memory_base_name

Yes

Yes

show_create_table_skip_secondary_engine

Yes

Yes

show_create_table_verbosity

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

show_gipk_in_create_table_and_information_schema

Yes

Yes

Yes

show_old_temporals

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Global

Global

Global

Global

Global

Global

Session

Both

Global

Both

Both

Both

Both

Both

Both

Both

Both

Global

Global

Global

Both

Both

Both

Both

Both

Global

Global

Global

Global

Global

Global

Session

Both

Both

Both

Yes

Yes

No

No

No

Yes

Yes

No

Yes

Yes

No

No

No

No

Yes

Yes

Yes

No

No

No

Yes

No

No

Yes

Yes

Yes

Yes

Yes

No

No

Yes

No

No

No

Yes

Yes

Yes

Yes

791

Server Option, System Variable, and Status Variable Reference

Name

Cmd-Line

Option File System Var Status Var

Var Scope

Dynamic

Yes

Yes

Yes

show-replica-
auth-info

show-slave-
auth-info

skip-
character-
set-client-
handshake

skip_external_locking

Yes

skip-grant-
tables

skip-host-
cache

Yes

Yes

skip_name_resolveYes

skip-
ndbcluster

Yes

skip_networkingYes

skip-new

Yes

skip_replica_startYes

skip_show_database

Yes

skip_slave_startYes

skip-ssl

skip-stack-
trace

Yes

Yes

slave_allow_batching

Yes

slave_checkpoint_group

Yes

slave_checkpoint_period

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

slave_compressed_protocol

Yes

Yes

slave_exec_modeYes

slave_load_tmpdirYes

Yes

Yes

slave_max_allowed_packet

Yes

Yes

slave_net_timeoutYes

Slave_open_temp_tables

slave_parallel_typeYes

slave_parallel_workers

Yes

Yes

Yes

Yes

slave_pending_jobs_size_max

Yes

Yes

slave_preserve_commit_order

Yes

Yes

Slave_rows_last_search_algorithm_used

slave_rows_search_algorithms

Yes

Yes

slave_skip_errorsYes

Yes

slave-sql-
verify-
checksum

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

No

Global

No

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

No

No

No

No

Yes

Yes

Yes

Yes

Yes

No

Yes

Yes

No

Yes

Yes

Yes

Yes

No

Yes

No

Yes

Yes

slave_sql_verify_checksum

Yes

Yes

Yes

Global

Yes

792

Server Option, System Variable, and Status Variable Reference

Name

Cmd-Line

Option File System Var Status Var

Var Scope

Dynamic

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

slave_transaction_retries

Yes

slave_type_conversions

Yes

Slow_launch_threads

slow_launch_timeYes

Slow_queries

slow_query_logYes

slow_query_log_fileYes

slow-start-
timeout

socket

Yes

Yes

sort_buffer_sizeYes

Sort_merge_passes

Sort_range

Sort_rows

Sort_scan

source_verify_checksum

Yes

Yes

sporadic-
binlog-dump-
fail

sql_auto_is_null

sql_big_selects

sql_buffer_result

sql_generate_invisible_primary_key

Yes

Yes

sql_log_bin

sql_log_off

sql_mode

Yes

Yes

sql_notes

sql_quote_show_create

sql_replica_skip_counter

sql_require_primary_key

Yes

Yes

sql_safe_updates

sql_select_limit

sql_slave_skip_counter

sql_warnings

ssl

Yes

Yes

Ssl_accept_renegotiates

Ssl_accepts

ssl_ca

Yes

Ssl_callback_cache_hits

ssl_capath

ssl_cert

Ssl_cipher

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Both

Global

Both

Global

Global

Global

Both

Both

Both

Both

Both

Yes

Yes

No

Yes

No

Yes

Yes

No

Yes

No

No

No

No

Global

Yes

Both

Both

Both

Both

Session

Both

Both

Both

Both

Global

Both

Both

Both

Global

Both

Global

Global

Global

Global

Global

Global

Both

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

No

Varies

No

Varies

Varies

No

793

Server Option, System Variable, and Status Variable Reference

Name

Cmd-Line

Option File System Var Status Var

Var Scope

Dynamic

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

ssl_cipher

Yes

Yes

Yes

Ssl_cipher_list

Ssl_client_connects

Ssl_connect_renegotiates

ssl_crl

ssl_crlpath

Yes

Yes

Ssl_ctx_verify_depth

Ssl_ctx_verify_mode

Ssl_default_timeout

Ssl_finished_accepts

Ssl_finished_connects

ssl_fips_mode Yes

ssl_key

Yes

Ssl_server_not_after

Ssl_server_not_before

Ssl_session_cache_hits

Ssl_session_cache_misses

Ssl_session_cache_mode

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

ssl_session_cache_mode

Yes

Yes

Yes

Ssl_session_cache_overflows

Ssl_session_cache_size

Ssl_session_cache_timeout

ssl_session_cache_timeout

Yes

Yes

Yes

Ssl_session_cache_timeouts

Ssl_sessions_reused

Ssl_used_session_cache_entries

Ssl_verify_depth

Ssl_verify_mode

Ssl_version

standalone

Yes

Yes

statement_id

stored_program_cache

Yes

Yes

Yes
stored_program_definition_cache
Yes

super-large-
pages

Yes

super_read_onlyYes

symbolic-
links

Yes

sync_binlog Yes

sync_master_infoYes

sync_relay_logYes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Both

Global

Global

Global

Global

Global

Global

Both

Global

Global

Global

Global

Both

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Session

Global

Both

Both

Both

Session

Global

Global

Varies

No

No

No

Varies

Varies

No

No

No

No

No

No

Varies

No

No

No

No

No

Yes

No

No

No

Yes

No

No

No

No

No

No

No

Yes

Yes

Global

Yes

Global

Global

Global

Yes

Yes

Yes

794

Server Option, System Variable, and Status Variable Reference

Name

Cmd-Line

Option File System Var Status Var

Var Scope

Dynamic

sync_relay_log_infoYes

sync_source_infoYes

sysdate-is-
now

Yes

syseventlog.facilityYes

syseventlog.include_pid

Yes

syseventlog.tagYes

system_time_zone

Yes

Yes

Yes

Yes

Yes

Yes

table_definition_cache

Yes

Yes

Yes
table_encryption_privilege_check
Yes

Table_locks_immediate

Table_locks_waited

table_open_cacheYes

Yes

Table_open_cache_hits

table_open_cache_instances

Yes

Yes

Table_open_cache_misses

Table_open_cache_overflows

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

tablespace_definition_cache

Yes

Yes

Yes

tc-heuristic-
recover

Yes

Yes

Tc_log_max_pages_used

Tc_log_page_size

Tc_log_page_waits

Telemetry_traces_supported

temptable_max_mmap

Yes

temptable_max_ramYes

temptable_use_mmap

Yes

terminology_use_previous

Yes

thread_cache_sizeYes

thread_handlingYes

thread_pool_algorithm

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes
thread_pool_dedicated_listeners
Yes

thread_pool_high_priority_connection

Yes

Yes

thread_pool_max_active_query_threads

Yes

Yes

thread_pool_max_transactions_limit

Yes

Yes

Yes
thread_pool_max_unused_threads

Yes

thread_pool_prio_kickup_timer

Yes

Yes

thread_pool_query_threads_per_group

Yes

Yes

thread_pool_sizeYes

thread_pool_stall_limit

Yes

Yes

Yes

thread_pool_transaction_delay

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Both

Global

Both

Both

Yes

Yes

Yes

Yes

Yes

No

Yes

Yes

No

No

Yes

No

No

No

No

Global

Yes

Global

Global

Global

Global

Global

Global

Global

Both

Global

Global

Global

Global

Both

Global

Global

Global

Global

Global

Global

Global

Global

No

No

No

No

Yes

Yes

Yes

Yes

Yes

No

No

No

Yes

Yes

Yes

Yes

Yes

Yes

No

Yes

Yes

795

Server Option, System Variable, and Status Variable Reference

Name

Cmd-Line

Option File System Var Status Var

Var Scope

Dynamic

thread_stack Yes

Yes

Yes

Threads_cached

Threads_connected

Threads_created

Threads_running

time_zone

timestamp

tls_ciphersuitesYes

Tls_library_version

tls_version

Yes

tmp_table_sizeYes

tmpdir

Yes

Yes

Yes

Yes

Yes

transaction_alloc_block_size

Yes

Yes

transaction_allow_batching

transaction_isolation

Yes

transaction_prealloc_size

Yes

transaction_read_only

Yes

Yes

Yes

Yes

Yes
transaction_write_set_extraction
Yes

unique_checks

updatable_views_with_limit

Yes

Yes

upgrade

Yes

Yes

Uptime

Uptime_since_flush_status

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

use_secondary_engine

Yes

user

validate-
config

validate-
password

Yes

Yes

Yes

Yes

Yes

Yes

validate_password_check_user_name

Yes

Yes

Yes
validate_password_dictionary_file
Yes

Yes

Yes

validate_password_dictionary_file_last_parsed

validate_password_dictionary_file_words_count

Yes

Yes

validate_password_length

Yes

Yes

validate_password_mixed_case_count

Yes

Yes

Yes
validate_password_number_count
Yes

validate_password_policy

Yes

Yes

validate_password_special_char_count

Yes

Yes

Yes

Yes

Yes

Yes

Yes

validate_password.changed_characters_percentage

Yes

Yes

Yes

validate_password.check_user_name

Yes

Yes

Yes
validate_password.dictionary_file
Yes

796

Yes

Yes

Global

Global

Global

Global

Global

Both

Session

Global

Global

Global

Both

Global

Both

Session

Both

Both

Both

Both

Both

Both

Global

Global

Session

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

No

No

No

No

No

Yes

Yes

Yes

No

Varies

Yes

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

No

Yes

Yes

Yes

No

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Server System Variable Reference

Name

Cmd-Line

Option File System Var Status Var

Var Scope

Dynamic

validate_password.dictionary_file_last_parsed

validate_password.dictionary_file_words_count

Yes

Yes

validate_password.length

Yes

Yes

validate_password.mixed_case_count

Yes

Yes

Yes
validate_password.number_count
Yes

validate_password.policy

Yes

Yes

validate_password.special_char_count

Yes

Yes

validate-user-
plugins

Yes

verbose

version

Yes

version_comment

Yes

Yes

version_compile_machine

version_compile_os

version_compile_zlib

version_tokens_session

Yes

Yes

Yes
version_tokens_session_number
Yes

wait_timeout Yes

Yes

warning_count

Yes
windowing_use_high_precision

Yes

xa_detach_on_prepare

Yes

Yes

Notes:

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Both

Both

Both

Session

Both

Both

No

No

Yes

Yes

Yes

Yes

Yes

No

No

No

No

No

Yes

No

Yes

No

Yes

Yes

1. This option is dynamic, but should be set only by server. You should not set this variable manually.

7.1.5 Server System Variable Reference

The following table lists all system variables applicable within mysqld.

The table lists command-line options (Cmd-line), options valid in configuration files (Option file), server
system variables (System Var), and status variables (Status var) in one unified list, with an indication
of where each option or variable is valid. If a server option set on the command line or in an option file
differs from the name of the corresponding system variable, the variable name is noted immediately
below the corresponding option. The scope of the variable (Var Scope) is Global, Session, or both.
Please see the corresponding item descriptions for details on setting and using the variables. Where
appropriate, direct links to further information about the items are provided.

Table 7.2 System Variable Summary

Name

Cmd-Line

Option File

System Var

Var Scope

Dynamic

activate_all_roles_on_login

Yes

admin_address Yes

admin_port

admin_ssl_ca

Yes

Yes

admin_ssl_capathYes

admin_ssl_cert Yes

admin_ssl_cipherYes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Global

Global

Global

Global

Yes

No

No

Yes

Yes

Yes

Yes

797

Server System Variable Reference

Name

Cmd-Line

Option File

System Var

Var Scope

Dynamic

admin_ssl_crl

Yes

admin_ssl_crlpathYes

admin_ssl_key Yes

admin_tls_ciphersuites

Yes

admin_tls_versionYes

audit_log_buffer_sizeYes

audit_log_compression

Yes

audit_log_connection_policy

Yes

audit_log_current_session

audit_log_databaseYes

audit_log_disableYes

audit_log_encryptionYes

audit_log_exclude_accounts

Yes

audit_log_file

Yes

audit_log_filter_id

audit_log_flush

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

audit_log_flush_interval_seconds

Yes

audit_log_format Yes

Yes

audit_log_format_unix_timestamp

Yes

Yes

audit_log_include_accounts

Yes

audit_log_max_sizeYes

Yes

Yes

Yes
audit_log_password_history_keep_days

Yes

audit_log_policy Yes

audit_log_prune_seconds

Yes

audit_log_read_buffer_size

Yes

audit_log_rotate_on_size

Yes

audit_log_statement_policy

Yes

audit_log_strategyYes

authentication_fido_rp_id

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

authentication_kerberos_service_key_tab

Yes

Yes

authentication_kerberos_service_principal

Yes

Yes

authentication_ldap_sasl_auth_method_name

Yes

Yes

Yes
authentication_ldap_sasl_bind_base_dn

Yes

Yes
authentication_ldap_sasl_bind_root_dn
Yes

authentication_ldap_sasl_bind_root_pwd

Yes

Yes

authentication_ldap_sasl_ca_path

Yes

Yes

authentication_ldap_sasl_group_search_attr

Yes

Yes

authentication_ldap_sasl_group_search_filter

Yes

Yes

Yes
authentication_ldap_sasl_init_pool_size

Yes

Yes
authentication_ldap_sasl_log_status

Yes

authentication_ldap_sasl_max_pool_size

Yes

Yes

798

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Global

Global

Global

Global

Global

Both

Global

Global

Global

Global

Global

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Varies

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Yes

Yes

Yes

Yes

Yes

No

No

Yes

No

No

Yes

No

Yes

No

No

Yes

No

No

Yes

Yes

Yes

Yes

No

Yes

Varies

Yes

Yes

No

Yes

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Server System Variable Reference

Name

Cmd-Line

Option File

System Var

Var Scope

Dynamic

authentication_ldap_sasl_referral

Yes

Yes

Yes
authentication_ldap_sasl_server_host
Yes

Yes
authentication_ldap_sasl_server_port
Yes

authentication_ldap_sasl_tls

Yes

Yes

authentication_ldap_sasl_user_search_attr

Yes

Yes

authentication_ldap_simple_auth_method_name

Yes

Yes

authentication_ldap_simple_bind_base_dn

Yes

Yes

authentication_ldap_simple_bind_root_dn

Yes

Yes

authentication_ldap_simple_bind_root_pwd

Yes

Yes

Yes
authentication_ldap_simple_ca_path

Yes

authentication_ldap_simple_group_search_attr

Yes

Yes

authentication_ldap_simple_group_search_filter

Yes

Yes

authentication_ldap_simple_init_pool_size

Yes

Yes

Yes
authentication_ldap_simple_log_status
Yes

authentication_ldap_simple_max_pool_size

Yes

Yes

authentication_ldap_simple_referral

Yes

Yes

Yes
authentication_ldap_simple_server_host

Yes

Yes
authentication_ldap_simple_server_port

Yes

authentication_ldap_simple_tls

Yes

Yes

authentication_ldap_simple_user_search_attr

Yes

Yes

authentication_policyYes

Yes

authentication_windows_log_level

Yes

Yes

authentication_windows_use_principal_name

Yes

Yes

auto_generate_certsYes

auto_increment_increment

Yes

auto_increment_offsetYes

autocommit

Yes

automatic_sp_privileges

Yes

avoid_temporal_upgrade

Yes

back_log

basedir

big_tables

bind_address

Yes

Yes

Yes

Yes

binlog_cache_sizeYes

binlog_checksumYes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

binlog_direct_non_transactional_updates

Yes

Yes

binlog_encryptionYes

binlog_error_actionYes

binlog_expire_logs_auto_purge

Yes

binlog_expire_logs_seconds

Yes

binlog_format

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Both

Both

Both

Global

Global

Global

Global

Both

Global

Global

Global

Both

Global

Global

Global

Global

Both

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

No

No

Yes

Yes

Yes

Yes

Yes

No

No

Yes

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

799

Server System Variable Reference

Name

Cmd-Line

Option File

System Var

Var Scope

Dynamic

binlog_group_commit_sync_delay

Yes

Yes

binlog_group_commit_sync_no_delay_count

Yes

Yes

binlog_gtid_simple_recovery

Yes

binlog_max_flush_queue_time

Yes

binlog_order_commitsYes

Yes

Yes

Yes

binlog_rotate_encryption_master_key_at_startup

Yes

Yes

binlog_row_event_max_size

Yes

binlog_row_imageYes

binlog_row_metadataYes

binlog_row_value_options

Yes

binlog_rows_query_log_events

Yes

binlog_stmt_cache_size

Yes

Yes

Yes

Yes

Yes

Yes

Yes

binlog_transaction_compression

Yes

Yes

binlog_transaction_compression_level_zstd

Yes

Yes

binlog_transaction_dependency_history_size

Yes

Yes

binlog_transaction_dependency_tracking

Yes

Yes

block_encryption_mode

Yes

build_id

bulk_insert_buffer_size

Yes

Yes

Yes

caching_sha2_password_auto_generate_rsa_keys

Yes

Yes

Yes
caching_sha2_password_digest_rounds

Yes

caching_sha2_password_private_key_path

Yes

Yes

caching_sha2_password_public_key_path

Yes

Yes

character_set_client

character_set_connection

character_set_database
(note 1)

character_set_filesystem

Yes

character_set_results

character_set_serverYes

character_set_system

character_sets_dirYes

check_proxy_usersYes

clone_autotune_concurrency

Yes

clone_block_ddl Yes

clone_buffer_sizeYes

clone_ddl_timeoutYes

clone_delay_after_data_drop

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

clone_donor_timeout_after_network_failure

Yes

Yes

clone_enable_compression

Yes

clone_max_concurrency

Yes

Yes

Yes

800

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Global

Global

Global

Global

Both

Global

Both

Both

Global

Both

Both

Global

Global

Both

Global

Both

Global

Global

Global

Global

Both

Both

Both

Both

Both

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Yes

Yes

No

Yes

Yes

No

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

Yes

No

No

No

No

Yes

Yes

Yes

Yes

Yes

Yes

No

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Server System Variable Reference

Name

Cmd-Line

Option File

System Var

Var Scope

Dynamic

clone_max_data_bandwidth

Yes

clone_max_network_bandwidth

Yes

clone_ssl_ca

Yes

clone_ssl_cert Yes

clone_ssl_key

Yes

clone_valid_donor_listYes

collation_connection

collation_database
(note 1)

collation_server Yes

completion_type Yes

component_scheduler.enabled

Yes

concurrent_insertYes

connect_timeout Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

connection_control_failed_connections_threshold

Yes

Yes

connection_control_max_connection_delay

Yes

Yes

connection_control_min_connection_delay

Yes

Yes

connection_memory_chunk_size

Yes

Yes

connection_memory_limit

Yes

Yes

core_file

create_admin_listener_thread

Yes

cte_max_recursion_depth

Yes

Yes

Yes

Yes
daemon_memcached_enable_binlog

Yes

Yes
daemon_memcached_engine_lib_name

Yes

Yes
daemon_memcached_engine_lib_path
Yes

daemon_memcached_option

Yes

Yes

daemon_memcached_r_batch_size

Yes

Yes

Yes
daemon_memcached_w_batch_size

Yes

datadir

debug

debug_sync

Yes

Yes

Yes

Yes

default_authentication_plugin

Yes

Yes

default_collation_for_utf8mb4

default_password_lifetime

Yes

default_storage_engine

Yes

default_table_encryption

Yes

default_tmp_storage_engine

Yes

default_week_formatYes

delay_key_write Yes

delayed_insert_limitYes

delayed_insert_timeout

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Global

Global

Global

Both

Both

Both

Both

Global

Global

Global

Global

Global

Global

Both

Both

Global

Global

Both

Global

Global

Global

Global

Global

Global

Global

Both

Session

Global

Both

Global

Both

Both

Both

Both

Global

Global

Global

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

No

Yes

No

No

No

No

No

No

No

Yes

Yes

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

801

Server System Variable Reference

Name

Cmd-Line

Option File

System Var

Var Scope

Dynamic

delayed_queue_sizeYes

disabled_storage_engines

Yes

Yes

Yes

disconnect_on_expired_password

Yes

Yes

div_precision_increment

Yes

dragnet.log_error_filter_rules

Yes

end_markers_in_jsonYes

enforce_gtid_consistency

Yes

Yes

Yes

Yes

Yes

enterprise_encryption.maximum_rsa_key_size

Yes

Yes

enterprise_encryption.rsa_support_legacy_padding

Yes

Yes

eq_range_index_dive_limit

Yes

Yes

error_count

event_scheduler Yes

expire_logs_daysYes

explain_format Yes

explicit_defaults_for_timestamp

Yes

external_user

flush

flush_time

Yes

Yes

foreign_key_checks

ft_boolean_syntaxYes

ft_max_word_lenYes

ft_min_word_len Yes

ft_query_expansion_limit

Yes

ft_stopword_file Yes

general_log

Yes

general_log_file Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes
generated_random_password_length
Yes

global_connection_memory_limit

Yes

Yes

Yes
global_connection_memory_tracking

Yes

group_concat_max_len

Yes

Yes

group_replication_advertise_recovery_endpoints

Yes

Yes

group_replication_allow_local_lower_version_join

Yes

Yes

group_replication_auto_increment_increment

Yes

Yes

group_replication_autorejoin_tries

Yes

Yes

group_replication_bootstrap_group

Yes

Yes

group_replication_clone_threshold

Yes

Yes

group_replication_communication_debug_options

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes
group_replication_communication_max_message_size

Yes

Yes

group_replication_communication_stack

group_replication_components_stop_timeout

Yes

Yes

group_replication_compression_threshold

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Both

Global

Both

Global

Global

Global

Both

Session

Global

Global

Both

Both

Session

Global

Global

Both

Global

Global

Global

Global

Global

Global

Global

Both

Global

Both

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Yes

No

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

Yes

Yes

Yes

Yes

No

Yes

Yes

Yes

Yes

No

No

No

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

802

Server System Variable Reference

Name

Cmd-Line

Option File

System Var

Var Scope

Dynamic

group_replication_consistency

Yes

Yes

Yes

Yes
group_replication_enforce_update_everywhere_checks

Yes

Yes

group_replication_exit_state_action

Yes

Yes

group_replication_flow_control_applier_threshold

Yes

Yes

group_replication_flow_control_certifier_threshold

Yes

Yes

group_replication_flow_control_hold_percent

Yes

Yes

group_replication_flow_control_max_quota

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes
group_replication_flow_control_member_quota_percent

Yes

Yes

group_replication_flow_control_min_quota

Yes

Yes

Yes

group_replication_flow_control_min_recovery_quota

Yes

Yes

Yes

Yes
group_replication_flow_control_mode
Yes

Yes
group_replication_flow_control_period
Yes

group_replication_flow_control_release_percent

Yes

Yes

group_replication_force_members

Yes

Yes

group_replication_group_name

Yes

group_replication_group_seeds

Yes

Yes

Yes

group_replication_gtid_assignment_block_size

Yes

Yes

group_replication_ip_allowlist

Yes

group_replication_ip_whitelist

Yes

Yes

Yes

group_replication_local_address

Yes

Yes

group_replication_member_expel_timeout

Yes

Yes

group_replication_member_weight

Yes

Yes

Yes
group_replication_message_cache_size

Yes

Yes
group_replication_paxos_single_leader
Yes

group_replication_poll_spin_loops

Yes

Yes

group_replication_recovery_complete_at

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

group_replication_recovery_compression_algorithms

Yes

Yes

Yes

group_replication_recovery_get_public_key

Yes

Yes

group_replication_recovery_public_key_path

Yes

Yes

group_replication_recovery_reconnect_interval

Yes

Yes

Yes
group_replication_recovery_retry_count

Yes

group_replication_recovery_ssl_ca

Yes

Yes

Yes
group_replication_recovery_ssl_capath
Yes

Yes
group_replication_recovery_ssl_cert

Yes

Yes
group_replication_recovery_ssl_cipher
Yes

group_replication_recovery_ssl_crl

Yes

Yes

Yes
group_replication_recovery_ssl_crlpath
Yes

group_replication_recovery_ssl_key

Yes

Yes

group_replication_recovery_ssl_verify_server_cert

Yes

Yes

group_replication_recovery_tls_ciphersuites

Yes

Yes

Yes
group_replication_recovery_tls_version
Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

803

Server System Variable Reference

Name

Cmd-Line

Option File

System Var

Var Scope

Dynamic

Yes
group_replication_recovery_use_ssl

Yes

Yes

group_replication_recovery_zstd_compression_level

Yes

Yes

Yes

Yes
group_replication_single_primary_mode

Yes

group_replication_ssl_mode

Yes

Yes

group_replication_start_on_boot

Yes

Yes

group_replication_tls_source

Yes

Yes

Yes
group_replication_transaction_size_limit

Yes

group_replication_unreachable_majority_timeout

Yes

Yes

Yes
group_replication_view_change_uuid
Yes

gtid_executed

gtid_executed_compression_period

Yes

Yes

gtid_mode

Yes

Yes

gtid_next

gtid_owned

gtid_purged

have_compress

have_dynamic_loading

have_geometry

have_openssl

have_profiling

have_query_cache

have_rtree_keys

have_ssl

have_statement_timeout

have_symlink

Yes
histogram_generation_max_mem_size
Yes

host_cache_size Yes

Yes

hostname

identity

immediate_server_version

information_schema_stats_expiry

Yes

Yes

init_connect

init_file

init_replica

init_slave

Yes

Yes

Yes

Yes

innodb_adaptive_flushing

Yes

innodb_adaptive_flushing_lwm

Yes

innodb_adaptive_hash_index

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

innodb_adaptive_hash_index_parts

Yes

Yes

innodb_adaptive_max_sleep_delay

Yes

Yes

innodb_api_bk_commit_interval

Yes

Yes

804

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Session

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Both

Global

Global

Session

Session

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

Yes

Yes

Yes

No

Yes

No

No

No

No

No

No

No

No

No

No

Yes

Yes

No

Yes

Yes

Yes

Yes

No

Yes

Yes

Yes

Yes

Yes

No

Yes

Yes

Server System Variable Reference

Name

Cmd-Line

Option File

System Var

Var Scope

Dynamic

innodb_api_disable_rowlock

Yes

innodb_api_enable_binlog

Yes

innodb_api_enable_mdl

Yes

innodb_api_trx_levelYes

innodb_autoextend_increment

Yes

innodb_autoinc_lock_mode

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes
innodb_background_drop_list_empty

Yes

innodb_buffer_pool_chunk_size

Yes

innodb_buffer_pool_debug

Yes

Yes

Yes

Yes
innodb_buffer_pool_dump_at_shutdown

Yes

innodb_buffer_pool_dump_now

Yes

innodb_buffer_pool_dump_pct

Yes

innodb_buffer_pool_filename

Yes

Yes

Yes

Yes

innodb_buffer_pool_in_core_file

Yes

Yes

innodb_buffer_pool_instances

Yes

innodb_buffer_pool_load_abort

Yes

Yes

Yes

Yes
innodb_buffer_pool_load_at_startup

Yes

innodb_buffer_pool_load_now

Yes

innodb_buffer_pool_size

Yes

Yes

Yes

innodb_change_buffer_max_size

Yes

Yes

innodb_change_buffering

Yes

Yes

innodb_change_buffering_debug

Yes

Yes

innodb_checkpoint_disabled

Yes

innodb_checksum_algorithm

Yes

Yes

Yes

innodb_cmp_per_index_enabled

Yes

Yes

innodb_commit_concurrency

Yes

innodb_compress_debug

Yes

Yes

Yes

innodb_compression_failure_threshold_pct

Yes

Yes

innodb_compression_level

Yes

Yes

innodb_compression_pad_pct_max

Yes

Yes

innodb_concurrency_tickets

Yes

innodb_data_file_pathYes

innodb_data_home_dir

Yes

innodb_ddl_buffer_size

Yes

Yes

Yes

Yes

Yes

innodb_ddl_log_crash_reset_debug

Yes

Yes

innodb_ddl_threadsYes

innodb_deadlock_detect

Yes

innodb_dedicated_server

Yes

innodb_default_row_format

Yes

innodb_directoriesYes

innodb_disable_sort_file_cache

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Session

Global

Session

Global

Global

Global

Global

Global

No

No

No

Yes

Yes

No

Yes

No

No

Yes

Yes

Yes

Yes

Yes

No

Yes

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

No

Yes

Yes

Yes

Yes

No

Yes

No

Yes

805

Server System Variable Reference

Name

Cmd-Line

Option File

System Var

Var Scope

Dynamic

innodb_doublewriteYes

innodb_doublewrite_batch_size

Yes

innodb_doublewrite_dir

Yes

innodb_doublewrite_files

Yes

innodb_doublewrite_pages

Yes

innodb_extend_and_initialize

Yes

innodb_fast_shutdownYes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

innodb_fil_make_page_dirty_debug

Yes

Yes

innodb_file_per_tableYes

innodb_fill_factorYes

innodb_flush_log_at_timeout

Yes

Yes

Yes

Yes

innodb_flush_log_at_trx_commit

Yes

Yes

innodb_flush_methodYes

innodb_flush_neighbors

Yes

innodb_flush_syncYes

innodb_flushing_avg_loops

Yes

innodb_force_load_corrupted

Yes

innodb_force_recovery

Yes

innodb_fsync_threshold

Yes

innodb_ft_aux_table

innodb_ft_cache_sizeYes

innodb_ft_enable_diag_print

Yes

innodb_ft_enable_stopword

Yes

innodb_ft_max_token_size

Yes

innodb_ft_min_token_size

Yes

innodb_ft_num_word_optimize

Yes

innodb_ft_result_cache_limit

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

innodb_ft_server_stopword_table

Yes

Yes

innodb_ft_sort_pll_degree

Yes

innodb_ft_total_cache_size

Yes

innodb_ft_user_stopword_table

Yes

innodb_idle_flush_pctYes

innodb_io_capacityYes

innodb_io_capacity_max

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes
innodb_limit_optimistic_insert_debug

Yes

innodb_lock_wait_timeout

Yes

innodb_log_buffer_size

Yes

Yes

Yes

innodb_log_checkpoint_fuzzy_now

Yes

Yes

innodb_log_checkpoint_now

Yes

innodb_log_checksums

Yes

Yes

Yes

innodb_log_compressed_pages

Yes

Yes

806

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Both

Global

Global

Global

Global

Global

Global

Global

Both

Global

Global

Global

Global

Both

Global

Global

Global

Global

Global

Varies

No

No

No

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

Yes

Yes

Yes

No

No

Yes

Yes

No

Yes

Yes

No

No

Yes

Yes

Yes

No

No

Yes

Yes

Yes

Yes

Yes

Yes

Varies

Yes

Yes

Yes

Yes

Server System Variable Reference

Name

Cmd-Line

Option File

System Var

Var Scope

Dynamic

innodb_log_file_sizeYes

innodb_log_files_in_group

Yes

innodb_log_group_home_dir

Yes

innodb_log_spin_cpu_abs_lwm

Yes

innodb_log_spin_cpu_pct_hwm

Yes

Yes

Yes

Yes

Yes

Yes

Yes
innodb_log_wait_for_flush_spin_hwm
Yes

innodb_log_write_ahead_size

Yes

innodb_log_writer_threads

Yes

innodb_lru_scan_depth

Yes

innodb_max_dirty_pages_pct

Yes

Yes

Yes

Yes

Yes

innodb_max_dirty_pages_pct_lwm

Yes

Yes

innodb_max_purge_lag

Yes

innodb_max_purge_lag_delay

Yes

innodb_max_undo_log_size

Yes

Yes

Yes

Yes

Yes
innodb_merge_threshold_set_all_debug

Yes

innodb_monitor_disable

Yes

innodb_monitor_enable

Yes

innodb_monitor_resetYes

innodb_monitor_reset_all

Yes

innodb_numa_interleave

Yes

innodb_old_blocks_pct

Yes

innodb_old_blocks_time

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

innodb_online_alter_log_max_size

Yes

Yes

innodb_open_filesYes

innodb_optimize_fulltext_only

Yes

innodb_page_cleanersYes

innodb_page_sizeYes

innodb_parallel_read_threads

Yes

innodb_print_all_deadlocks

Yes

innodb_print_ddl_logsYes

innodb_purge_batch_size

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes
innodb_purge_rseg_truncate_frequency

Yes

innodb_purge_threadsYes

innodb_random_read_ahead

Yes

innodb_read_ahead_threshold

Yes

innodb_read_io_threads

Yes

innodb_read_onlyYes

innodb_redo_log_archive_dirs

Yes

innodb_redo_log_capacity

Yes

innodb_redo_log_encrypt

Yes

innodb_replication_delay

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Session

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

No

No

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

Yes

Yes

Yes

Varies

Yes

No

No

Yes

Yes

Yes

Yes

Yes

No

Yes

Yes

No

No

Yes

Yes

Yes

Yes

807

Server System Variable Reference

Name

Cmd-Line

Option File

System Var

Var Scope

Dynamic

innodb_rollback_on_timeout

Yes

innodb_rollback_segments

Yes

Yes

Yes

Yes
innodb_saved_page_number_debug

Yes

innodb_segment_reserve_factor

Yes

Yes

innodb_sort_buffer_size

Yes

innodb_spin_wait_delay

Yes

Yes

Yes

innodb_spin_wait_pause_multiplier

Yes

Yes

innodb_stats_auto_recalc

Yes

Yes

Yes
innodb_stats_include_delete_marked
Yes

innodb_stats_methodYes

innodb_stats_on_metadata

Yes

innodb_stats_persistent

Yes

Yes

Yes

Yes

Yes
innodb_stats_persistent_sample_pages

Yes

Yes
innodb_stats_transient_sample_pages
Yes

innodb_status_outputYes

innodb_status_output_locks

Yes

innodb_strict_modeYes

innodb_sync_array_size

Yes

innodb_sync_debugYes

innodb_sync_spin_loops

Yes

innodb_table_locksYes

innodb_temp_data_file_path

Yes

innodb_temp_tablespaces_dir

Yes

innodb_thread_concurrency

Yes

innodb_thread_sleep_delay

Yes

innodb_tmpdir Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

innodb_trx_purge_view_update_only_debug

Yes

Yes

innodb_trx_rseg_n_slots_debug

Yes

Yes

innodb_undo_directory

Yes

innodb_undo_log_encrypt

Yes

innodb_undo_log_truncate

Yes

innodb_undo_tablespaces

Yes

innodb_use_fdatasyncYes

innodb_use_native_aio

Yes

Yes

Yes

Yes

Yes

Yes

Yes

innodb_validate_tablespace_paths

Yes

Yes

innodb_version

innodb_write_io_threads

Yes

insert_id

interactive_timeoutYes

Yes

Yes

internal_tmp_disk_storage_engine

Yes

Yes

internal_tmp_mem_storage_engine

Yes

Yes

808

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Both

Global

Global

Global

Both

Global

Global

Global

Global

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Session

Both

Global

Both

No

Yes

Yes

Yes

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

No

Yes

Yes

No

No

Yes

Yes

Yes

Yes

Yes

No

Yes

Yes

Varies

Yes

No

No

No

No

Yes

Yes

Yes

Yes

Server System Variable Reference

Name

Cmd-Line

Option File

System Var

Var Scope

Dynamic

join_buffer_size Yes

keep_files_on_createYes

key_buffer_size Yes

key_cache_age_threshold

Yes

key_cache_block_sizeYes

key_cache_division_limit

Yes

keyring_aws_cmk_idYes

keyring_aws_conf_fileYes

keyring_aws_data_fileYes

keyring_aws_regionYes

keyring_encrypted_file_data

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

keyring_encrypted_file_password

Yes

Yes

keyring_file_dataYes

keyring_hashicorp_auth_path

Yes

keyring_hashicorp_ca_path

Yes

keyring_hashicorp_caching

Yes

Yes

Yes

Yes

Yes

keyring_hashicorp_commit_auth_path

keyring_hashicorp_commit_ca_path

keyring_hashicorp_commit_caching

keyring_hashicorp_commit_role_id

keyring_hashicorp_commit_server_url

keyring_hashicorp_commit_store_path

keyring_hashicorp_role_id

Yes

keyring_hashicorp_secret_id

Yes

keyring_hashicorp_server_url

Yes

keyring_hashicorp_store_path

Yes

keyring_oci_ca_certificate

Yes

keyring_oci_compartment

Yes

Yes

Yes

Yes

Yes

Yes

Yes

keyring_oci_encryption_endpoint

Yes

Yes

keyring_oci_key_fileYes

keyring_oci_key_fingerprint

Yes

Yes

Yes

keyring_oci_management_endpoint

Yes

Yes

keyring_oci_master_key

Yes

keyring_oci_secrets_endpoint

Yes

keyring_oci_tenancyYes

keyring_oci_userYes

keyring_oci_vaults_endpoint

Yes

keyring_oci_virtual_vault

Yes

keyring_okv_conf_dirYes

keyring_operations

large_files_support

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Both

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

No

No

No

No

No

Yes

Yes

Yes

Yes

No

No

No

No

No

No

No

No

No

No

No

No

Yes

Yes

No

809

Server System Variable Reference

Name

Cmd-Line

Option File

System Var

Var Scope

Dynamic

large_page_size

large_pages

Yes

last_insert_id

lc_messages

Yes

lc_messages_dir Yes

lc_time_names Yes

license

local_infile

lock_order

Yes

Yes

lock_order_debug_loop

Yes

lock_order_debug_missing_arc

Yes

lock_order_debug_missing_key

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

lock_order_debug_missing_unlock

Yes

Yes

lock_order_dependencies

Yes

Yes

lock_order_extra_dependencies

Yes

Yes

lock_order_output_directory

Yes

lock_order_print_txtYes

lock_order_trace_loopYes

lock_order_trace_missing_arc

Yes

lock_order_trace_missing_key

Yes

Yes

Yes

Yes

Yes

Yes

lock_order_trace_missing_unlock

Yes

Yes

lock_wait_timeoutYes

Yes

locked_in_memory

log_bin

log_bin_basename

log_bin_index

Yes

log_bin_trust_function_creators

Yes

log_bin_use_v1_row_events

Yes

log_error

Yes

log_error_servicesYes

log_error_suppression_list

Yes

log_error_verbosityYes

log_output

Yes

log_queries_not_using_indexes

Yes

log_raw

Yes

log_replica_updatesYes

log_slave_updatesYes

log_slow_admin_statements

Yes

log_slow_extra Yes

log_slow_replica_statements

Yes

log_slow_slave_statements

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

810

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Session

Both

Global

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

No

No

Yes

Yes

No

Yes

No

Yes

No

No

No

No

No

No

No

No

No

No

No

No

No

Yes

No

No

No

No

Yes

Yes

No

Yes

Yes

Yes

Yes

Yes

Yes

No

No

Yes

Yes

Yes

Yes

Server System Variable Reference

Name

Cmd-Line

Option File

System Var

Var Scope

Dynamic

log_statements_unsafe_for_binlog

Yes

Yes

log_syslog

Yes

log_syslog_facilityYes

log_syslog_include_pid

Yes

log_syslog_tag Yes

Yes

Yes

Yes

Yes

Yes
log_throttle_queries_not_using_indexes

Yes

log_timestamps Yes

long_query_time Yes

low_priority_updatesYes

lower_case_file_system

lower_case_table_names

Yes

mandatory_roles Yes

master_info_repository

Yes

master_verify_checksum

Yes

max_allowed_packetYes

max_binlog_cache_size

Yes

max_binlog_size Yes

max_binlog_stmt_cache_size

Yes

max_connect_errorsYes

max_connectionsYes

max_delayed_threadsYes

max_digest_lengthYes

max_error_countYes

max_execution_timeYes

max_heap_table_sizeYes

max_insert_delayed_threads

max_join_size Yes

max_length_for_sort_data

Yes

max_points_in_geometry

Yes

max_prepared_stmt_count

Yes

max_relay_log_sizeYes

max_seeks_for_keyYes

max_sort_length Yes

max_sp_recursion_depth

Yes

max_user_connections

Yes

max_write_lock_countYes

mecab_rc_file

Yes

metadata_locks_cache_size

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

metadata_locks_hash_instances

Yes

Yes

min_examined_row_limit

Yes

myisam_data_pointer_size

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Global

Global

Global

Global

Both

Both

Global

Global

Global

Global

Global

Both

Global

Global

Global

Global

Global

Both

Global

Both

Both

Both

Both

Both

Both

Both

Global

Global

Both

Both

Both

Both

Global

Global

Global

Global

Both

Global

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

No

No

Yes

Yes

811

Server System Variable Reference

Name

Cmd-Line

Option File

System Var

Var Scope

Dynamic

myisam_max_sort_file_size

Yes

myisam_mmap_sizeYes

myisam_recover_options

Yes

myisam_repair_threads

Yes

myisam_sort_buffer_size

Yes

myisam_stats_methodYes

myisam_use_mmapYes

mysql_firewall_modeYes

mysql_firewall_traceYes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes
mysql_native_password_proxy_users
Yes

mysqlx_bind_addressYes

Yes

mysqlx_compression_algorithms

Yes

Yes

mysqlx_connect_timeout

Yes

Yes

mysqlx_deflate_default_compression_level

Yes

Yes

mysqlx_deflate_max_client_compression_level

Yes

Yes

mysqlx_document_id_unique_prefix

Yes

Yes

mysqlx_enable_hello_notice

Yes

Yes

Yes
mysqlx_idle_worker_thread_timeout

Yes

mysqlx_interactive_timeout

Yes

Yes

Yes
mysqlx_lz4_default_compression_level
Yes

mysqlx_lz4_max_client_compression_level

Yes

Yes

mysqlx_max_allowed_packet

Yes

mysqlx_max_connections

Yes

mysqlx_min_worker_threads

Yes

mysqlx_port

Yes

mysqlx_port_open_timeout

Yes

mysqlx_read_timeoutYes

mysqlx_socket Yes

mysqlx_ssl_ca Yes

mysqlx_ssl_capathYes

mysqlx_ssl_cert Yes

mysqlx_ssl_cipherYes

mysqlx_ssl_crl Yes

mysqlx_ssl_crlpathYes

mysqlx_ssl_key Yes

mysqlx_wait_timeoutYes

mysqlx_write_timeoutYes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes
mysqlx_zstd_default_compression_level

Yes

mysqlx_zstd_max_client_compression_level

Yes

Yes

named_pipe

Yes

named_pipe_full_access_group

Yes

Yes

Yes

812

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Both

Both

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Session

Global

Global

Global

Global

Global

Global

Global

Global

Session

Session

Global

Global

Global

Global

Yes

No

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

No

Yes

No

No

No

No

No

No

No

No

Yes

Yes

Yes

Yes

No

No

Server System Variable Reference

Name

Cmd-Line

Option File

System Var

Var Scope

Dynamic

ndb_allow_copying_alter_table

Yes

ndb_applier_allow_skip_epoch

Yes

Yes

Yes

ndb_autoincrement_prefetch_sz

Yes

Yes

ndb_batch_size Yes

ndb_blob_read_batch_bytes

Yes

ndb_blob_write_batch_bytes

Yes

ndb_clear_apply_status

Yes

Yes

Yes

Yes

ndb_cluster_connection_pool

Yes

Yes

Yes
ndb_cluster_connection_pool_nodeids
Yes

ndb_conflict_roleYes

ndb_data_node_neighbour

Yes

ndb_dbg_check_shares

Yes

ndb_default_column_format

Yes

ndb_default_column_format

Yes

ndb_deferred_constraints

Yes

ndb_deferred_constraints

Yes

ndb_distribution Yes

ndb_distribution Yes

ndb_eventbuffer_free_percent

Yes

ndb_eventbuffer_max_alloc

Yes

ndb_extra_loggingYes

ndb_force_send Yes

ndb_fully_replicatedYes

ndb_index_stat_enable

Yes

ndb_index_stat_optionYes

ndb_join_pushdown

ndb_log_apply_statusYes

ndb_log_apply_statusYes

ndb_log_bin

Yes

ndb_log_binlog_indexYes

ndb_log_cache_sizeYes

ndb_log_empty_epochs

Yes

ndb_log_empty_epochs

Yes

ndb_log_empty_update

Yes

ndb_log_empty_update

Yes

ndb_log_exclusive_reads

Yes

ndb_log_exclusive_reads

Yes

ndb_log_fail_terminateYes

ndb_log_orig

ndb_log_orig

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

ndb_log_transaction_compression

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Both

Global

Both

Both

Both

Both

Global

Global

Global

Global

Global

Both

Global

Global

Both

Both

Global

Global

Global

Global

Global

Both

Both

Both

Both

Both

Global

Global

Both

Global

Global

Global

Global

Global

Global

Both

Both

Global

Global

Global

Global

Yes

No

Yes

Yes

Yes

Yes

Yes

No

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

No

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

No

No

Yes

813

Server System Variable Reference

Name

Cmd-Line

Option File

System Var

Var Scope

Dynamic

ndb_log_transaction_compression_level_zstd

Yes

Yes

ndb_log_transaction_dependency

Yes

Yes

ndb_log_transaction_id

Yes

ndb_log_transaction_id

ndb_log_update_as_write

Yes

ndb_log_update_minimal

Yes

ndb_log_updated_onlyYes

ndb_metadata_checkYes

ndb_metadata_check_interval

Yes

ndb_metadata_sync

ndb_optimization_delay

Yes

ndb_optimized_node_selection

Yes

ndb_optimized_node_selection

Yes

ndb_read_backupYes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes
ndb_recv_thread_activation_threshold
Yes

ndb_recv_thread_cpu_mask

Yes

ndb_replica_batch_size

Yes

Yes

Yes

Yes
ndb_replica_blob_write_batch_bytes

Yes

Ndb_replica_max_replicated_epoch

Yes
ndb_report_thresh_binlog_epoch_slip
Yes

Yes
ndb_report_thresh_binlog_mem_usage
Yes

ndb_row_checksum

Yes
ndb_schema_dist_lock_wait_timeout

Yes

ndb_schema_dist_timeout

Yes

ndb_schema_dist_timeout

Yes

Yes

Yes

Yes
ndb_schema_dist_upgrade_allowed

Yes

Ndb_schema_participant_count

Yes
ndb_show_foreign_key_mock_tables

Yes

ndb_slave_conflict_role

Yes

Yes

Ndb_system_name

ndb_table_no_logging

ndb_table_temporary

ndb_use_copying_alter_table

ndb_use_exact_count

ndb_use_transactionsYes

Yes

ndb_version

ndb_version_string

ndb_wait_connectedYes

ndb_wait_setup Yes

ndbinfo_database

ndbinfo_max_bytesYes

Yes

Yes

814

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Both

Global

Global

Global

Global

Global

Global

Global

Global

Session

Session

Both

Both

Both

Global

Global

Global

Global

Global

Both

Yes

No

No

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

Yes

Yes

Yes

Yes

Yes

No

Yes

Yes

Yes

Yes

No

No

No

No

Yes

Yes

No

Yes

Yes

No

Yes

Yes

No

No

No

No

No

Yes

Server System Variable Reference

Name

Cmd-Line

Option File

System Var

Var Scope

Dynamic

ndbinfo_max_rowsYes

ndbinfo_offline

ndbinfo_show_hiddenYes

ndbinfo_table_prefix

ndbinfo_version

net_buffer_lengthYes

net_read_timeoutYes

net_retry_count Yes

net_write_timeoutYes

new

Yes

ngram_token_sizeYes

offline_mode

old

Yes

Yes

old_alter_table Yes

open_files_limit Yes

optimizer_prune_levelYes

optimizer_search_depth

Yes

optimizer_switch Yes

optimizer_trace Yes

optimizer_trace_features

Yes

optimizer_trace_limitYes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

optimizer_trace_max_mem_size

Yes

Yes

optimizer_trace_offsetYes

Yes

original_commit_timestamp

original_server_version

parser_max_mem_size

Yes

partial_revokes Yes

password_historyYes

password_require_current

Yes

password_reuse_interval

Yes

performance_schemaYes

Yes

Yes

Yes

Yes

Yes

Yes

Yes
performance_schema_accounts_size
Yes

performance_schema_digests_size

Yes

Yes

performance_schema_error_size

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes
performance_schema_events_stages_history_long_size

Yes

Yes

performance_schema_events_stages_history_size

Yes

Yes

Yes

performance_schema_events_statements_history_long_size

Yes

Yes

Yes

Yes
performance_schema_events_statements_history_size

Yes

Yes

performance_schema_events_transactions_history_long_size

Yes

Yes

Yes

Yes
performance_schema_events_transactions_history_size

Yes

Yes

Yes
performance_schema_events_waits_history_long_size

Yes

Yes

Both

Global

Both

Global

Global

Both

Both

Both

Both

Both

Global

Global

Global

Both

Global

Both

Both

Both

Both

Both

Both

Both

Both

Session

Session

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Yes

Yes

Yes

No

No

Yes

Yes

Yes

Yes

Yes

No

Yes

No

Yes

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

No

No

No

No

No

No

No

No

No

No

815

Server System Variable Reference

Name

Cmd-Line

Option File

System Var

Var Scope

Dynamic

performance_schema_events_waits_history_size

Yes

Yes

performance_schema_hosts_size

Yes

Yes

performance_schema_max_cond_classes

Yes

Yes

performance_schema_max_cond_instances

Yes

Yes

performance_schema_max_digest_length

Yes

Yes

performance_schema_max_digest_sample_age

Yes

Yes

Yes
performance_schema_max_file_classes

Yes

performance_schema_max_file_handles

Yes

Yes

performance_schema_max_file_instances

Yes

Yes

Yes
performance_schema_max_index_stat
Yes

performance_schema_max_memory_classes

Yes

Yes

performance_schema_max_metadata_locks

Yes

Yes

performance_schema_max_mutex_classes

Yes

Yes

performance_schema_max_mutex_instances

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

performance_schema_max_prepared_statements_instances

Yes

Yes

Yes

performance_schema_max_program_instances

Yes

Yes

performance_schema_max_rwlock_classes

Yes

Yes

performance_schema_max_rwlock_instances

Yes

Yes

performance_schema_max_socket_classes

Yes

Yes

performance_schema_max_socket_instances

Yes

Yes

performance_schema_max_sql_text_length

Yes

Yes

performance_schema_max_stage_classes

Yes

Yes

performance_schema_max_statement_classes

Yes

Yes

performance_schema_max_statement_stack

Yes

Yes

performance_schema_max_table_handles

Yes

Yes

performance_schema_max_table_instances

Yes

Yes

performance_schema_max_table_lock_stat

Yes

Yes

performance_schema_max_thread_classes

Yes

Yes

performance_schema_max_thread_instances

Yes

Yes

performance_schema_session_connect_attrs_size

Yes

Yes

performance_schema_setup_actors_size

Yes

Yes

performance_schema_setup_objects_size

Yes

Yes

Yes
performance_schema_show_processlist

Yes

performance_schema_users_size

Yes

Yes

persist_only_admin_x509_subject

Yes

Yes

Yes
persist_sensitive_variables_in_plaintext

Yes

persisted_globals_load

Yes

pid_file

plugin_dir

port

Yes

Yes

Yes

preload_buffer_sizeYes

Yes

Yes

Yes

Yes

Yes

816

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Both

No

No

No

No

No

Yes

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

No

Yes

No

No

No

No

No

No

No

Yes

Server System Variable Reference

Name

Cmd-Line

Option File

System Var

Var Scope

Dynamic

print_identified_with_as_hex

Yes

Yes

profiling

profiling_history_sizeYes

Yes

protocol_compression_algorithms

Yes

Yes

protocol_version

proxy_user

pseudo_replica_mode

pseudo_slave_mode

pseudo_thread_id

query_alloc_block_size

Yes

query_prealloc_sizeYes

rand_seed1

rand_seed2

Yes

Yes

range_alloc_block_size

Yes

Yes

range_optimizer_max_mem_size

Yes

Yes

rbr_exec_mode

read_buffer_size Yes

read_only

Yes

read_rnd_buffer_sizeYes

regexp_stack_limitYes

regexp_time_limitYes

relay_log

Yes

relay_log_basename

relay_log_index Yes

relay_log_info_fileYes

relay_log_info_repository

Yes

relay_log_purge Yes

relay_log_recoveryYes

relay_log_space_limitYes

replica_allow_batchingYes

replica_checkpoint_group

Yes

replica_checkpoint_period

Yes

replica_compressed_protocol

Yes

replica_exec_modeYes

replica_load_tmpdirYes

replica_max_allowed_packet

Yes

replica_net_timeoutYes

replica_parallel_typeYes

replica_parallel_workers

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

replica_pending_jobs_size_max

Yes

Yes

replica_preserve_commit_order

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Both

Both

Both

Global

Global

Session

Session

Session

Session

Both

Both

Session

Session

Both

Both

Session

Both

Global

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Yes

Yes

Yes

Yes

No

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

No

No

No

Yes

Yes

No

No

Yes

Yes

Yes

Yes

Yes

No

Yes

Yes

Yes

Yes

Yes

Yes

817

Server System Variable Reference

Name

Cmd-Line

Option File

System Var

Var Scope

Dynamic

replica_skip_errorsYes

replica_sql_verify_checksum

Yes

replica_transaction_retries

Yes

replica_type_conversions

Yes

Yes

Yes

Yes

Yes

replication_optimize_for_static_plugin_config

Yes

Yes

replication_sender_observe_commit_only

Yes

Yes

report_host

Yes

report_password Yes

report_port

report_user

Yes

Yes

require_row_format

require_secure_transport

Yes

resultset_metadata

rewriter_enabled

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

rewriter_enabled_for_threads_without_privilege_checksYes

rewriter_verbose

rpl_read_size

Yes

rpl_semi_sync_master_enabled

Yes

rpl_semi_sync_master_timeout

Yes

Yes

Yes

Yes

rpl_semi_sync_master_trace_level

Yes

Yes

rpl_semi_sync_master_wait_for_slave_count

Yes

Yes

Yes
rpl_semi_sync_master_wait_no_slave
Yes

rpl_semi_sync_master_wait_point

Yes

Yes

rpl_semi_sync_replica_enabled

Yes

Yes

rpl_semi_sync_replica_trace_level

Yes

Yes

rpl_semi_sync_slave_enabled

Yes

Yes

rpl_semi_sync_slave_trace_level

Yes

Yes

rpl_semi_sync_source_enabled

Yes

rpl_semi_sync_source_timeout

Yes

Yes

Yes

rpl_semi_sync_source_trace_level

Yes

Yes

rpl_semi_sync_source_wait_for_replica_count

Yes

Yes

Yes
rpl_semi_sync_source_wait_no_replica
Yes

rpl_semi_sync_source_wait_point

Yes

Yes

rpl_stop_replica_timeout

Yes

rpl_stop_slave_timeout

Yes

schema_definition_cache

Yes

secondary_engine_cost_threshold

secure_file_priv Yes

select_into_buffer_size

Yes

select_into_disk_syncYes

select_into_disk_sync_delay

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

818

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Session

Global

Session

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Session

Global

Both

Both

Both

No

Yes

Yes

Yes

Yes

Yes

No

No

No

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

Yes

Yes

Yes

Server System Variable Reference

Cmd-Line

Option File

System Var

Var Scope

Dynamic

Name

server_id

server_id_bits

server_uuid

Yes

Yes

session_track_gtidsYes

session_track_schemaYes

session_track_state_change

Yes

Yes

Yes

Yes

Yes

Yes

session_track_system_variables

Yes

Yes

session_track_transaction_info

Yes

Yes

sha256_password_auto_generate_rsa_keys

Yes

Yes

Yes
sha256_password_private_key_path

Yes

sha256_password_proxy_users

Yes

Yes

sha256_password_public_key_path

Yes

Yes

shared_memory Yes

shared_memory_base_name

Yes

Yes

Yes

show_create_table_skip_secondary_engine

Yes

Yes

show_create_table_verbosity

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

show_gipk_in_create_table_and_information_schema

Yes

Yes

Yes

show_old_temporalsYes

skip_external_lockingYes

skip_name_resolveYes

skip_networking Yes

skip_replica_startYes

skip_show_databaseYes

skip_slave_start Yes

slave_allow_batchingYes

slave_checkpoint_group

Yes

slave_checkpoint_period

Yes

slave_compressed_protocol

Yes

slave_exec_modeYes

slave_load_tmpdirYes

slave_max_allowed_packet

Yes

slave_net_timeoutYes

slave_parallel_typeYes

slave_parallel_workers

Yes

slave_pending_jobs_size_max

Yes

slave_preserve_commit_order

Yes

slave_rows_search_algorithms

Yes

slave_skip_errorsYes

slave_sql_verify_checksum

Yes

slave_transaction_retries

Yes

slave_type_conversions

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Both

Both

Both

Both

Both

Global

Global

Global

Global

Global

Global

Session

Both

Both

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Yes

No

No

Yes

Yes

Yes

Yes

Yes

No

No

Yes

No

No

No

Yes

Yes

Yes

Yes

No

No

No

No

No

No

Yes

Yes

Yes

Yes

Yes

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

Yes

Yes

Yes

819

Server System Variable Reference

Name

Cmd-Line

Option File

System Var

Var Scope

Dynamic

slow_launch_timeYes

slow_query_log Yes

slow_query_log_fileYes

socket

Yes

sort_buffer_size Yes

source_verify_checksum

Yes

sql_auto_is_null

sql_big_selects

sql_buffer_result

Yes

Yes

Yes

Yes

Yes

Yes

sql_generate_invisible_primary_key

Yes

Yes

sql_log_bin

sql_log_off

sql_mode

sql_notes

Yes

Yes

sql_quote_show_create

sql_replica_skip_counter

sql_require_primary_key

Yes

Yes

sql_safe_updates

sql_select_limit

sql_slave_skip_counter

sql_warnings

ssl_ca

ssl_capath

ssl_cert

ssl_cipher

ssl_crl

ssl_crlpath

Yes

Yes

Yes

Yes

Yes

Yes

ssl_fips_mode Yes

ssl_key

Yes

ssl_session_cache_mode

Yes

ssl_session_cache_timeout

Yes

statement_id

stored_program_cache

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

stored_program_definition_cache

Yes

Yes

super_read_only Yes

sync_binlog

Yes

sync_master_infoYes

sync_relay_log Yes

sync_relay_log_infoYes

sync_source_infoYes

syseventlog.facilityYes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

820

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Global

Both

Global

Both

Both

Both

Both

Session

Both

Both

Both

Both

Global

Both

Both

Both

Global

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Session

Global

Global

Global

Global

Global

Global

Global

Global

Global

Yes

Yes

Yes

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Varies

Varies

Varies

Varies

Varies

Varies

No

Varies

Yes

Yes

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Server System Variable Reference

Name

Cmd-Line

Option File

System Var

Var Scope

Dynamic

syseventlog.include_pid

Yes

syseventlog.tag Yes

system_time_zone

table_definition_cacheYes

Yes

Yes

Yes

table_encryption_privilege_check

Yes

Yes

table_open_cacheYes

table_open_cache_instances

Yes

tablespace_definition_cache

Yes

temptable_max_mmapYes

temptable_max_ramYes

temptable_use_mmapYes

terminology_use_previous

Yes

thread_cache_sizeYes

thread_handling Yes

thread_pool_algorithmYes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

thread_pool_dedicated_listeners

Yes

Yes

Yes
thread_pool_high_priority_connection
Yes

Yes
thread_pool_max_active_query_threads

Yes

Yes
thread_pool_max_transactions_limit

Yes

thread_pool_max_unused_threads

Yes

Yes

thread_pool_prio_kickup_timer

Yes

Yes

Yes
thread_pool_query_threads_per_group
Yes

thread_pool_sizeYes

thread_pool_stall_limit

Yes

thread_pool_transaction_delay

Yes

thread_stack

Yes

time_zone

timestamp

tls_ciphersuites Yes

tls_version

Yes

tmp_table_size Yes

tmpdir

Yes

transaction_alloc_block_size

Yes

transaction_allow_batching

transaction_isolationYes

transaction_prealloc_size

Yes

transaction_read_onlyYes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

transaction_write_set_extraction

Yes

Yes

unique_checks

updatable_views_with_limit

Yes

Yes

use_secondary_engine

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Both

Global

Global

Global

Global

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Both

Session

Global

Global

Both

Global

Both

Session

Both

Both

Both

Both

Both

Both

Session

Yes

Yes

No

Yes

Yes

Yes

No

Yes

Yes

Yes

Yes

Yes

Yes

No

No

No

Yes

Yes

Yes

Yes

Yes

Yes

No

Yes

Yes

No

Yes

Yes

Yes

Varies

Yes

No

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

821

Server Status Variable Reference

Name

Cmd-Line

Option File

System Var

Var Scope

Dynamic

Yes
validate_password_check_user_name
Yes

validate_password_dictionary_file

Yes

Yes

validate_password_length

Yes

Yes

Yes
validate_password_mixed_case_count
Yes

validate_password_number_count

Yes

Yes

validate_password_policy

Yes

Yes

Yes
validate_password_special_char_count
Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

validate_password.changed_characters_percentage

Yes

Yes

Yes

Yes
validate_password.check_user_name
Yes

validate_password.dictionary_file

Yes

Yes

validate_password.length

Yes

Yes

Yes
validate_password.mixed_case_count
Yes

validate_password.number_count

Yes

Yes

validate_password.policy

Yes

Yes

Yes
validate_password.special_char_count
Yes

version

version_comment

version_compile_machine

version_compile_os

version_compile_zlib

version_tokens_session

Yes

Yes

version_tokens_session_number

Yes

Yes

wait_timeout

Yes

warning_count

windowing_use_high_precision

Yes

xa_detach_on_prepare

Yes

Yes

Yes

Yes

Notes:

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Both

Both

Both

Session

Both

Both

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

No

No

No

No

Yes

No

Yes

No

Yes

Yes

1. This option is dynamic, but should be set only by server. You should not set this variable manually.

7.1.6 Server Status Variable Reference

The following table lists all status variables applicable within mysqld.

The table lists each variable's data type and scope. The last column indicates whether the scope for
each variable is Global, Session, or both. Please see the corresponding item descriptions for details on
setting and using the variables. Where appropriate, direct links to further information about the items
are provided.

Table 7.3 Status Variable Summary

Variable Name

Aborted_clients

Aborted_connects

Acl_cache_items_count

Audit_log_current_size

Variable Type

Variable Scope

Integer

Integer

Integer

Integer

Global

Global

Global

Global

822

Server Status Variable Reference

Variable Name

Variable Type

Variable Scope

Audit_log_event_max_drop_size Integer

Audit_log_events

Audit_log_events_filtered

Audit_log_events_lost

Audit_log_events_written

Audit_log_total_size

Audit_log_write_waits

Integer

Integer

Integer

Integer

Integer

Integer

Authentication_ldap_sasl_supported_methods

String

Binlog_cache_disk_use

Binlog_cache_use

Binlog_stmt_cache_disk_use

Binlog_stmt_cache_use

Bytes_received

Bytes_sent

Integer

Integer

Integer

Integer

Integer

Integer

Caching_sha2_password_rsa_public_key

String

Com_admin_commands

Com_alter_db

Com_alter_event

Com_alter_function

Com_alter_procedure

Com_alter_resource_group

Com_alter_server

Com_alter_table

Com_alter_tablespace

Com_alter_user

Com_alter_user_default_role

Com_analyze

Com_assign_to_keycache

Com_begin

Com_binlog

Com_call_procedure

Com_change_db

Com_change_master

Com_change_repl_filter

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Com_change_replication_source Integer

Com_check

Com_checksum

Com_clone

Com_commit

Com_create_db

Com_create_event

Integer

Integer

Integer

Integer

Integer

Integer

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Both

Both

Global

Both

Both

Both

Both

Both

Global

Both

Both

Both

Both

Global

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Global

Both

Both

Both

823

Server Status Variable Reference

Variable Name

Variable Type

Variable Scope

Com_create_function

Com_create_index

Com_create_procedure

Com_create_resource_group

Com_create_role

Com_create_server

Com_create_table

Com_create_trigger

Com_create_udf

Com_create_user

Com_create_view

Com_dealloc_sql

Com_delete

Com_delete_multi

Com_do

Com_drop_db

Com_drop_event

Com_drop_function

Com_drop_index

Com_drop_procedure

Com_drop_resource_group

Com_drop_role

Com_drop_server

Com_drop_table

Com_drop_trigger

Com_drop_user

Com_drop_view

Com_empty_query

Com_execute_sql

Com_explain_other

Com_flush

Com_get_diagnostics

Com_grant

Com_grant_roles

Com_group_replication_start

Com_group_replication_stop

Com_ha_close

Com_ha_open

Com_ha_read

Com_help

Com_insert

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

824

Both

Both

Both

Global

Global

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Global

Global

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Global

Global

Global

Both

Both

Both

Both

Both

Variable Name

Com_insert_select

Com_install_component

Com_install_plugin

Com_kill

Com_load

Com_lock_tables

Com_optimize

Com_preload_keys

Com_prepare_sql

Com_purge

Com_purge_before_date

Com_release_savepoint

Com_rename_table

Com_rename_user

Com_repair

Com_replace

Com_replace_select

Com_replica_start

Com_replica_stop

Com_reset

Com_resignal

Com_restart

Com_revoke

Com_revoke_all

Com_revoke_roles

Com_rollback

Com_rollback_to_savepoint

Com_savepoint

Com_select

Com_set_option

Com_set_resource_group

Com_set_role

Com_show_authors

Com_show_binlog_events

Com_show_binlogs

Com_show_charsets

Com_show_collations

Com_show_contributors

Com_show_create_db

Com_show_create_event

Com_show_create_func

Server Status Variable Reference

Variable Type

Variable Scope

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Both

Global

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Global

Both

Both

Both

Both

Both

Global

Global

Both

Both

Both

Both

Both

Both

Both

Both

Both

825

Server Status Variable Reference

Variable Name

Variable Type

Variable Scope

Com_show_create_proc

Com_show_create_table

Com_show_create_trigger

Com_show_create_user

Com_show_databases

Com_show_engine_logs

Com_show_engine_mutex

Com_show_engine_status

Com_show_errors

Com_show_events

Com_show_fields

Com_show_function_code

Com_show_function_status

Com_show_grants

Com_show_keys

Com_show_master_status

Com_show_ndb_status

Com_show_open_tables

Com_show_plugins

Com_show_privileges

Com_show_procedure_code

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Com_show_procedure_status

Integer

Com_show_processlist

Com_show_profile

Com_show_profiles

Com_show_relaylog_events

Com_show_replica_status

Com_show_replicas

Com_show_slave_hosts

Com_show_slave_status

Com_show_status

Com_show_storage_engines

Com_show_table_status

Com_show_tables

Com_show_triggers

Com_show_variables

Com_show_warnings

Com_shutdown

Com_signal

Com_slave_start

Com_slave_stop

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

826

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Server Status Variable Reference

Variable Type

Variable Scope

Variable Name

Com_stmt_close

Com_stmt_execute

Com_stmt_fetch

Com_stmt_prepare

Com_stmt_reprepare

Com_stmt_reset

Com_stmt_send_long_data

Com_truncate

Com_uninstall_component

Com_uninstall_plugin

Com_unlock_tables

Com_update

Com_update_multi

Com_xa_commit

Com_xa_end

Com_xa_prepare

Com_xa_recover

Com_xa_rollback

Com_xa_start

Compression

Compression_algorithm

Compression_level

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

String

Integer

Connection_control_delay_generatedInteger

Connection_errors_accept

Connection_errors_internal

Integer

Integer

Connection_errors_max_connectionsInteger

Connection_errors_peer_address Integer

Connection_errors_select

Connection_errors_tcpwrap

Connections

Created_tmp_disk_tables

Created_tmp_files

Created_tmp_tables

Current_tls_ca

Current_tls_capath

Current_tls_cert

Current_tls_cipher

Current_tls_ciphersuites

Current_tls_crl

Current_tls_crlpath

Current_tls_key

Integer

Integer

Integer

Integer

Integer

Integer

File name

Directory name

File name

String

String

File name

Directory name

File name

Both

Both

Both

Both

Both

Both

Both

Both

Global

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Session

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Both

Global

Both

Global

Global

Global

Global

Global

Global

Global

Global

827

Server Status Variable Reference

Variable Type

Variable Scope

Variable Name

Current_tls_version

Delayed_errors

Delayed_insert_threads

Delayed_writes

dragnet.Status

Error_log_buffered_bytes

Error_log_buffered_events

Error_log_expired_events

Error_log_latest_write

Firewall_access_denied

Firewall_access_granted

Firewall_access_suspicious

Firewall_cached_entries

Flush_commands

Global_connection_memory

String

Integer

Integer

Integer

String

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

group_replication_primary_memberString

Handler_commit

Handler_delete

Handler_discover

Handler_external_lock

Handler_mrr_init

Handler_prepare

Handler_read_first

Handler_read_key

Handler_read_last

Handler_read_next

Handler_read_prev

Handler_read_rnd

Handler_read_rnd_next

Handler_rollback

Handler_savepoint

Handler_savepoint_rollback

Handler_update

Handler_write

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Innodb_buffer_pool_bytes_data

Integer

Innodb_buffer_pool_bytes_dirty

Integer

Innodb_buffer_pool_dump_status String

Innodb_buffer_pool_load_status String

Innodb_buffer_pool_pages_data Integer

Innodb_buffer_pool_pages_dirty Integer

Innodb_buffer_pool_pages_flushedInteger

828

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Global

Global

Global

Global

Global

Global

Global

Server Status Variable Reference

Variable Name

Variable Type

Variable Scope

Innodb_buffer_pool_pages_free Integer

Innodb_buffer_pool_pages_latchedInteger

Innodb_buffer_pool_pages_misc Integer

Innodb_buffer_pool_pages_total

Integer

Innodb_buffer_pool_read_ahead Integer

Integer
Innodb_buffer_pool_read_ahead_evicted

Innodb_buffer_pool_read_ahead_rndInteger

Innodb_buffer_pool_read_requestsInteger

Innodb_buffer_pool_reads

Integer

Innodb_buffer_pool_resize_status String

Innodb_buffer_pool_resize_status_code

Integer

Innodb_buffer_pool_resize_status_progress

Integer

Innodb_buffer_pool_wait_free

Integer

Innodb_buffer_pool_write_requestsInteger

Innodb_data_fsyncs

Innodb_data_pending_fsyncs

Innodb_data_pending_reads

Innodb_data_pending_writes

Innodb_data_read

Innodb_data_reads

Innodb_data_writes

Innodb_data_written

Innodb_dblwr_pages_written

Innodb_dblwr_writes

Innodb_have_atomic_builtins

Innodb_log_waits

Innodb_log_write_requests

Innodb_log_writes

Innodb_num_open_files

Innodb_os_log_fsyncs

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Innodb_os_log_pending_fsyncs

Integer

Innodb_os_log_pending_writes

Integer

Innodb_os_log_written

Innodb_page_size

Innodb_pages_created

Innodb_pages_read

Innodb_pages_written

Integer

Integer

Integer

Integer

Integer

Innodb_redo_log_capacity_resizedInteger

Innodb_redo_log_checkpoint_lsn Integer

Innodb_redo_log_current_lsn

Integer

Innodb_redo_log_enabled

Boolean

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

829

Server Status Variable Reference

Variable Name

Variable Type

Variable Scope

Innodb_redo_log_flushed_to_disk_lsnInteger

Innodb_redo_log_logical_size

Integer

Innodb_redo_log_physical_size Boolean

Innodb_redo_log_read_only

Boolean

Innodb_redo_log_resize_status String

Innodb_redo_log_uuid

Integer

Innodb_row_lock_current_waits

Integer

Innodb_row_lock_time

Innodb_row_lock_time_avg

Innodb_row_lock_time_max

Innodb_row_lock_waits

Innodb_rows_deleted

Innodb_rows_inserted

Innodb_rows_read

Innodb_rows_updated

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Innodb_system_rows_deleted

Integer

Innodb_system_rows_inserted

Integer

Innodb_system_rows_read

Integer

Innodb_system_rows_updated

Integer

Innodb_truncated_status_writes

Integer

Innodb_undo_tablespaces_active Integer

Innodb_undo_tablespaces_explicitInteger

Innodb_undo_tablespaces_implicitInteger

Innodb_undo_tablespaces_total

Integer

Key_blocks_not_flushed

Key_blocks_unused

Key_blocks_used

Key_read_requests

Key_reads

Key_write_requests

Key_writes

Last_query_cost

Last_query_partial_plans

Locked_connects

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Numeric

Integer

Integer

Max_execution_time_exceeded

Integer

Max_execution_time_set

Integer

Max_execution_time_set_failed

Integer

Max_used_connections

Integer

Max_used_connections_time

Datetime

mecab_charset

Mysqlx_aborted_clients

String

Integer

830

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Session

Session

Global

Both

Both

Both

Global

Global

Global

Global

Server Status Variable Reference

Variable Type

Variable Scope

Variable Name

Mysqlx_address

Mysqlx_bytes_received

String

Integer

Mysqlx_bytes_received_compressed_payload

Integer

Mysqlx_bytes_received_uncompressed_frame

Integer

Mysqlx_bytes_sent

Integer

Integer
Mysqlx_bytes_sent_compressed_payload

Integer
Mysqlx_bytes_sent_uncompressed_frame

Mysqlx_compression_algorithm String

Mysqlx_compression_level

String

Mysqlx_connection_accept_errorsInteger

Mysqlx_connection_errors

Integer

Mysqlx_connections_accepted

Integer

Mysqlx_connections_closed

Mysqlx_connections_rejected

Mysqlx_crud_create_view

Mysqlx_crud_delete

Mysqlx_crud_drop_view

Mysqlx_crud_find

Mysqlx_crud_insert

Mysqlx_crud_modify_view

Mysqlx_crud_update

Mysqlx_cursor_close

Mysqlx_cursor_fetch

Mysqlx_cursor_open

Mysqlx_errors_sent

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer
Mysqlx_errors_unknown_message_type

Mysqlx_expect_close

Mysqlx_expect_open

Mysqlx_init_error

Mysqlx_messages_sent

Mysqlx_notice_global_sent

Mysqlx_notice_other_sent

Mysqlx_notice_warning_sent

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Mysqlx_notified_by_group_replicationInteger

Mysqlx_port

Mysqlx_prep_deallocate

Mysqlx_prep_execute

Mysqlx_prep_prepare

Mysqlx_rows_sent

Mysqlx_sessions

Mysqlx_sessions_accepted

String

Integer

Integer

Integer

Integer

Integer

Integer

Global

Both

Both

Both

Both

Both

Both

Session

Session

Both

Both

Global

Global

Global

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Global

Both

Both

Both

Both

Global

Global

831

Server Status Variable Reference

Variable Name

Variable Type

Variable Scope

Mysqlx_sessions_closed

Mysqlx_sessions_fatal_error

Mysqlx_sessions_killed

Mysqlx_sessions_rejected

Mysqlx_socket

Integer

Integer

Integer

Integer

String

Mysqlx_ssl_accept_renegotiates Integer

Mysqlx_ssl_accepts

Mysqlx_ssl_active

Mysqlx_ssl_cipher

Mysqlx_ssl_cipher_list

Mysqlx_ssl_ctx_verify_depth

Mysqlx_ssl_ctx_verify_mode

Mysqlx_ssl_finished_accepts

Mysqlx_ssl_server_not_after

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Mysqlx_ssl_server_not_before

Integer

Mysqlx_ssl_verify_depth

Mysqlx_ssl_verify_mode

Mysqlx_ssl_version

Integer

Integer

Integer

Mysqlx_stmt_create_collection

Integer

Mysqlx_stmt_create_collection_indexInteger

Mysqlx_stmt_disable_notices

Mysqlx_stmt_drop_collection

Integer

Integer

Mysqlx_stmt_drop_collection_indexInteger

Mysqlx_stmt_enable_notices

Integer

Mysqlx_stmt_ensure_collection

String

Mysqlx_stmt_execute_mysqlx

Integer

Mysqlx_stmt_execute_sql

Integer

Mysqlx_stmt_execute_xplugin

Integer

Mysqlx_stmt_get_collection_optionsInteger

Mysqlx_stmt_kill_client

Mysqlx_stmt_list_clients

Mysqlx_stmt_list_notices

Mysqlx_stmt_list_objects

Integer

Integer

Integer

Integer

Mysqlx_stmt_modify_collection_options

Integer

Mysqlx_stmt_ping

Mysqlx_worker_threads

Integer

Integer

Mysqlx_worker_threads_active

Integer

Integer
Ndb_api_adaptive_send_deferred_count

Ndb_api_adaptive_send_deferred_count_replica

Integer

Ndb_api_adaptive_send_deferred_count_session

Integer

Ndb_api_adaptive_send_deferred_count_slave

Integer

832

Global

Global

Global

Global

Global

Global

Global

Both

Both

Both

Both

Both

Global

Global

Global

Global

Global

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Both

Global

Global

Global

Global

Global

Global

Server Status Variable Reference

Variable Name

Variable Type

Variable Scope

Ndb_api_adaptive_send_forced_count

Integer

Ndb_api_adaptive_send_forced_count_replica

Integer

Ndb_api_adaptive_send_forced_count_session

Integer

Ndb_api_adaptive_send_forced_count_slave

Integer

Integer
Ndb_api_adaptive_send_unforced_count

Ndb_api_adaptive_send_unforced_count_replica

Integer

Ndb_api_adaptive_send_unforced_count_session

Integer

Ndb_api_adaptive_send_unforced_count_slave

Integer

Ndb_api_bytes_received_count

Integer

Ndb_api_bytes_received_count_replica

Integer

Integer
Ndb_api_bytes_received_count_session

Ndb_api_bytes_received_count_slaveInteger

Ndb_api_bytes_sent_count

Integer

Ndb_api_bytes_sent_count_replicaInteger

Ndb_api_bytes_sent_count_sessionInteger

Ndb_api_bytes_sent_count_slave Integer

Ndb_api_event_bytes_count

Integer

Ndb_api_event_bytes_count_injectorInteger

Ndb_api_event_data_count

Integer

Ndb_api_event_data_count_injectorInteger

Ndb_api_event_nondata_count

Integer

Ndb_api_event_nondata_count_injector

Integer

Ndb_api_pk_op_count

Integer

Ndb_api_pk_op_count_replica

Integer

Ndb_api_pk_op_count_session

Integer

Ndb_api_pk_op_count_slave

Ndb_api_pruned_scan_count

Integer

Integer

Ndb_api_pruned_scan_count_replicaInteger

Ndb_api_pruned_scan_count_sessionInteger

Ndb_api_pruned_scan_count_slaveInteger

Ndb_api_range_scan_count

Integer

Ndb_api_range_scan_count_replicaInteger

Ndb_api_range_scan_count_sessionInteger

Ndb_api_range_scan_count_slaveInteger

Ndb_api_read_row_count

Integer

Ndb_api_read_row_count_replica Integer

Ndb_api_read_row_count_sessionInteger

Ndb_api_read_row_count_slave Integer

Ndb_api_scan_batch_count

Integer

Ndb_api_scan_batch_count_replicaInteger

Ndb_api_scan_batch_count_sessionInteger

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Session

Global

Global

Global

Session

Global

Global

Global

Global

Global

Global

Global

Global

Global

Session

Global

Global

Global

Session

Global

Global

Global

Session

Global

Global

Global

Session

Global

Global

Global

Session

833

Server Status Variable Reference

Variable Name

Variable Type

Variable Scope

Ndb_api_scan_batch_count_slaveInteger

Ndb_api_table_scan_count

Integer

Ndb_api_table_scan_count_replicaInteger

Ndb_api_table_scan_count_sessionInteger

Ndb_api_table_scan_count_slave Integer

Ndb_api_trans_abort_count

Integer

Ndb_api_trans_abort_count_replicaInteger

Ndb_api_trans_abort_count_sessionInteger

Ndb_api_trans_abort_count_slaveInteger

Ndb_api_trans_close_count

Integer

Ndb_api_trans_close_count_replicaInteger

Ndb_api_trans_close_count_sessionInteger

Ndb_api_trans_close_count_slaveInteger

Ndb_api_trans_commit_count

Integer

Ndb_api_trans_commit_count_replicaInteger

Ndb_api_trans_commit_count_session

Integer

Ndb_api_trans_commit_count_slaveInteger

Ndb_api_trans_local_read_row_count

Integer

Ndb_api_trans_local_read_row_count_replica

Integer

Ndb_api_trans_local_read_row_count_session

Integer

Ndb_api_trans_local_read_row_count_slave

Integer

Ndb_api_trans_start_count

Integer

Ndb_api_trans_start_count_replicaInteger

Ndb_api_trans_start_count_sessionInteger

Ndb_api_trans_start_count_slave Integer

Ndb_api_uk_op_count

Integer

Ndb_api_uk_op_count_replica

Integer

Ndb_api_uk_op_count_session

Integer

Ndb_api_uk_op_count_slave

Integer

Ndb_api_wait_exec_complete_countInteger

Ndb_api_wait_exec_complete_count_replica

Integer

Ndb_api_wait_exec_complete_count_session

Integer

Ndb_api_wait_exec_complete_count_slave

Integer

Ndb_api_wait_meta_request_countInteger

Ndb_api_wait_meta_request_count_replica

Integer

Ndb_api_wait_meta_request_count_session

Integer

Integer
Ndb_api_wait_meta_request_count_slave

Ndb_api_wait_nanos_count

Integer

Ndb_api_wait_nanos_count_replicaInteger

Ndb_api_wait_nanos_count_sessionInteger

Ndb_api_wait_nanos_count_slaveInteger

834

Global

Global

Global

Session

Global

Global

Global

Session

Global

Global

Global

Session

Global

Global

Global

Session

Global

Global

Global

Session

Global

Global

Global

Session

Global

Global

Global

Session

Global

Global

Global

Session

Global

Global

Global

Session

Global

Global

Global

Session

Global

Server Status Variable Reference

Variable Name

Variable Type

Variable Scope

Ndb_api_wait_scan_result_count Integer

Integer
Ndb_api_wait_scan_result_count_replica

Integer
Ndb_api_wait_scan_result_count_session

Ndb_api_wait_scan_result_count_slave

Integer

Ndb_cluster_node_id

Ndb_config_from_host

Ndb_config_from_port

Ndb_config_generation

Ndb_conflict_fn_epoch

Ndb_conflict_fn_epoch_trans

Ndb_conflict_fn_epoch2

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Ndb_conflict_fn_epoch2_trans

Integer

Ndb_conflict_fn_max

Integer

Ndb_conflict_fn_max_del_win

Integer

Ndb_conflict_fn_max_del_win_ins Integer

Ndb_conflict_fn_max_ins

Ndb_conflict_fn_old

Integer

Integer

Ndb_conflict_last_conflict_epoch Integer

Ndb_conflict_last_stable_epoch

Integer

Integer
Ndb_conflict_reflected_op_discard_count

Integer
Ndb_conflict_reflected_op_prepare_count

Ndb_conflict_refresh_op_count

Integer

Integer
Ndb_conflict_trans_conflict_commit_count

Ndb_conflict_trans_detect_iter_count

Integer

Ndb_conflict_trans_reject_count

Integer

Ndb_conflict_trans_row_conflict_count

Integer

Ndb_conflict_trans_row_reject_count

Integer

Ndb_epoch_delete_delete_count

Integer

Ndb_execute_count

Ndb_fetch_table_stats

Integer

Integer

Ndb_last_commit_epoch_server

Integer

Ndb_last_commit_epoch_session Integer

Ndb_metadata_blacklist_size

Integer

Ndb_metadata_detected_count

Integer

Ndb_metadata_excluded_count

Integer

Ndb_metadata_synced_count

Integer

Ndb_cluster_node_id

Ndb_number_of_data_nodes

Ndb_pruned_scan_count

Integer

Integer

Integer

Ndb_pushed_queries_defined

Integer

Ndb_pushed_queries_dropped

Integer

Global

Global

Session

Global

Global

Both

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Session

Global

Global

Global

Global

Global

Global

Global

Global

Global

835

Server Status Variable Reference

Variable Name

Variable Type

Variable Scope

Ndb_pushed_queries_executed

Integer

Ndb_pushed_reads

Ndb_scan_count

Integer

Integer

Ndb_slave_max_replicated_epochInteger

Ndb_trans_hint_count_session

Integer

Not_flushed_delayed_rows

Integer

Ongoing_anonymous_gtid_violating_transaction_count

Integer

Integer
Ongoing_anonymous_transaction_count

Ongoing_automatic_gtid_violating_transaction_count

Integer

Open_files

Open_streams

Open_table_definitions

Open_tables

Opened_files

Opened_table_definitions

Opened_tables

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Performance_schema_accounts_lost

Integer

Integer
Performance_schema_cond_classes_lost

Performance_schema_cond_instances_lost

Integer

Performance_schema_digest_lost Integer

Performance_schema_file_classes_lost

Integer

Performance_schema_file_handles_lost

Integer

Integer
Performance_schema_file_instances_lost

Performance_schema_hosts_lost Integer

Performance_schema_index_stat_lost

Integer

Performance_schema_locker_lost Integer

Performance_schema_memory_classes_lost

Integer

Performance_schema_metadata_lock_lost

Integer

Performance_schema_mutex_classes_lost

Integer

Performance_schema_mutex_instances_lost

Integer

Performance_schema_nested_statement_lost

Integer

Performance_schema_prepared_statements_lost

Integer

Performance_schema_program_lostInteger

Performance_schema_rwlock_classes_lost

Integer

Performance_schema_rwlock_instances_lost

Integer

Performance_schema_session_connect_attrs_longest_seen

Integer

Performance_schema_session_connect_attrs_lost

Integer

Performance_schema_socket_classes_lost

Integer

Performance_schema_socket_instances_lost

Integer

Integer
Performance_schema_stage_classes_lost

Performance_schema_statement_classes_lost

Integer

Global

Global

Global

Global

Both

Global

Global

Global

Global

Global

Global

Global

Both

Global

Both

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

836

Server Status Variable Reference

Variable Name

Variable Type

Variable Scope

Integer
Performance_schema_table_handles_lost

Performance_schema_table_instances_lost

Integer

Performance_schema_table_lock_stat_lost

Integer

Performance_schema_thread_classes_lost

Integer

Performance_schema_thread_instances_lost

Integer

Performance_schema_users_lost Integer

Prepared_stmt_count

Queries

Questions

Replica_open_temp_tables

Integer

Integer

Integer

Integer

Replica_rows_last_search_algorithm_used

String

Resource_group_supported

Boolean

Rewriter_number_loaded_rules

Integer

Rewriter_number_reloads

Integer

Rewriter_number_rewritten_queriesInteger

Rewriter_reload_error

Boolean

Rpl_semi_sync_master_clients

Integer

Rpl_semi_sync_master_net_avg_wait_time

Integer

Rpl_semi_sync_master_net_wait_timeInteger

Rpl_semi_sync_master_net_waitsInteger

Rpl_semi_sync_master_no_times Integer

Rpl_semi_sync_master_no_tx

Integer

Rpl_semi_sync_master_status

Boolean

Integer
Rpl_semi_sync_master_timefunc_failures

Integer
Rpl_semi_sync_master_tx_avg_wait_time

Rpl_semi_sync_master_tx_wait_timeInteger

Rpl_semi_sync_master_tx_waits Integer

Rpl_semi_sync_master_wait_pos_backtraverse

Integer

Rpl_semi_sync_master_wait_sessions

Integer

Rpl_semi_sync_master_yes_tx

Integer

Rpl_semi_sync_replica_status

Boolean

Rpl_semi_sync_slave_status

Boolean

Rpl_semi_sync_source_clients

Integer

Rpl_semi_sync_source_net_avg_wait_time

Integer

Rpl_semi_sync_source_net_wait_timeInteger

Rpl_semi_sync_source_net_waits Integer

Rpl_semi_sync_source_no_times Integer

Rpl_semi_sync_source_no_tx

Integer

Rpl_semi_sync_source_status

Boolean

Integer
Rpl_semi_sync_source_timefunc_failures

Integer
Rpl_semi_sync_source_tx_avg_wait_time

Global

Global

Global

Global

Global

Global

Global

Both

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

837

Server Status Variable Reference

Variable Name

Variable Type

Variable Scope

Rpl_semi_sync_source_tx_wait_timeInteger

Rpl_semi_sync_source_tx_waits Integer

Rpl_semi_sync_source_wait_pos_backtraverse

Integer

Rpl_semi_sync_source_wait_sessions

Integer

Rpl_semi_sync_source_yes_tx

Integer

Rsa_public_key

String

Secondary_engine_execution_countInteger

Select_full_join

Select_full_range_join

Select_range

Select_range_check

Select_scan

Slave_open_temp_tables

Integer

Integer

Integer

Integer

Integer

Integer

String
Slave_rows_last_search_algorithm_used

Slow_launch_threads

Slow_queries

Sort_merge_passes

Sort_range

Sort_rows

Sort_scan

Ssl_accept_renegotiates

Ssl_accepts

Ssl_callback_cache_hits

Ssl_cipher

Ssl_cipher_list

Ssl_client_connects

Ssl_connect_renegotiates

Ssl_ctx_verify_depth

Ssl_ctx_verify_mode

Ssl_default_timeout

Ssl_finished_accepts

Ssl_finished_connects

Ssl_server_not_after

Ssl_server_not_before

Ssl_session_cache_hits

Ssl_session_cache_misses

Ssl_session_cache_mode

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

String

String

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

String

Ssl_session_cache_overflows

Integer

Ssl_session_cache_size

Ssl_session_cache_timeout

Ssl_session_cache_timeouts

Integer

Integer

Integer

838

Global

Global

Global

Global

Global

Global

Both

Both

Both

Both

Both

Both

Global

Global

Both

Both

Both

Both

Both

Both

Global

Global

Global

Both

Both

Global

Global

Global

Global

Both

Global

Global

Both

Both

Global

Global

Global

Global

Global

Global

Global

Server Command Options

Variable Name

Variable Type

Variable Scope

Ssl_sessions_reused

Integer

Ssl_used_session_cache_entries Integer

Ssl_verify_depth

Ssl_verify_mode

Ssl_version

Table_locks_immediate

Table_locks_waited

Table_open_cache_hits

Table_open_cache_misses

Integer

Integer

String

Integer

Integer

Integer

Integer

Table_open_cache_overflows

Integer

Tc_log_max_pages_used

Tc_log_page_size

Tc_log_page_waits

Integer

Integer

Integer

Telemetry_traces_supported

Boolean

Threads_cached

Threads_connected

Threads_created

Threads_running

Tls_library_version

Uptime

Uptime_since_flush_status

Integer

Integer

Integer

Integer

String

Integer

Integer

validate_password_dictionary_file_last_parsed

Datetime

validate_password_dictionary_file_words_count

Integer

validate_password.dictionary_file_last_parsed

Datetime

validate_password.dictionary_file_words_count

Integer

7.1.7 Server Command Options

Session

Global

Both

Both

Both

Global

Global

Both

Both

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

When you start the mysqld server, you can specify program options using any of the methods
described in Section 6.2.2, “Specifying Program Options”. The most common methods are to provide
options in an option file or on the command line. However, in most cases it is desirable to make sure
that the server uses the same options each time it runs. The best way to ensure this is to list them in an
option file. See Section 6.2.2.2, “Using Option Files”. That section also describes option file format and
syntax.

mysqld reads options from the [mysqld] and [server] groups. mysqld_safe reads options from
the [mysqld], [server], [mysqld_safe], and [safe_mysqld] groups. mysql.server reads
options from the [mysqld] and [mysql.server] groups.

mysqld accepts many command options. For a brief summary, execute this command:

mysqld --help

To see the full list, use this command:

mysqld --verbose --help

Some of the items in the list are actually system variables that can be set at server startup. These
can be displayed at runtime using the SHOW VARIABLES statement. Some items displayed by the

839

Server Command Options

preceding mysqld command do not appear in SHOW VARIABLES output; this is because they are
options only and not system variables.

The following list shows some of the most common server options. Additional options are described in
other sections:

• Options that affect security: See Section 8.1.4, “Security-Related mysqld Options and Variables”.

• SSL-related options: See Command Options for Encrypted Connections.

• Binary log control options: See Section 7.4.4, “The Binary Log”.

• Replication-related options: See Section 19.1.6, “Replication and Binary Logging Options and

Variables”.

• Options for loading plugins such as pluggable storage engines: See Section 7.6.1, “Installing and

Uninstalling Plugins”.

• Options specific to particular storage engines: See Section 17.14, “InnoDB Startup Options and

System Variables” and Section 18.2.1, “MyISAM Startup Options”.

Some options control the size of buffers or caches. For a given buffer, the server might need to allocate
internal data structures. These structures typically are allocated from the total memory allocated to
the buffer, and the amount of space required might be platform dependent. This means that when you
assign a value to an option that controls a buffer size, the amount of space actually available might
differ from the value assigned. In some cases, the amount might be less than the value assigned. It
is also possible that the server adjusts a value upward. For example, if you assign a value of 0 to an
option for which the minimal value is 1024, the server sets the value to 1024.

Values for buffer sizes, lengths, and stack sizes are given in bytes unless otherwise specified.

Some options take file name values. Unless otherwise specified, the default file location is the data
directory if the value is a relative path name. To specify the location explicitly, use an absolute path
name. Suppose that the data directory is /var/mysql/data. If a file-valued option is given as a
relative path name, it is located under /var/mysql/data. If the value is an absolute path name, its
location is as given by the path name.

You can also set the values of server system variables at server startup by using variable names as
options. To assign a value to a server system variable, use an option of the form --var_name=value.
For example, --sort_buffer_size=384M sets the sort_buffer_size variable to a value of
384MB.

When you assign a value to a variable, MySQL might automatically correct the value to stay within a
given range, or adjust the value to the closest permissible value if only certain values are permitted.

To restrict the maximum value to which a system variable can be set at runtime with the SET
statement, specify this maximum by using an option of the form --maximum-var_name=value at
server startup.

You can change the values of most system variables at runtime with the SET statement. See
Section 15.7.6.1, “SET Syntax for Variable Assignment”.

Section 7.1.8, “Server System Variables”, provides a full description for all variables, and additional
information for setting them at server startup and runtime. For information on changing system
variables, see Section 7.1.1, “Configuring the Server”.

• --help, -?

Command-Line Format

--help

Display a short help message and exit. Use both the --verbose and --help options to see the full
message.

840

Server Command Options

• --admin-ssl, --skip-admin-ssl

Command-Line Format

--admin-ssl[={OFF|ON}]

Introduced

Deprecated

Type

Default Value

8.0.21

8.0.26

Boolean

ON

The --admin-ssl option is like the --ssl option, except that it applies to the administrative
connection interface rather than the main connection interface. For information about these
interfaces, see Section 7.1.12.1, “Connection Interfaces”.

The --admin-ssl option specifies that the server permits but does not require encrypted
connections on the administrative interface. This option is enabled by default.

--admin-ssl can be specified in negated form as --skip-admin-ssl or a synonym (--
admin-ssl=OFF, --disable-admin-ssl). In this case, the option specifies that the server
does not permit encrypted connections, regardless of the settings of the admin_tsl_xxx and
admin_ssl_xxx system variables.

The --admin-ssl option has an effect only at server startup on whether the administrative
interface supports encrypted connections. It is ignored and has no effect on the operation of ALTER
INSTANCE RELOAD TLS at runtime. For example, you can use --admin-ssl=OFF to start the
administrative interface with encrypted connections disabled, then reconfigure TLS and execute
ALTER INSTANCE RELOAD TLS FOR CHANNEL mysql_admin to enable encrypted connections
at runtime.

For general information about configuring connection-encryption support, see Section 8.3.1,
“Configuring MySQL to Use Encrypted Connections”. That discussion is written for the main
connection interface, but the parameter names are similar for the administrative connection interface.
Consider setting at least the admin_ssl_cert and admin_ssl_key system variables on the
server side and the --ssl-ca (or --ssl-capath) option on the client side. For additional
information specifically about the administrative interface, see Administrative Interface Support for
Encrypted Connections.

Because support for encrypted connections is enabled by default, it is normally unnecessary to
specify --admin-ssl. As of MySQL 8.0.26, --admin-ssl is deprecated and subject to removal
in a future MySQL version. If it is desired to disable encrypted connections, that can be done without
specifying --admin-ssl in negated form. Set the admin_tls_version system variable to the
empty value to indicate that no TLS versions are supported. For example, these lines in the server
my.cnf file disable encrypted connections:

[mysqld]
admin_tls_version=''

• --allow-suspicious-udfs

Command-Line Format

--allow-suspicious-udfs[={OFF|ON}]

Type

Default Value

Boolean

OFF

This option controls whether loadable functions that have only an xxx symbol for the main function
can be loaded. By default, the option is off and only loadable functions that have at least one
auxiliary symbol can be loaded; this prevents attempts at loading functions from shared object files
other than those containing legitimate functions. See Loadable Function Security Precautions.

841

Server Command Options

• --ansi

Command-Line Format

--ansi

Use standard (ANSI) SQL syntax instead of MySQL syntax. For more precise control over the server
SQL mode, use the --sql-mode option instead. See Section 1.6, “MySQL Standards Compliance”,
and Section 7.1.11, “Server SQL Modes”.

•   --basedir=dir_name, -b dir_name

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--basedir=dir_name

basedir

Global

No

No

Directory name

parent of mysqld installation
directory

The path to the MySQL installation directory. This option sets the basedir system variable.

The server executable determines its own full path name at startup and uses the parent of the
directory in which it is located as the default basedir value. This in turn enables the server to use
that basedir when searching for server-related information such as the share directory containing
error messages.

• --character-set-client-handshake

Command-Line Format

Deprecated

Type

Default Value

--character-set-client-
handshake[={OFF|ON}]

8.0.35

Boolean

ON

Do not ignore character set information sent by the client. To ignore client information and use the
default server character set, use --skip-character-set-client-handshake.

This option is deprecated in MySQL 8.0.35 and later MySQL 8.0 releases, where a warning is issued
whenever it is used, and is to be removed in a future version of MySQL. Applications which depen on
this option should begin migration away from it as soon as possible.

• --check-table-functions=value

Command-Line Format

--check-table-functions=value

Introduced

Type

Default Value

Valid Values

8.0.42

Enumeration

ABORT

WARN

ABORT

842

When performing an upgade of the server, we scan the data dictionary for functions used in table
constraints and other expressions, including DEFAULT expressions, partitioning expressions, and
virtual columns. It is possible that a change in the behavior of the function causes it to raise an error

Server Command Options

in the new version of the server, where no such error occurred before in which case the table cannot
be opened. This option provides a choice in how to handle such problems, according to which of the
two values shown here is used:

• WARN: Log a warning for each table that cannot be opened.

• ABORT: Also logs a warning; in addition, the upgrade is stopped. This is the default. For a

sufficiently high value of --log-error-verbosity, it also logs a note with a streamlined table
definition listing only those expressions that potentially contain SQL functions.

The default behaviour is to abort the upgrade, so that the user can fix the issue using the older
version of the server, before upgrading to the newer one. Use WARN to continue the upgrade in
interactive mode while reporting any issues.

The --check-table-functions option was introduced in MySQL 8.0.42.

• --chroot=dir_name, -r dir_name

Command-Line Format

Type

--chroot=dir_name

Directory name

Put the mysqld server in a closed environment during startup by using the chroot() system call.
This is a recommended security measure. Use of this option somewhat limits LOAD DATA and
SELECT ... INTO OUTFILE.

• --console

Command-Line Format

Platform Specific

--console

Windows

(Windows only.) Cause the default error log destination to be the console. This affects log sinks that
base their own output destination on the default destination. See Section 7.4.2, “The Error Log”.
mysqld does not close the console window if this option is used.

--console takes precedence over --log-error if both are given.

• --core-file

Command-Line Format

--core-file

When this option is used, write a core file if mysqld dies; no arguments are needed (or accepted).
The name and location of the core file is system dependent. On Linux, a core file named core.pid
is written to the current working directory of the process, which for mysqld is the data directory. pid
represents the process ID of the server process. On macOS, a core file named core.pid is written
to the /cores directory. On Solaris, use the coreadm command to specify where to write the core
file and how to name it.

For some systems, to get a core file you must also specify the --core-file-size option to
mysqld_safe. See Section 6.3.2, “mysqld_safe — MySQL Server Startup Script”. On some
systems, such as Solaris, you do not get a core file if you are also using the --user option. There
might be additional restrictions or limitations. For example, it might be necessary to execute ulimit
-c unlimited before starting the server. Consult your system documentation.

The innodb_buffer_pool_in_core_file variable can be used to reduce the size of core files
on operating systems that support it. For more information, see Section 17.8.3.7, “Excluding Buffer
Pool Pages from Core Files”.

843

Server Command Options

• --daemonize, -D

Command-Line Format

--daemonize[={OFF|ON}]

Type

Default Value

Boolean

OFF

This option causes the server to run as a traditional, forking daemon, permitting it to work with
operating systems that use systemd for process control. For more information, see Section 2.5.9,
“Managing MySQL Server with systemd”.

--daemonize is mutually exclusive with --initialize and --initialize-insecure.

If the server is started using the --daemonize option and is not connected to a tty device, a default
error logging option of --log-error="" is used in the absence of an explicit logging option, to
direct error output to the default log file.

-D is a synonym for --daemonize.

•   --datadir=dir_name, -h dir_name

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

--datadir=dir_name

datadir

Global

No

No

Directory name

The path to the MySQL server data directory. This option sets the datadir system variable. See the
description of that variable.

• --debug[=debug_options], -# [debug_options]

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value (Unix)

Default Value (Windows)

--debug[=debug_options]

debug

Global, Session

Yes

No

String

d:t:i:o,/tmp/mysqld.trace

d:t:i:O,\mysqld.trace

If MySQL is configured with the -DWITH_DEBUG=1 CMake option, you can use this option to get a
trace file of what mysqld is doing. A typical debug_options string is d:t:o,file_name. The
default is d:t:i:o,/tmp/mysqld.trace on Unix and d:t:i:O,\mysqld.trace on Windows.

Using -DWITH_DEBUG=1 to configure MySQL with debugging support enables you to use the --
debug="d,parser_debug" option when you start the server. This causes the Bison parser that
is used to process SQL statements to dump a parser trace to the server's standard error output.
Typically, this output is written to the error log.

This option may be given multiple times. Values that begin with + or - are added to or subtracted
from the previous value. For example, --debug=T --debug=+P sets the value to P:T.

844

For more information, see Section 7.9.4, “The DBUG Package”.

Server Command Options

• --debug-sync-timeout[=N]

Command-Line Format

--debug-sync-timeout[=#]

Type

Integer

Controls whether the Debug Sync facility for testing and debugging is enabled. Use of Debug Sync
requires that MySQL be configured with the -DWITH_DEBUG=ON CMake option (see Section 2.8.7,
“MySQL Source-Configuration Options”); otherwise, this option is not available. The option value is a
timeout in seconds. The default value is 0, which disables Debug Sync. To enable it, specify a value
greater than 0; this value also becomes the default timeout for individual synchronization points. If
the option is given without a value, the timeout is set to 300 seconds.

For a description of the Debug Sync facility and how to use synchronization points, see MySQL
Internals: Test Synchronization.

• --default-time-zone=timezone

Command-Line Format

--default-time-zone=name

Type

String

Set the default server time zone. This option sets the global time_zone system variable. If this
option is not given, the default time zone is the same as the system time zone (given by the value of
the system_time_zone system variable.

The system_time_zone variable differs from time_zone. Although they might have the same
value, the latter variable is used to initialize the time zone for each client that connects. See
Section 7.1.15, “MySQL Server Time Zone Support”.

• --defaults-extra-file=file_name

Read this option file after the global option file but (on Unix) before the user option file. If the file does
not exist or is otherwise inaccessible, an error occurs. If file_name is not an absolute path name, it
is interpreted relative to the current directory. This must be the first option on the command line if it is
used.

For additional information about this and other option-file options, see Section 6.2.2.3, “Command-
Line Options that Affect Option-File Handling”.

• --defaults-file=file_name

Read only the given option file. If the file does not exist or is otherwise inaccessible, an error occurs.
If file_name is not an absolute path name, it is interpreted relative to the current directory.

Exception: Even with --defaults-file, mysqld reads mysqld-auto.cnf.

Note

This must be the first option on the command line if it is used, except that if
the server is started with the --defaults-file and --install (or --
install-manual) options, --install (or --install-manual) must be
first.

For additional information about this and other option-file options, see Section 6.2.2.3, “Command-
Line Options that Affect Option-File Handling”.

• --defaults-group-suffix=str

Read not only the usual option groups, but also groups with the usual names and a suffix of str.
For example, mysqld normally reads the [mysqld] group. If this option is given as --defaults-
group-suffix=_other, mysqld also reads the [mysqld_other] group.

845

Server Command Options

For additional information about this and other option-file options, see Section 6.2.2.3, “Command-
Line Options that Affect Option-File Handling”.

• --early-plugin-load=plugin_list

Command-Line Format

--early-plugin-load=plugin_list

Type

Default Value

String

empty string

This option tells the server which plugins to load before loading mandatory built-in plugins and
before storage engine initialization. Early loading is supported only for plugins compiled with
PLUGIN_OPT_ALLOW_EARLY. If multiple --early-plugin-load options are given, only the last
one applies.

The option value is a semicolon-separated list of plugin_library and name=plugin_library
values. Each plugin_library is the name of a library file that contains plugin code, and each
name is the name of a plugin to load. If a plugin library is named without any preceding plugin name,
the server loads all plugins in the library. With a preceding plugin name, the server loads only the
named plugin from the library. The server looks for plugin library files in the directory named by the
plugin_dir system variable.

For example, if plugins named myplug1 and myplug2 are contained in the plugin library files
myplug1.so and myplug2.so, use this option to perform an early plugin load:

mysqld --early-plugin-load="myplug1=myplug1.so;myplug2=myplug2.so"

Quotes surround the argument value because otherwise some command interpreters interpret
semicolon (;) as a special character. (For example, Unix shells treat it as a command terminator.)

Each named plugin is loaded early for a single invocation of mysqld only. After a restart, the plugin
is not loaded early unless --early-plugin-load is used again.

If the server is started using --initialize or --initialize-insecure, plugins specified by --
early-plugin-load are not loaded.

If the server is run with --help, plugins specified by --early-plugin-load are loaded but not
initialized. This behavior ensures that plugin options are displayed in the help message.

InnoDB tablespace encryption relies on the MySQL Keyring for encryption key management, and
the keyring plugin to be used must be loaded prior to storage engine initialization to facilitate InnoDB
recovery for encrypted tables. For example, administrators who want the keyring_file plugin
loaded at startup should use --early-plugin-load with the appropriate option value (such as
keyring_file.so on Unix and Unix-like systems or keyring_file.dll on Windows).

For information about InnoDB tablespace encryption, see Section 17.13, “InnoDB Data-at-Rest
Encryption”. For general information about plugin loading, see Section 7.6.1, “Installing and
Uninstalling Plugins”.

Note

For MySQL Keyring, this option is used only when the keystore is managed
with a keyring plugin. If keystore management uses a keyring component
rather than a plugin, specify component loading using a manifest file; see
Section 8.4.4.2, “Keyring Component Installation”.

• --exit-info[=flags], -T [flags]

Command-Line Format

--exit-info[=flags]

846

Server Command Options

Type

Integer

This is a bitmask of different flags that you can use for debugging the mysqld server. Do not use this
option unless you know exactly what it does!

• --external-locking

Command-Line Format

--external-locking[={OFF|ON}]

Type

Default Value

Boolean

OFF

Enable external locking (system locking), which is disabled by default. If you use this option on a
system on which lockd does not fully work (such as Linux), it is easy for mysqld to deadlock.

To disable external locking explicitly, use --skip-external-locking.

External locking affects only MyISAM table access. For more information, including conditions under
which it can and cannot be used, see Section 10.11.5, “External Locking”.

• --flush

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--flush[={OFF|ON}]

flush

Global

Yes

No

Boolean

OFF

Flush (synchronize) all changes to disk after each SQL statement. Normally, MySQL does a write
of all changes to disk only after each SQL statement and lets the operating system handle the
synchronizing to disk. See Section B.3.3.3, “What to Do If MySQL Keeps Crashing”.

Note

If --flush is specified, the value of flush_time does not matter and
changes to flush_time have no effect on flush behavior.

• --gdb

Command-Line Format

--gdb[={OFF|ON}]

Type

Default Value

Boolean

OFF

Install an interrupt handler for SIGINT (needed to stop mysqld with ^C to set breakpoints) and
disable stack tracing and core file handling. See Section 7.9.1.4, “Debugging mysqld under gdb”.

On Windows, this option also suppresses the forking that is used to implement the RESTART
statement: Forking enables one process to act as a monitor to the other, which acts as the server.
However, forking makes determining the server process to attach to for debugging more difficult, so
starting the server with --gdb suppresses forking. For a server started with this option, RESTART
simply exits and does not restart.

In non-debug settings, --no-monitor may be used to suppress forking the monitor process.

• --initialize, -I

847

Server Command Options

Command-Line Format

--initialize[={OFF|ON}]

Type

Default Value

Boolean

OFF

This option is used to initialize a MySQL installation by creating the data directory and populating the
tables in the mysql system schema. For more information, see Section 2.9.1, “Initializing the Data
Directory”.

This option limits the effects of, or is not compatible with, a number of other startup options for the
MySQL server. Some of the most common issues of this sort are noted here:

• We strongly recommend, when initializing the data directory with --initialize, that you specify

no additional options other than --datadir, other options used for setting directory locations
such as --basedir, and possibly --user, if required. Options for the running MySQL server can
be specified when starting it once initialization has been completed and mysqld has shut down.
This also applies when using --initialize-insecure instead of --initialize.

• When the server is started with --initialize, some functionality is unavailable that limits the

statements permitted in any file named by the init_file system variable. For more information,
see the description of that variable. In addition, the disabled_storage_engines system
variable has no effect.

• The --ndbcluster option is ignored when used together with --initialize.

• --initialize is mutually exclusive with --bootstrap and --daemonize.

The items in the preceding list also apply when initializing the server using the --initialize-
insecure option.

• --initialize-insecure

Command-Line Format

--initialize-insecure[={OFF|ON}]

Type

Default Value

Boolean

OFF

This option is used to initialize a MySQL installation by creating the data directory and populating the
tables in the mysql system schema. This option implies --initialize, and the same restrictions
and limitations apply; for more information, see the description of that option, and Section 2.9.1,
“Initializing the Data Directory”.

Warning

This option creates a MySQL root user with an empty password, which
is insecure. For this reason, do not use it in production without setting this
password manually. See Post-Initialization root Password Assignment, for
information about how to do this.

• --innodb-xxx

Set an option for the InnoDB storage engine. The InnoDB options are listed in Section 17.14,
“InnoDB Startup Options and System Variables”.

• --install [service_name]

Command-Line Format

--install [service_name]

848

Server Command Options

Platform Specific

Windows

(Windows only) Install the server as a Windows service that starts automatically during Windows
startup. The default service name is MySQL if no service_name value is given. For more
information, see Section 2.3.4.8, “Starting MySQL as a Windows Service”.

Note

If the server is started with the --defaults-file and --install options,
--install must be first.

• --install-manual [service_name]

Command-Line Format

Platform Specific

--install-manual [service_name]

Windows

(Windows only) Install the server as a Windows service that must be started manually. It does not
start automatically during Windows startup. The default service name is MySQL if no service_name
value is given. For more information, see Section 2.3.4.8, “Starting MySQL as a Windows Service”.

Note

If the server is started with the --defaults-file and --install-manual
options, --install-manual must be first.

• --language=lang_name, -L lang_name

Command-Line Format

--language=name

Deprecated

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Yes; use lc-messages-dir instead

language

Global

No

No

Directory name

/usr/local/mysql/share/mysql/
english/

The language to use for error messages. lang_name can be given as the language name or as the
full path name to the directory where the language files are installed. See Section 12.12, “Setting the
Error Message Language”.

--lc-messages-dir and --lc-messages should be used rather than --language, which
is deprecated (and handled as a synonym for --lc-messages-dir). You should expect the --
language option to be removed in a future MySQL release.

• --large-pages

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Platform Specific

Type

--large-pages[={OFF|ON}]

large_pages

Global

No

No

Linux

Boolean

849

Server Command Options

Default Value

OFF

Some hardware/operating system architectures support memory pages greater than the default
(usually 4KB). The actual implementation of this support depends on the underlying hardware and
operating system. Applications that perform a lot of memory accesses may obtain performance
improvements by using large pages due to reduced Translation Lookaside Buffer (TLB) misses.

MySQL supports the Linux implementation of large page support (which is called HugeTLB in Linux).
See Section 10.12.3.3, “Enabling Large Page Support”. For Solaris support of large pages, see the
description of the --super-large-pages option.

--large-pages is disabled by default.

• --lc-messages=locale_name

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--lc-messages=name

lc_messages

Global, Session

Yes

No

String

en_US

The locale to use for error messages. The default is en_US. The server converts the argument to a
language name and combines it with the value of --lc-messages-dir to produce the location for
the error message file. See Section 12.12, “Setting the Error Message Language”.

• --lc-messages-dir=dir_name

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

--lc-messages-dir=dir_name

lc_messages_dir

Global

No

No

Directory name

The directory where error messages are located. The server uses the value together with the value
of --lc-messages to produce the location for the error message file. See Section 12.12, “Setting
the Error Message Language”.

• --local-service

Command-Line Format

--local-service

(Windows only) A --local-service option following the service name causes the server to
run using the LocalService Windows account that has limited system privileges. If both --
defaults-file and --local-service are given following the service name, they can be in any
order. See Section 2.3.4.8, “Starting MySQL as a Windows Service”.

• --log-error[=file_name]

Command-Line Format

--log-error[=file_name]

System Variable

Scope

log_error

Global

850

Server Command Options

Dynamic

SET_VAR Hint Applies

Type

No

No

File name

Set the default error log destination to the named file. This affects log sinks that base their own
output destination on the default destination. See Section 7.4.2, “The Error Log”.

If the option names no file, the default error log destination on Unix and Unix-like systems is a file
named host_name.err in the data directory. The default destination on Windows is the same,
unless the --pid-file option is specified. In that case, the file name is the PID file base name with
a suffix of .err in the data directory.

If the option names a file, the default destination is that file (with an .err suffix added if the name
has no suffix), located under the data directory unless an absolute path name is given to specify a
different location.

If error log output cannot be redirected to the error log file, an error occurs and startup fails.

On Windows, --console takes precedence over --log-error if both are given. In this case, the
default error log destination is the console rather than a file.

• --log-isam[=file_name]

Command-Line Format

--log-isam[=file_name]

Type

File name

Log all MyISAM changes to this file (used only when debugging MyISAM).

• --log-raw

Command-Line Format

--log-raw[={OFF|ON}]

System Variable (≥ 8.0.19)
Scope (≥ 8.0.19)
Dynamic (≥ 8.0.19)
SET_VAR Hint Applies (≥ 8.0.19)
Type

Default Value

log_raw

Global

Yes

No

Boolean

OFF

Passwords in certain statements written to the general query log, slow query log, and binary log are
rewritten by the server not to occur literally in plain text. Password rewriting can be suppressed for
the general query log by starting the server with the --log-raw option. This option may be useful
for diagnostic purposes, to see the exact text of statements as received by the server, but for security
reasons is not recommended for production use.

If a query rewrite plugin is installed, the --log-raw option affects statement logging as follows:

• Without --log-raw, the server logs the statement returned by the query rewrite plugin. This may

differ from the statement as received.

• With --log-raw, the server logs the original statement as received.

For more information, see Section 8.1.2.3, “Passwords and Logging”.

• --log-short-format

Command-Line Format

--log-short-format[={OFF|ON}]

851

Server Command Options

Type

Default Value

Boolean

OFF

Log less information to the slow query log, if it has been activated.

• --log-tc=file_name

Command-Line Format

--log-tc=file_name

Type

Default Value

File name

tc.log

The name of the memory-mapped transaction coordinator log file (for XA transactions that affect
multiple storage engines when the binary log is disabled). The default name is tc.log. The file is
created under the data directory if not given as a full path name. This option is unused.

• --log-tc-size=size

Command-Line Format

Type

Default Value

Minimum Value

--log-tc-size=#

Integer

6 * page size

6 * page size

Maximum Value (64-bit platforms)

18446744073709551615

Maximum Value (32-bit platforms)

4294967295

The size in bytes of the memory-mapped transaction coordinator log. The default and minimum
values are 6 times the page size, and the value must be a multiple of the page size.

• --memlock

Command-Line Format

--memlock[={OFF|ON}]

Type

Default Value

Boolean

OFF

Lock the mysqld process in memory. This option might help if you have a problem where the
operating system is causing mysqld to swap to disk.

--memlock works on systems that support the mlockall() system call; this includes Solaris,
most Linux distributions that use a 2.4 or higher kernel, and perhaps other Unix systems. On Linux

852

Server Command Options

systems, you can tell whether or not mlockall() (and thus this option) is supported by checking to
see whether or not it is defined in the system mman.h file, like this:

$> grep mlockall /usr/include/sys/mman.h

If mlockall() is supported, you should see in the output of the previous command something like
the following:

extern int mlockall (int __flags) __THROW;

Important

Use of this option may require you to run the server as root, which, for
reasons of security, is normally not a good idea. See Section 8.1.5, “How to
Run MySQL as a Normal User”.

On Linux and perhaps other systems, you can avoid the need to run the
server as root by changing the limits.conf file. See the notes regarding
the memlock limit in Section 10.12.3.3, “Enabling Large Page Support”.

You must not use this option on a system that does not support the
mlockall() system call; if you do so, mysqld is very likely to exit as soon
as you try to start it.

• --myisam-block-size=N

Command-Line Format

--myisam-block-size=#

Type

Default Value

Minimum Value

Maximum Value

Integer

1024

1024

16384

The block size to be used for MyISAM index pages.

• --no-defaults

Do not read any option files. If program startup fails due to reading unknown options from an option
file, --no-defaults can be used to prevent them from being read. This must be the first option on
the command line if it is used.

For additional information about this and other option-file options, see Section 6.2.2.3, “Command-
Line Options that Affect Option-File Handling”.

• --no-dd-upgrade

Command-Line Format

--no-dd-upgrade[={OFF|ON}]

Deprecated

Type

Default Value

Note

8.0.16

Boolean

OFF

This option is deprecated as of MySQL 8.0.16. It is superseded by the --
upgrade option, which provides finer control over data dictionary and server
upgrade behavior.

Prevent automatic upgrade of the data dictionary tables during the MySQL server startup process.
This option is typically used when starting the MySQL server following an in-place upgrade of an

853

Server Command Options

existing installation to a newer MySQL version, which may include changes to data dictionary table
definitions.

When --no-dd-upgrade is specified, and the server finds that its expected version of the data
dictionary differs from the version stored in the data dictionary itself, startup fails with an error stating
that data dictionary upgrade is prohibited;

[ERROR] [MY-011091] [Server] Data dictionary upgrade prohibited by the
command line option '--no_dd_upgrade'.
[ERROR] [MY-010020] [Server] Data Dictionary initialization failed.

During a normal startup, the data dictionary version of the server is compared to the version stored
in the data dictionary to determine whether data dictionary table definitions should be upgraded.
If an upgrade is necessary and supported, the server creates data dictionary tables with updated
definitions, copies persisted metadata to the new tables, atomically replaces the old tables with the
new ones, and reinitializes the data dictionary. If an upgrade is not necessary, startup continues
without updating data dictionary tables.

• --no-monitor

Command-Line Format

--no-monitor[={OFF|ON}]

Introduced

Platform Specific

Type

Default Value

8.0.12

Windows

Boolean

OFF

(Windows only). This option suppresses the forking that is used to implement the RESTART
statement: Forking enables one process to act as a monitor to the other, which acts as the server.
For a server started with this option, RESTART simply exits and does not restart.

--no-monitor is not available prior to MySQL 8.0.12. The --gdb option can be used as a
workaround.

• --old-style-user-limits

Command-Line Format

--old-style-user-limits[={OFF|ON}]

Deprecated

Type

Default Value

8.0.30

Boolean

OFF

Enable old-style user limits. (Before MySQL 5.0.3, account resource limits were counted separately
for each host from which a user connected rather than per account row in the user table.) See
Section 8.2.21, “Setting Account Resource Limits”.

This option is deprecated, and, as of MySQL 8.0.30, using it on the command line or in an option
file causes MySQL to raise a warning. Expect this option to be removed in a future release; you
should check your applications now for use of --old-style-user-limits and remove any
dependencies they might have on it, before this happens.

• --performance-schema-xxx

Configure a Performance Schema option. For details, see Section 29.14, “Performance Schema
Command Options”.

• --plugin-load=plugin_list

854

Command-Line Format

--plugin-load=plugin_list

Server Command Options

Type

String

This option tells the server to load the named plugins at startup. If multiple --plugin-load options
are given, only the last one applies. Additional plugins to load may be specified using --plugin-
load-add options.

The option value is a semicolon-separated list of plugin_library and name=plugin_library
values. Each plugin_library is the name of a library file that contains plugin code, and each
name is the name of a plugin to load. If a plugin library is named without any preceding plugin name,
the server loads all plugins in the library. With a preceding plugin name, the server loads only the
named plugin from the library. The server looks for plugin library files in the directory named by the
plugin_dir system variable.

For example, if plugins named myplug1 and myplug2 are contained in the plugin library files
myplug1.so and myplug2.so, use this option to perform an early plugin load:

mysqld --plugin-load="myplug1=myplug1.so;myplug2=myplug2.so"

Quotes surround the argument value because otherwise some command interpreters interpret
semicolon (;) as a special character. (For example, Unix shells treat it as a command terminator.)

Each named plugin is loaded for a single invocation of mysqld only. After a restart, the plugin is
not loaded unless --plugin-load is used again. This is in contrast to INSTALL PLUGIN, which
adds an entry to the mysql.plugins table to cause the plugin to be loaded for every normal server
startup.

During the normal startup sequence, the server determines which plugins to load by reading the
mysql.plugins system table. If the server is started with the --skip-grant-tables option,
plugins registered in the mysql.plugins table are not loaded and are unavailable. --plugin-
load enables plugins to be loaded even when --skip-grant-tables is given. --plugin-load
also enables plugins to be loaded at startup that cannot be loaded at runtime.

This option does not set a corresponding system variable. The output of SHOW PLUGINS provides
information about loaded plugins. More detailed information can be found in the Information Schema
PLUGINS table. See Section 7.6.2, “Obtaining Server Plugin Information”.

For additional information about plugin loading, see Section 7.6.1, “Installing and Uninstalling
Plugins”.

• --plugin-load-add=plugin_list

Command-Line Format

--plugin-load-add=plugin_list

Type

String

This option complements the --plugin-load option. --plugin-load-add adds a plugin or
plugins to the set of plugins to be loaded at startup. The argument format is the same as for --

855

Server Command Options

plugin-load. --plugin-load-add can be used to avoid specifying a large set of plugins as a
single long unwieldy --plugin-load argument.

--plugin-load-add can be given in the absence of --plugin-load, but any instance of --
plugin-load-add that appears before --plugin-load. has no effect because --plugin-load
resets the set of plugins to load. In other words, these options:

--plugin-load=x --plugin-load-add=y

are equivalent to this option:

--plugin-load="x;y"

But these options:

--plugin-load-add=y --plugin-load=x

are equivalent to this option:

--plugin-load=x

This option does not set a corresponding system variable. The output of SHOW PLUGINS provides
information about loaded plugins. More detailed information can be found in the Information Schema
PLUGINS table. See Section 7.6.2, “Obtaining Server Plugin Information”.

For additional information about plugin loading, see Section 7.6.1, “Installing and Uninstalling
Plugins”.

• --plugin-xxx

Specifies an option that pertains to a server plugin. For example, many storage engines can be built
as plugins, and for such engines, options for them can be specified with a --plugin prefix. Thus,
the --innodb-file-per-table option for InnoDB can be specified as --plugin-innodb-
file-per-table.

For boolean options that can be enabled or disabled, the --skip prefix and other alternative formats
are supported as well (see Section 6.2.2.4, “Program Option Modifiers”). For example, --skip-
plugin-innodb-file-per-table disables innodb-file-per-table.

The rationale for the --plugin prefix is that it enables plugin options to be specified unambiguously
if there is a name conflict with a built-in server option. For example, were a plugin writer to name a
plugin “sql” and implement a “mode” option, the option name might be --sql-mode, which would
conflict with the built-in option of the same name. In such cases, references to the conflicting name
are resolved in favor of the built-in option. To avoid the ambiguity, users can specify the plugin option
as --plugin-sql-mode. Use of the --plugin prefix for plugin options is recommended to avoid
any question of ambiguity.

• --port=port_num, -P port_num

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

856

--port=port_num

port

Global

No

No

Integer

3306

0

Server Command Options

Maximum Value

65535

The port number to use when listening for TCP/IP connections. On Unix and Unix-like systems, the
port number must be 1024 or higher unless the server is started by the root operating system user.
Setting this option to 0 causes the default value to be used.

• --port-open-timeout=num

Command-Line Format

--port-open-timeout=#

Type

Default Value

Integer

0

On some systems, when the server is stopped, the TCP/IP port might not become available
immediately. If the server is restarted quickly afterward, its attempt to reopen the port can fail. This
option indicates how many seconds the server should wait for the TCP/IP port to become free if it
cannot be opened. The default is not to wait.

• --print-defaults

Print the program name and all options that it gets from option files. Password values are masked.
This must be the first option on the command line if it is used, except that it may be used immediately
after --defaults-file or --defaults-extra-file.

For additional information about this and other option-file options, see Section 6.2.2.3, “Command-
Line Options that Affect Option-File Handling”.

• --remove [service_name]

Command-Line Format

Platform Specific

--remove [service_name]

Windows

(Windows only) Remove a MySQL Windows service. The default service name is MySQL if no
service_name value is given. For more information, see Section 2.3.4.8, “Starting MySQL as a
Windows Service”.

• --safe-user-create

Command-Line Format

--safe-user-create[={OFF|ON}]

Deprecated

Type

Default Value

Yes

Boolean

OFF

This option is deprecated, and ignored as of MySQL 8.0.11. For related information, see Server
Changes.

If this option is enabled, a user cannot create new MySQL users by using the GRANT statement
unless the user has the INSERT privilege for the mysql.user system table or any column in the
table. If you want a user to have the ability to create new users that have those privileges that the
user has the right to grant, you should grant the user the following privilege:

GRANT INSERT(user) ON mysql.user TO 'user_name'@'host_name';

This ensures that the user cannot change any privilege columns directly, but has to use the GRANT
statement to give privileges to other users.

• --skip-grant-tables

Command-Line Format

--skip-grant-tables[={OFF|ON}]

857

Server Command Options

Type

Default Value

Boolean

OFF

This option affects the server startup sequence:

• --skip-grant-tables causes the server not to read the grant tables in the mysql system

schema, and thus to start without using the privilege system at all. This gives anyone with access
to the server unrestricted access to all databases.

Because starting the server with --skip-grant-tables disables authentication checks, the
server also disables remote connections in that case by enabling skip_networking.

To cause a server started with --skip-grant-tables to load the grant tables at runtime,
perform a privilege-flushing operation, which can be done in these ways:

• Issue a MySQL FLUSH PRIVILEGES statement after connecting to the server.

• Execute a mysqladmin flush-privileges or mysqladmin reload command from the

command line.

Privilege flushing might also occur implicitly as a result of other actions performed after startup,
thus causing the server to start using the grant tables. For example, the server flushes the
privileges if it performs an upgrade during the startup sequence.

• --skip-grant-tables disables failed-login tracking and temporary account locking because
those capabilities depend on the grant tables. See Section 8.2.15, “Password Management”.

• --skip-grant-tables causes the server not to load certain other objects registered in the data

dictionary or the mysql system schema:

• Scheduled events installed using CREATE EVENT and registered in the events data dictionary

table.

• Plugins installed using INSTALL PLUGIN and registered in the mysql.plugin system table.

To cause plugins to be loaded even when using --skip-grant-tables, use the --plugin-
load or --plugin-load-add option.

• Loadable functions installed using CREATE FUNCTION and registered in the mysql.func

system table.

--skip-grant-tables does not suppress loading during startup of components.

• --skip-grant-tables causes the disabled_storage_engines system variable to have no

effect.

• --skip-host-cache

Command-Line Format

Deprecated

--skip-host-cache

8.0.30

Disable use of the internal host cache for faster name-to-IP resolution. With the cache disabled, the
server performs a DNS lookup every time a client connects.

Use of --skip-host-cache is similar to setting the host_cache_size system variable to 0, but
host_cache_size is more flexible because it can also be used to resize, enable, or disable the
host cache at runtime, not just at server startup.

Beginning with MySQL 8.0.30, this option is deprecated; you should use SET GLOBAL
host_cache_size = 0 instead.

858

Server Command Options

Starting the server with --skip-host-cache does not prevent runtime changes to the value
of host_cache_size, but such changes have no effect and the cache is not re-enabled even if
host_cache_size is set larger than 0.

For more information about how the host cache works, see Section 7.1.12.3, “DNS Lookups and the
Host Cache”.

•   --skip-innodb

Disable the InnoDB storage engine. In this case, because the default storage engine is InnoDB,
the server does not start unless you also use --default-storage-engine and --default-
tmp-storage-engine to set the default to some other engine for both permanent and TEMPORARY
tables.

The InnoDB storage engine cannot be disabled, and the --skip-innodb option is deprecated
and has no effect. Its use results in a warning. Expect this option to be removed in a future MySQL
release.

• --skip-new

Command-Line Format

Deprecated

--skip-new

8.0.35

This option disables (what used to be considered) new, possibly unsafe behaviors. It
results in these settings: delay_key_write=OFF, concurrent_insert=NEVER,
automatic_sp_privileges=OFF. It also causes OPTIMIZE TABLE to be mapped to ALTER
TABLE for storage engines for which OPTIMIZE TABLE is not supported.

This option is deprecated as of MySQL 8.0.35, and is subject to removal in a future release.

• --skip-show-database

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--skip-show-database

skip_show_database

Global

No

No

Boolean

OFF

This option sets the skip_show_database system variable that controls who is permitted to use
the SHOW DATABASES statement. See Section 7.1.8, “Server System Variables”.

• --skip-stack-trace

Command-Line Format

--skip-stack-trace

Do not write stack traces. This option is useful when you are running mysqld under a debugger.
On some systems, you also must use this option to get a core file. See Section 7.9, “Debugging
MySQL”.

• --slow-start-timeout=timeout

Command-Line Format

--slow-start-timeout=#

Type

Integer

859

Server Command Options

Default Value

15000

This option controls the Windows service control manager's service start timeout. The value is the
maximum number of milliseconds that the service control manager waits before trying to kill the
windows service during startup. The default value is 15000 (15 seconds). If the MySQL service takes
too long to start, you may need to increase this value. A value of 0 means there is no timeout.

• --socket=path

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value (Windows)

Default Value (Other)

--socket={file_name|pipe_name}

socket

Global

No

No

String

MySQL

/tmp/mysql.sock

On Unix, this option specifies the Unix socket file to use when listening for local connections. The
default value is /tmp/mysql.sock. If this option is given, the server creates the file in the data
directory unless an absolute path name is given to specify a different directory. On Windows, the
option specifies the pipe name to use when listening for local connections that use a named pipe.
The default value is MySQL (not case-sensitive).

• --sql-mode=value[,value[,value...]]

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Valid Values

860

--sql-mode=name

sql_mode

Global, Session

Yes

Yes

Set

ONLY_FULL_GROUP_BY
STRICT_TRANS_TABLES
NO_ZERO_IN_DATE NO_ZERO_DATE
ERROR_FOR_DIVISION_BY_ZERO
NO_ENGINE_SUBSTITUTION

ALLOW_INVALID_DATES

ANSI_QUOTES

ERROR_FOR_DIVISION_BY_ZERO

HIGH_NOT_PRECEDENCE

IGNORE_SPACE

NO_AUTO_VALUE_ON_ZERO

NO_BACKSLASH_ESCAPES

NO_DIR_IN_CREATE

NO_ENGINE_SUBSTITUTION

Server Command Options

NO_UNSIGNED_SUBTRACTION

NO_ZERO_DATE

NO_ZERO_IN_DATE

ONLY_FULL_GROUP_BY

PAD_CHAR_TO_FULL_LENGTH

PIPES_AS_CONCAT

REAL_AS_FLOAT

STRICT_ALL_TABLES

STRICT_TRANS_TABLES

TIME_TRUNCATE_FRACTIONAL

Set the SQL mode. See Section 7.1.11, “Server SQL Modes”.

Note

MySQL installation programs may configure the SQL mode during the
installation process.

If the SQL mode differs from the default or from what you expect, check for a
setting in an option file that the server reads at startup.

• --ssl, --skip-ssl

Command-Line Format

--ssl[={OFF|ON}]

Deprecated

Disabled by

Type

Default Value

8.0.26

skip-ssl

Boolean

ON

The --ssl option specifies that the server permits but does not require encrypted connections on
the main connection interface. This option is enabled by default.

A similar option, --admin-ssl, is like the --ssl, except that it applies to the administrative
connection interface rather than the main connection interface. For information about these
interfaces, see Section 7.1.12.1, “Connection Interfaces”.

--ssl can be specified in negated form as --skip-ssl or a synonym (--ssl=OFF, --disable-
ssl). In this case, the option specifies that the server does not permit encrypted connections,
regardless of the settings of the tls_xxx and ssl_xxx system variables.

The --ssl option has an effect only at server startup on whether the server supports encrypted
connections. It is ignored and has no effect on the operation of ALTER INSTANCE RELOAD TLS
at runtime. For example, you can use --ssl=OFF to start the server with encrypted connections
disabled, then reconfigure TLS and execute ALTER INSTANCE RELOAD TLS to enable encrypted
connections at runtime.

For more information about configuring whether the server permits clients to connect using SSL
and indicating where to find SSL keys and certificates, see Section 8.3.1, “Configuring MySQL to
Use Encrypted Connections”, which also describes server capabilities for certificate and key file

861

Server Command Options

autogeneration and autodiscovery. Consider setting at least the ssl_cert and ssl_key system
variables on the server side and the --ssl-ca (or --ssl-capath) option on the client side.

Because support for encrypted connections is enabled by default, it is normally unnecessary to
specify --ssl. As of MySQL 8.0.26, --ssl is deprecated and subject to removal in a future MySQL
version. If it is desired to disable encrypted connections, that can be done without specifying --
ssl in negated form. Set the tls_version system variable to the empty value to indicate that no
TLS versions are supported. For example, these lines in the server my.cnf file disable encrypted
connections:

[mysqld]
tls_version=''

• --standalone

Command-Line Format

Platform Specific

--standalone

Windows

Available on Windows only; instructs the MySQL server not to run as a service.

• --super-large-pages

Command-Line Format

--super-large-pages[={OFF|ON}]

Platform Specific

Type

Default Value

Solaris

Boolean

OFF

Standard use of large pages in MySQL attempts to use the largest size supported, up to 4MB. Under
Solaris, a “super large pages” feature enables uses of pages up to 256MB. This feature is available
for recent SPARC platforms. It can be enabled or disabled by using the --super-large-pages or
--skip-super-large-pages option.

• --symbolic-links, --skip-symbolic-links

Command-Line Format

--symbolic-links[={OFF|ON}]

Deprecated

Type

Default Value

Yes

Boolean

OFF

Enable or disable symbolic link support. On Unix, enabling symbolic links means that you can link a
MyISAM index file or data file to another directory with the INDEX DIRECTORY or DATA DIRECTORY
option of the CREATE TABLE statement. If you delete or rename the table, the files that its symbolic
links point to also are deleted or renamed. See Section 10.12.2.2, “Using Symbolic Links for MyISAM
Tables on Unix”.

Note

Symbolic link support, along with the --symbolic-links option that
controls it, is deprecated; you should expect it to be removed in a future
version of MySQL. In addition, the option is disabled by default. The related
have_symlink system variable also is deprecated; expect it to be removed
in a future version of MySQL.

This option has no meaning on Windows.

862

Server Command Options

• --sysdate-is-now

Command-Line Format

--sysdate-is-now[={OFF|ON}]

Type

Default Value

Boolean

OFF

SYSDATE() by default returns the time at which it executes, not the time at which the statement
in which it occurs begins executing. This differs from the behavior of NOW(). This option causes
SYSDATE() to be a synonym for NOW(). For information about the implications for binary logging
and replication, see the description for SYSDATE() in Section 14.7, “Date and Time Functions” and
for SET TIMESTAMP in Section 7.1.8, “Server System Variables”.

• --tc-heuristic-recover={COMMIT|ROLLBACK}

Command-Line Format

--tc-heuristic-recover=name

Type

Default Value

Valid Values

Enumeration

OFF

OFF

COMMIT

ROLLBACK

The decision to use in a manual heuristic recovery.

If a --tc-heuristic-recover option is specified, the server exits regardless of whether manual
heuristic recovery is successful.

On systems with more than one storage engine capable of two-phase commit, the ROLLBACK option
is not safe and causes recovery to halt with the following error:

[ERROR] --tc-heuristic-recover rollback
strategy is not safe on systems with more than one 2-phase-commit-capable
storage engine. Aborting crash recovery.

• --transaction-isolation=level

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Valid Values

--transaction-isolation=name

transaction_isolation

Global, Session

Yes

No

Enumeration

REPEATABLE-READ

READ-UNCOMMITTED

READ-COMMITTED

REPEATABLE-READ

863

Server Command Options

SERIALIZABLE

Sets the default transaction isolation level. The level value can be READ-UNCOMMITTED, READ-
COMMITTED, REPEATABLE-READ, or SERIALIZABLE. See Section 15.3.7, “SET TRANSACTION
Statement”.

The default transaction isolation level can also be set at runtime using the SET TRANSACTION
statement or by setting the transaction_isolation system variable.

• --transaction-read-only

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--transaction-read-only[={OFF|ON}]

transaction_read_only

Global, Session

Yes

No

Boolean

OFF

Sets the default transaction access mode. By default, read-only mode is disabled, so the mode is
read/write.

To set the default transaction access mode at runtime, use the SET TRANSACTION statement or
set the transaction_read_only system variable. See Section 15.3.7, “SET TRANSACTION
Statement”.

• --tmpdir=dir_name, -t dir_name

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

--tmpdir=dir_name

tmpdir

Global

No

No

Directory name

The path of the directory to use for creating temporary files. It might be useful if your default /tmp
directory resides on a partition that is too small to hold temporary tables. This option accepts several
paths that are used in round-robin fashion. Paths should be separated by colon characters (:) on
Unix and semicolon characters (;) on Windows.

--tmpdir can be a non-permanent location, such as a directory on a memory-based file system or
a directory that is cleared when the server host restarts. If the MySQL server is acting as a replica,
and you are using a non-permanent location for --tmpdir, consider setting a different temporary
directory for the replica using the replica_load_tmpdir or slave_load_tmpdir system
variable. For a replica, the temporary files used to replicate LOAD DATA statements are stored in this
directory, so with a permanent location they can survive machine restarts, although replication can
now continue after a restart if the temporary files have been removed.

For more information about the storage location of temporary files, see Section B.3.3.5, “Where
MySQL Stores Temporary Files”.

• --upgrade=value

864

Command-Line Format

--upgrade=value

Introduced

Type

Default Value

Valid Values

Server Command Options

8.0.16

Enumeration

AUTO

AUTO

NONE

MINIMAL

FORCE

This option controls whether and how the server performs an automatic upgrade at startup.
Automatic upgrade involves two steps:

• Step 1: Data dictionary upgrade.

This step upgrades:

• The data dictionary tables in the mysql schema. If the actual data dictionary version is lower
than the current expected version, the server upgrades the data dictionary. If it cannot, or is
prevented from doing so, the server cannot run.

• The Performance Schema and INFORMATION_SCHEMA.

• Step 2: Server upgrade.

This step comprises all other upgrade tasks. If the existing installation data has a lower MySQL
version than the server expects, it must be upgraded:

• The system tables in the mysql schema (the remaining non-data dictionary tables).

• The sys schema.

• User schemas.

For details about upgrade steps 1 and 2, see Section 3.4, “What the MySQL Upgrade Process
Upgrades”.

These --upgrade option values are permitted:

• AUTO

The server performs an automatic upgrade of anything it finds to be out of date (steps 1 and 2).
This is the default action if --upgrade is not specified explicitly.

• NONE

The server performs no automatic upgrade steps during the startup process (skips steps 1 and 2).
Because this option value prevents a data dictionary upgrade, the server exits with an error if the
data dictionary is found to be out of date:

[ERROR] [MY-013381] [Server] Server shutting down because upgrade is
required, yet prohibited by the command line option '--upgrade=NONE'.
[ERROR] [MY-010334] [Server] Failed to initialize DD Storage Engine
[ERROR] [MY-010020] [Server] Data Dictionary initialization failed.

• MINIMAL

The server upgrades the data dictionary, the Performance Schema, and the
INFORMATION_SCHEMA, if necessary (step 1). Note that following an upgrade with this option,

865

Server Command Options

Group Replication cannot be started, because system tables on which the replication internals
depend are not updated, and reduced functionality might also be apparent in other areas.

• FORCE

The server upgrades the data dictionary, the Performance Schema, and the
INFORMATION_SCHEMA, if necessary (step 1). In addition, the server forces an upgrade of
everything else (step 2). Expect server startup to take longer with this option because the server
checks all objects in all schemas.

FORCE is useful to force step 2 actions to be performed if the server thinks they are not necessary.
For example, you may believe that a system table is missing or has become damaged and want to
force a repair.

The following table summarizes the actions taken by the server for each option value.

Option Value

Server Performs Step 1?

Server Performs Step 2?

AUTO

NONE

MINIMAL

FORCE

If necessary

No

If necessary

If necessary

If necessary

No

No

Yes

• --user={user_name|user_id}, -u {user_name|user_id}

Command-Line Format

Type

--user=name

String

Run the mysqld server as the user having the name user_name or the numeric user ID user_id.
(“User” in this context refers to a system login account, not a MySQL user listed in the grant tables.)

This option is mandatory when starting mysqld as root. The server changes its user ID during its
startup sequence, causing it to run as that particular user rather than as root. See Section 8.1.1,
“Security Guidelines”.

To avoid a possible security hole where a user adds a --user=root option to a my.cnf file
(thus causing the server to run as root), mysqld uses only the first --user option specified
and produces a warning if there are multiple --user options. Options in /etc/my.cnf and
$MYSQL_HOME/my.cnf are processed before command-line options, so it is recommended that you
put a --user option in /etc/my.cnf and specify a value other than root. The option in /etc/
my.cnf is found before any other --user options, which ensures that the server runs as a user
other than root, and that a warning results if any other --user option is found.

• --validate-config

Command-Line Format

--validate-config[={OFF|ON}]

Introduced

Type

Default Value

8.0.16

Boolean

OFF

Validate the server startup configuration. If no errors are found, the server terminates with an
exit code of 0. If an error is found, the server displays a diagnostic message and terminates with
an exit code of 1. Warning and information messages may also be displayed, depending on the
log_error_verbosity value, but do not produce immediate validation termination or an exit code
of 1. For more information, see Section 7.1.3, “Server Configuration Validation”.

866

Server System Variables

• --validate-user-plugins[={OFF|ON}]

Command-Line Format

--validate-user-plugins[={OFF|ON}]

Type

Default Value

Boolean

ON

If this option is enabled (the default), the server checks each user account and produces a warning if
conditions are found that would make the account unusable:

• The account requires an authentication plugin that is not loaded.

• The account requires the sha256_password or caching_sha2_password authentication

plugin but the server was started with neither SSL nor RSA enabled as required by the plugin.

Enabling --validate-user-plugins slows down server initialization and FLUSH PRIVILEGES.
If you do not require the additional checking, you can disable this option at startup to avoid the
performance decrement.

• --verbose, -v

Use this option with the --help option for detailed help.

• --version, -V

Display version information and exit.

7.1.8 Server System Variables

The MySQL server maintains many system variables that affect its operation. Most system variables
can be set at server startup using options on the command line or in an option file. Most of them can
be changed dynamically at runtime using the SET statement, which enables you to modify operation
of the server without having to stop and restart it. Some variables are read-only, and their values are
determined by the system environment, by how MySQL is installed on the system, or possibly by the
options used to compile MySQL. Most system variables have a default value, but there are exceptions,
including read-only variables. You can also use system variable values in expressions.

Setting a global system variable runtime value normally requires the SYSTEM_VARIABLES_ADMIN
privilege (or the deprecated SUPER privilege). Setting a session system runtime variable value normally
requires no special privileges and can be done by any user, although there are exceptions. For more
information, see Section 7.1.9.1, “System Variable Privileges”

There are several ways to see the names and values of system variables:

• To see the values that a server uses based on its compiled-in defaults and any option files that it

reads, use this command:

mysqld --verbose --help

• To see the values that a server uses based only on its compiled-in defaults, ignoring the settings in

any option files, use this command:

mysqld --no-defaults --verbose --help

• To see the current values used by a running server, use the SHOW VARIABLES statement or the

Performance Schema system variable tables. See Section 29.12.14, “Performance Schema System
Variable Tables”.

This section provides a description of each system variable. For a system variable summary table, see
Section 7.1.5, “Server System Variable Reference”. For more information about manipulation of system
variables, see Section 7.1.9, “Using System Variables”.

For additional system variable information, see these sections:

867

Server System Variables

• Section 7.1.9, “Using System Variables”, discusses the syntax for setting and displaying system

variable values.

• Section 7.1.9.2, “Dynamic System Variables”, lists the variables that can be set at runtime.

• Information on tuning system variables can be found in Section 7.1.1, “Configuring the Server”.

• Section 17.14, “InnoDB Startup Options and System Variables”, lists InnoDB system variables.

• NDB Cluster System Variables, lists system variables which are specific to NDB Cluster.

• For information on server system variables specific to replication, see Section 19.1.6, “Replication

and Binary Logging Options and Variables”.

Note

Some of the following variable descriptions refer to “enabling” or “disabling” a
variable. These variables can be enabled with the SET statement by setting
them to ON or 1, or disabled by setting them to OFF or 0. Boolean variables can
be set at startup to the values ON, TRUE, OFF, and FALSE (not case-sensitive),
as well as 1 and 0. See Section 6.2.2.4, “Program Option Modifiers”.

Some system variables control the size of buffers or caches. For a given buffer, the server might need
to allocate internal data structures. These structures typically are allocated from the total memory
allocated to the buffer, and the amount of space required might be platform dependent. This means
that when you assign a value to a system variable that controls a buffer size, the amount of space
actually available might differ from the value assigned. In some cases, the amount might be less than
the value assigned. It is also possible that the server adjusts a value upward. For example, if you
assign a value of 0 to a variable for which the minimal value is 1024, the server sets the value to 1024.

Values for buffer sizes, lengths, and stack sizes are given in bytes unless otherwise specified.

Note

Some system variable descriptions include a block size, in which case a value
that is not an integer multiple of the stated block size is rounded down to the
next lower multiple of the block size before being stored by the server, that is to
FLOOR(value) * block_size.

Example: Suppose that the block size for a given variable is given as
4096, and you set the value of the variable to 100000 (we assume that the
variable's maximum value is greater than this number). Since 100000 / 4096
= 24.4140625, the server automatically lowers the value to 98304 (24 * 4096)
before storing it.

In some cases, the stated maximum for a variable is the maximum allowed by
the MySQL parser, but is not an exact multiple of the block size. In such cases,
the effective maximum is the next lower multiple of the block size.

Example: A system variable's maxmum value is shown as 4294967295 (232-1),
and its block size is 1024. 4294967295 / 1024 = 4194303.9990234375, so if you
set this variable to its stated maximum, the value actually stored is 4194303 *
1024 = 4294966272.

Some system variables take file name values. Unless otherwise specified, the default file location is
the data directory if the value is a relative path name. To specify the location explicitly, use an absolute
path name. Suppose that the data directory is /var/mysql/data. If a file-valued variable is given as
a relative path name, it is located under /var/mysql/data. If the value is an absolute path name, its
location is as given by the path name.

• activate_all_roles_on_login

868

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Server System Variables

--activate-all-roles-on-login[={OFF|
ON}]

activate_all_roles_on_login

Global

Yes

No

Boolean

OFF

Whether to enable automatic activation of all granted roles when users log in to the server:

• If activate_all_roles_on_login is enabled, the server activates all roles granted to each
account at login time. This takes precedence over default roles specified with SET DEFAULT
ROLE.

• If activate_all_roles_on_login is disabled, the server activates the default roles specified

with SET DEFAULT ROLE, if any, at login time.

Granted roles include those granted explicitly to the user and those named in the
mandatory_roles system variable value.

activate_all_roles_on_login applies only at login time, and at the beginning of execution
for stored programs and views that execute in definer context. To change the active roles within a
session, use SET ROLE. To change the active roles for a stored program, the program body should
execute SET ROLE.

• admin_address

Command-Line Format

--admin-address=addr

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

8.0.14

admin_address

Global

No

No

String

The IP address on which to listen for TCP/IP connections on the administrative network interface
(see Section 7.1.12.1, “Connection Interfaces”). There is no default admin_address value. If this
variable is not specified at startup, the server maintains no administrative interface. The server also
has a bind_address system variable for configuring regular (nonadministrative) client TCP/IP
connections. See Section 7.1.12.1, “Connection Interfaces”.

If admin_address is specified, its value must satisfy these requirements:

• The value must be a single IPv4 address, IPv6 address, or host name.

• The value cannot specify a wildcard address format (*, 0.0.0.0, or ::).

869

Server System Variables

• As of MySQL 8.0.22, the value may include a network namespace specifier.

An IP address can be specified as an IPv4 or IPv6 address. If the value is a host name, the server
resolves the name to an IP address and binds to that address. If a host name resolves to multiple IP
addresses, the server uses the first IPv4 address if there are any, or the first IPv6 address otherwise.

The server treats different types of addresses as follows:

• If the address is an IPv4-mapped address, the server accepts TCP/IP connections for that

address, in either IPv4 or IPv6 format. For example, if the server is bound to ::ffff:127.0.0.1,
clients can connect using --host=127.0.0.1 or --host=::ffff:127.0.0.1.

• If the address is a “regular” IPv4 or IPv6 address (such as 127.0.0.1 or ::1), the server accepts

TCP/IP connections only for that IPv4 or IPv6 address.

These rules apply to specifying a network namespace for an address:

• A network namespace can be specified for an IP address or a host name.

• A network namespace cannot be specified for a wildcard IP address.

• For a given address, the network namespace is optional. If given, it must be specified as a /ns

suffix immediately following the address.

• An address with no /ns suffix uses the host system global namespace. The global namespace is

therefore the default.

• An address with a /ns suffix uses the namespace named ns.

• The host system must support network namespaces and each named namespace must previously

have been set up. Naming a nonexistent namespace produces an error.

For additional information about network namespaces, see Section 7.1.14, “Network Namespace
Support”.

If binding to the address fails, the server produces an error and does not start.

The admin_address system variable is similar to the bind_address system variable that binds
the server to an address for ordinary client connections, but with these differences:

• bind_address permits multiple addresses. admin_address permits a single address.

• bind_address permits wildcard addresses. admin_address does not.

• admin_port

Command-Line Format

--admin-port=port_num

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

870

8.0.14

admin_port

Global

No

No

Integer

33062

0

Server System Variables

Maximum Value

65535

The TCP/IP port number to use for connections on the administrative network interface (see
Section 7.1.12.1, “Connection Interfaces”). Setting this variable to 0 causes the default value to be
used.

Setting admin_port has no effect if admin_address is not specified because in that case the
server maintains no administrative network interface.

• admin_ssl_ca

Command-Line Format

--admin-ssl-ca=file_name

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

8.0.21

admin_ssl_ca

Global

Yes

No

File name

NULL

The admin_ssl_ca system variable is like ssl_ca, except that it applies to the administrative
connection interface rather than the main connection interface. For information about configuring
encryption support for the administrative interface, see Administrative Interface Support for
Encrypted Connections.

• admin_ssl_capath

Command-Line Format

--admin-ssl-capath=dir_name

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

8.0.21

admin_ssl_capath

Global

Yes

No

Directory name

NULL

The admin_ssl_capath system variable is like ssl_capath, except that it applies to the
administrative connection interface rather than the main connection interface. For information about
configuring encryption support for the administrative interface, see Administrative Interface Support
for Encrypted Connections.

• admin_ssl_cert

Command-Line Format

--admin-ssl-cert=file_name

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

8.0.21

admin_ssl_cert

Global

Yes

No

File name

871

Server System Variables

Default Value

NULL

The admin_ssl_cert system variable is like ssl_cert, except that it applies to the administrative
connection interface rather than the main connection interface. For information about configuring
encryption support for the administrative interface, see Administrative Interface Support for
Encrypted Connections.

• admin_ssl_cipher

Command-Line Format

--admin-ssl-cipher=name

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

8.0.21

admin_ssl_cipher

Global

Yes

No

String

NULL

The admin_ssl_cipher system variable is like ssl_cipher, except that it applies to the
administrative connection interface rather than the main connection interface. For information about
configuring encryption support for the administrative interface, see Administrative Interface Support
for Encrypted Connections.

• admin_ssl_crl

Command-Line Format

--admin-ssl-crl=file_name

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

8.0.21

admin_ssl_crl

Global

Yes

No

File name

NULL

The admin_ssl_crl system variable is like ssl_crl, except that it applies to the administrative
connection interface rather than the main connection interface. For information about configuring
encryption support for the administrative interface, see Administrative Interface Support for
Encrypted Connections.

• admin_ssl_crlpath

Command-Line Format

--admin-ssl-crlpath=dir_name

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

872

8.0.21

admin_ssl_crlpath

Global

Yes

No

Directory name

Server System Variables

Default Value

NULL

The admin_ssl_crlpath system variable is like ssl_crlpath, except that it applies to the
administrative connection interface rather than the main connection interface. For information about
configuring encryption support for the administrative interface, see Administrative Interface Support
for Encrypted Connections.

• admin_ssl_key

Command-Line Format

--admin-ssl-key=file_name

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

8.0.21

admin_ssl_key

Global

Yes

No

File name

NULL

The admin_ssl_key system variable is like ssl_key, except that it applies to the administrative
connection interface rather than the main connection interface. For information about configuring
encryption support for the administrative interface, see Administrative Interface Support for
Encrypted Connections.

• admin_tls_ciphersuites

Command-Line Format

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--admin-tls-
ciphersuites=ciphersuite_list

8.0.21

admin_tls_ciphersuites

Global

Yes

No

String

NULL

The admin_tls_ciphersuites system variable is like tls_ciphersuites, except that it
applies to the administrative connection interface rather than the main connection interface. For
information about configuring encryption support for the administrative interface, see Administrative
Interface Support for Encrypted Connections.

• admin_tls_version

Command-Line Format

--admin-tls-version=protocol_list

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value (≥ 8.0.28)

8.0.21

admin_tls_version

Global

Yes

No

String

TLSv1.2,TLSv1.3

873

Server System Variables

Default Value (≥ 8.0.21, ≤ 8.0.27)

TLSv1,TLSv1.1,TLSv1.2,TLSv1.3

The admin_tls_version system variable is like tls_version, except that it applies to the
administrative connection interface rather than the main connection interface. For information about
configuring encryption support for the administrative interface, see Administrative Interface Support
for Encrypted Connections.

Important

• Support for the TLSv1 and TLSv1.1 connection protocols is removed

from MySQL Server as of MySQL 8.0.28. The protocols were deprecated
from MySQL 8.0.26. See Removal of Support for the TLSv1 and TLSv1.1
Protocols for more information.

• Support for the TLSv1.3 protocol is available in MySQL Server as

of MySQL 8.0.16, provided that MySQL Server was compiled using
OpenSSL 1.1.1 or higher. The server checks the version of OpenSSL
at startup, and if it is lower than 1.1.1, TLSv1.3 is removed from the
default value for the system variable. In that case, the defaults are
“TLSv1,TLSv1.1,TLSv1.2” up to and including MySQL 8.0.27, and
“TLSv1.2” from MySQL 8.0.28.

• authentication_policy

Command-Line Format

--authentication-policy=value

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

8.0.27

authentication_policy

Global

Yes

No

String

*,,

This variable is used to administer multifactor authentication (MFA) capabilities. It applies to the
authentication factor-related clauses of CREATE USER and ALTER USER statements used to
manage MySQL account definitions, where “factor” corresponds to an authentication method or
plugin associated with an account:

• authentication_policy controls the number of authentication factors that accounts may have.

That is, it controls which factors are required or permitted.

• authentication_policy also controls, for each factor, which plugins (or methods) are

permitted.

• authentication_policy, in conjunction with default_authentication_plugin,

determines the default authentication plugin for authentication specifications that do not name a
plugin explicitly.

Because authentication_policy applies only when accounts are created or altered, changes to
its value have no effect on existing user accounts.

Note

Although the authentication_policy system variable places
certain constraints on the authentication-related clauses of
CREATE USER and ALTER USER statements, a user who has the

874

Server System Variables

AUTHENTICATION_POLICY_ADMIN privilege is not subject to the constraints.
(A warning does occur for statements that otherwise would not be permitted.)

The value of authentication_policy is a list of 1, 2, or 3 comma-separated elements.
Each element present can be an authentication plugin name, an asterisk (*), empty, or missing.
(Exception: Element 1 cannot be empty or missing.) In all cases, an element may be surrounded by
whitespace characters and the entire list is enclosed in single quotes.

The type of value specified for element N in the list has implications for whether factor N must be
present in account definitions, and which authentication plugins can be used:

• If element N is an authentication plugin name, an authentication method for factor N is required and

must use the named plugin.

In addition, the plugin becomes the default plugin for factor N authentication methods that do not
name a plugin explicitly. For details, see The Default Authentication Plugin.

Authentication plugins that use internal credentials storage can be specified for the first element
only, and cannot repeat. For example, the following settings are not permitted:

• authentication_policy = 'caching_sha2_password, sha256_password'

• authentication_policy = 'caching_sha2_password, authentication_fido,

sha256_password'

• If element N is an asterisk (*), an authentication method for factor N is required. It may use any

authentication plugin that is valid for element N (as described later).

• If element N is empty, an authentication method for factor N is optional. If given, it may use any

authentication plugin that is valid for element N (as described later).

• If element N is missing from the list (that is, there are fewer than N−1 commas in the value), an

authentication method for factor N is forbidden. For example, a value of '*' permits only a single
factor and thus enforces single-factor authentication (1FA) for new accounts created with CREATE

875

Server System Variables

USER or changes to existing accounts made with ALTER USER. In this case, such statements
cannot specify authentication for factors 2 or 3.

When an authentication_policy element names an authentication plugin, the permitted plugin
names for the element are subject to these conditions:

• Element 1 must name a plugin that does not require a registration step. For example,

authentication_fido cannot be named.

• Elements 2 and 3 must name a plugin that does not use internal credentials storage.

For information about which authentication plugins use internal credentials storage, see
Section 8.2.15, “Password Management”.

When authentication_policy element N is *, the permitted plugin names for factor N in account
definitions are subject to these conditions:

• For factor 1, account definitions can use any plugin. Default authentication plugin rules apply for
authentication specifications that do not name a plugin. See The Default Authentication Plugin.

• For factors 2 and 3, account definitions cannot name a plugin that uses internal credentials

storage. For example, with '*,*', '*,*,*', '*,', '*,,' authentication_policy settings, plugins
that use internal credentials storage are only permitted for the first factor and cannot repeat.

When authentication_policy element N is empty, the permitted plugin names for factor N in
account definitions are subject to these conditions:

• For factor 1, this does not apply because element 1 cannot be empty.

• For factors 2 and 3, account definitions cannot name a plugin that uses internal credentials

storage.

Empty elements must occur at the end of the list, following a nonempty element. In other words, the
first element cannot be empty, and either no element is empty or the last element is empty or the last
two elements are empty. For example, a value of ',,' is not permitted because it would signify that
all factors are optional. That cannot be; accounts must have at least one authentication factor.

The default value of authentication_policy is '*,,'. This means that factor 1 is required in
account definitions and can use any authentication plugin, and that factors 2 and 3 are optional and
each can use any authentication plugin that does not use internal credentials storage.

The following table shows some authentication_policy values and the policy that each
establishes for creating or altering accounts.

Table 7.4 Example authentication_policy Values

authentication_policy Value

Effective Policy

'*'

'*,*'

'*,*,*'

'*,'

'*,,'

876

Permit only creating or altering accounts with one
factor.

Permit only creating or altering accounts with two
factors.

Permit only creating or altering accounts with
three factors.

Permit creating or altering accounts with one or
two factors.

Permit creating or altering accounts with one,
two, or three factors.

Server System Variables

authentication_policy Value

Effective Policy

'*,*,'

'*,auth_plugin'

'auth_plugin,*,'

'auth_plugin,'

Permit creating or altering accounts with two or
three factors.

Permit creating or altering accounts with two
factors, where the first factor can be any
authentication method, and the second factor
must be the named plugin.

Permit creating or altering accounts with two or
three factors, where the first factor must be the
named plugin.

Permit creating or altering accounts with one or
two factors, where the first factor must be the
named plugin.

'auth_plugin,auth_plugin,auth_plugin' Permits creating or altering accounts with three
factors, where the factors must use the named
plugins.

• authentication_windows_log_level

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

--authentication-windows-log-level=#

authentication_windows_log_level

Global

No

No

Integer

2

0

4

This variable is available only if the authentication_windows Windows authentication plugin is
enabled and debugging code is enabled. See Section 8.4.1.6, “Windows Pluggable Authentication”.

This variable sets the logging level for the Windows authentication plugin. The following table shows
the permitted values.

Value

0

1

2

3

4

Description

No logging

Log only error messages

Log level 1 messages and warning messages

Log level 2 messages and information notes

Log level 3 messages and debug messages

• authentication_windows_use_principal_name

Command-Line Format

System Variable

Scope

Dynamic

--authentication-windows-use-
principal-name[={OFF|ON}]

authentication_windows_use_principal_name

Global

No

877

Server System Variables

SET_VAR Hint Applies

Type

Default Value

No

Boolean

ON

This variable is available only if the authentication_windows Windows authentication plugin is
enabled. See Section 8.4.1.6, “Windows Pluggable Authentication”.

A client that authenticates using the InitSecurityContext() function should provide a string
identifying the service to which it connects (targetName). MySQL uses the principal name (UPN) of
the account under which the server is running. The UPN has the form user_id@computer_name
and need not be registered anywhere to be used. This UPN is sent by the server at the beginning of
authentication handshake.

This variable controls whether the server sends the UPN in the initial challenge. By default, the
variable is enabled. For security reasons, it can be disabled to avoid sending the server's account
name to a client as cleartext. If the variable is disabled, the server always sends a 0x00 byte in the
first challenge, the client does not specify targetName, and as a result, NTLM authentication is
used.

If the server fails to obtain its UPN (which happens primarily in environments that do not support
Kerberos authentication), the UPN is not sent by the server and NTLM authentication is used.

• autocommit

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--autocommit[={OFF|ON}]

autocommit

Global, Session

Yes

No

Boolean

ON

The autocommit mode. If set to 1, all changes to a table take effect immediately. If set to 0, you
must use COMMIT to accept a transaction or ROLLBACK to cancel it. If autocommit is 0 and you
change it to 1, MySQL performs an automatic COMMIT of any open transaction. Another way to begin
a transaction is to use a START TRANSACTION or BEGIN statement. See Section 15.3.1, “START
TRANSACTION, COMMIT, and ROLLBACK Statements”.

By default, client connections begin with autocommit set to 1. To cause clients to begin with a
default of 0, set the global autocommit value by starting the server with the --autocommit=0
option. To set the variable using an option file, include these lines:

[mysqld]
autocommit=0

• automatic_sp_privileges

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

878

--automatic-sp-privileges[={OFF|ON}]

automatic_sp_privileges

Global

Yes

No

Boolean

Server System Variables

Default Value

ON

When this variable has a value of 1 (the default), the server automatically grants the EXECUTE and
ALTER ROUTINE privileges to the creator of a stored routine, if the user cannot already execute
and alter or drop the routine. (The ALTER ROUTINE privilege is required to drop the routine.) The
server also automatically drops those privileges from the creator when the routine is dropped. If
automatic_sp_privileges is 0, the server does not automatically add or drop these privileges.

The creator of a routine is the account used to execute the CREATE statement for it. This might not
be the same as the account named as the DEFINER in the routine definition.

If you start mysqld with --skip-new, automatic_sp_privileges is set to OFF.

See also Section 27.2.2, “Stored Routines and MySQL Privileges”.

• auto_generate_certs

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--auto-generate-certs[={OFF|ON}]

auto_generate_certs

Global

No

No

Boolean

ON

This variable controls whether the server autogenerates SSL key and certificate files in the data
directory, if they do not already exist.

At startup, the server automatically generates server-side and client-side SSL certificate and key
files in the data directory if the auto_generate_certs system variable is enabled, no SSL options
other than --ssl are specified, and the server-side SSL files are missing from the data directory.
These files enable secure client connections using SSL; see Section 8.3.1, “Configuring MySQL to
Use Encrypted Connections”.

For more information about SSL file autogeneration, including file names and characteristics, see
Section 8.3.3.1, “Creating SSL and RSA Certificates and Keys using MySQL”

The sha256_password_auto_generate_rsa_keys and
caching_sha2_password_auto_generate_rsa_keys system variables are related but
control autogeneration of RSA key-pair files needed for secure password exchange using RSA over
unencrypted connections.

• avoid_temporal_upgrade

Command-Line Format

--avoid-temporal-upgrade[={OFF|ON}]

Deprecated

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Yes

avoid_temporal_upgrade

Global

Yes

No

Boolean

879

Server System Variables

Default Value

OFF

This variable controls whether ALTER TABLE implicitly upgrades temporal columns found to be
in pre-5.6.4 format (TIME, DATETIME, and TIMESTAMP columns without support for fractional
seconds precision). Upgrading such columns requires a table rebuild, which prevents any use of fast
alterations that might otherwise apply to the operation to be performed.

This variable is disabled by default. Enabling it causes ALTER TABLE not to rebuild temporal
columns and thereby be able to take advantage of possible fast alterations.

This variable is deprecated; expect it to be removed in a future MySQL release.

• back_log

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

--back-log=#

back_log

Global

No

No

Integer

-1 (signifies autosizing; do not assign this literal
value)

1

65535

The number of outstanding connection requests MySQL can have. This comes into play when the
main MySQL thread gets very many connection requests in a very short time. It then takes some
time (although very little) for the main thread to check the connection and start a new thread. The
back_log value indicates how many requests can be stacked during this short time before MySQL
momentarily stops answering new requests. You need to increase this only if you expect a large
number of connections in a short period of time.

In other words, this value is the size of the listen queue for incoming TCP/IP connections. Your
operating system has its own limit on the size of this queue. The manual page for the Unix
listen() system call should have more details. Check your OS documentation for the maximum
value for this variable. back_log cannot be set higher than your operating system limit.

The default value is the value of max_connections, which enables the permitted backlog to adjust
to the maximum permitted number of connections.

• basedir

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--basedir=dir_name

basedir

Global

No

No

Directory name

parent of mysqld installation
directory

The path to the MySQL installation base directory.

• big_tables

880

Server System Variables

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--big-tables[={OFF|ON}]

big_tables

Global, Session

Yes

No

Boolean

OFF

If enabled, the server stores all temporary tables on disk rather than in memory. This prevents most
The table tbl_name is full errors for SELECT operations that require a large temporary
table, but also slows down queries for which in-memory tables would suffice.

The default value for new connections is OFF (use in-memory temporary tables). Normally, it should
never be necessary to enable this variable. When in-memory internal temporary tables are managed
by the TempTable storage engine (the default), and the maximum amount of memory that can be
occupied by the TempTable storage engine is exceeded, the TempTable storage engine starts
storing data to temporary files on disk. When in-memory temporary tables are managed by the
MEMORY storage engine, in-memory tables are automatically converted to disk-based tables as
required. For more information, see Section 10.4.4, “Internal Temporary Table Use in MySQL”.

• bind_address

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--bind-address=addr

bind_address

Global

No

No

String

*

The MySQL server listens on one or more network sockets for TCP/IP connections. Each socket
is bound to one address, but it is possible for an address to map onto multiple network interfaces.
To specify how the server should listen for TCP/IP connections, set the bind_address system
variable at server startup. The server also has an admin_address system variable that enables
administrative connections on a dedicated interface. See Section 7.1.12.1, “Connection Interfaces”.

If bind_address is specified, its value must satisfy these requirements:

• Prior to MySQL 8.0.13, bind_address accepts a single address value, which may specify a

single non-wildcard IP address or host name, or one of the wildcard address formats that permit
listening on multiple network interfaces (*, 0.0.0.0, or ::).

• As of MySQL 8.0.13, bind_address accepts either a single value as just described, or a list of
comma-separated values. When the variable names a list of multiple values, each value must
specify a single non-wildcard IP address (either IPv4 or IPv6) or a host name. Wildcard address
formats (*, 0.0.0.0, or ::) are not allowed in a list of values.

• As of MySQL 8.0.22, addresses may include a network namespace specifier.

IP addresses can be specified as IPv4 or IPv6 addresses. For any value that is a host name, the
server resolves the name to an IP address and binds to that address. If a host name resolves to
multiple IP addresses, the server uses the first IPv4 address if there are any, or the first IPv6 address
otherwise.

881

Server System Variables

The server treats different types of addresses as follows:

• If the address is *, the server accepts TCP/IP connections on all server host IPv4 interfaces, and,
if the server host supports IPv6, on all IPv6 interfaces. Use this address to permit both IPv4 and
IPv6 connections on all server interfaces. This value is the default. If the variable specifies a list of
multiple values, this value is not permitted.

• If the address is 0.0.0.0, the server accepts TCP/IP connections on all server host IPv4
interfaces. If the variable specifies a list of multiple values, this value is not permitted.

• If the address is ::, the server accepts TCP/IP connections on all server host IPv4 and IPv6

interfaces. If the variable specifies a list of multiple values, this value is not permitted.

• If the address is an IPv4-mapped address, the server accepts TCP/IP connections for that

address, in either IPv4 or IPv6 format. For example, if the server is bound to ::ffff:127.0.0.1,
clients can connect using --host=127.0.0.1 or --host=::ffff:127.0.0.1.

• If the address is a “regular” IPv4 or IPv6 address (such as 127.0.0.1 or ::1), the server accepts

TCP/IP connections only for that IPv4 or IPv6 address.

These rules apply to specifying a network namespace for an address:

• A network namespace can be specified for an IP address or a host name.

• A network namespace cannot be specified for a wildcard IP address.

• For a given address, the network namespace is optional. If given, it must be specified as a /ns

suffix immediately following the address.

• An address with no /ns suffix uses the host system global namespace. The global namespace is

therefore the default.

• An address with a /ns suffix uses the namespace named ns.

• The host system must support network namespaces and each named namespace must previously

have been set up. Naming a nonexistent namespace produces an error.

• If the variable value specifies multiple addresses, it can include addresses in the global

namespace, in named namespaces, or a mix.

For additional information about network namespaces, see Section 7.1.14, “Network Namespace
Support”.

If binding to any address fails, the server produces an error and does not start.

Examples:

• bind_address=*

The server listens on all IPv4 or IPv6 addresses, as specified by the * wildcard.

• bind_address=198.51.100.20

The server listens only on the 198.51.100.20 IPv4 address.

• bind_address=198.51.100.20,2001:db8:0:f101::1

The server listens on the 198.51.100.20 IPv4 address and the 2001:db8:0:f101::1 IPv6
address.

882

Server System Variables

• bind_address=198.51.100.20,*

This produces an error because wildcard addresses are not permitted when bind_address
names a list of multiple values.

• bind_address=198.51.100.20/red,2001:db8:0:f101::1/blue,192.0.2.50

The server listens on the 198.51.100.20 IPv4 address in the red namespace, the
2001:db8:0:f101::1 IPv6 address in the blue namespace, and the 192.0.2.50 IPv4
address in the global namespace.

When bind_address names a single value (wildcard or non-wildcard), the server listens on a
single socket, which for a wildcard address may be bound to multiple network interfaces. When
bind_address names a list of multiple values, the server listens on one socket per value, with
each socket bound to a single network interface. The number of sockets is linear with the number of
values specified. Depending on operating system connection-acceptance efficiency, long value lists
might incur a performance penalty for accepting TCP/IP connections.

 Because file descriptors are allocated for listening sockets and network namespace files, it may be
necessary to increase the open_files_limit system variable.

If you intend to bind the server to a specific address, be sure that the mysql.user system table
contains an account with administrative privileges that you can use to connect to that address.
Otherwise, you cannot shut down the server. For example, if you bind the server to *, you can
connect to it using all existing accounts. But if you bind the server to ::1, it accepts connections
only on that address. In that case, first make sure that the 'root'@'::1' account is present in the
mysql.user table so you can still connect to the server to shut it down.

• block_encryption_mode

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--block-encryption-mode=#

block_encryption_mode

Global, Session

Yes

No

String

aes-128-ecb

This variable controls the block encryption mode for block-based algorithms such as AES. It affects
encryption for AES_ENCRYPT() and AES_DECRYPT().

block_encryption_mode takes a value in aes-keylen-mode format, where keylen is the key
length in bits and mode is the encryption mode. The value is not case-sensitive. Permitted keylen
values are 128, 192, and 256. Permitted mode values are ECB, CBC, CFB1, CFB8, CFB128, and OFB.

For example, this statement causes the AES encryption functions to use a key length of 256 bits and
the CBC mode:

SET block_encryption_mode = 'aes-256-cbc';

An error occurs for attempts to set block_encryption_mode to a value containing an unsupported
key length or a mode that the SSL library does not support.

• build_id

Introduced

8.0.31

883

Server System Variables

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Platform Specific

build_id

Global

No

No

Linux

This is a 160-bit SHA1 signature which is generated by the linker when compiling the server on Linux
systems with -DWITH_BUILD_ID=ON (enabled by default), and converted to a hexadecimal string.
This read-only value serves as a unique build ID, and is written into the server log at startup.

build_id is not supported on platforms other than Linux.

• bulk_insert_buffer_size

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

--bulk-insert-buffer-size=#

bulk_insert_buffer_size

Global, Session

Yes

Yes

Integer

8388608

0

Maximum Value (64-bit platforms)

18446744073709551615

Maximum Value (32-bit platforms)

Unit

4294967295

bytes/thread

MyISAM uses a special tree-like cache to make bulk inserts faster for INSERT ... SELECT,
INSERT ... VALUES (...), (...), ..., and LOAD DATA when adding data to nonempty
tables. This variable limits the size of the cache tree in bytes per thread. Setting it to 0 disables this
optimization. The default value is 8MB.

As of MySQL 8.0.14, setting the session value of this system variable is a restricted operation. The
session user must have privileges sufficient to set restricted session variables. See Section 7.1.9.1,
“System Variable Privileges”.

• caching_sha2_password_digest_rounds

Command-Line Format

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

884

--caching-sha2-password-digest-
rounds=#

8.0.24

caching_sha2_password_digest_rounds

Global

No

No

Integer

5000

5000

Server System Variables

Maximum Value

4095000

The number of hash rounds used by the caching_sha2_password authentication plugin for
password storage.

Increasing the number of hashing rounds above the default value incurs a performance penalty that
correlates with the amount of increase:

• Creating an account that uses the caching_sha2_password plugin has no impact on the client
session within which the account is created, but the server must perform the hashing rounds to
complete the operation.

• For client connections that use the account, the server must perform the hashing rounds and save

the result in the cache. The result is longer login time for the first client connection, but not for
subsequent connections. This behavior occurs after each server restart.

• caching_sha2_password_auto_generate_rsa_keys

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--caching-sha2-password-auto-
generate-rsa-keys[={OFF|ON}]

caching_sha2_password_auto_generate_rsa_keys

Global

No

No

Boolean

ON

The server uses this variable to determine whether to autogenerate RSA private/public key-pair files
in the data directory if they do not already exist.

At startup, the server automatically generates RSA private/public key-pair files in the data directory
if all of these conditions are true: The sha256_password_auto_generate_rsa_keys or
caching_sha2_password_auto_generate_rsa_keys system variable is enabled; no RSA
options are specified; the RSA files are missing from the data directory. These key-pair files enable
secure password exchange using RSA over unencrypted connections for accounts authenticated
by the sha256_password or caching_sha2_password plugin; see Section 8.4.1.3, “SHA-256
Pluggable Authentication”, and Section 8.4.1.2, “Caching SHA-2 Pluggable Authentication”.

For more information about RSA file autogeneration, including file names and characteristics, see
Section 8.3.3.1, “Creating SSL and RSA Certificates and Keys using MySQL”

The auto_generate_certs system variable is related but controls autogeneration of SSL
certificate and key files needed for secure connections using SSL.

• caching_sha2_password_private_key_path

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

--caching-sha2-password-private-key-
path=file_name

caching_sha2_password_private_key_path

Global

No

No

File name

885

Server System Variables

Default Value

private_key.pem

This variable specifies the path name of the RSA private key file for the caching_sha2_password
authentication plugin. If the file is named as a relative path, it is interpreted relative to the server data
directory. The file must be in PEM format.

Important

Because this file stores a private key, its access mode should be restricted so
that only the MySQL server can read it.

For information about caching_sha2_password, see Section 8.4.1.2, “Caching SHA-2 Pluggable
Authentication”.

• caching_sha2_password_public_key_path

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--caching-sha2-password-public-key-
path=file_name

caching_sha2_password_public_key_path

Global

No

No

File name

public_key.pem

This variable specifies the path name of the RSA public key file for the caching_sha2_password
authentication plugin. If the file is named as a relative path, it is interpreted relative to the server data
directory. The file must be in PEM format.

For information about caching_sha2_password, including information about how clients request
the RSA public key, see Section 8.4.1.2, “Caching SHA-2 Pluggable Authentication”.

• character_set_client

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

character_set_client

Global, Session

Yes

No

String

utf8mb4

The character set for statements that arrive from the client. The session value of this variable is
set using the character set requested by the client when the client connects to the server. (Many
clients support a --default-character-set option to enable this character set to be specified
explicitly. See also Section 12.4, “Connection Character Sets and Collations”.) The global value of
the variable is used to set the session value in cases when the client-requested value is unknown or
not available, or the server is configured to ignore client requests:

• The client requests a character set not known to the server. For example, a Japanese-enabled

client requests sjis when connecting to a server not configured with sjis support.

• The client is from a version of MySQL older than MySQL 4.1, and thus does not request a

character set.

886

Server System Variables

• mysqld was started with the --skip-character-set-client-handshake option, which

causes it to ignore client character set configuration.

Some character sets cannot be used as the client character set. Attempting to use them as the
character_set_client value produces an error. See Impermissible Client Character Sets.

• character_set_connection

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

character_set_connection

Global, Session

Yes

No

String

utf8mb4

The character set used for literals specified without a character set introducer and for number-to-
string conversion. For information about introducers, see Section 12.3.8, “Character Set Introducers”.

• character_set_database

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Footnote

character_set_database

Global, Session

Yes

No

String

utf8mb4

This option is dynamic, but should be set only by
server. You should not set this variable manually.

The character set used by the default database. The server sets this variable whenever the
default database changes. If there is no default database, the variable has the same value as
character_set_server.

As of MySQL 8.0.14, setting the session value of this system variable is a restricted operation. The
session user must have privileges sufficient to set restricted session variables. See Section 7.1.9.1,
“System Variable Privileges”.

The global character_set_database and collation_database system variables are
deprecated; expect them to be removed in a future version of MySQL.

Assigning a value to the session character_set_database and collation_database system
variables is deprecated and assignments produce a warning. Expect the session variables to
become read-only (and assignments to them to produce an error) in a future version of MySQL in
which it remains possible to access the session variables to determine the database character set
and collation for the default database.

• character_set_filesystem

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

--character-set-filesystem=name

character_set_filesystem

Global, Session

Yes

No

887

Server System Variables

Type

Default Value

String

binary

The file system character set. This variable is used to interpret string literals that refer to file
names, such as in the LOAD DATA and SELECT ... INTO OUTFILE statements and the
LOAD_FILE() function. Such file names are converted from character_set_client to
character_set_filesystem before the file opening attempt occurs. The default value is
binary, which means that no conversion occurs. For systems on which multibyte file names are
permitted, a different value may be more appropriate. For example, if the system represents file
names using UTF-8, set character_set_filesystem to 'utf8mb4'.

As of MySQL 8.0.14, setting the session value of this system variable is a restricted operation. The
session user must have privileges sufficient to set restricted session variables. See Section 7.1.9.1,
“System Variable Privileges”.

• character_set_results

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

character_set_results

Global, Session

Yes

No

String

utf8mb4

The character set used for returning query results to the client. This includes result data such as
column values, result metadata such as column names, and error messages.

• character_set_server

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--character-set-server=name

character_set_server

Global, Session

Yes

No

String

utf8mb4

The servers default character set. See Section 12.15, “Character Set Configuration”. If you set this
variable, you should also set collation_server to specify the collation for the character set.

• character_set_system

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

character_set_system

Global

No

No

String

utf8mb3

The character set used by the server for storing identifiers. The value is always utf8mb3.

888

Server System Variables

• character_sets_dir

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

--character-sets-dir=dir_name

character_sets_dir

Global

No

No

Directory name

The directory where character sets are installed. See Section 12.15, “Character Set Configuration”.

• check_proxy_users

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--check-proxy-users[={OFF|ON}]

check_proxy_users

Global

Yes

No

Boolean

OFF

Some authentication plugins implement proxy user mapping for themselves (for example, the PAM
and Windows authentication plugins). Other authentication plugins do not support proxy users by
default. Of these, some can request that the MySQL server itself map proxy users according to
granted proxy privileges: mysql_native_password, sha256_password.

If the check_proxy_users system variable is enabled, the server performs proxy user mapping for
any authentication plugins that make such a request. However, it may also be necessary to enable
plugin-specific system variables to take advantage of server proxy user mapping support:

• For the mysql_native_password plugin, enable mysql_native_password_proxy_users.

• For the sha256_password plugin, enable sha256_password_proxy_users.

For information about user proxying, see Section 8.2.19, “Proxy Users”.

• collation_connection

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

collation_connection

Global, Session

Yes

No

String

The collation of the connection character set. collation_connection is important
for comparisons of literal strings. For comparisons of strings with column values,
collation_connection does not matter because columns have their own collation, which has a
higher collation precedence (see Section 12.8.4, “Collation Coercibility in Expressions”).

In MySQL 8.0.33 and later, using the name of a user-defined collation for this variable raises a
warning.

889

Server System Variables

• collation_database

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Footnote

collation_database

Global, Session

Yes

No

String

utf8mb4_0900_ai_ci

This option is dynamic, but should be set only by
server. You should not set this variable manually.

The collation used by the default database. The server sets this variable whenever the
default database changes. If there is no default database, the variable has the same value as
collation_server.

As of MySQL 8.0.18, setting the session value of this system variable is no longer a restricted
operation.

The global character_set_database and collation_database system variables are
deprecated; expect them to be removed in a future version of MySQL.

Assigning a value to the session character_set_database and collation_database system
variables is deprecated and assignments produce a warning. Expect the session variables to
become read-only (and assignments to produce an error) in a future version of MySQL in which
it remains possible to access the session variables to determine the database character set and
collation for the default database.

In MySQL 8.0.33 and later, using the name of a user-defined collation for collation_database
raises a warning.

• collation_server

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--collation-server=name

collation_server

Global, Session

Yes

No

String

utf8mb4_0900_ai_ci

The server's default collation. See Section 12.15, “Character Set Configuration”.

Beginning with MySQL 8.0.33, setting this to the name of a user-defined collation raises a warning.

• completion_type

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

890

Type

--completion-type=#

completion_type

Global, Session

Yes

No

Enumeration

Default Value

Valid Values

Server System Variables

NO_CHAIN

NO_CHAIN

CHAIN

RELEASE

0

1

2

The transaction completion type. This variable can take the values shown in the following table. The
variable can be assigned using either the name values or corresponding integer values.

Value

NO_CHAIN (or 0)

CHAIN (or 1)

RELEASE (or 2)

Description

COMMIT and ROLLBACK are unaffected. This is
the default value.

COMMIT and ROLLBACK are equivalent to
COMMIT AND CHAIN and ROLLBACK AND
CHAIN, respectively. (A new transaction starts
immediately with the same isolation level as the
just-terminated transaction.)

COMMIT and ROLLBACK are equivalent to
COMMIT RELEASE and ROLLBACK RELEASE,
respectively. (The server disconnects after
terminating the transaction.)

completion_type affects transactions that begin with START TRANSACTION or BEGIN and end
with COMMIT or ROLLBACK. It does not apply to implicit commits resulting from execution of the
statements listed in Section 15.3.3, “Statements That Cause an Implicit Commit”. It also does not
apply for XA COMMIT, XA ROLLBACK, or when autocommit=1.

• component_scheduler.enabled

Command-Line Format

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--component-
scheduler.enabled[=value]

8.0.34

component_scheduler.enabled

Global

Yes

No

Boolean

ON

When set to OFF at startup, the background thread does not start. Tasks can still be scheduled, but
they do not run until component_scheduler is enabled. When set to ON at startup, the component
is fully operational.

It is also possible to set the value dynamically to get the following effects:

• ON starts the background thread that begins servicing the queue immediately.

891

Server System Variables

• OFF signals a termination of the background thread, which waits for it to end. The background
thread checks the termination flag before accessing the queue to check for tasks to execute.

• concurrent_insert

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Valid Values

--concurrent-insert[=value]

concurrent_insert

Global

Yes

No

Enumeration

AUTO

NEVER

AUTO

ALWAYS

0

1

2

If AUTO (the default), MySQL permits INSERT and SELECT statements to run concurrently for
MyISAM tables that have no free blocks in the middle of the data file.

This variable can take the values shown in the following table. The variable can be assigned using
either the name values or corresponding integer values.

Value

NEVER (or 0)

AUTO (or 1)

ALWAYS (or 2)

Description

Disables concurrent inserts

(Default) Enables concurrent insert for MyISAM
tables that do not have holes

Enables concurrent inserts for all MyISAM tables,
even those that have holes. For a table with a
hole, new rows are inserted at the end of the
table if it is in use by another thread. Otherwise,
MySQL acquires a normal write lock and inserts
the row into the hole.

If you start mysqld with --skip-new, concurrent_insert is set to NEVER.

See also Section 10.11.3, “Concurrent Inserts”.

• connect_timeout

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

892

--connect-timeout=#

connect_timeout

Global

Yes

No

Integer

Server System Variables

Default Value

Minimum Value

Maximum Value

Unit

10

2

31536000

seconds

The number of seconds that the mysqld server waits for a connect packet before responding with
Bad handshake. The default value is 10 seconds.

Increasing the connect_timeout value might help if clients frequently encounter errors of the form
Lost connection to MySQL server at 'XXX', system error: errno.

• connection_memory_chunk_size

Command-Line Format

--connection-memory-chunk-size=#

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value (≥ 8.0.34)
Default Value (≥ 8.0.28, ≤ 8.0.33)
Minimum Value

Maximum Value

Unit

8.0.28

connection_memory_chunk_size

Global, Session

Yes

No

Integer

8192

8912

0

536870912

bytes

Set the chunking size for updates to the global memory usage counter
Global_connection_memory. The status variable is updated only when total memory
consumption by all user connections changes by more than this amount. Disable updates by setting
connection_memory_chunk_size = 0.

The memory calculation is exclusive of any memory used by system users such as the MySQL root
user. Memory used by the InnoDB buffer pool is also not included.

You must have the SYSTEM_VARIABLES_ADMIN or SUPER privilege to set this variable.

• connection_memory_limit

Command-Line Format

--connection-memory-limit=#

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

8.0.28

connection_memory_limit

Global, Session

Yes

No

Integer

18446744073709551615

2097152

18446744073709551615

893

Server System Variables

Unit

bytes

Set the maximum amount of memory that can be used by a single user connection. If any
user connection uses more than this amount, all queries from this connection are rejected with
ER_CONN_LIMIT, including any queries currently running.

The limit set by this variable does not apply to system users, or to the MySQL root account. Memory
used by the InnoDB buffer pool is also not included.

You must have the SYSTEM_VARIABLES_ADMIN or SUPER privilege to set this variable.

• core_file

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

core_file

Global

No

No

Boolean

OFF

Whether to write a core file if the server unexpectedly exits. This variable is set by the --core-file
option.

• create_admin_listener_thread

Command-Line Format

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--create-admin-listener-
thread[={OFF|ON}]

8.0.14

create_admin_listener_thread

Global

No

No

Boolean

OFF

Whether to use a dedicated listening thread for client connections on the administrative network
interface (see Section 7.1.12.1, “Connection Interfaces”). The default is OFF; that is, the manager
thread for ordinary connections on the main interface also handles connections for the administrative
interface.

Depending on factors such as platform type and workload, you may find one setting for this variable
yields better performance than the other setting.

Setting create_admin_listener_thread has no effect if admin_address is not specified
because in that case the server maintains no administrative network interface.

• cte_max_recursion_depth

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

--cte-max-recursion-depth=#

cte_max_recursion_depth

Global, Session

Yes

No

894

Server System Variables

Type

Default Value

Minimum Value

Maximum Value

Integer

1000

0

4294967295

The common table expression (CTE) maximum recursion depth. The server terminates execution of
any CTE that recurses more levels than the value of this variable. For more information, see Limiting
Common Table Expression Recursion.

• datadir

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

--datadir=dir_name

datadir

Global

No

No

Directory name

The path to the MySQL server data directory. Relative paths are resolved with respect to the current
directory. If you expect the server to be started automatically (that is, in contexts for which you
cannot know the current directory in advance), it is best to specify the datadir value as an absolute
path.

• debug

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value (Unix)

Default Value (Windows)

--debug[=debug_options]

debug

Global, Session

Yes

No

String

d:t:i:o,/tmp/mysqld.trace

d:t:i:O,\mysqld.trace

This variable indicates the current debugging settings. It is available only for servers built with
debugging support. The initial value comes from the value of instances of the --debug option given
at server startup. The global and session values may be set at runtime.

Setting the session value of this system variable is a restricted operation. The session user must
have privileges sufficient to set restricted session variables. See Section 7.1.9.1, “System Variable
Privileges”.

Assigning a value that begins with + or - cause the value to added to or subtracted from the current
value:

mysql> SET debug = 'T';
mysql> SELECT @@debug;
+---------+
| @@debug |
+---------+
| T       |
+---------+

mysql> SET debug = '+P';
mysql> SELECT @@debug;

895

Server System Variables

+---------+
| @@debug |
+---------+
| P:T     |
+---------+

mysql> SET debug = '-P';
mysql> SELECT @@debug;
+---------+
| @@debug |
+---------+
| T       |
+---------+

For more information, see Section 7.9.4, “The DBUG Package”.

• debug_sync

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

debug_sync

Session

Yes

No

String

This variable is the user interface to the Debug Sync facility. Use of Debug Sync requires that
MySQL be configured with the -DWITH_DEBUG=ON CMake option (see Section 2.8.7, “MySQL
Source-Configuration Options”); otherwise, this system variable is not available.

The global variable value is read only and indicates whether the facility is enabled. By default, Debug
Sync is disabled and the value of debug_sync is OFF. If the server is started with --debug-sync-
timeout=N, where N is a timeout value greater than 0, Debug Sync is enabled and the value of
debug_sync is ON - current signal followed by the signal name. Also, N becomes the default
timeout for individual synchronization points.

The session value can be read by any user and has the same value as the global variable. The
session value can be set to control synchronization points.

Setting the session value of this system variable is a restricted operation. The session user must
have privileges sufficient to set restricted session variables. See Section 7.1.9.1, “System Variable
Privileges”.

For a description of the Debug Sync facility and how to use synchronization points, see MySQL
Server Doxygen Documentation.

• default_authentication_plugin

Command-Line Format

Deprecated

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Valid Values

896

--default-authentication-
plugin=plugin_name

8.0.27

default_authentication_plugin

Global

No

No

Enumeration

caching_sha2_password

mysql_native_password

Server System Variables

sha256_password

caching_sha2_password

The default authentication plugin. This must be a plugin that uses internal credentials storage, so
these values are permitted:

• mysql_native_password: Use MySQL native passwords; see Section 8.4.1.1, “Native

Pluggable Authentication”.

• sha256_password: Use SHA-256 passwords; see Section 8.4.1.3, “SHA-256 Pluggable

Authentication”.

• caching_sha2_password: Use SHA-256 passwords; see Section 8.4.1.2, “Caching SHA-2

Pluggable Authentication”.

For information about which authentication plugins use internal credentials storage, see
Section 8.2.15, “Password Management”.

Note

In MySQL 8.0, caching_sha2_password is the default authentication
plugin rather than mysql_native_password. For information about the
implications of this change for server operation and compatibility of the server
with clients and connectors, see caching_sha2_password as the Preferred
Authentication Plugin.

Prior to MySQL 8.0.27, the default_authentication_plugin value affects these aspects of
server operation:

• It determines which authentication plugin the server assigns to new accounts created by CREATE

USER statements that do not explicitly specify an authentication plugin.

• For an account created with a statement of the following form, the server associates the account
with the default authentication plugin and assigns the account the given password, hashed as
required by that plugin:

CREATE USER ... IDENTIFIED BY 'cleartext password';

As of MySQL 8.0.27, which introduces multifactor authentication,
default_authentication_plugin is still used, but in conjunction with and at a lower
precedence than the authentication_policy system variable. For details, see The Default
Authentication Plugin. Because of this diminished role, default_authentication_plugin is
deprecated as of MySQL 8.0.27 and subject to removal in a future MySQL version.

• default_collation_for_utf8mb4

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Valid Values

default_collation_for_utf8mb4

Global, Session

Yes

No

Enumeration

utf8mb4_0900_ai_ci

utf8mb4_0900_ai_ci

897

Server System Variables

utf8mb4_general_ci

Important

The default_collation_for_utf8mb4 system variable is for internal
use by MySQL Replication only.

This variable is set by the server to the default collation for the utf8mb4 character set. The value
of the variable is replicated from a source to a replica so that the replica can correctly process data
originating from a source with a different default collation for utf8mb4. This variable is primarily
intended to support replication from a MySQL 5.7 or older replication source server to a MySQL
8.0 replica server, or group replication with a MySQL 5.7 primary node and one or more MySQL
8.0 secondaries. The default collation for utf8mb4 in MySQL 5.7 is utf8mb4_general_ci, but
utf8mb4_0900_ai_ci in MySQL 8.0. The variable is not present in releases earlier than MySQL
8.0, so if the replica does not receive a value for the variable, it assumes the source is from an earlier
release and sets the value to the previous default collation utf8mb4_general_ci.

As of MySQL 8.0.18, setting the session value of this system variable is no longer a restricted
operation.

The default utf8mb4 collation is used in the following statements:

• SHOW COLLATION and SHOW CHARACTER SET.

• CREATE TABLE and ALTER TABLE having a CHARACTER SET utf8mb4 clause without a

COLLATION clause, either for the table character set or for a column character set.

• CREATE DATABASE and ALTER DATABASE having a CHARACTER SET utf8mb4 clause without

a COLLATION clause.

• Any statement containing a string literal of the form _utf8mb4'some text' without a COLLATE

clause.

See also Section 12.9, “Unicode Support”.

• default_password_lifetime

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

--default-password-lifetime=#

default_password_lifetime

Global

Yes

No

Integer

0

0

65535

days

This variable defines the global automatic password expiration policy. The default
default_password_lifetime value is 0, which disables automatic password expiration. If the

898

Server System Variables

value of default_password_lifetime is a positive integer N, it indicates the permitted password
lifetime; passwords must be changed every N days.

The global password expiration policy can be overridden as desired for individual accounts using the
password expiration option of the CREATE USER and ALTER USER statements. See Section 8.2.15,
“Password Management”.

• default_storage_engine

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--default-storage-engine=name

default_storage_engine

Global, Session

Yes

No

Enumeration

InnoDB

The default storage engine for tables. See Chapter 18, Alternative Storage Engines. This variable
sets the storage engine for permanent tables only. To set the storage engine for TEMPORARY tables,
set the default_tmp_storage_engine system variable.

To see which storage engines are available and enabled, use the SHOW ENGINES statement or
query the INFORMATION_SCHEMA ENGINES table.

If you disable the default storage engine at server startup, you must set the default engine for both
permanent and TEMPORARY tables to a different engine, or else the server does not start.

• default_table_encryption

Command-Line Format

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--default-table-encryption[={OFF|
ON}]

8.0.16

default_table_encryption

Global, Session

Yes

Yes

Boolean

OFF

Defines the default encryption setting applied to schemas and general tablespaces when they are
created without specifying an ENCRYPTION clause.

The default_table_encryption variable is only applicable to user-created schemas and
general tablespaces. It does not govern encryption of the mysql system tablespace.

Setting the runtime value of default_table_encryption requires the
SYSTEM_VARIABLES_ADMIN and TABLE_ENCRYPTION_ADMIN privileges, or the deprecated
SUPER privilege.

The value of default_table_encryption cannot be changed while Group Replication is running.

default_table_encryption supports SET PERSIST and SET PERSIST_ONLY syntax. See
Section 7.1.9.3, “Persisted System Variables”.

For more information, see Defining an Encryption Default for Schemas and General Tablespaces.

899

Server System Variables

• default_tmp_storage_engine

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--default-tmp-storage-engine=name

default_tmp_storage_engine

Global, Session

Yes

Yes

Enumeration

InnoDB

The default storage engine for TEMPORARY tables (created with CREATE TEMPORARY TABLE). To
set the storage engine for permanent tables, set the default_storage_engine system variable.
Also see the discussion of that variable regarding possible values.

If you disable the default storage engine at server startup, you must set the default engine for both
permanent and TEMPORARY tables to a different engine, or else the server does not start.

• default_week_format

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

--default-week-format=#

default_week_format

Global, Session

Yes

No

Integer

0

0

7

The default mode value to use for the WEEK() function. See Section 14.7, “Date and Time
Functions”.

• delay_key_write

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Valid Values

900

--delay-key-write[={OFF|ON|ALL}]

delay_key_write

Global

Yes

No

Enumeration

ON

OFF

ON

Server System Variables

ALL

This variable specifies how to use delayed key writes. It applies only to MyISAM tables. Delayed
key writing causes key buffers not to be flushed between writes. See also Section 18.2.1, “MyISAM
Startup Options”.

This variable can have one of the following values to affect handling of the DELAY_KEY_WRITE table
option that can be used in CREATE TABLE statements.

Option

OFF

ON

ALL

Description

DELAY_KEY_WRITE is ignored.

MySQL honors any DELAY_KEY_WRITE option
specified in CREATE TABLE statements. This is
the default value.

All new opened tables are treated as if they were
created with the DELAY_KEY_WRITE option
enabled.

Note

If you set this variable to ALL, you should not use MyISAM tables from within
another program (such as another MySQL server or myisamchk) when the
tables are in use. Doing so leads to index corruption.

If DELAY_KEY_WRITE is enabled for a table, the key buffer is not flushed for the table on
every index update, but only when the table is closed. This speeds up writes on keys a
lot, but if you use this feature, you should add automatic checking of all MyISAM tables by
starting the server with the myisam_recover_options system variable set (for example,
myisam_recover_options='BACKUP,FORCE'). See Section 7.1.8, “Server System Variables”,
and Section 18.2.1, “MyISAM Startup Options”.

If you start mysqld with --skip-new, delay_key_write is set to OFF.

Warning

If you enable external locking with --external-locking, there is no
protection against index corruption for tables that use delayed key writes.

• delayed_insert_limit

Command-Line Format

--delayed-insert-limit=#

Deprecated

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Yes

delayed_insert_limit

Global

Yes

No

Integer

100

1

Maximum Value (64-bit platforms)

18446744073709551615

901

Server System Variables

Maximum Value (32-bit platforms)

4294967295

This system variable is deprecated (because DELAYED inserts are not supported), and you should
expect it to be removed in a future release.

• delayed_insert_timeout

Command-Line Format

--delayed-insert-timeout=#

Deprecated

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

Yes

delayed_insert_timeout

Global

Yes

No

Integer

300

1

31536000

seconds

This system variable is deprecated (because DELAYED inserts are not supported), and you should
expect it to be removed in a future release.

• delayed_queue_size

Command-Line Format

--delayed-queue-size=#

Deprecated

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Yes

delayed_queue_size

Global

Yes

No

Integer

1000

1

Maximum Value (64-bit platforms)

18446744073709551615

Maximum Value (32-bit platforms)

4294967295

This system variable is deprecated (because DELAYED inserts are not supported), and you should
expect it to be removed in a future release.

• disabled_storage_engines

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

902

--disabled-storage-
engines=engine[,engine]...

disabled_storage_engines

Global

No

No

String

Server System Variables

Default Value

empty string

This variable indicates which storage engines cannot be used to create tables or tablespaces. For
example, to prevent new MyISAM or FEDERATED tables from being created, start the server with
these lines in the server option file:

[mysqld]
disabled_storage_engines="MyISAM,FEDERATED"

By default, disabled_storage_engines is empty (no engines disabled), but it can be set to a
comma-separated list of one or more engines (not case-sensitive). Any engine named in the value
cannot be used to create tables or tablespaces with CREATE TABLE or CREATE TABLESPACE,
and cannot be used with ALTER TABLE ... ENGINE or ALTER TABLESPACE ... ENGINE
to change the storage engine of existing tables or tablespaces. Attempts to do so result in an
ER_DISABLED_STORAGE_ENGINE error.

disabled_storage_engines does not restrict other DDL statements for existing tables, such
as CREATE INDEX, TRUNCATE TABLE, ANALYZE TABLE, DROP TABLE, or DROP TABLESPACE.
This permits a smooth transition so that existing tables or tablespaces that use a disabled
engine can be migrated to a permitted engine by means such as ALTER TABLE ... ENGINE
permitted_engine.

It is permitted to set the default_storage_engine or default_tmp_storage_engine system
variable to a storage engine that is disabled. This could cause applications to behave erratically
or fail, although that might be a useful technique in a development environment for identifying
applications that use disabled engines, so that they can be modified.

disabled_storage_engines is disabled and has no effect if the server is started with any of
these options: --initialize, --initialize-insecure, --skip-grant-tables.

Note

Setting disabled_storage_engines might cause an issue with
mysql_upgrade. For details, see Section 6.4.5, “mysql_upgrade — Check
and Upgrade MySQL Tables”.

• disconnect_on_expired_password

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--disconnect-on-expired-
password[={OFF|ON}]

disconnect_on_expired_password

Global

No

No

Boolean

ON

This variable controls how the server handles clients with expired passwords:

• If the client indicates that it can handle expired passwords, the value of

disconnect_on_expired_password is irrelevant. The server permits the client to connect but
puts it in sandbox mode.

903

Server System Variables

• If the client does not indicate that it can handle expired passwords, the server handles the client

according to the value of disconnect_on_expired_password:

• If disconnect_on_expired_password: is enabled, the server disconnects the client.

• If disconnect_on_expired_password: is disabled, the server permits the client to connect

but puts it in sandbox mode.

For more information about the interaction of client and server settings relating to expired-password
handling, see Section 8.2.16, “Server Handling of Expired Passwords”.

• div_precision_increment

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

--div-precision-increment=#

div_precision_increment

Global, Session

Yes

Yes

Integer

4

0

30

This variable indicates the number of digits by which to increase the scale of the result of division
operations performed with the / operator. The default value is 4. The minimum and maximum values
are 0 and 30, respectively. The following example illustrates the effect of increasing the default value.

mysql> SELECT 1/7;
+--------+
| 1/7    |
+--------+
| 0.1429 |
+--------+
mysql> SET div_precision_increment = 12;
mysql> SELECT 1/7;
+----------------+
| 1/7            |
+----------------+
| 0.142857142857 |
+----------------+

• dragnet.log_error_filter_rules

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

--dragnet.log-error-filter-
rules=value

dragnet.log_error_filter_rules

Global

Yes

No

String

904

Server System Variables

Default Value

IF prio>=INFORMATION THEN drop.
IF EXISTS source_line THEN unset
source_line.

The filter rules that control operation of the log_filter_dragnet error log filter component.
If log_filter_dragnet is not installed, dragnet.log_error_filter_rules
is unavailable. If log_filter_dragnet is installed but not enabled, changes to
dragnet.log_error_filter_rules have no effect.

The effect of the default value is similar to the filtering performed by the log_sink_internal filter
with a setting of log_error_verbosity=2.

As of MySQL 8.0.12, the dragnet.Status status variable can be consulted to determine the result
of the most recent assignment to dragnet.log_error_filter_rules.

Prior to MySQL 8.0.12, successful assignments to dragnet.log_error_filter_rules at
runtime produce a note confirming the new value:

mysql> SET GLOBAL dragnet.log_error_filter_rules = 'IF prio <> 0 THEN unset prio.';
Query OK, 0 rows affected, 1 warning (0.00 sec)

mysql> SHOW WARNINGS\G
*************************** 1. row ***************************
  Level: Note
   Code: 4569
Message: filter configuration accepted:
         SET @@GLOBAL.dragnet.log_error_filter_rules=
         'IF prio!=ERROR THEN unset prio.';

The value displayed by SHOW WARNINGS indicates the “decompiled” canonical representation
after the rule set has been successfully parsed and compiled into internal form. Semantically, this
canonical form is identical to the value assigned to dragnet.log_error_filter_rules, but
there may be some differences between the assigned and canonical values, as illustrated by the
preceding example:

• The <> operator is changed to !=.

• The numeric priority of 0 is changed to the corresponding priority symbol ERROR.

• Optional spaces are removed.

For additional information, see Section 7.4.2.4, “Types of Error Log Filtering”, and Section 7.5.3,
“Error Log Components”.

• enterprise_encryption.maximum_rsa_key_size

Command-Line Format

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

--enterprise-encryption.maximum-rsa-
key-size=#

8.0.30

enterprise_encryption.maximum_rsa_key_size

Global

Yes

No

Integer

4096

2048

905

Server System Variables

Maximum Value

16384

This variable limits the maximum size of RSA keys generated by MySQL Enterprise
Encryption. The variable is available only if the MySQL Enterprise Encryption component
component_enterprise_encryption is installed, which is available from MySQL 8.0.30. The
variable is not available if the openssl_udf shared library is used to provide MySQL Enterprise
Encryption functions.

The lowest setting is 2048 bits, which is the minimum RSA key length that is acceptable by current
best practice. The default setting is 4096 bits. The highest setting is 16384 bits. Generating longer
keys can consume significant CPU resources, so you can use this setting to limit keys to a length
that provides adequate security for your requirements while balancing this with resource usage. Note
that the functions provided by the openssl_udf shared library allow key lengths starting at 1024
bits, and following an upgrade to the component, the minimum key length is greater than this. See
Section 8.6.2, “Configuring MySQL Enterprise Encryption” for more information.

• enterprise_encryption.rsa_support_legacy_padding

Command-Line Format

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--enterprise-
encryption.rsa_support_legacy_padding[={OFF|
ON}]

8.0.30

enterprise_encryption.rsa_support_legacy_padding

Global

Yes

No

Boolean

OFF

This variable controls whether encrypted data and signatures that MySQL Enterprise Encryption
produced with the openssl_udf shared library functions used before MySQL 8.0.30, can
be decrypted or verified by the functions of the MySQL Enterprise Encryption component
component_enterprise_encryption, which is available from MySQL 8.0.30. The variable is
available only if the MySQL Enterprise Encryption component is installed, and it is not available if the
openssl_udf shared library is used to provide MySQL Enterprise Encryption functions.

For the component functions to support decryption and verification for content produced by the
legacy openssl_udf shared library functions, you must set the system variable padding to ON.
When ON is set, if the component functions cannot decrypt or verify content when assuming it has
the RSAES-OAEP or RSASSA-PSS scheme (as used by the component), they make another
attempt assuming it has the RSAES-PKCS1-v1_5 or RSASSA-PKCS1-v1_5 scheme (as used by the
openssl_udf shared library functions). When OFF is set, if the component functions cannot decrypt
or verify content using their normal schemes, they return null output. See Section 8.6.2, “Configuring
MySQL Enterprise Encryption” for more information.

• end_markers_in_json

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

906

--end-markers-in-json[={OFF|ON}]

end_markers_in_json

Global, Session

Yes

Yes

Boolean

Server System Variables

Default Value

OFF

Whether optimizer JSON output should add end markers. See Section 10.15.9, “The
end_markers_in_json System Variable”.

• eq_range_index_dive_limit

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

--eq-range-index-dive-limit=#

eq_range_index_dive_limit

Global, Session

Yes

Yes

Integer

200

0

4294967295

This variable indicates the number of equality ranges in an equality comparison condition when
the optimizer should switch from using index dives to index statistics in estimating the number of
qualifying rows. It applies to evaluation of expressions that have either of these equivalent forms,
where the optimizer uses a nonunique index to look up col_name values:

col_name IN(val1, ..., valN)
col_name = val1 OR ... OR col_name = valN

In both cases, the expression contains N equality ranges. The optimizer can make row
estimates using index dives or index statistics. If eq_range_index_dive_limit is
greater than 0, the optimizer uses existing index statistics instead of index dives if there are
eq_range_index_dive_limit or more equality ranges. Thus, to permit use of index dives for up
to N equality ranges, set eq_range_index_dive_limit to N + 1. To disable use of index statistics
and always use index dives regardless of N, set eq_range_index_dive_limit to 0.

For more information, see Equality Range Optimization of Many-Valued Comparisons.

To update table index statistics for best estimates, use ANALYZE TABLE.

• error_count

The number of errors that resulted from the last statement that generated messages. This variable is
read only. See Section 15.7.7.17, “SHOW ERRORS Statement”.

• event_scheduler

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Valid Values

--event-scheduler[=value]

event_scheduler

Global

Yes

No

Enumeration

ON

ON

OFF

907

Server System Variables

DISABLED

This variable enables or disables, and starts or stops, the Event Scheduler. The possible status
values are ON, OFF, and DISABLED. Turning the Event Scheduler OFF is not the same as disabling
the Event Scheduler, which requires setting the status to DISABLED. This variable and its effects on
the Event Scheduler's operation are discussed in greater detail in Section 27.4.2, “Event Scheduler
Configuration”

• explain_format

Command-Line Format

--explain-format=format

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Valid Values

8.0.32

explain_format

Global, Session

Yes

No

Enumeration

TRADITIONAL

TRADITIONAL (DEFAULT)

JSON

TREE

This variable determines the default output format used by EXPLAIN in the absence of a FORMAT
option when displaying a query execution plan. Possible values and their effects are listed here:

• TRADITIONAL: Use MySQL's traditional table-based output, as if FORMAT=TRADITIONAL had

been specified as part of the EXPLAIN statement. This is the variable's default value. DEFAULT is
also supported as a synonym for TRADITIONAL, and has exactly the same effect.

Note

DEFAULT cannot be used as part of an EXPLAIN statement's FORMAT
option.

• JSON: Use the JSON output format, as if FORMAT=JSON had been specified.

• TREE: Use the tree-based output format, as if FORMAT=TREE had been specified.

The setting for this variable also affects EXPLAIN ANALYZE. For this purpose, DEFAULT and
TRADITIONAL are interpeted as TREE. If the value of explain_format is JSON and an
EXPLAIN ANALYZE statement having no FORMAT option is issued, the statement raises an error
(ER_NOT_SUPPORTED_YET).

Using a format specifier with EXPLAIN or EXPLAIN ANALYZE overrides any setting for
explain_format.

The explain_format system variable has no effect on EXPLAIN output when this statement is
used to display information about table columns.

Setting the session value of explain_format requires no special privileges; setting it on the
global level requires SYSTEM_VARIABLES_ADMIN (or the deprecated SUPER privilege). See
Section 7.1.9.1, “System Variable Privileges”.

For more information and examples, see Obtaining Execution Plan Information.

908

Server System Variables

• explicit_defaults_for_timestamp

Command-Line Format

Deprecated

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--explicit-defaults-for-
timestamp[={OFF|ON}]

Yes

explicit_defaults_for_timestamp

Global, Session

Yes

No

Boolean

ON

This system variable determines whether the server enables certain nonstandard
behaviors for default values and NULL-value handling in TIMESTAMP columns. By default,
explicit_defaults_for_timestamp is enabled, which disables the nonstandard behaviors.
Disabling explicit_defaults_for_timestamp results in a warning.

As of MySQL 8.0.18, setting the session value of this system variable is no longer a restricted
operation.

If explicit_defaults_for_timestamp is disabled, the server enables the nonstandard
behaviors and handles TIMESTAMP columns as follows:

• TIMESTAMP columns not explicitly declared with the NULL attribute are automatically declared

with the NOT NULL attribute. Assigning such a column a value of NULL is permitted and sets the
column to the current timestamp. Exception: As of MySQL 8.0.22, attempting to insert NULL into a
generated column declared as TIMESTAMP NOT NULL is rejected with an error.

• The first TIMESTAMP column in a table, if not explicitly declared with the NULL attribute or
an explicit DEFAULT or ON UPDATE attribute, is automatically declared with the DEFAULT
CURRENT_TIMESTAMP and ON UPDATE CURRENT_TIMESTAMP attributes.

• TIMESTAMP columns following the first one, if not explicitly declared with the NULL attribute or an
explicit DEFAULT attribute, are automatically declared as DEFAULT '0000-00-00 00:00:00'
(the “zero” timestamp). For inserted rows that specify no explicit value for such a column, the
column is assigned '0000-00-00 00:00:00' and no warning occurs.

Depending on whether strict SQL mode or the NO_ZERO_DATE SQL mode is enabled, a default
value of '0000-00-00 00:00:00' may be invalid. Be aware that the TRADITIONAL SQL mode
includes strict mode and NO_ZERO_DATE. See Section 7.1.11, “Server SQL Modes”.

The nonstandard behaviors just described are deprecated; expect them to be removed in a future
MySQL release.

If explicit_defaults_for_timestamp is enabled, the server disables the nonstandard
behaviors and handles TIMESTAMP columns as follows:

• It is not possible to assign a TIMESTAMP column a value of NULL to set it to the current timestamp.
To assign the current timestamp, set the column to CURRENT_TIMESTAMP or a synonym such as
NOW().

• TIMESTAMP columns not explicitly declared with the NOT NULL attribute are automatically

declared with the NULL attribute and permit NULL values. Assigning such a column a value of
NULL sets it to NULL, not the current timestamp.

• TIMESTAMP columns declared with the NOT NULL attribute do not permit NULL values. For inserts
that specify NULL for such a column, the result is either an error for a single-row insert if strict SQL

909

Server System Variables

mode is enabled, or '0000-00-00 00:00:00' is inserted for multiple-row inserts with strict
SQL mode disabled. In no case does assigning the column a value of NULL set it to the current
timestamp.

• TIMESTAMP columns explicitly declared with the NOT NULL attribute and without an explicit

DEFAULT attribute are treated as having no default value. For inserted rows that specify no explicit
value for such a column, the result depends on the SQL mode. If strict SQL mode is enabled, an
error occurs. If strict SQL mode is not enabled, the column is declared with the implicit default
of '0000-00-00 00:00:00' and a warning occurs. This is similar to how MySQL treats other
temporal types such as DATETIME.

• No TIMESTAMP column is automatically declared with the DEFAULT CURRENT_TIMESTAMP or ON

UPDATE CURRENT_TIMESTAMP attributes. Those attributes must be explicitly specified.

• The first TIMESTAMP column in a table is not handled differently from TIMESTAMP columns

following the first one.

If explicit_defaults_for_timestamp is disabled at server startup, this warning appears in the
error log:

[Warning] TIMESTAMP with implicit DEFAULT value is deprecated.
Please use --explicit_defaults_for_timestamp server option (see
documentation for more details).

As indicated by the warning, to disable the deprecated nonstandard behaviors, enable the
explicit_defaults_for_timestamp system variable at server startup.

Note

explicit_defaults_for_timestamp is itself deprecated because its
only purpose is to permit control over deprecated TIMESTAMP behaviors
that are to be removed in a future MySQL release. When removal of those
behaviors occurs, expect explicit_defaults_for_timestamp to be
removed as well.

For additional information, see Section 13.2.5, “Automatic Initialization and Updating for
TIMESTAMP and DATETIME”.

• external_user

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

external_user

Session

No

No

String

The external user name used during the authentication process, as set by the plugin used to
authenticate the client. With native (built-in) MySQL authentication, or if the plugin does not set the
value, this variable is NULL. See Section 8.2.19, “Proxy Users”.

• flush

Command-Line Format

System Variable

Scope

Dynamic

910

SET_VAR Hint Applies

--flush[={OFF|ON}]

flush

Global

Yes

No

Server System Variables

Boolean

OFF

Type

Default Value

Applies to MyISAM, only.

If ON, the server flushes (synchronizes) all changes to disk after each SQL statement. Normally,
MySQL does a write of all changes to disk only after each SQL statement and lets the operating
system handle the synchronizing to disk. See Section B.3.3.3, “What to Do If MySQL Keeps
Crashing”. This variable is set to ON if you start mysqld with the --flush option.

Note

If flush is enabled, the value of flush_time does not matter and changes
to flush_time have no effect on flush behavior.

• flush_time

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

--flush-time=#

flush_time

Global

Yes

No

Integer

0

0

31536000

seconds

If this is set to a nonzero value, all tables are closed every flush_time seconds to free up
resources and synchronize unflushed data to disk. This option is best used only on systems with
minimal resources.

Note

If flush is enabled, the value of flush_time does not matter and changes
to flush_time have no effect on flush behavior.

• foreign_key_checks

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

foreign_key_checks

Global, Session

Yes

Yes

Boolean

ON

If set to 1 (the default), foreign key constraints are checked. If set to 0, foreign key constraints are
ignored, with a couple of exceptions. When re-creating a table that was dropped, an error is returned
if the table definition does not conform to the foreign key constraints referencing the table. Likewise,

911

Server System Variables

an ALTER TABLE operation returns an error if a foreign key definition is incorrectly formed. For more
information, see Section 15.1.20.5, “FOREIGN KEY Constraints”.

Setting this variable has the same effect on NDB tables as it does for InnoDB tables. Typically you
leave this setting enabled during normal operation, to enforce referential integrity. Disabling foreign
key checking can be useful for reloading InnoDB tables in an order different from that required by
their parent/child relationships. See Section 15.1.20.5, “FOREIGN KEY Constraints”.

Setting foreign_key_checks to 0 also affects data definition statements: DROP SCHEMA drops
a schema even if it contains tables that have foreign keys that are referred to by tables outside the
schema, and DROP TABLE drops tables that have foreign keys that are referred to by other tables.

Note

Setting foreign_key_checks to 1 does not trigger a scan of the existing
table data. Therefore, rows added to the table while foreign_key_checks
= 0 are not verified for consistency.

Dropping an index required by a foreign key constraint is not permitted, even
with foreign_key_checks=0. The foreign key constraint must be removed
before dropping the index.

• ft_boolean_syntax

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--ft-boolean-syntax=name

ft_boolean_syntax

Global

Yes

No

String

+ -><()~*:""&|

The list of operators supported by boolean full-text searches performed using IN BOOLEAN MODE.
See Section 14.9.2, “Boolean Full-Text Searches”.

The default variable value is '+ -><()~*:""&|'. The rules for changing the value are as follows:

• Operator function is determined by position within the string.

• The replacement value must be 14 characters.

• Each character must be an ASCII nonalphanumeric character.

• Either the first or second character must be a space.

• No duplicates are permitted except the phrase quoting operators in positions 11 and 12. These two

characters are not required to be the same, but they are the only two that may be.

• Positions 10, 13, and 14 (which by default are set to :, &, and |) are reserved for future

extensions.

• ft_max_word_len

Command-Line Format

System Variable

Scope

Dynamic

912

--ft-max-word-len=#

ft_max_word_len

Global

No

Server System Variables

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

No

Integer

84

10

84

The maximum length of the word to be included in a MyISAM FULLTEXT index.

Note

FULLTEXT indexes on MyISAM tables must be rebuilt after changing this
variable. Use REPAIR TABLE tbl_name QUICK.

• ft_min_word_len

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

--ft-min-word-len=#

ft_min_word_len

Global

No

No

Integer

4

1

82

The minimum length of the word to be included in a MyISAM FULLTEXT index.

Note

FULLTEXT indexes on MyISAM tables must be rebuilt after changing this
variable. Use REPAIR TABLE tbl_name QUICK.

• ft_query_expansion_limit

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

--ft-query-expansion-limit=#

ft_query_expansion_limit

Global

No

No

Integer

20

0

1000

The number of top matches to use for full-text searches performed using WITH QUERY EXPANSION.

• ft_stopword_file

Command-Line Format

--ft-stopword-file=file_name

System Variable

Scope

ft_stopword_file

Global

913

Server System Variables

Dynamic

SET_VAR Hint Applies

Type

No

No

File name

The file from which to read the list of stopwords for full-text searches on MyISAM tables. The server
looks for the file in the data directory unless an absolute path name is given to specify a different
directory. All the words from the file are used; comments are not honored. By default, a built-in list of
stopwords is used (as defined in the storage/myisam/ft_static.c file). Setting this variable to
the empty string ('') disables stopword filtering. See also Section 14.9.4, “Full-Text Stopwords”.

Note

FULLTEXT indexes on MyISAM tables must be rebuilt after changing this
variable or the contents of the stopword file. Use REPAIR TABLE tbl_name
QUICK.

• general_log

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--general-log[={OFF|ON}]

general_log

Global

Yes

No

Boolean

OFF

Whether the general query log is enabled. The value can be 0 (or OFF) to disable the log or 1 (or ON)
to enable the log. The destination for log output is controlled by the log_output system variable; if
that value is NONE, no log entries are written even if the log is enabled.

• general_log_file

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--general-log-file=file_name

general_log_file

Global

Yes

No

File name

host_name.log

The name of the general query log file. The default value is host_name.log, but the initial value
can be changed with the --general_log_file option.

• generated_random_password_length

Command-Line Format

--generated-random-password-length=#

Introduced

System Variable

Scope

Dynamic

914

SET_VAR Hint Applies

8.0.18

generated_random_password_length

Global, Session

Yes

No

Type

Default Value

Minimum Value

Maximum Value

Server System Variables

Integer

20

5

255

The maximum number of characters permitted in random passwords generated for CREATE USER,
ALTER USER, and SET PASSWORD statements. For more information, see Random Password
Generation.

• global_connection_memory_limit

Command-Line Format

--global-connection-memory-limit=#

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

8.0.28

global_connection_memory_limit

Global

Yes

No

Integer

18446744073709551615

16777216

18446744073709551615

bytes

Set the total amount of memory that can be used by all user connections; that is,
Global_connection_memory should not exceed this amount. Any time that it does, all queries
(including any currently running) from regular users are rejected with ER_GLOBAL_CONN_LIMIT.

Memory used by the system users such as the MySQL root user is included in this total, but is not
counted towards the disconnection limit; such users are never disconnected due to memory usage.

Memory used by the InnoDB buffer pool is excluded from the total.

You must have the SYSTEM_VARIABLES_ADMIN or SUPER privilege to set this variable.

• global_connection_memory_tracking

Command-Line Format

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--global-connection-memory-
tracking={TRUE|FALSE}

8.0.28

global_connection_memory_tracking

Global, Session

Yes

No

Boolean

FALSE

Determines whether the server calculates Global_connection_memory. This variable
must be enabled explicitly; otherwise, the memory calculation is not performed, and
Global_connection_memory is not set.

You must have the SYSTEM_VARIABLES_ADMIN or SUPER privilege to set this variable.

915

Server System Variables

• group_concat_max_len

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

--group-concat-max-len=#

group_concat_max_len

Global, Session

Yes

Yes

Integer

1024

4

Maximum Value (64-bit platforms)

18446744073709551615

Maximum Value (32-bit platforms)

4294967295

The maximum permitted result length in bytes for the GROUP_CONCAT() function. The default is
1024.

• have_compress

YES if the zlib compression library is available to the server, NO if not. If not, the COMPRESS() and
UNCOMPRESS() functions cannot be used.

• have_dynamic_loading

YES if mysqld supports dynamic loading of plugins, NO if not. If the value is NO, you cannot use
options such as --plugin-load to load plugins at server startup, or the INSTALL PLUGIN
statement to load plugins at runtime.

• have_geometry

YES if the server supports spatial data types, NO if not.

• have_openssl

This variable is a synonym for have_ssl.

As of MySQL 8.0.26, have_openssl is deprecated and subject to removal in a future MySQL
version. For information about TLS properties of MySQL connection interfaces, use the
tls_channel_status table.

• have_profiling

YES if statement profiling capability is present, NO if not. If present, the profiling system variable
controls whether this capability is enabled or disabled. See Section 15.7.7.31, “SHOW PROFILES
Statement”.

This variable is deprecated and you should expect it to be removed in a future MySQL release.

• have_query_cache

The query cache was removed in MySQL 8.0.3. have_query_cache is deprecated, always has a
value of NO, and you should expect it to be removed in a future MySQL release.

• have_rtree_keys

YES if RTREE indexes are available, NO if not. (These are used for spatial indexes in MyISAM tables.)

916

• have_ssl

Deprecated

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Valid Values

Server System Variables

8.0.26

have_ssl

Global

No

No

String

YES (SSL support available)

DISABLED (SSL support was compiled into
server, but server was not started with necessary
options to enable it)

YES if mysqld supports SSL connections, DISABLED if the server was compiled with SSL support,
but was not started with the appropriate connection-encryption options. For more information, see
Section 2.8.6, “Configuring SSL Library Support”.

As of MySQL 8.0.26, have_ssl is deprecated and subject to removal in a future MySQL
version. For information about TLS properties of MySQL connection interfaces, use the
tls_channel_status table.

• have_statement_timeout

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

have_statement_timeout

Global

No

No

Boolean

Whether the statement execution timeout feature is available (see Statement Execution Time
Optimizer Hints). The value can be NO if the background thread used by this feature could not be
initialized.

• have_symlink

YES if symbolic link support is enabled, NO if not. This is required on Unix for support of the DATA
DIRECTORY and INDEX DIRECTORY table options. If the server is started with the --skip-
symbolic-links option, the value is DISABLED.

This variable has no meaning on Windows.

Note

Symbolic link support, along with the --symbolic-links option that
controls it, is deprecated; expect these to be removed in a future version
of MySQL. In addition, the option is disabled by default. The related
have_symlink system variable also is deprecated and you should expect it
to be removed in a future version of MySQL.

• histogram_generation_max_mem_size

Command-Line Format

System Variable

--histogram-generation-max-mem-
size=#
histogram_generation_max_mem_size 917

Server System Variables

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Global, Session

Yes

No

Integer

20000000

1000000

Maximum Value (64-bit platforms)

18446744073709551615

Maximum Value (32-bit platforms)

Unit

4294967295

bytes

The maximum amount of memory available for generating histogram statistics. See Section 10.9.6,
“Optimizer Statistics”, and Section 15.7.3.1, “ANALYZE TABLE Statement”.

Setting the session value of this system variable is a restricted operation. The session user must
have privileges sufficient to set restricted session variables. See Section 7.1.9.1, “System Variable
Privileges”.

• host_cache_size

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

--host-cache-size=#

host_cache_size

Global

Yes

No

Integer

-1 (signifies autosizing; do not assign this literal
value)

0

65536

The MySQL server maintains an in-memory host cache that contains client host name and
IP address information and is used to avoid Domain Name System (DNS) lookups; see
Section 7.1.12.3, “DNS Lookups and the Host Cache”.

The host_cache_size variable controls the size of the host cache, as well as the size
of the Performance Schema host_cache table that exposes the cache contents. Setting
host_cache_size has these effects:

• Setting the size to 0 disables the host cache. With the cache disabled, the server performs a DNS

lookup every time a client connects.

918

Server System Variables

• Changing the size at runtime causes an implicit host cache flushing operation that clears the host

cache, truncates the host_cache table, and unblocks any blocked hosts.

The default value is autosized to 128, plus 1 for a value of max_connections up to 500, plus 1 for
every increment of 20 over 500 in the max_connections value, capped to a limit of 2000.

Using the --skip-host-cache option is similar to setting the host_cache_size system variable
to 0, but host_cache_size is more flexible because it can also be used to resize, enable, and
disable the host cache at runtime, not just at server startup.

Starting the server with --skip-host-cache does not prevent runtime changes to the value
of host_cache_size, but such changes have no effect and the cache is not re-enabled even if
host_cache_size is set larger than 0.

Setting the host_cache_size system variable rather than the --skip-host-cache option is
preferred for the reasons given in the previous paragraph. In addition, the --skip-host-cache
option is deprecated and its removal is expected in a future version of MySQL; in MySQL 8.0.29 and
later, using the option raises a warning.

• hostname

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

hostname

Global

No

No

String

The server sets this variable to the server host name at startup. The maximum length is 255
characters as of MySQL 8.0.17, per RFC 1034, and 60 characters before that.

• identity

This variable is a synonym for the last_insert_id variable. It exists for compatibility with
other database systems. You can read its value with SELECT @@identity, and set it using SET
identity.

• init_connect

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

--init-connect=name

init_connect

Global

Yes

No

String

A string to be executed by the server for each client that connects. The string consists of one or more
SQL statements, separated by semicolon characters.

For users that have the CONNECTION_ADMIN privilege (or the deprecated SUPER privilege),
the content of init_connect is not executed. This is done so that an erroneous value for
init_connect does not prevent all clients from connecting. For example, the value might
contain a statement that has a syntax error, thus causing client connections to fail. Not executing

919

Server System Variables

init_connect for users that have the CONNECTION_ADMIN or SUPER privilege enables them to
open a connection and fix the init_connect value.

init_connect execution is skipped for any client user with an expired password. This is done
because such a user cannot execute arbitrary statements, and thus init_connect execution fails,
leaving the client unable to connect. Skipping init_connect execution enables the user to connect
and change password.

The server discards any result sets produced by statements in the value of init_connect.

• information_schema_stats_expiry

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

--information-schema-stats-expiry=#

information_schema_stats_expiry

Global, Session

Yes

No

Integer

86400

0

31536000

seconds

Some INFORMATION_SCHEMA tables contain columns that provide table statistics:

STATISTICS.CARDINALITY
TABLES.AUTO_INCREMENT
TABLES.AVG_ROW_LENGTH
TABLES.CHECKSUM
TABLES.CHECK_TIME
TABLES.CREATE_TIME
TABLES.DATA_FREE
TABLES.DATA_LENGTH
TABLES.INDEX_LENGTH
TABLES.MAX_DATA_LENGTH
TABLES.TABLE_ROWS
TABLES.UPDATE_TIME

Those columns represent dynamic table metadata; that is, information that changes as table
contents change.

By default, MySQL retrieves cached values for those columns from the mysql.index_stats and
mysql.table_stats dictionary tables when the columns are queried, which is more efficient
than retrieving statistics directly from the storage engine. If cached statistics are not available or
have expired, MySQL retrieves the latest statistics from the storage engine and caches them in
the mysql.index_stats and mysql.table_stats dictionary tables. Subsequent queries
retrieve the cached statistics until the cached statistics expire. A server restart or the first opening

920

Server System Variables

of the mysql.index_stats and mysql.table_stats tables do not update cached statistics
automatically.

The information_schema_stats_expiry session variable defines the period of time before
cached statistics expire. The default is 86400 seconds (24 hours), but the time period can be
extended to as much as one year.

To update cached values at any time for a given table, use ANALYZE TABLE.

To always retrieve the latest statistics directly from the storage engine and bypass cached values,
set information_schema_stats_expiry to 0.

Querying statistics columns does not store or update statistics in the mysql.index_stats and
mysql.table_stats dictionary tables under these circumstances:

• When cached statistics have not expired.

• When information_schema_stats_expiry is set to 0.

• When the server is in read_only, super_read_only, transaction_read_only, or

innodb_read_only mode.

• When the query also fetches Performance Schema data.

The statistics cache may be updated during a multiple-statement transaction before it is known
whether the transaction commits. As a result, the cache may contain information that does not
correspond to a known committed state. This can occur with autocommit=0 or after START
TRANSACTION.

information_schema_stats_expiry is a session variable, and each client session can define
its own expiration value. Statistics that are retrieved from the storage engine and cached by one
session are available to other sessions.

For related information, see Section 10.2.3, “Optimizing INFORMATION_SCHEMA Queries”.

• init_file

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

--init-file=file_name

init_file

Global

No

No

File name

If specified, this variable names a file containing SQL statements to be read and executed during
the startup process. Prior to MySQL 8.0.18, each statement must be on a single line and should not
include comments. As of MySQL 8.0.18, the acceptable format for statements in the file is expanded
to support these constructs:

• delimiter ;, to set the statement delimiter to the ; character.

• delimiter $$, to set the statement delimiter to the $$ character sequence.

• Multiple statements on the same line, delimited by the current delimiter.

• Multiple-line statements.

• Comments from a # character to the end of the line.

921

Server System Variables

• Comments from a --  sequence to the end of the line.

• C-style comments from a /* sequence to the following */ sequence, including over multiple lines.

• Multiple-line string literals enclosed within either single quote (') or double quote (") characters.

If the server is started with the --initialize or --initialize-insecure option, it operates
in bootstrap mode and some functionality is unavailable that limits the statements permitted in
the file. These include statements that relate to account management (such as CREATE USER or
GRANT), replication, and global transaction identifiers. See Section 19.1.3, “Replication with Global
Transaction Identifiers”.

As of MySQL 8.0.17, threads created during server startup are used for tasks such as
creating the data dictionary, running upgrade procedures, and creating system tables. To
ensure a stable and predictable environment, these threads are executed with the server
built-in defaults for some system variables, such as sql_mode, character_set_server,
collation_server, completion_type, explicit_defaults_for_timestamp, and
default_table_encryption.

These threads are also used to execute the statements in any file specified with init_file when
starting the server, so such statements execute with the server's built-in default values for those
system variables.

• innodb_xxx

InnoDB system variables are listed in Section 17.14, “InnoDB Startup Options and System
Variables”. These variables control many aspects of storage, memory use, and I/O patterns for
InnoDB tables, and are especially important now that InnoDB is the default storage engine.

• insert_id

The value to be used by the following INSERT or ALTER TABLE statement when inserting an
AUTO_INCREMENT value. This is mainly used with the binary log.

• interactive_timeout

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

--interactive-timeout=#

interactive_timeout

Global, Session

Yes

No

Integer

28800

1

31536000

seconds

The number of seconds the server waits for activity on an interactive connection before closing
it. An interactive client is defined as a client that uses the CLIENT_INTERACTIVE option to
mysql_real_connect(). See also wait_timeout.

• internal_tmp_disk_storage_engine

Command-Line Format

--internal-tmp-disk-storage-engine=#

Removed

8.0.16

922

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Valid Values

Server System Variables

internal_tmp_disk_storage_engine

Global

Yes

No

Enumeration

INNODB

MYISAM

INNODB

Important

In MySQL 8.0.16 and later, on-disk internal temporary tables always use the
InnoDB storage engine; as of MySQL 8.0.16, this variable has been removed
and is thus no longer supported.

Prior to MySQL 8.0.16, this variable determines the storage engine used for on-disk internal
temporary tables (see Storage Engine for On-Disk Internal Temporary Tables). Permitted values are
MYISAM and INNODB (the default).

• internal_tmp_mem_storage_engine

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Valid Values

--internal-tmp-mem-storage-engine=#

internal_tmp_mem_storage_engine

Global, Session

Yes

Yes

Enumeration

TempTable

MEMORY

TempTable

The storage engine for in-memory internal temporary tables (see Section 10.4.4, “Internal Temporary
Table Use in MySQL”). Permitted values are TempTable (the default) and MEMORY.

The optimizer uses the storage engine defined by internal_tmp_mem_storage_engine for in-
memory internal temporary tables.

From MySQL 8.0.27, configuring a session setting for internal_tmp_mem_storage_engine
requires the SESSION_VARIABLES_ADMIN or SYSTEM_VARIABLES_ADMIN privilege.

• join_buffer_size

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--join-buffer-size=#

join_buffer_size

Global, Session

Yes

Yes

Integer

262144

923

Server System Variables

Minimum Value

Maximum Value (Windows)

128

4294967168

Maximum Value (Other, 64-bit platforms)

18446744073709551488

Maximum Value (Other, 32-bit platforms)

4294967168

Unit

Block Size

bytes

128

The minimum size of the buffer that is used for plain index scans, range index scans, and joins that
do not use indexes and thus perform full table scans. In MySQL 8.0.18 and later, this variable also
controls the amount of memory used for hash joins. Normally, the best way to get fast joins is to add
indexes. Increase the value of join_buffer_size to get a faster full join when adding indexes
is not possible. One join buffer is allocated for each full join between two tables. For a complex join
between several tables for which indexes are not used, multiple join buffers might be necessary.

The default is 256KB. The maximum permissible setting for join_buffer_size is 4GB−1.
Larger values are permitted for 64-bit platforms (except 64-bit Windows, for which large values
are truncated to 4GB−1 with a warning). The block size is 128, and a value that is not an exact
multiple of the block size is rounded down to the next lower multiple of the block size by MySQL
Server before storing the value for the system variable. The parser allows values up to the
maximum unsigned integer value for the platform (4294967295 or 232
18446744073709551615 or 264

−1 for a 64-bit system) but the actual maximum is a block size lower.

−1 for a 32-bit system,

Unless a Block Nested-Loop or Batched Key Access algorithm is used, there is no gain from
setting the buffer larger than required to hold each matching row, and all joins allocate at least the
minimum size, so use caution in setting this variable to a large value globally. It is better to keep
the global setting small and change the session setting to a larger value only in sessions that are
doing large joins, or change the setting on a per-query basis by using a SET_VAR optimizer hint (see
Section 10.9.3, “Optimizer Hints”). Memory allocation time can cause substantial performance drops
if the global size is larger than needed by most queries that use it.

When Block Nested-Loop is used, a larger join buffer can be beneficial up to the point where all
required columns from all rows in the first table are stored in the join buffer. This depends on the
query; the optimal size may be smaller than holding all rows from the first tables.

When Batched Key Access is used, the value of join_buffer_size defines how large the batch
of keys is in each request to the storage engine. The larger the buffer, the more sequential access is
made to the right hand table of a join operation, which can significantly improve performance.

For additional information about join buffering, see Section 10.2.1.7, “Nested-Loop Join Algorithms”.
For information about Batched Key Access, see Section 10.2.1.12, “Block Nested-Loop and Batched
Key Access Joins”. For information about hash joins, see Section 10.2.1.4, “Hash Join Optimization”.

• keep_files_on_create

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--keep-files-on-create[={OFF|ON}]

keep_files_on_create

Global, Session

Yes

No

Boolean

OFF

If a MyISAM table is created with no DATA DIRECTORY option, the .MYD file is created in the
database directory. By default, if MyISAM finds an existing .MYD file in this case, it overwrites it. The

924

Server System Variables

same applies to .MYI files for tables created with no INDEX DIRECTORY option. To suppress this
behavior, set the keep_files_on_create variable to ON (1), in which case MyISAM does not
overwrite existing files and returns an error instead. The default value is OFF (0).

If a MyISAM table is created with a DATA DIRECTORY or INDEX DIRECTORY option and an existing
.MYD or .MYI file is found, MyISAM always returns an error. It does not overwrite a file in the
specified directory.

• key_buffer_size

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

--key-buffer-size=#

key_buffer_size

Global

Yes

No

Integer

8388608

0

Maximum Value (64-bit platforms)

OS_PER_PROCESS_LIMIT

Maximum Value (32-bit platforms)

Unit

4294967295

bytes

Index blocks for MyISAM tables are buffered and are shared by all threads. key_buffer_size is
the size of the buffer used for index blocks. The key buffer is also known as the key cache.

The minimum permissible setting is 0, but you cannot set key_buffer_size to 0 dynamically.
A setting of 0 drops the key cache, which is not permitted at runtime. Setting key_buffer_size
to 0 is permitted only at startup, in which case the key cache is not initialized. Changing the
key_buffer_size setting at runtime from a value of 0 to a permitted non-zero value initializes the
key cache.

key_buffer_size can be increased or decreased only in increments or multiples of 4096 bytes.
Increasing or decreasing the setting by a nonconforming value produces a warning and truncates the
setting to a conforming value.

The maximum permissible setting for key_buffer_size is 4GB−1 on 32-bit platforms. Larger
values are permitted for 64-bit platforms. The effective maximum size might be less, depending
on your available physical RAM and per-process RAM limits imposed by your operating system or
hardware platform. The value of this variable indicates the amount of memory requested. Internally,
the server allocates as much memory as possible up to this amount, but the actual allocation might
be less.

You can increase the value to get better index handling for all reads and multiple writes; on a system
whose primary function is to run MySQL using the MyISAM storage engine, 25% of the machine's
total memory is an acceptable value for this variable. However, you should be aware that, if you
make the value too large (for example, more than 50% of the machine's total memory), your system
might start to page and become extremely slow. This is because MySQL relies on the operating
system to perform file system caching for data reads, so you must leave some room for the file

925

Server System Variables

system cache. You should also consider the memory requirements of any other storage engines that
you may be using in addition to MyISAM.

For even more speed when writing many rows at the same time, use LOCK TABLES. See
Section 10.2.5.1, “Optimizing INSERT Statements”.

You can check the performance of the key buffer by issuing a SHOW STATUS statement
and examining the Key_read_requests, Key_reads, Key_write_requests, and
Key_writes status variables. (See Section 15.7.7, “SHOW Statements”.) The Key_reads/
Key_read_requests ratio should normally be less than 0.01. The Key_writes/
Key_write_requests ratio is usually near 1 if you are using mostly updates and deletes, but might
be much smaller if you tend to do updates that affect many rows at the same time or if you are using
the DELAY_KEY_WRITE table option.

The fraction of the key buffer in use can be determined using key_buffer_size in conjunction
with the Key_blocks_unused status variable and the buffer block size, which is available from the
key_cache_block_size system variable:

1 - ((Key_blocks_unused * key_cache_block_size) / key_buffer_size)

This value is an approximation because some space in the key buffer is allocated internally for
administrative structures. Factors that influence the amount of overhead for these structures
include block size and pointer size. As block size increases, the percentage of the key buffer lost to
overhead tends to decrease. Larger blocks results in a smaller number of read operations (because
more keys are obtained per read), but conversely an increase in reads of keys that are not examined
(if not all keys in a block are relevant to a query).

It is possible to create multiple MyISAM key caches. The size limit of 4GB applies to each cache
individually, not as a group. See Section 10.10.2, “The MyISAM Key Cache”.

• key_cache_age_threshold

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

--key-cache-age-threshold=#

key_cache_age_threshold

Global

Yes

No

Integer

300

100

Maximum Value (64-bit platforms)

18446744073709551516

Maximum Value (32-bit platforms)

4294967196

Block Size

100

This value controls the demotion of buffers from the hot sublist of a key cache to the warm sublist.
Lower values cause demotion to happen more quickly. The minimum value is 100. The default value
is 300. See Section 10.10.2, “The MyISAM Key Cache”.

• key_cache_block_size

Command-Line Format

System Variable

Scope

Dynamic

926

--key-cache-block-size=#

key_cache_block_size

Global

Yes

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

Block Size

Server System Variables

No

Integer

1024

512

16384

bytes

512

The size in bytes of blocks in the key cache. The default value is 1024. See Section 10.10.2, “The
MyISAM Key Cache”.

• key_cache_division_limit

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

--key-cache-division-limit=#

key_cache_division_limit

Global

Yes

No

Integer

100

1

100

The division point between the hot and warm sublists of the key cache buffer list. The value is the
percentage of the buffer list to use for the warm sublist. Permissible values range from 1 to 100. The
default value is 100. See Section 10.10.2, “The MyISAM Key Cache”.

• large_files_support

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

large_files_support

Global

No

No

Boolean

Whether mysqld was compiled with options for large file support.

• large_pages

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Platform Specific

Type

--large-pages[={OFF|ON}]

large_pages

Global

No

No

Linux

Boolean

927

Server System Variables

Default Value

OFF

Whether large page support is enabled (via the --large-pages option). See Section 10.12.3.3,
“Enabling Large Page Support”.

• large_page_size

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

large_page_size

Global

No

No

Integer

0

0

65535

bytes

If large page support is enabled, this shows the size of memory pages. Large memory pages
are supported only on Linux; on other platforms, the value of this variable is always 0. See
Section 10.12.3.3, “Enabling Large Page Support”.

• last_insert_id

The value to be returned from LAST_INSERT_ID(). This is stored in the binary log when you use
LAST_INSERT_ID() in a statement that updates a table. Setting this variable does not update the
value returned by the mysql_insert_id() C API function.

• lc_messages

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--lc-messages=name

lc_messages

Global, Session

Yes

No

String

en_US

The locale to use for error messages. The default is en_US. The server converts the argument to a
language name and combines it with the value of lc_messages_dir to produce the location for the
error message file. See Section 12.12, “Setting the Error Message Language”.

• lc_messages_dir

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

928

--lc-messages-dir=dir_name

lc_messages_dir

Global

No

No

Server System Variables

Type

Directory name

The directory where error messages are located. The server uses the value together with the value
of lc_messages to produce the location for the error message file. See Section 12.12, “Setting the
Error Message Language”.

• lc_time_names

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

--lc-time-names=value

lc_time_names

Global, Session

Yes

No

String

This variable specifies the locale that controls the language used to display day and month names
and abbreviations. This variable affects the output from the DATE_FORMAT(), DAYNAME() and
MONTHNAME() functions. Locale names are POSIX-style values such as 'ja_JP' or 'pt_BR'.
The default value is 'en_US' regardless of your system's locale setting. For further information, see
Section 12.16, “MySQL Server Locale Support”.

• license

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

The type of license the server has.

• local_infile

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

license

Global

No

No

String

GPL

--local-infile[={OFF|ON}]

local_infile

Global

Yes

No

Boolean

OFF

This variable controls server-side LOCAL capability for LOAD DATA statements. Depending on the
local_infile setting, the server refuses or permits local data loading by clients that have LOCAL
enabled on the client side.

To explicitly cause the server to refuse or permit LOAD DATA LOCAL statements (regardless
of how client programs and libraries are configured at build time or runtime), start mysqld with
local_infile disabled or enabled, respectively. local_infile can also be set at runtime. For
more information, see Section 8.1.6, “Security Considerations for LOAD DATA LOCAL”.

929

• lock_wait_timeout

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

Server System Variables

--lock-wait-timeout=#

lock_wait_timeout

Global, Session

Yes

Yes

Integer

31536000

1

31536000

seconds

This variable specifies the timeout in seconds for attempts to acquire metadata locks. The
permissible values range from 1 to 31536000 (1 year). The default is 31536000.

This timeout applies to all statements that use metadata locks. These include DML and DDL
operations on tables, views, stored procedures, and stored functions, as well as LOCK TABLES,
FLUSH TABLES WITH READ LOCK, and HANDLER statements.

This timeout does not apply to implicit accesses to system tables in the mysql database, such as
grant tables modified by GRANT or REVOKE statements or table logging statements. The timeout does
apply to system tables accessed directly, such as with SELECT or UPDATE.

The timeout value applies separately for each metadata lock attempt. A given statement can
require more than one lock, so it is possible for the statement to block for longer than the
lock_wait_timeout value before reporting a timeout error. When lock timeout occurs,
ER_LOCK_WAIT_TIMEOUT is reported.

lock_wait_timeout also defines the amount of time that a LOCK INSTANCE FOR BACKUP
statement waits for a lock before giving up.

• locked_in_memory

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

locked_in_memory

Global

No

No

Boolean

OFF

Whether mysqld was locked in memory with --memlock.

• log_error

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

930

--log-error[=file_name]

log_error

Global

No

No

Server System Variables

Type

File name

The default error log destination. If the destination is the console, the value is stderr. Otherwise,
the destination is a file and the log_error value is the file name. See Section 7.4.2, “The Error
Log”.

• log_error_services

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--log-error-services=value

log_error_services

Global

Yes

No

String

log_filter_internal;
log_sink_internal

The components to enable for error logging. The variable may contain a list with 0, 1, or many
elements. In the latter case, elements may be delimited by semicolon or (as of MySQL 8.0.12)
comma, optionally followed by space. A given setting cannot use both semicolon and comma
separators. Component order is significant because the server executes components in the order
listed.

From MySQL 8.0.30, any loadable (not built in) component named in the log_error_services
is implicitly loaded if it is not already loaded. Before MySQL 8.0.30, any loadable (not built in)
component named in the log_error_services value must first be installed with INSTALL
COMPONENT. For more information, see Section 7.4.2.1, “Error Log Configuration”.

• log_error_suppression_list

Command-Line Format

--log-error-suppression-list=value

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

8.0.13

log_error_suppression_list

Global

Yes

No

String

empty string

The log_error_suppression_list system variable applies to events intended for the
error log and specifies which events to suppress when they occur with a priority of WARNING or
INFORMATION. For example, if a particular type of warning is considered undesirable “noise” in the
error log because it occurs frequently but is not of interest, it can be suppressed. This variable affects
filtering performed by the log_filter_internal error log filter component, which is enabled
by default (see Section 7.5.3, “Error Log Components”). If log_filter_internal is disabled,
log_error_suppression_list has no effect.

The log_error_suppression_list value may be the empty string for no suppression, or a list
of one or more comma-separated values indicating the error codes to suppress. Error codes may
be specified in symbolic or numeric form. A numeric code may be specified with or without the MY-
prefix. Leading zeros in the numeric part are not significant. Examples of permitted code formats:

ER_SERVER_SHUTDOWN_COMPLETE
MY-000031

931

Server System Variables

000031
MY-31
31

Symbolic values are preferable to numeric values for readability and portability. For information about
the permitted error symbols and numbers, see MySQL 8.0 Error Message Reference.

The effect of log_error_suppression_list combines with that of log_error_verbosity.
For additional information, see Section 7.4.2.5, “Priority-Based Error Log Filtering
(log_filter_internal)”.

• log_error_verbosity

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

--log-error-verbosity=#

log_error_verbosity

Global

Yes

No

Integer

2

1

3

The log_error_verbosity system variable specifies the verbosity for handling events intended
for the error log. This variable affects filtering performed by the log_filter_internal error
log filter component, which is enabled by default (see Section 7.5.3, “Error Log Components”). If
log_filter_internal is disabled, log_error_verbosity has no effect.

Events intended for the error log have a priority of ERROR, WARNING, or INFORMATION.
log_error_verbosity controls verbosity based on which priorities to permit for messages written
to the log, as shown in the following table.

log_error_verbosity Value

Permitted Message Priorities

1

2

3

ERROR

ERROR, WARNING

ERROR, WARNING, INFORMATION

There is also a priority of SYSTEM. System messages about non-error situations are printed to the
error log regardless of the log_error_verbosity value. These messages include startup and
shutdown messages, and some significant changes to settings.

The effect of log_error_verbosity combines with that of log_error_suppression_list.
For additional information, see Section 7.4.2.5, “Priority-Based Error Log Filtering
(log_filter_internal)”.

• log_output

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

932

Type

--log-output=name

log_output

Global

Yes

No

Set

Default Value

Valid Values

Server System Variables

FILE

TABLE

FILE

NONE

The destination or destinations for general query log and slow query log output. The value is a list
one or more comma-separated words chosen from TABLE, FILE, and NONE. TABLE selects logging
to the general_log and slow_log tables in the mysql system schema. FILE selects logging to
log files. NONE disables logging. If NONE is present in the value, it takes precedence over any other
words that are present. TABLE and FILE can both be given to select both log output destinations.

This variable selects log output destinations, but does not enable log output. To do that,
enable the general_log and slow_query_log system variables. For FILE logging, the
general_log_file and slow_query_log_file system variables determine the log file
locations. For more information, see Section 7.4.1, “Selecting General Query Log and Slow Query
Log Output Destinations”.

• log_queries_not_using_indexes

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--log-queries-not-using-
indexes[={OFF|ON}]

log_queries_not_using_indexes

Global

Yes

No

Boolean

OFF

If you enable this variable with the slow query log enabled, queries that are expected to retrieve all
rows are logged. See Section 7.4.5, “The Slow Query Log”. This option does not necessarily mean
that no index is used. For example, a query that uses a full index scan uses an index but would be
logged because the index would not limit the number of rows.

• log_raw

Command-Line Format

--log-raw[={OFF|ON}]

System Variable (≥ 8.0.19)
Scope (≥ 8.0.19)
Dynamic (≥ 8.0.19)
SET_VAR Hint Applies (≥ 8.0.19)
Type

Default Value

log_raw

Global

Yes

No

Boolean

OFF

The log_raw system variable is initially set to the value of the --log-raw option. See the
description of that option for more information. The system variable may also be set at runtime to
change password masking behavior.

• log_slow_admin_statements

Command-Line Format

--log-slow-admin-statements[={OFF|
ON}]

933

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Server System Variables

log_slow_admin_statements

Global

Yes

No

Boolean

OFF

Include slow administrative statements in the statements written to the slow query log. Administrative
statements include ALTER TABLE, ANALYZE TABLE, CHECK TABLE, CREATE INDEX, DROP
INDEX, OPTIMIZE TABLE, and REPAIR TABLE.

• log_slow_extra

Command-Line Format

--log-slow-extra[={OFF|ON}]

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

8.0.14

log_slow_extra

Global

Yes

No

Boolean

OFF

If the slow query log is enabled and the output destination includes FILE, the server writes additional
fields to log file lines that provide information about slow statements. See Section 7.4.5, “The Slow
Query Log”. TABLE output is unaffected.

• log_syslog

Command-Line Format

--log-syslog[={OFF|ON}]

Deprecated

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Yes (removed in 8.0.13)

log_syslog

Global

Yes

No

Boolean

ON (when error logging to system log is enabled)

Prior to MySQL 8.0, this variable controlled whether to perform error logging to the system log (the
Event Log on Windows, and syslog on Unix and Unix-like systems).

In MySQL 8.0, the log_sink_syseventlog log component implements error logging to the system
log (see Section 7.4.2.8, “Error Logging to the System Log”), so this type of logging can be enabled
by adding that component to the log_error_services system variable. log_syslog is removed.
(Prior to MySQL 8.0.13, log_syslog exists but is deprecated and has no effect.)

• log_syslog_facility

Command-Line Format

--log-syslog-facility=value

Removed

System Variable

934

8.0.13

log_syslog_facility

Server System Variables

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Global

Yes

No

String

daemon

This variable was removed in MySQL 8.0.13 and replaced by syseventlog.facility.

• log_syslog_include_pid

Command-Line Format

--log-syslog-include-pid[={OFF|ON}]

Removed

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

8.0.13

log_syslog_include_pid

Global

Yes

No

Boolean

ON

This variable was removed in MySQL 8.0.13 and replaced by syseventlog.include_pid.

• log_syslog_tag

Command-Line Format

--log-syslog-tag=tag

Removed

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

8.0.13

log_syslog_tag

Global

Yes

No

String

empty string

This variable was removed in MySQL 8.0.13 and replaced by syseventlog.tag.

• log_timestamps

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Valid Values

--log-timestamps=#

log_timestamps

Global

Yes

No

Enumeration

UTC

UTC

SYSTEM

This variable controls the time zone of timestamps in messages written to the error log, and in
general query log and slow query log messages written to files. It does not affect the time zone

935

Server System Variables

of general query log and slow query log messages written to tables (mysql.general_log,
mysql.slow_log). Rows retrieved from those tables can be converted from the local system time
zone to any desired time zone with CONVERT_TZ() or by setting the session time_zone system
variable.

Permitted log_timestamps values are UTC (the default) and SYSTEM (the local system time zone).

Timestamps are written using ISO 8601 / RFC 3339 format: YYYY-MM-DDThh:mm:ss.uuuuuu plus
a tail value of Z signifying Zulu time (UTC) or ±hh:mm (an offset from UTC).

• log_throttle_queries_not_using_indexes

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

--log-throttle-queries-not-using-
indexes=#

log_throttle_queries_not_using_indexes

Global

Yes

No

Integer

0

0

4294967295

If log_queries_not_using_indexes is enabled, the
log_throttle_queries_not_using_indexes variable limits the number of such queries per
minute that can be written to the slow query log. A value of 0 (the default) means “no limit”. For more
information, see Section 7.4.5, “The Slow Query Log”.

• long_query_time

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

--long-query-time=#

long_query_time

Global, Session

Yes

No

Numeric

10

0

31536000

seconds

If a query takes longer than this many seconds, the server increments the Slow_queries status
variable. If the slow query log is enabled, the query is logged to the slow query log file. This value
is measured in real time, not CPU time, so a query that is under the threshold on a lightly loaded
system might be above the threshold on a heavily loaded one. The minimum and default values of
long_query_time are 0 and 10, respectively. The maximum is 31536000, which is 365 days in
seconds. The value can be specified to a resolution of microseconds. See Section 7.4.5, “The Slow
Query Log”.

Smaller values of this variable result in more statements being considered long-running, with
the result that more space is required for the slow query log. For very small values (less than
one second), the log may grow quite large in a small time. Increasing the number of statements

936

Server System Variables

considered long-running may also result in false positives for the “excessive Number of Long
Running Processes” alert in MySQL Enterprise Monitor, especially if Group Replication is enabled.
For these reasons, very small values should be used in test environments only, or, in production
environments, only for a short period.

mysqldump performs a full table scan, which means its queries can often exceed a
long_query_time setting that is useful for regular queries. From MySQL 8.0.30, if you want to
exclude most or all of mysqldump’s queries from the slow query log, you can set mysqldump’s
--mysqld-long-query-time command line option to change the session value of the system
variable to a higher value.

• low_priority_updates

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--low-priority-updates[={OFF|ON}]

low_priority_updates

Global, Session

Yes

No

Boolean

OFF

If set to 1, all INSERT, UPDATE, DELETE, and LOCK TABLE WRITE statements wait until there is
no pending SELECT or LOCK TABLE READ on the affected table. The same effect can be obtained
using {INSERT | REPLACE | DELETE | UPDATE} LOW_PRIORITY ... to lower the priority of
only one query. This variable affects only storage engines that use only table-level locking (such as
MyISAM, MEMORY, and MERGE). See Section 10.11.2, “Table Locking Issues”.

As of MySQL 8.0.27, setting the session value of this system variable is a restricted operation. The
session user must have privileges sufficient to set restricted session variables. See Section 7.1.9.1,
“System Variable Privileges”.

• lower_case_file_system

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

lower_case_file_system

Global

No

No

Boolean

This variable describes the case sensitivity of file names on the file system where the data directory
is located. OFF means file names are case-sensitive, ON means they are not case-sensitive. This
variable is read only because it reflects a file system attribute and setting it would have no effect on
the file system.

• lower_case_table_names

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value (macOS)

--lower-case-table-names[=#]

lower_case_table_names

Global

No

No

Integer

2

937

Server System Variables

Default Value (Unix)

Default Value (Windows)

Minimum Value

Maximum Value

0

1

0

2

If set to 0, table names are stored as specified and comparisons are case-sensitive. If set to 1, table
names are stored in lowercase on disk and comparisons are not case-sensitive. If set to 2, table
names are stored as given but compared in lowercase. This option also applies to database names
and table aliases. For additional details, see Section 11.2.3, “Identifier Case Sensitivity”.

The default value of this variable is platform-dependent (see lower_case_file_system). On
Linux and other Unix-like systems, the default is 0. On Windows the default value is 1. On macOS,
the default value is 2. On Linux (and other Unix-like systems), setting the value to 2 is not supported;
the server forces the value to 0 instead.

You should not set lower_case_table_names to 0 if you are running MySQL on a system where
the data directory resides on a case-insensitive file system (such as on Windows or macOS). It is an
unsupported combination that could result in a hang condition when running an INSERT INTO ...
SELECT ... FROM tbl_name operation with the wrong tbl_name lettercase. With MyISAM,
accessing table names using different lettercases could cause index corruption.

An error message is printed and the server exits if you attempt to start the server with --
lower_case_table_names=0 on a case-insensitive file system.

The setting of this variable affects the behavior of replication filtering options with regard to case
sensitivity. For more information, see Section 19.2.5, “How Servers Evaluate Replication Filtering
Rules”.

It is prohibited to start the server with a lower_case_table_names setting that is different from
the setting used when the server was initialized. The restriction is necessary because collations
used by various data dictionary table fields are determined by the setting defined when the server
is initialized, and restarting the server with a different setting would introduce inconsistencies with
respect to how identifiers are ordered and compared.

It is therefore necessary to configure lower_case_table_names to the desired setting before
initializing the server. In most cases, this requires configuring lower_case_table_names in a
MySQL option file before starting the MySQL server for the first time. For APT installations on Debian
and Ubuntu, however, the server is initialized for you, and there is no opportunity to configure the
setting in an option file beforehand. You must therefore use the debconf-set-selection utility
prior to installing MySQL using APT to enable lower_case_table_names. To do so, run this
command before installing MySQL using APT:

$> sudo debconf-set-selections <<< "mysql-server mysql-server/lowercase-table-names select Enabled"

Note

The ability to enable lower_case_table_names using debconf-
set-selections was added in MySQL 8.0.17. Enabling
lower_case_table_names sets the value to 1.

• mandatory_roles

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

938

--mandatory-roles=value

mandatory_roles

Global

Yes

No

Server System Variables

Type

Default Value

String

empty string

Roles the server should treat as mandatory. In effect, these roles are automatically granted to every
user, although setting mandatory_roles does not actually change any user accounts, and the
granted roles are not visible in the mysql.role_edges system table.

The variable value is a comma-separated list of role names. Example:

SET PERSIST mandatory_roles = '`role1`@`%`,`role2`,role3,role4@localhost';

Setting the runtime value of mandatory_roles requires the ROLE_ADMIN privilege, in addition to
the SYSTEM_VARIABLES_ADMIN privilege (or the deprecated SUPER privilege) normally required to
set a global system variable runtime value.

Role names consist of a user part and host part in user_name@host_name format. The host part, if
omitted, defaults to %. For additional information, see Section 8.2.5, “Specifying Role Names”.

The mandatory_roles value is a string, so user names and host names, if quoted, must be written
in a fashion permitted for quoting within quoted strings.

Roles named in the value of mandatory_roles cannot be revoked with REVOKE or dropped with
DROP ROLE or DROP USER.

To prevent sessions from being made system sessions by default, a role that has the SYSTEM_USER
privilege cannot be listed in the value of the mandatory_roles system variable:

• If mandatory_roles is assigned a role at startup that has the SYSTEM_USER privilege, the server

writes a message to the error log and exits.

• If mandatory_roles is assigned a role at runtime that has the SYSTEM_USER privilege, an error

occurs and the mandatory_roles value remains unchanged.

Mandatory roles, like explicitly granted roles, do not take effect until activated (see Activating Roles).
At login time, role activation occurs for all granted roles if the activate_all_roles_on_login
system variable is enabled; otherwise, or for roles that are set as default roles otherwise. At runtime,
SET ROLE activates roles.

Roles that do not exist when assigned to mandatory_roles but are created later may require
special treatment to be considered mandatory. For details, see Defining Mandatory Roles.

SHOW GRANTS displays mandatory roles according to the rules described in Section 15.7.7.21,
“SHOW GRANTS Statement”.

• max_allowed_packet

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

--max-allowed-packet=#

max_allowed_packet

Global, Session

Yes

No

Integer

67108864

1024

1073741824

bytes

939

Server System Variables

Block Size

1024

The maximum size of one packet or any generated/intermediate string, or any parameter sent by the
mysql_stmt_send_long_data() C API function. The default is 64MB.

The packet message buffer is initialized to net_buffer_length bytes, but can grow up to
max_allowed_packet bytes when needed. This value by default is small, to catch large (possibly
incorrect) packets.

You must increase this value if you are using large BLOB columns or long strings. It should be as
big as the largest BLOB you want to use. The protocol limit for max_allowed_packet is 1GB. The
value should be a multiple of 1024; nonmultiples are rounded down to the nearest multiple.

When you change the message buffer size by changing the value of the max_allowed_packet
variable, you should also change the buffer size on the client side if your client program permits
it. The default max_allowed_packet value built in to the client library is 1GB, but individual
client programs might override this. For example, mysql and mysqldump have defaults of
16MB and 24MB, respectively. They also enable you to change the client-side value by setting
max_allowed_packet on the command line or in an option file.

The session value of this variable is read only. The client can receive up to as many bytes as the
session value. However, the server does not send to the client more bytes than the current global
max_allowed_packet value. (The global value could be less than the session value if the global
value is changed after the client connects.)

• max_connect_errors

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

--max-connect-errors=#

max_connect_errors

Global

Yes

No

Integer

100

1

Maximum Value (64-bit platforms)

18446744073709551615

Maximum Value (32-bit platforms)

4294967295

After max_connect_errors successive connection requests from a host are interrupted without a
successful connection, the server blocks that host from further connections. If a connection from a
host is established successfully within fewer than max_connect_errors attempts after a previous
connection was interrupted, the error count for the host is cleared to zero. To unblock blocked hosts,
flush the host cache; see Flushing the Host Cache.

• max_connections

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

940

--max-connections=#

max_connections

Global

Yes

No

Integer

151

Server System Variables

Minimum Value

Maximum Value

1

100000

The maximum permitted number of simultaneous client connections. The maximum effective value
is the lesser of the effective value of open_files_limit - 810, and the value actually set for
max_connections.

For more information, see Section 7.1.12.1, “Connection Interfaces”.

• max_delayed_threads

Command-Line Format

--max-delayed-threads=#

Deprecated

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Yes

max_delayed_threads

Global, Session

Yes

No

Integer

20

0

16384

This system variable is deprecated (because DELAYED inserts are not supported) and subject to
removal in a future MySQL release.

As of MySQL 8.0.27, setting the session value of this system variable is a restricted operation. The
session user must have privileges sufficient to set restricted session variables. See Section 7.1.9.1,
“System Variable Privileges”.

• max_digest_length

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

--max-digest-length=#

max_digest_length

Global

No

No

Integer

1024

0

1048576

bytes

The maximum number of bytes of memory reserved per session for computation of normalized
statement digests. Once that amount of space is used during digest computation, truncation occurs:
no further tokens from a parsed statement are collected or figure into its digest value. Statements
that differ only after that many bytes of parsed tokens produce the same normalized statement digest
and are considered identical if compared or if aggregated for digest statistics.

The length used for calculating a normalized statement digest is the sum of the length of the
normalized statement digest and the length of the statement digest. Since the length of the statement
digest is always 64, this is equivalent to LENGTH (STATEMENT_DIGEST_TEXT(statement) ) +

941

Server System Variables

64. This means that, when the value of max_digest_length is 1024 (the default), the maximum
length for a normalized SQL statement before truncation occurs is in effect 960 bytes.

Warning

Setting max_digest_length to zero disables digest production, which also
disables server functionality that requires digests, such as MySQL Enterprise
Firewall.

Decreasing the max_digest_length value reduces memory use but causes the digest value
of more statements to become indistinguishable if they differ only at the end. Increasing the value
permits longer statements to be distinguished but increases memory use, particularly for workloads
that involve large numbers of simultaneous sessions (the server allocates max_digest_length
bytes per session).

The parser uses this system variable as a limit on the maximum length of normalized statement
digests that it computes. The Performance Schema, if it tracks statement digests, makes
a copy of the digest value, using the performance_schema_max_digest_length.
system variable as a limit on the maximum length of digests that it stores. Consequently, if
performance_schema_max_digest_length is less than max_digest_length, digest values
stored in the Performance Schema are truncated relative to the original digest values.

For more information about statement digesting, see Section 29.10, “Performance Schema
Statement Digests and Sampling”.

• max_error_count

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

--max-error-count=#

max_error_count

Global, Session

Yes

Yes

Integer

1024

0

65535

The maximum number of error, warning, and information messages to be stored for display by the
SHOW ERRORS and SHOW WARNINGS statements. This is the same as the number of condition
areas in the diagnostics area, and thus the number of conditions that can be inspected by GET
DIAGNOSTICS.

As of MySQL 8.0.27, setting the session value of this system variable is a restricted operation. The
session user must have privileges sufficient to set restricted session variables. See Section 7.1.9.1,
“System Variable Privileges”.

• max_execution_time

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

942

Type

--max-execution-time=#

max_execution_time

Global, Session

Yes

Yes

Integer

Server System Variables

Default Value

Minimum Value

Maximum Value

Unit

0

0

4294967295

milliseconds

The execution timeout for SELECT statements, in milliseconds. If the value is 0, timeouts are not
enabled.

max_execution_time applies as follows:

• The global max_execution_time value provides the default for the session value for new

connections. The session value applies to SELECT executions executed within the session that
include no MAX_EXECUTION_TIME(N) optimizer hint or for which N is 0.

• max_execution_time applies to read-only SELECT statements. Statements that are not read

only are those that invoke a stored function that modifies data as a side effect.

• max_execution_time is ignored for SELECT statements in stored programs.

• max_heap_table_size

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

--max-heap-table-size=#

max_heap_table_size

Global, Session

Yes

Yes

Integer

16777216

16384

Maximum Value (64-bit platforms)

18446744073709550592

Maximum Value (32-bit platforms)

4294966272

Unit

Block Size

bytes

1024

This variable sets the maximum size to which user-created MEMORY tables are permitted to grow.
The value of the variable is used to calculate MEMORY table MAX_ROWS values.

Setting this variable has no effect on any existing MEMORY table, unless the table is re-created with
a statement such as CREATE TABLE or altered with ALTER TABLE or TRUNCATE TABLE. A server
restart also sets the maximum size of existing MEMORY tables to the global max_heap_table_size
value.

This variable is also used in conjunction with tmp_table_size to limit the size of internal in-
memory tables. See Section 10.4.4, “Internal Temporary Table Use in MySQL”.

max_heap_table_size is not replicated. See Section 19.5.1.21, “Replication and MEMORY
Tables”, and Section 19.5.1.39, “Replication and Variables”, for more information.

• max_insert_delayed_threads

Deprecated

System Variable

Scope

Yes

max_insert_delayed_threads

Global, Session

943

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Server System Variables

Yes

No

Integer

0

20

16384

This variable is a synonym for max_delayed_threads. Like max_delayed_threads, it is
deprecated (because DELAYED inserts are not supported) and subject to removal in a future MySQL
release.

As of MySQL 8.0.27, setting the session value of this system variable is a restricted operation. The
session user must have privileges sufficient to set restricted session variables. See Section 7.1.9.1,
“System Variable Privileges”.

• max_join_size

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

--max-join-size=#

max_join_size

Global, Session

Yes

Yes

Integer

18446744073709551615

1

18446744073709551615

As of MySQL 8.0.31, this represents a limit on the maximum number of row accesses in base
tables made by a join. If the server's estimate indicates that a greater number of rows than
max_join_size must be read from the base tables, the statement is rejected with an error.

MySQL 8.0.30 and earlier: Do not permit statements that probably need to examine more than
max_join_size rows (for single-table statements) or row combinations (for multiple-table
statements) or that are likely to do more than max_join_size disk seeks. By setting this value, you
can catch statements where keys are not used properly and that would probably take a long time.
Set it if your users tend to perform joins that lack a WHERE clause, that take a long time, or that return
millions of rows. For more information, see Using Safe-Updates Mode (--safe-updates).

Regardless of MySQL release version, setting this variable to a value other than DEFAULT
resets the value of sql_big_selects to 0. If you set the sql_big_selects value again, the
max_join_size variable is ignored.

• max_length_for_sort_data

Command-Line Format

--max-length-for-sort-data=#

Deprecated

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

944

8.0.20

max_length_for_sort_data

Global, Session

Yes

Yes

Integer

Default Value

Minimum Value

Maximum Value

Unit

Server System Variables

4096

4

8388608

bytes

This variable is deprecated as of MySQL 8.0.20 due to optimizer changes that make it obsolete
and of no effect. Previously, it acted as the cutoff on the size of index values that determines which
filesort algorithm to use. See Section 10.2.1.16, “ORDER BY Optimization”.

• max_points_in_geometry

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

--max-points-in-geometry=#

max_points_in_geometry

Global, Session

Yes

Yes

Integer

65536

3

1048576

The maximum value of the points_per_circle argument to the ST_Buffer_Strategy()
function.

• max_prepared_stmt_count

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value (≥ 8.0.18)
Maximum Value (≤ 8.0.17)

--max-prepared-stmt-count=#

max_prepared_stmt_count

Global

Yes

No

Integer

16382

0

4194304

1048576

This variable limits the total number of prepared statements in the server. It can be used in
environments where there is the potential for denial-of-service attacks based on running the server
out of memory by preparing huge numbers of statements. If the value is set lower than the current
number of prepared statements, existing statements are not affected and can be used, but no new
statements can be prepared until the current number drops below the limit. Setting the value to 0
disables prepared statements.

• max_seeks_for_key

Command-Line Format

System Variable

Scope

Dynamic

--max-seeks-for-key=#

max_seeks_for_key

Global, Session

Yes

945

Server System Variables

SET_VAR Hint Applies

Type

Default Value (Windows)

Yes

Integer

4294967295

Default Value (Other, 64-bit platforms)

18446744073709551615

Default Value (Other, 32-bit platforms)

4294967295

Minimum Value

Maximum Value (Windows)

1

4294967295

Maximum Value (Other, 64-bit platforms)

18446744073709551615

Maximum Value (Other, 32-bit platforms)

4294967295

Limit the assumed maximum number of seeks when looking up rows based on a key. The MySQL
optimizer assumes that no more than this number of key seeks are required when searching for
matching rows in a table by scanning an index, regardless of the actual cardinality of the index (see
Section 15.7.7.22, “SHOW INDEX Statement”). By setting this to a low value (say, 100), you can
force MySQL to prefer indexes instead of table scans.

• max_sort_length

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

--max-sort-length=#

max_sort_length

Global, Session

Yes

Yes

Integer

1024

4

8388608

bytes

The number of bytes to use when sorting string values which use PAD SPACE collations. The server
uses only the first max_sort_length bytes of any such value and ignores the rest. Consequently,
such values that differ only after the first max_sort_length bytes compare as equal for GROUP
BY, ORDER BY, and DISTINCT operations. (This behavior differs from previous versions of MySQL,
where this setting was applied to all values used in comparisons.)

Increasing the value of max_sort_length may require increasing the value of
sort_buffer_size as well. For details, see Section 10.2.1.16, “ORDER BY Optimization”

• max_sp_recursion_depth

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

946

--max-sp-recursion-depth[=#]

max_sp_recursion_depth

Global, Session

Yes

No

Integer

0

0

255

Server System Variables

The number of times that any given stored procedure may be called recursively. The default value
for this option is 0, which completely disables recursion in stored procedures. The maximum value is
255.

Stored procedure recursion increases the demand on thread stack space. If you increase the value
of max_sp_recursion_depth, it may be necessary to increase thread stack size by increasing the
value of thread_stack at server startup.

• max_user_connections

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

--max-user-connections=#

max_user_connections

Global, Session

Yes

No

Integer

0

0

4294967295

The maximum number of simultaneous connections permitted to any given MySQL user account. A
value of 0 (the default) means “no limit.”

This variable has a global value that can be set at server startup or runtime. It also has a read-only
session value that indicates the effective simultaneous-connection limit that applies to the account
associated with the current session. The session value is initialized as follows:

• If the user account has a nonzero MAX_USER_CONNECTIONS resource limit, the session

max_user_connections value is set to that limit.

• Otherwise, the session max_user_connections value is set to the global value.

Account resource limits are specified using the CREATE USER or ALTER USER statement. See
Section 8.2.21, “Setting Account Resource Limits”.

• max_write_lock_count

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

--max-write-lock-count=#

max_write_lock_count

Global

Yes

No

Integer

Default Value (Windows)

4294967295

Default Value (Other, 64-bit platforms)

18446744073709551615

Default Value (Other, 32-bit platforms)

4294967295

Minimum Value

Maximum Value (Windows)

1

4294967295

Maximum Value (Other, 64-bit platforms)

18446744073709551615

947

Server System Variables

Maximum Value (Other, 32-bit platforms)

4294967295

After this many write locks, permit some pending read lock requests to be processed in
between. Write lock requests have higher priority than read lock requests. However, if
max_write_lock_count is set to some low value (say, 10), read lock requests may be preferred
over pending write lock requests if the read lock requests have already been passed over in favor of
10 write lock requests. Normally this behavior does not occur because max_write_lock_count by
default has a very large value.

• mecab_rc_file

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

--mecab-rc-file=file_name

mecab_rc_file

Global

No

No

File name

The mecab_rc_file option is used when setting up the MeCab full-text parser.

The mecab_rc_file option defines the path to the mecabrc configuration file, which is the
configuration file for MeCab. The option is read-only and can only be set at startup. The mecabrc
configuration file is required to initialize MeCab.

For information about the MeCab full-text parser, see Section 14.9.9, “MeCab Full-Text Parser
Plugin”.

For information about options that can be specified in the MeCab mecabrc configuration file, refer to
the MeCab Documentation on the Google Developers site.

• metadata_locks_cache_size

Command-Line Format

--metadata-locks-cache-size=#

Deprecated

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

Yes (removed in 8.0.13)

metadata_locks_cache_size

Global

No

No

Integer

1024

1

1048576

bytes

This system variable was removed in MySQL 8.0.13.

• metadata_locks_hash_instances

Command-Line Format

--metadata-locks-hash-instances=#

Deprecated

System Variable

Scope

Yes (removed in 8.0.13)

metadata_locks_hash_instances

Global

948

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Server System Variables

No

No

Integer

8

1

1024

This system variable was removed in MySQL 8.0.13.

• min_examined_row_limit

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

--min-examined-row-limit=#

min_examined_row_limit

Global, Session

Yes

No

Integer

0

0

Maximum Value (64-bit platforms)

18446744073709551615

Maximum Value (32-bit platforms)

4294967295

Queries that examine fewer than this number of rows are not logged to the slow query log.

As of MySQL 8.0.27, setting the session value of this system variable is a restricted operation. The
session user must have privileges sufficient to set restricted session variables. See Section 7.1.9.1,
“System Variable Privileges”.

• myisam_data_pointer_size

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

--myisam-data-pointer-size=#

myisam_data_pointer_size

Global

Yes

No

Integer

6

2

7

bytes

The default pointer size in bytes, to be used by CREATE TABLE for MyISAM tables when no
MAX_ROWS option is specified. This variable cannot be less than 2 or larger than 7. The default value
is 6. See Section B.3.2.10, “The table is full”.

• myisam_max_sort_file_size

Command-Line Format

System Variable

--myisam-max-sort-file-size=#

myisam_max_sort_file_size

949

Server System Variables

Scope

Dynamic

SET_VAR Hint Applies

Type

Global

Yes

No

Integer

Default Value (Windows)

2146435072

Default Value (Other, 64-bit platforms)

9223372036853727232

Default Value (Other, 32-bit platforms)

2147483648

Minimum Value

Maximum Value (Windows)

0

2146435072

Maximum Value (Other, 64-bit platforms)

9223372036853727232

Maximum Value (Other, 32-bit platforms)

2147483648

Unit

bytes

The maximum size of the temporary file that MySQL is permitted to use while re-creating a MyISAM
index (during REPAIR TABLE, ALTER TABLE, or LOAD DATA). If the file size would be larger than
this value, the index is created using the key cache instead, which is slower. The value is given in
bytes.

If MyISAM index files exceed this size and disk space is available, increasing the value may help
performance. The space must be available in the file system containing the directory where the
original index file is located.

• myisam_mmap_size

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

--myisam-mmap-size=#

myisam_mmap_size

Global

No

No

Integer

Default Value (64-bit platforms)

18446744073709551615

Default Value (32-bit platforms)

4294967295

Minimum Value

7

Maximum Value (64-bit platforms)

18446744073709551615

Maximum Value (32-bit platforms)

Unit

4294967295

bytes

The maximum amount of memory to use for memory mapping compressed MyISAM files. If many
compressed MyISAM tables are used, the value can be decreased to reduce the likelihood of
memory-swapping problems.

• myisam_recover_options

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

950

--myisam-recover-options[=list]

myisam_recover_options

Global

No

No

Type

Default Value

Valid Values

Server System Variables

Enumeration

OFF

OFF

DEFAULT

BACKUP

FORCE

QUICK

Set the MyISAM storage engine recovery mode. The variable value is any combination of the values
of OFF, DEFAULT, BACKUP, FORCE, or QUICK. If you specify multiple values, separate them by
commas. Specifying the variable with no value at server startup is the same as specifying DEFAULT,
and specifying with an explicit value of "" disables recovery (same as a value of OFF). If recovery
is enabled, each time mysqld opens a MyISAM table, it checks whether the table is marked as
crashed or was not closed properly. (The last option works only if you are running with external
locking disabled.) If this is the case, mysqld runs a check on the table. If the table was corrupted,
mysqld attempts to repair it.

The following options affect how the repair works.

Option

OFF

DEFAULT

BACKUP

FORCE

QUICK

Description

No recovery.

Recovery without backup, forcing, or quick
checking.

If the data file was changed during recovery,
save a backup of the tbl_name.MYD file as
tbl_name-datetime.BAK.

Run recovery even if we would lose more than
one row from the .MYD file.

Do not check the rows in the table if there are not
any delete blocks.

Before the server automatically repairs a table, it writes a note about the repair to the error log. If you
want to be able to recover from most problems without user intervention, you should use the options
BACKUP,FORCE. This forces a repair of a table even if some rows would be deleted, but it keeps the
old data file as a backup so that you can later examine what happened.

See Section 18.2.1, “MyISAM Startup Options”.

• myisam_repair_threads

Command-Line Format

--myisam-repair-threads=#

Deprecated

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

8.0.29 (removed in 8.0.30)

myisam_repair_threads

Global, Session

Yes

No

Integer

1

1

951

Server System Variables

Maximum Value (64-bit platforms)

18446744073709551615

Maximum Value (32-bit platforms)

4294967295

Note

This system variable is deprecated in MySQL 8.0.29 and removed in MySQL
8.0.30.

From MySQL 8.0.29, values other than 1 produce a warning.

If this value is greater than 1, MyISAM table indexes are created in parallel (each index in its own
thread) during the Repair by sorting process. The default value is 1.

Note

Multithreaded repair is beta-quality code.

• myisam_sort_buffer_size

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

--myisam-sort-buffer-size=#

myisam_sort_buffer_size

Global, Session

Yes

No

Integer

8388608

4096

Maximum Value (64-bit platforms)

18446744073709551615

Maximum Value (32-bit platforms)

Unit

4294967295

bytes

The size of the buffer that is allocated when sorting MyISAM indexes during a REPAIR TABLE or
when creating indexes with CREATE INDEX or ALTER TABLE.

• myisam_stats_method

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Valid Values

--myisam-stats-method=name

myisam_stats_method

Global, Session

Yes

No

Enumeration

nulls_unequal

nulls_unequal

nulls_equal

nulls_ignored

How the server treats NULL values when collecting statistics about the distribution of index values
for MyISAM tables. This variable has three possible values, nulls_equal, nulls_unequal, and
nulls_ignored. For nulls_equal, all NULL index values are considered equal and form a single

952

Server System Variables

value group that has a size equal to the number of NULL values. For nulls_unequal, NULL values
are considered unequal, and each NULL forms a distinct value group of size 1. For nulls_ignored,
NULL values are ignored.

The method that is used for generating table statistics influences how the optimizer chooses
indexes for query execution, as described in Section 10.3.8, “InnoDB and MyISAM Index Statistics
Collection”.

• myisam_use_mmap

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--myisam-use-mmap[={OFF|ON}]

myisam_use_mmap

Global

Yes

No

Boolean

OFF

Use memory mapping for reading and writing MyISAM tables.

• mysql_native_password_proxy_users

Command-Line Format

Deprecated

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--mysql-native-password-proxy-
users[={OFF|ON}]

8.0.16

mysql_native_password_proxy_users

Global

Yes

No

Boolean

OFF

This variable controls whether the mysql_native_password built-in authentication plugin supports
proxy users. It has no effect unless the check_proxy_users system variable is enabled. For
information about user proxying, see Section 8.2.19, “Proxy Users”.

• named_pipe

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Platform Specific

Type

Default Value

--named-pipe[={OFF|ON}]

named_pipe

Global

No

No

Windows

Boolean

OFF

(Windows only.) Indicates whether the server supports connections over named pipes.

953

Server System Variables

• named_pipe_full_access_group

Command-Line Format

--named-pipe-full-access-group=value

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Platform Specific

Type

Default Value

Valid Values

8.0.14

named_pipe_full_access_group

Global

No

No

Windows

String

empty string

empty string

valid Windows local group name

*everyone*

(Windows only.) The access control granted to clients on the named pipe created by the MySQL
server is set to the minimum necessary for successful communication when the named_pipe
system variable is enabled to support named-pipe connections. Some MySQL client software can
open named pipe connections without any additional configuration; however, other client software
may still require full access to open a named pipe connection.

This variable sets the name of a Windows local group whose members are granted sufficient access
by the MySQL server to use named-pipe clients. As of MySQL 8.0.24, the default value is set to an
empty string, which means that no Windows user is granted full access to the named pipe.

A new Windows local group name (for example, mysql_access_client_users) can be created
in Windows and then used to replace the default value when access is absolutely necessary. In
this case, limit the membership of the group to as few users as possible, removing users from the
group when their client software is upgraded. A non-member of the group who attempts to open
a connection to MySQL with the affected named-pipe client is denied access until a Windows
administrator adds the user to the group. Newly added users must log out and log in again to join the
group (required by Windows).

Setting the value to '*everyone*' provides a language-independent way of referring to the
Everyone group on Windows. The Everyone group is not secure by default.

• net_buffer_length

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

954

--net-buffer-length=#

net_buffer_length

Global, Session

Yes

No

Integer

16384

1024

1048576

bytes

Server System Variables

Block Size

1024

Each client thread is associated with a connection buffer and result buffer. Both begin with a size
given by net_buffer_length but are dynamically enlarged up to max_allowed_packet bytes
as needed. The result buffer shrinks to net_buffer_length after each SQL statement.

This variable should not normally be changed, but if you have very little memory, you can set it to the
expected length of statements sent by clients. If statements exceed this length, the connection buffer
is automatically enlarged. The maximum value to which net_buffer_length can be set is 1MB.

The session value of this variable is read only.

• net_read_timeout

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

--net-read-timeout=#

net_read_timeout

Global, Session

Yes

No

Integer

30

1

31536000

seconds

The number of seconds to wait for more data from a connection before aborting the read. When the
server is reading from the client, net_read_timeout is the timeout value controlling when to abort.
When the server is writing to the client, net_write_timeout is the timeout value controlling when
to abort. See also replica_net_timeout and slave_net_timeout.

• net_retry_count

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

--net-retry-count=#

net_retry_count

Global, Session

Yes

No

Integer

10

1

Maximum Value (64-bit platforms)

18446744073709551615

Maximum Value (32-bit platforms)

4294967295

If a read or write on a communication port is interrupted, retry this many times before giving up. This
value should be set quite high on FreeBSD because internal interrupts are sent to all threads.

• net_write_timeout

Command-Line Format

--net-write-timeout=#

System Variable

Scope

net_write_timeout

Global, Session

955

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

Server System Variables

Yes

No

Integer

60

1

31536000

seconds

The number of seconds to wait for a block to be written to a connection before aborting the write.
See also net_read_timeout.

• new

Command-Line Format

--new[={OFF|ON}]

Deprecated

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Disabled by

Type

Default Value

8.0.35

new

Global, Session

Yes

No

skip-new

Boolean

OFF

This variable was used in MySQL 4.0 to turn on some 4.1 behaviors, and is retained for backward
compatibility. Its value is always OFF.

This variable is deprecated as of MySQL 8.0.35, and is subject to removal in a future release.

In NDB Cluster, setting this variable to ON makes it possible to employ partitioning types other than
KEY or LINEAR KEY with NDB tables. This experimental feature is not supported in production, and
is now deprecated and thus subject to removal in a future release. For additional information, see
User-defined partitioning and the NDB storage engine (NDB Cluster).

• ngram_token_size

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

--ngram-token-size=#

ngram_token_size

Global

No

No

Integer

2

1

956

Server System Variables

Maximum Value

10

Defines the n-gram token size for the n-gram full-text parser. The ngram_token_size option is
read-only and can only be modified at startup. The default value is 2 (bigram). The maximum value is
10.

For more information about how to configure this variable, see Section 14.9.8, “ngram Full-Text
Parser”.

• offline_mode

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--offline-mode[={OFF|ON}]

offline_mode

Global

Yes

No

Boolean

OFF

In offline mode, the MySQL instance disconnects client users unless they have relevant privileges,
and does not allow them to initiate new connections. Clients that are refused access receive an
ER_SERVER_OFFLINE_MODE error.

To put a server in offline mode, change the value of the offline_mode system variable from
OFF to ON. To resume normal operations, change offline_mode from ON to OFF. To control
offline mode, an administrator account must have the SYSTEM_VARIABLES_ADMIN privilege and
the CONNECTION_ADMIN privilege (or the deprecated SUPER privilege, which covers both these
privileges). CONNECTION_ADMIN is required from MySQL 8.0.31 and recommended in all releases to
prevent accidental lockout.

Offline mode has these characteristics:

• Connected client users who do not have the CONNECTION_ADMIN privilege (or the deprecated

SUPER privilege) are disconnected on the next request, with an appropriate error. Disconnection
includes terminating running statements and releasing locks. Such clients also cannot initiate new
connections, and receive an appropriate error.

• Connected client users who have the CONNECTION_ADMIN or SUPER privilege are not

disconnected, and can initiate new connections to manage the server.

• From MySQL 8.0.30, if the user that puts a server in offline mode does not have the

SYSTEM_USER privilege, connected client users who have the SYSTEM_USER privilege are also
not disconnected. However, these users cannot initiate new connections to the server while it is in
offline mode, unless they have the CONNECTION_ADMIN or SUPER privilege as well. It is only their
existing connection that cannot be terminated, because the SYSTEM_USER privilege is required to
kill a session or statement that is executing with the SYSTEM_USER privilege.

• Replication threads are permitted to keep applying data to the server.

• old

Command-Line Format

--old[={OFF|ON}]

Deprecated

System Variable

Scope

8.0.35

old

Global

957

Server System Variables

Dynamic

SET_VAR Hint Applies

Type

Default Value

No

No

Boolean

OFF

old is a compatibility variable. It is disabled by default, but can be enabled at startup to revert the
server to behaviors present in older versions.

When old is enabled, it changes the default scope of index hints to that used prior to MySQL 5.1.17.
That is, index hints with no FOR clause apply only to how indexes are used for row retrieval and not
to resolution of ORDER BY or GROUP BY clauses. (See Section 10.9.4, “Index Hints”.) Take care
about enabling this in a replication setup. With statement-based binary logging, having different
modes for the source and replicas might lead to replication errors.

This variable is deprecated as of MySQL 8.0.35, and is subject to removal in a future release.

• old_alter_table

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--old-alter-table[={OFF|ON}]

old_alter_table

Global, Session

Yes

No

Boolean

OFF

When this variable is enabled, the server does not use the optimized method of processing
an ALTER TABLE operation. It reverts to using a temporary table, copying over the data, and
then renaming the temporary table to the original, as used by MySQL 5.0 and earlier. For more
information on the operation of ALTER TABLE, see Section 15.1.9, “ALTER TABLE Statement”.

ALTER TABLE ... DROP PARTITION with old_alter_table=ON rebuilds the partitioned
table and attempts to move data from the dropped partition to another partition with a compatible
PARTITION ... VALUES definition. Data that cannot be moved to another partition is deleted. In
earlier releases, ALTER TABLE ... DROP PARTITION with old_alter_table=ON deletes data
stored in the partition and drops the partition.

• open_files_limit

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

958

--open-files-limit=#

open_files_limit

Global

No

No

Integer

5000, with possible adjustment

0

Server System Variables

Maximum Value

platform dependent

The number of file descriptors available to mysqld from the operating system:

• At startup, mysqld reserves descriptors with setrlimit(), using the value requested at by

setting this variable directly or by using the --open-files-limit option to mysqld_safe. If
mysqld produces the error Too many open files, try increasing the open_files_limit
value. Internally, the maximum value for this variable is the maximum unsigned integer value, but
the actual maximum is platform dependent.

• At runtime, the value of open_files_limit indicates the number of file descriptors actually
permitted to mysqld by the operating system, which might differ from the value requested at
startup. If the number of file descriptors requested during startup cannot be allocated, mysqld
writes a warning to the error log.

The effective open_files_limit value is based on the value specified at system startup (if any)
and the values of max_connections and table_open_cache, using these formulas:

• 10 + max_connections + (table_open_cache * 2). Using the defaults for these

variables yields 8161.

On Windows only, 2048 (the value of the C Run-Time Library file descriptor maximum) is added to
this number. This totals 10209, again using the default values for the indicated system variables.

• max_connections * 5

• MySQL 8.0.19 and higher: The operating system limit.

• Prior to MySQL 8.0.19:

• The operating system limit if that limit is positive but not Infinity.

• If the operating system limit is Infinity: open_files_limit value if specified at startup, 5000 if

not.

The server attempts to obtain the number of file descriptors using the maximum of those values,
capped to the maximum unsigned integer value. If that many descriptors cannot be obtained, the
server attempts to obtain as many as the system permits.

The effective value is 0 on systems where MySQL cannot change the number of open files.

On Unix, the value cannot be set greater than the value displayed by the ulimit -n command.
On Linux systems using systemd, the value cannot be set greater than LimitNOFILE (this
is DefaultLimitNOFILE, if LimitNOFILE is not set); otherwise, on Linux, the value of
open_files_limit cannot exceed ulimit -n.

• optimizer_prune_level

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

--optimizer-prune-level=#

optimizer_prune_level

Global, Session

Yes

Yes

Integer

1

0

959

Server System Variables

Maximum Value

1

Controls the heuristics applied during query optimization to prune less-promising partial plans
from the optimizer search space. A value of 0 disables heuristics so that the optimizer performs an
exhaustive search. A value of 1 causes the optimizer to prune plans based on the number of rows
retrieved by intermediate plans.

• optimizer_search_depth

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

--optimizer-search-depth=#

optimizer_search_depth

Global, Session

Yes

Yes

Integer

62

0

62

The maximum depth of search performed by the query optimizer. Values larger than the number of
relations in a query result in better query plans, but take longer to generate an execution plan for
a query. Values smaller than the number of relations in a query return an execution plan quicker,
but the resulting plan may be far from being optimal. If set to 0, the system automatically picks a
reasonable value.

• optimizer_switch

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Valid Values (≥ 8.0.22)

960

--optimizer-switch=value

optimizer_switch

Global, Session

Yes

Yes

Set

batched_key_access={on|off}

block_nested_loop={on|off}

condition_fanout_filter={on|off}

derived_condition_pushdown={on|off}

derived_merge={on|off}

duplicateweedout={on|off}

engine_condition_pushdown={on|off}

firstmatch={on|off}

hash_join={on|off}

index_condition_pushdown={on|off}

index_merge={on|off}

Server System Variables

index_merge_intersection={on|off}

index_merge_sort_union={on|off}

index_merge_union={on|off}

loosescan={on|off}

materialization={on|off}

mrr={on|off}

mrr_cost_based={on|off}

prefer_ordering_index={on|off}

semijoin={on|off}

skip_scan={on|off}

subquery_materialization_cost_based={on|
off}

subquery_to_derived={on|off}

use_index_extensions={on|off}

use_invisible_indexes={on|off}

Valid Values (≥ 8.0.21, ≤ 8.0.22)

batched_key_access={on|off}

block_nested_loop={on|off}

condition_fanout_filter={on|off}

derived_merge={on|off}

duplicateweedout={on|off}

engine_condition_pushdown={on|off}

firstmatch={on|off}

hash_join={on|off}

index_condition_pushdown={on|off}

index_merge={on|off}

index_merge_intersection={on|off}

index_merge_sort_union={on|off}

index_merge_union={on|off}

loosescan={on|off}

materialization={on|off}

mrr={on|off}

mrr_cost_based={on|off}

961

Server System Variables

prefer_ordering_index={on|off}

semijoin={on|off}

skip_scan={on|off}

subquery_materialization_cost_based={on|
off}

subquery_to_derived={on|off}

use_index_extensions={on|off}

use_invisible_indexes={on|off}

Valid Values (≥ 8.0.18, ≤ 8.0.20)

batched_key_access={on|off}

block_nested_loop={on|off}

condition_fanout_filter={on|off}

derived_merge={on|off}

duplicateweedout={on|off}

engine_condition_pushdown={on|off}

firstmatch={on|off}

hash_join={on|off}

index_condition_pushdown={on|off}

index_merge={on|off}

index_merge_intersection={on|off}

index_merge_sort_union={on|off}

index_merge_union={on|off}

loosescan={on|off}

materialization={on|off}

mrr={on|off}

mrr_cost_based={on|off}

semijoin={on|off}

skip_scan={on|off}

subquery_materialization_cost_based={on|
off}

use_index_extensions={on|off}

use_invisible_indexes={on|off}

Valid Values (≥ 8.0.13, ≤ 8.0.17)

batched_key_access={on|off}

block_nested_loop={on|off}

962

Server System Variables

condition_fanout_filter={on|off}

derived_merge={on|off}

duplicateweedout={on|off}

engine_condition_pushdown={on|off}

firstmatch={on|off}

index_condition_pushdown={on|off}

index_merge={on|off}

index_merge_intersection={on|off}

index_merge_sort_union={on|off}

index_merge_union={on|off}

loosescan={on|off}

materialization={on|off}

mrr={on|off}

mrr_cost_based={on|off}

semijoin={on|off}

skip_scan={on|off}

subquery_materialization_cost_based={on|
off}

use_index_extensions={on|off}

use_invisible_indexes={on|off}

batched_key_access={on|off}

block_nested_loop={on|off}

condition_fanout_filter={on|off}

derived_merge={on|off}

duplicateweedout={on|off}

engine_condition_pushdown={on|off}

firstmatch={on|off}

index_condition_pushdown={on|off}

index_merge={on|off}

index_merge_intersection={on|off}

index_merge_sort_union={on|off}

index_merge_union={on|off}

963

Valid Values (≤ 8.0.12)

Server System Variables

loosescan={on|off}

materialization={on|off}

mrr={on|off}

mrr_cost_based={on|off}

semijoin={on|off}

subquery_materialization_cost_based={on|
off}

use_index_extensions={on|off}

use_invisible_indexes={on|off}

The optimizer_switch system variable enables control over optimizer behavior. The value
of this variable is a set of flags, each of which has a value of on or off to indicate whether the
corresponding optimizer behavior is enabled or disabled. This variable has global and session values
and can be changed at runtime. The global default can be set at server startup.

To see the current set of optimizer flags, select the variable value:

mysql> SELECT @@optimizer_switch\G
*************************** 1. row ***************************
@@optimizer_switch: index_merge=on,index_merge_union=on,
                    index_merge_sort_union=on,index_merge_intersection=on,
                    engine_condition_pushdown=on,index_condition_pushdown=on,
                    mrr=on,mrr_cost_based=on,block_nested_loop=on,
                    batched_key_access=off,materialization=on,semijoin=on,
                    loosescan=on,firstmatch=on,duplicateweedout=on,
                    subquery_materialization_cost_based=on,
                    use_index_extensions=on,condition_fanout_filter=on,
                    derived_merge=on,use_invisible_indexes=off,skip_scan=on,
                    hash_join=on,subquery_to_derived=off,
                    prefer_ordering_index=on,hypergraph_optimizer=off,
                    derived_condition_pushdown=on

For more information about the syntax of this variable and the optimizer behaviors that it controls,
see Section 10.9.2, “Switchable Optimizations”.

• optimizer_trace

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

--optimizer-trace=value

optimizer_trace

Global, Session

Yes

No

String

This variable controls optimizer tracing. For details, see Section 10.15, “Tracing the Optimizer”.

• optimizer_trace_features

Command-Line Format

System Variable

Scope

Dynamic

--optimizer-trace-features=value

optimizer_trace_features

Global, Session

Yes

964

Server System Variables

SET_VAR Hint Applies

Type

No

String

This variable enables or disables selected optimizer tracing features. For details, see Section 10.15,
“Tracing the Optimizer”.

• optimizer_trace_limit

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

--optimizer-trace-limit=#

optimizer_trace_limit

Global, Session

Yes

No

Integer

1

0

2147483647

The maximum number of optimizer traces to display. For details, see Section 10.15, “Tracing the
Optimizer”.

• optimizer_trace_max_mem_size

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

--optimizer-trace-max-mem-size=#

optimizer_trace_max_mem_size

Global, Session

Yes

Yes

Integer

1048576

0

4294967295

bytes

The maximum cumulative size of stored optimizer traces. For details, see Section 10.15, “Tracing the
Optimizer”.

• optimizer_trace_offset

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

--optimizer-trace-offset=#

optimizer_trace_offset

Global, Session

Yes

No

Integer

-1

-2147483647

965

Server System Variables

Maximum Value

2147483647

The offset of optimizer traces to display. For details, see Section 10.15, “Tracing the Optimizer”.

• performance_schema_xxx

Performance Schema system variables are listed in Section 29.15, “Performance Schema System
Variables”. These variables may be used to configure Performance Schema operation.

• parser_max_mem_size

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

--parser-max-mem-size=#

parser_max_mem_size

Global, Session

Yes

No

Integer

Default Value (64-bit platforms)

18446744073709551615

Default Value (32-bit platforms)

Minimum Value

4294967295

10000000

Maximum Value (64-bit platforms)

18446744073709551615

Maximum Value (32-bit platforms)

Unit

4294967295

bytes

The maximum amount of memory available to the parser. The default value places no limit on
memory available. The value can be reduced to protect against out-of-memory situations caused by
parsing long or complex SQL statements.

• partial_revokes

Command-Line Format

--partial-revokes[={OFF|ON}]

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

8.0.16

partial_revokes

Global

Yes

No

Boolean

OFF (if partial revokes do not exist)

ON (if partial revokes exist)

Enabling this variable makes it possible to revoke privileges partially. Specifically, for users who
have privileges at the global level, partial_revokes enables privileges for specific schemas to
be revoked while leaving the privileges in place for other schemas. For example, a user who has
the global UPDATE privilege can be restricted from exercising this privilege on the mysql system
schema. (Or, stated another way, the user is enabled to exercise the UPDATE privilege on all

966

Server System Variables

schemas except the mysql schema.) In this sense, the user's global UPDATE privilege is partially
revoked.

Once enabled, partial_revokes cannot be disabled if any account has privilege restrictions. If
any such account exists, disabling partial_revokes fails:

• For attempts to disable partial_revokes at startup, the server logs an error message and

enables partial_revokes.

• For attempts to disable partial_revokes at runtime, an error occurs and the

partial_revokes value remains unchanged.

To disable partial_revokes in this case, first modify each account that has partially revoked
privileges, either by re-granting the privileges or by removing the account.

Note

In privilege assignments, enabling partial_revokes causes MySQL to
interpret occurrences of unescaped _ and % SQL wildcard characters in
schema names as literal characters, just as if they had been escaped as \_
and \%. Because this changes how MySQL interprets privileges, it may be
advisable to avoid unescaped wildcard characters in privilege assignments for
installations where partial_revokes may be enabled.

In addition, use of _ and % as wildcard characters in grants is deprecated as
of MySQL 8.0.35, and you should expect support for them to be removed in a
future version of MySQL.

For more information, including instructions for removing partial revokes, see Section 8.2.12,
“Privilege Restriction Using Partial Revokes”.

• password_history

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

--password-history=#

password_history

Global

Yes

No

Integer

0

0

4294967295

This variable defines the global policy for controlling reuse of previous passwords based on required
minimum number of password changes. For an account password used previously, this variable
indicates the number of subsequent account password changes that must occur before the password
can be reused. If the value is 0 (the default), there is no reuse restriction based on number of
password changes.

Changes to this variable apply immediately to all accounts defined with the PASSWORD HISTORY
DEFAULT option.

The global number-of-changes password reuse policy can be overridden as desired for individual
accounts using the PASSWORD HISTORY option of the CREATE USER and ALTER USER statements.
See Section 8.2.15, “Password Management”.

967

Server System Variables

• password_require_current

Command-Line Format

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--password-require-current[={OFF|
ON}]

8.0.13

password_require_current

Global

Yes

No

Boolean

OFF

This variable defines the global policy for controlling whether attempts to change an account
password must specify the current password to be replaced.

Changes to this variable apply immediately to all accounts defined with the PASSWORD REQUIRE
CURRENT DEFAULT option.

The global verification-required policy can be overridden as desired for individual accounts
using the PASSWORD REQUIRE option of the CREATE USER and ALTER USER statements. See
Section 8.2.15, “Password Management”.

• password_reuse_interval

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

--password-reuse-interval=#

password_reuse_interval

Global

Yes

No

Integer

0

0

4294967295

days

This variable defines the global policy for controlling reuse of previous passwords based on time
elapsed. For an account password used previously, this variable indicates the number of days
that must pass before the password can be reused. If the value is 0 (the default), there is no reuse
restriction based on time elapsed.

Changes to this variable apply immediately to all accounts defined with the PASSWORD REUSE
INTERVAL DEFAULT option.

The global time-elapsed password reuse policy can be overridden as desired for individual accounts
using the PASSWORD REUSE INTERVAL option of the CREATE USER and ALTER USER statements.
See Section 8.2.15, “Password Management”.

• persisted_globals_load

Command-Line Format

System Variable

968

Scope

--persisted-globals-load[={OFF|ON}]

persisted_globals_load

Global

Server System Variables

Dynamic

SET_VAR Hint Applies

Type

Default Value

No

No

Boolean

ON

Whether to load persisted configuration settings from the mysqld-auto.cnf file in the data
directory. The server normally processes this file at startup after all other option files (see
Section 6.2.2.2, “Using Option Files”). Disabling persisted_globals_load causes the server
startup sequence to skip mysqld-auto.cnf.

To modify the contents of mysqld-auto.cnf, use the SET PERSIST, SET PERSIST_ONLY, and
RESET PERSIST statements. See Section 7.1.9.3, “Persisted System Variables”.

• persist_only_admin_x509_subject

Command-Line Format

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--persist-only-admin-x509-
subject=string

8.0.14

persist_only_admin_x509_subject

Global

No

No

String

empty string

SET PERSIST and SET PERSIST_ONLY enable system variables to be persisted to the mysqld-
auto.cnf option file in the data directory (see Section 15.7.6.1, “SET Syntax for Variable
Assignment”). Persisting system variables enables runtime configuration changes that affect
subsequent server restarts, which is convenient for remote administration not requiring direct access
to MySQL server host option files. However, some system variables are nonpersistible or can be
persisted only under certain restrictive conditions.

The persist_only_admin_x509_subject system variable specifies the SSL certificate X.509
Subject value that users must have to be able to persist system variables that are persist-restricted.
The default value is the empty string, which disables the Subject check so that persist-restricted
system variables cannot be persisted by any user.

If persist_only_admin_x509_subject is nonempty, users who connect to the server using
an encrypted connection and supply an SSL certificate with the designated Subject value then
can use SET PERSIST_ONLY to persist persist-restricted system variables. For information
about persist-restricted system variables and instructions for configuring MySQL to enable
persist_only_admin_x509_subject, see Section 7.1.9.4, “Nonpersistible and Persist-
Restricted System Variables”.

• persist_sensitive_variables_in_plaintext

Command-Line Format

Introduced

System Variable

Scope

Dynamic

--
persist_sensitive_variables_in_plaintext[={OFF|
ON}]

8.0.29

persist_sensitive_variables_in_plaintext

Global

No

969

Server System Variables

SET_VAR Hint Applies

Type

Default Value

No

Boolean

ON

persist_sensitive_variables_in_plaintext controls whether the server is permitted
to store the values of sensitive system variables in an unencrypted format, if keyring component
support is not available at the time when SET PERSIST is used to set the value of the system
variable. It also controls whether or not the server can start if the encrypted values cannot be
decrypted. Note that keyring plugins do not support secure storage of sensitive system variables;
a keyring component (see Section 8.4.4, “The MySQL Keyring”) must be enabled on the MySQL
Server instance to support secure storage.

The default setting, ON, encrypts the values if keyring component support is available, and persists
them unencrypted (with a warning) if it is not. The next time any persisted system variable is set, if
keyring support is available at that time, the server encrypts the values of any unencrypted sensitive
system variables. The ON setting also allows the server to start if encrypted system variable values
cannot be decrypted, in which case a warning is issued and the default values for the system
variables are used. In that situation, their values cannot be changed until they can be decrypted.

The most secure setting, OFF, means sensitive system variable values cannot be persisted if keyring
component support is unavailable. The OFF setting also means the server does not start if encrypted
system variable values cannot be decrypted.

For more information, see Persisting Sensitive System Variables.

• pid_file

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

--pid-file=file_name

pid_file

Global

No

No

File name

The path name of the file in which the server writes its process ID. The server creates the file in the
data directory unless an absolute path name is given to specify a different directory. If you specify
this variable, you must specify a value. If you do not specify this variable, MySQL uses a default
value of host_name.pid, where host_name is the name of the host machine.

The process ID file is used by other programs such as mysqld_safe to determine the server's
process ID. On Windows, this variable also affects the default error log file name. See Section 7.4.2,
“The Error Log”.

• plugin_dir

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

The path name of the plugin directory.

970

--plugin-dir=dir_name

plugin_dir

Global

No

No

Directory name

BASEDIR/lib/plugin

Server System Variables

If the plugin directory is writable by the server, it may be possible for a user to write executable
code to a file in the directory using SELECT ... INTO DUMPFILE. This can be prevented by
making plugin_dir read only to the server or by setting secure_file_priv to a directory where
SELECT writes can be made safely.

• port

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

--port=port_num

port

Global

No

No

Integer

3306

0

65535

The number of the port on which the server listens for TCP/IP connections. This variable can be set
with the --port option.

• preload_buffer_size

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

--preload-buffer-size=#

preload_buffer_size

Global, Session

Yes

No

Integer

32768

1024

1073741824

bytes

The size of the buffer that is allocated when preloading indexes.

As of MySQL 8.0.27, setting the session value of this system variable is a restricted operation. The
session user must have privileges sufficient to set restricted session variables. See Section 7.1.9.1,
“System Variable Privileges”.

• print_identified_with_as_hex

Command-Line Format

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

--print-identified-with-as-
hex[={OFF|ON}]

8.0.17

print_identified_with_as_hex

Global, Session

Yes

No

Boolean

971

Server System Variables

Default Value

OFF

Password hash values displayed in the IDENTIFIED WITH clause of output from SHOW CREATE
USER may contain unprintable characters that have adverse effects on terminal displays and in other
environments. Enabling print_identified_with_as_hex causes SHOW CREATE USER to
display such hash values as hexadecimal strings rather than as regular string literals. Hash values
that do not contain unprintable characters still display as regular string literals, even with this variable
enabled.

• profiling

If set to 0 or OFF (the default), statement profiling is disabled. If set to 1 or ON, statement profiling
is enabled and the SHOW PROFILE and SHOW PROFILES statements provide access to profiling
information. See Section 15.7.7.31, “SHOW PROFILES Statement”.

This variable is deprecated; expect it to be removed in a future MySQL release.

• profiling_history_size

The number of statements for which to maintain profiling information if profiling is enabled. The
default value is 15. The maximum value is 100. Setting the value to 0 effectively disables profiling.
See Section 15.7.7.31, “SHOW PROFILES Statement”.

This variable is deprecated; expect it to be removed in a future MySQL release.

• protocol_compression_algorithms

Command-Line Format

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Valid Values

--protocol-compression-
algorithms=value

8.0.18

protocol_compression_algorithms

Global

Yes

No

Set

zlib,zstd,uncompressed

zlib

zstd

uncompressed

The compression algorithms that the server permits for incoming connections. These include
connections by client programs and by servers participating in source/replica replication or Group
Replication. Compression does not apply to connections for FEDERATED tables.

protocol_compression_algorithms does not control connection compression for X Protocol.
See Section 22.5.5, “Connection Compression with X Plugin” for information on how this operates.

The variable value is a list of one or more comma-separated compression algorithm names, in any
order, chosen from the following items (not case-sensitive):

• zlib: Permit connections that use the zlib compression algorithm.

• zstd: Permit connections that use the zstd compression algorithm.

972

Server System Variables

• uncompressed: Permit uncompressed connections. If this algorithm name is not included in

the protocol_compression_algorithms value, the server does not permit uncompressed
connections. It permits only compressed connections that use whichever other algorithms are
specified in the value, and there is no fallback to uncompressed connections.

The default value of zlib,zstd,uncompressed indicates that the server permits all compression
algorithms.

For more information, see Section 6.2.8, “Connection Compression Control”.

• protocol_version

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

protocol_version

Global

No

No

Integer

10

0

4294967295

The version of the client/server protocol used by the MySQL server.

• proxy_user

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

proxy_user

Session

No

No

String

If the current client is a proxy for another user, this variable is the proxy user account name.
Otherwise, this variable is NULL. See Section 8.2.19, “Proxy Users”.

• pseudo_replica_mode

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

8.0.26

pseudo_replica_mode

Session

Yes

No

973

Server System Variables

Type

Boolean

From MySQL 8.0.26, pseudo_replica_mode is used in place of pseudo_slave_mode, which
is deprecated from that release. The operation and effects are the same, only the terminology has
changed.

pseudo_replica_mode is for internal server use. It assists with the correct handling of transactions
that originated on older or newer servers than the server currently processing them. mysqlbinlog
sets the value of pseudo_replica_mode to true before executing any SQL statements.

Setting the session value of pseudo_replica_mode is a restricted operation. The session user
must have either the REPLICATION_APPLIER privilege (see Section 19.3.3, “Replication Privilege
Checks”), or privileges sufficient to set restricted session variables (see Section 7.1.9.1, “System
Variable Privileges”). However, note that the variable is not intended for users to set; it is set
automatically by the replication infrastructure.

pseudo_replica_mode has the following effects on the handling of prepared XA transactions,
which can be attached to or detached from the handling session (by default, the session that issues
XA START):

• If true, and the handling session has executed an internal-use BINLOG statement, XA transactions

are automatically detached from the session as soon as the first part of the transaction up to
XA PREPARE finishes, so they can be committed or rolled back by any session that has the
XA_RECOVER_ADMIN privilege.

• If false, XA transactions remain attached to the handling session as long as that session is alive,
during which time no other session can commit the transaction. The prepared transaction is only
detached if the session disconnects or the server restarts.

pseudo_replica_mode has the following effects on the original_commit_timestamp
replication delay timestamp and the original_server_version system variable:

• If true, transactions that do not explicitly set original_commit_timestamp or

original_server_version are assumed to originate on another, unknown server, so the value
0, meaning unknown, is assigned to both the timestamp and the system variable.

• If false, transactions that do not explicitly set original_commit_timestamp or

original_server_version are assumed to originate on the current server, so the current
timestamp and the current server's version are assigned to the timestamp and the system variable.

In MySQL 8.0.14 and later, pseudo_replica_mode has the following effects on the handling of a
statement that sets one or more unsupported (removed or unknown) SQL modes:

• If true, the server ignores the unsupported mode and raises a warning.

• If false, the server rejects the statement with ER_UNSUPPORTED_SQL_MODE.

• pseudo_slave_mode

Deprecated

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

8.0.26

pseudo_slave_mode

Session

Yes

No

Boolean

From MySQL 8.0.26, pseudo_slave_mode is deprecated and the alias pseudo_replica_mode
is used instead. pseudo_slave_mode is for internal server use. It assists with the correct handling

974

Server System Variables

of transactions that originated on older or newer servers than the server currently processing
them. mysqlbinlog sets the value of pseudo_slave_mode to true before executing any SQL
statements.

Setting the session value of this system variable is a restricted operation. The session user must
have either the REPLICATION_APPLIER privilege (see Section 19.3.3, “Replication Privilege
Checks”), or privileges sufficient to set restricted session variables (see Section 7.1.9.1, “System
Variable Privileges”). However, note that the variable is not intended for users to set; it is set
automatically by the replication infrastructure.

See the description of the pseudo_replica_mode system variable for the effects of
pseudo_slave_mode.

• pseudo_thread_id

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

This variable is for internal server use.

Warning

pseudo_thread_id

Session

Yes

No

Integer

2147483647

0

2147483647

Changing the session value of the pseudo_thread_id system variable
changes the value returned by the CONNECTION_ID() function.

As of MySQL 8.0.14, setting the session value of this system variable is a restricted operation. The
session user must have privileges sufficient to set restricted session variables. See Section 7.1.9.1,
“System Variable Privileges”.

• query_alloc_block_size

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

--query-alloc-block-size=#

query_alloc_block_size

Global, Session

Yes

No

Integer

8192

1024

4294966272

bytes

975

Server System Variables

Block Size

1024

The allocation size in bytes of memory blocks that are allocated for objects created during statement
parsing and execution. If you have problems with memory fragmentation, it might help to increase
this parameter.

The block size for the byte number is 1024. A value that is not an exact multiple of the block size is
rounded down to the next lower multiple of the block size by MySQL Server before storing the value
for the system variable. The parser allows values up to the maximum unsigned integer value for the
platform (4294967295 or 232
system) but the actual maximum is a block size lower.

−1 for a 32-bit system, 18446744073709551615 or 264

−1 for a 64-bit

• query_prealloc_size

Command-Line Format

--query-prealloc-size=#

Deprecated

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

8.0.29

query_prealloc_size

Global, Session

Yes

No

Integer

8192

8192

Maximum Value (64-bit platforms)

18446744073709550592

Maximum Value (32-bit platforms)

4294966272

Unit

Block Size

bytes

1024

MySQL 8.0.28 and earlier: This sets the size in bytes of the persistent buffer used for statement
parsing and execution. This buffer is not freed between statements. If you are running complex
queries, a larger query_prealloc_size value might be helpful in improving performance,
because it can reduce the need for the server to perform memory allocation during query execution
operations. You should be aware that doing this does not necessarily eliminate allocation
completely; the server may still allocate memory in some situations, such as for operations relating to
transactions, or to stored programs.

As of MySQL 8.0.29, query_prealloc_size is deprecated, and setting it no longer has any effect;
you should expect its removal in a future release of MySQL.

• rand_seed1

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

976

rand_seed1

Session

Yes

No

Integer

N/A

0

Server System Variables

Maximum Value

4294967295

The rand_seed1 and rand_seed2 variables exist as session variables only, and can be set but not
read. The variables—but not their values—are shown in the output of SHOW VARIABLES.

The purpose of these variables is to support replication of the RAND() function. For statements
that invoke RAND(), the source passes two values to the replica, where they are used to seed the
random number generator. The replica uses these values to set the session variables rand_seed1
and rand_seed2 so that RAND() on the replica generates the same value as on the source.

• rand_seed2

See the description for rand_seed1.

• range_alloc_block_size

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

--range-alloc-block-size=#

range_alloc_block_size

Global, Session

Yes

Yes

Integer

4096

4096

Maximum Value (64-bit platforms)

18446744073709550592

Maximum Value

Unit

Block Size

4294966272

bytes

1024

The size in bytes of blocks that are allocated when doing range optimization.

The block size for the byte number is 1024. A value that is not an exact multiple of the block size is
rounded down to the next lower multiple of the block size by MySQL Server before storing the value
for the system variable. The parser allows values up to the maximum unsigned integer value for the
platform (4294967295 or 232
system) but the actual maximum is a block size lower.

−1 for a 32-bit system, 18446744073709551615 or 264

−1 for a 64-bit

• range_optimizer_max_mem_size

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

--range-optimizer-max-mem-size=#

range_optimizer_max_mem_size

Global, Session

Yes

Yes

Integer

8388608

0

18446744073709551615

977

Server System Variables

Unit

bytes

The limit on memory consumption for the range optimizer. A value of 0 means “no limit.” If an
execution plan considered by the optimizer uses the range access method but the optimizer
estimates that the amount of memory needed for this method would exceed the limit, it abandons
the plan and considers other plans. For more information, see Limiting Memory Use for Range
Optimization.

• rbr_exec_mode

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Valid Values

rbr_exec_mode

Session

Yes

No

Enumeration

STRICT

STRICT

IDEMPOTENT

For internal use by mysqlbinlog. This variable switches the server between IDEMPOTENT mode
and STRICT mode. IDEMPOTENT mode causes suppression of duplicate-key and no-key-found
errors in BINLOG statements generated by mysqlbinlog. This mode is useful when replaying a
row-based binary log on a server that causes conflicts with existing data. mysqlbinlog sets this
mode when you specify the --idempotent option by writing the following to the output:

SET SESSION RBR_EXEC_MODE=IDEMPOTENT;

As of MySQL 8.0.18, setting the session value of this system variable is no longer a restricted
operation.

• read_buffer_size

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

Block Size

--read-buffer-size=#

read_buffer_size

Global, Session

Yes

Yes

Integer

131072

8192

2147479552

bytes

4096

Each thread that does a sequential scan for a MyISAM table allocates a buffer of this size (in bytes)
for each table it scans. If you do many sequential scans, you might want to increase this value, which

978

Server System Variables

defaults to 131072. The value of this variable should be a multiple of 4KB. If it is set to a value that is
not a multiple of 4KB, its value is rounded down to the nearest multiple of 4KB.

This option is also used in the following context for all other storage engines with the exception of
InnoDB:

• For caching the indexes in a temporary file (not a temporary table), when sorting rows for ORDER

BY.

• For bulk insert into partitions.

• For caching results of nested queries.

read_buffer_size is also used in one other storage engine-specific way: to determine the
memory block size for MEMORY tables.

Beginning with MySQL 8.0.22, the value of select_into_buffer_size is used in place of
the value of read_buffer_size for the I/O cache buffer used when executing SELECT INTO
DUMPFILE and SELECT INTO OUTFILE statements. (read_buffer_size is used for the I/O
cache buffer size in all other cases.)

For more information about memory use during different operations, see Section 10.12.3.1, “How
MySQL Uses Memory”.

• read_only

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--read-only[={OFF|ON}]

read_only

Global

Yes

No

Boolean

OFF

If the read_only system variable is enabled, the server permits no client updates except from users
who have the CONNECTION_ADMIN privilege (or the deprecated SUPER privilege). This variable is
disabled by default.

The server also supports a super_read_only system variable (disabled by default), which has
these effects:

• If super_read_only is enabled, the server prohibits client updates, even from users who have

the CONNECTION_ADMIN or SUPER privilege.

• Setting super_read_only to ON implicitly forces read_only to ON.

• Setting read_only to OFF implicitly forces super_read_only to OFF.

When read_only is enabled and when super_read_only is enabled, the server still permits
these operations:

• Updates performed by replication threads, if the server is a replica. In replication setups, it can be
useful to enable read_only on replica servers to ensure that replicas accept updates only from
the source server and not from clients.

• Writes to the system table mysql.gtid_executed, which stores GTIDs for executed

transactions that are not present in the current binary log file.

979

Server System Variables

• Use of ANALYZE TABLE or OPTIMIZE TABLE statements. The purpose of read-only mode is
to prevent changes to table structure or contents. Analysis and optimization do not qualify as
such changes. This means, for example, that consistency checks on read-only replicas can be
performed with mysqlcheck --all-databases --analyze.

• Use of FLUSH STATUS statements, which are always written to the binary log.

• Operations on TEMPORARY tables.

• Inserts into the log tables (mysql.general_log and mysql.slow_log); see Section 7.4.1,

“Selecting General Query Log and Slow Query Log Output Destinations”.

• Updates to Performance Schema tables, such as UPDATE or TRUNCATE TABLE operations.

Changes to read_only on a replication source server are not replicated to replica servers. The
value can be set on a replica independent of the setting on the source.

The following conditions apply to attempts to enable read_only (including implicit attempts resulting
from enabling super_read_only):

• The attempt fails and an error occurs if you have any explicit locks (acquired with LOCK TABLES)

or have a pending transaction.

• The attempt blocks while other clients have any ongoing statement, active LOCK TABLES WRITE,
or ongoing commit, until the locks are released and the statements and transactions end. While
the attempt to enable read_only is pending, requests by other clients for table locks or to begin
transactions also block until read_only has been set.

• The attempt blocks if there are active transactions that hold metadata locks, until those

transactions end.

• read_only can be enabled while you hold a global read lock (acquired with FLUSH TABLES

WITH READ LOCK) because that does not involve table locks.

• read_rnd_buffer_size

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

--read-rnd-buffer-size=#

read_rnd_buffer_size

Global, Session

Yes

Yes

Integer

262144

1

2147483647

bytes

This variable is used for reads from MyISAM tables, and, for any storage engine, for Multi-Range
Read optimization.

When reading rows from a MyISAM table in sorted order following a key-sorting operation, the rows
are read through this buffer to avoid disk seeks. See Section 10.2.1.16, “ORDER BY Optimization”.
Setting the variable to a large value can improve ORDER BY performance by a lot. However, this is

980

Server System Variables

a buffer allocated for each client, so you should not set the global variable to a large value. Instead,
change the session variable only from within those clients that need to run large queries.

For more information about memory use during different operations, see Section 10.12.3.1, “How
MySQL Uses Memory”. For information about Multi-Range Read optimization, see Section 10.2.1.11,
“Multi-Range Read Optimization”.

• regexp_stack_limit

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

--regexp-stack-limit=#

regexp_stack_limit

Global

Yes

No

Integer

8000000

0

2147483647

bytes

The maximum available memory in bytes for the internal stack used for regular expression matching
operations performed by REGEXP_LIKE() and similar functions (see Section 14.8.2, “Regular
Expressions”).

• regexp_time_limit

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

--regexp-time-limit=#

regexp_time_limit

Global

Yes

No

Integer

32

0

2147483647

The time limit for regular expression matching operations performed by REGEXP_LIKE() and similar
functions (see Section 14.8.2, “Regular Expressions”). This limit is expressed as the maximum
permitted number of steps performed by the match engine, and thus affects execution time only
indirectly. Typically, it is on the order of milliseconds.

• require_row_format

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

8.0.19

require_row_format

Session

Yes

No

Boolean

OFF

981

Server System Variables

This variable is for internal server use by replication and mysqlbinlog. It restricts DML events
executed in the session to events encoded in row-based binary logging format only, and temporary
tables cannot be created. Queries that do not respect the restrictions fail.

Setting the session value of this system variable to ON requires no privileges. Setting the session
value of this system variable to OFF is a restricted operation, and the session user must have
privileges sufficient to set restricted session variables. See Section 7.1.9.1, “System Variable
Privileges”.

• require_secure_transport

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--require-secure-transport[={OFF|
ON}]

require_secure_transport

Global

Yes

No

Boolean

OFF

Whether client connections to the server are required to use some form of secure transport. When
this variable is enabled, the server permits only TCP/IP connections encrypted using TLS/SSL, or
connections that use a socket file (on Unix) or shared memory (on Windows). The server rejects
nonsecure connection attempts, which fail with an ER_SECURE_TRANSPORT_REQUIRED error.

This capability supplements per-account SSL requirements, which take precedence. For example, if
an account is defined with REQUIRE SSL, enabling require_secure_transport does not make
it possible to use the account to connect using a Unix socket file.

It is possible for a server to have no secure transports available. For example, a server on
Windows supports no secure transports if started without specifying any SSL certificate or
key files and with the shared_memory system variable disabled. Under these conditions,
attempts to enable require_secure_transport at startup cause the server to write a
message to the error log and exit. Attempts to enable the variable at runtime fail with an
ER_NO_SECURE_TRANSPORTS_CONFIGURED error.

All replication group members should have the same value for this variable; otherwise, some
members may not be able to join.

See also Configuring Encrypted Connections as Mandatory.

• resultset_metadata

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Valid Values

resultset_metadata

Session

Yes

No

Enumeration

FULL

FULL

982

Server System Variables

NONE

For connections for which metadata transfer is optional, the client sets the resultset_metadata
system variable to control whether the server returns result set metadata. Permitted values are FULL
(return all metadata; this is the default) and NONE (return no metadata).

For connections that are not metadata-optional, setting resultset_metadata to NONE produces
an error.

For details about managing result set metadata transfer, see Optional Result Set Metadata.

• secondary_engine_cost_threshold

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

8.0.16

secondary_engine_cost_threshold

Session

Yes

Yes

Numeric

100000.000000

0

DBL_MAX (maximum double value)

The optimizer cost threshold for query offload to a secondary engine.

For use with HeatWave. See HeatWave User Guide.

• schema_definition_cache

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

--schema-definition-cache=#

schema_definition_cache

Global

Yes

No

Integer

256

256

524288

Defines a limit for the number of schema definition objects, both used and unused, that can be kept
in the dictionary object cache.

Unused schema definition objects are only kept in the dictionary object cache when the number in
use is less than the capacity defined by schema_definition_cache.

A setting of 0 means that schema definition objects are only kept in the dictionary object cache while
they are in use.

For more information, see Section 16.4, “Dictionary Object Cache”.

• secure_file_priv

Command-Line Format

--secure-file-priv=dir_name

983

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Valid Values

Server System Variables

secure_file_priv

Global

No

No

String

platform specific

empty string

dirname

NULL

This variable is used to limit the effect of data import and export operations, such as those performed
by the LOAD DATA and SELECT ... INTO OUTFILE statements and the LOAD_FILE() function.
These operations are permitted only to users who have the FILE privilege.

secure_file_priv may be set as follows:

• If empty, the variable has no effect. This is not a secure setting.

• If set to the name of a directory, the server limits import and export operations to work only with

files in that directory. The directory must exist; the server does not create it.

• If set to NULL, the server disables import and export operations.

The default value is platform specific and depends on the value of the INSTALL_LAYOUT CMake
option, as shown in the following table. To specify the default secure_file_priv value explicitly if
you are building from source, use the INSTALL_SECURE_FILE_PRIVDIR CMake option.

INSTALL_LAYOUT Value

Default secure_file_priv Value

STANDALONE

DEB, RPM, SVR4

Otherwise

empty

/var/lib/mysql-files

mysql-files under the
CMAKE_INSTALL_PREFIX value

The server checks the value of secure_file_priv at startup and writes a warning to the
error log if the value is insecure. A non-NULL value is considered insecure if it is empty, or the
value is the data directory or a subdirectory of it, or a directory that is accessible by all users. If
secure_file_priv is set to a nonexistent path, the server writes an error message to the error log
and exits.

• select_into_buffer_size

Command-Line Format

--select-into-buffer-size=#

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

984

8.0.22

select_into_buffer_size

Global, Session

Yes

Yes

Integer

131072

8192

Server System Variables

Maximum Value

Unit

Block Size

2147479552

bytes

4096

When using SELECT INTO OUTFILE or SELECT INTO DUMPFILE to dump data into one or more
files for backup creation, data migration, or other purposes, writes can often be buffered and then
trigger a large burst of write I/O activity to the disk or other storage device and stall other queries
that are more sensitive to latency. You can use this variable to control the size of the buffer used to
write data to the storage device to determine when buffer synchronization should occur, and thus to
prevent write stalls of the kind just described from occurring.

select_into_buffer_size overrides any value set for read_buffer_size.
(select_into_buffer_size and read_buffer_size have the same default, maximum, and
minimum values.) You can also use select_into_disk_sync_delay to set a timeout to be
observed afterwards, each time synchronization takes place.

As of MySQL 8.0.27, setting the session value of this system variable is a restricted operation. The
session user must have privileges sufficient to set restricted session variables. See Section 7.1.9.1,
“System Variable Privileges”.

• select_into_disk_sync

Command-Line Format

--select-into-disk-sync={ON|OFF}

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Valid Values

8.0.22

select_into_disk_sync

Global, Session

Yes

Yes

Boolean

OFF

OFF

ON

When set on ON, enables buffer synchronization of writes to an output file by a long-running SELECT
INTO OUTFILE or SELECT INTO DUMPFILE statement using select_into_buffer_size.

• select_into_disk_sync_delay

Command-Line Format

--select-into-disk-sync-delay=#

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

8.0.22

select_into_disk_sync_delay

Global, Session

Yes

Yes

Integer

0

0

31536000

985

Server System Variables

Unit

milliseconds

When buffer synchronization of writes to an output file by a long-running SELECT INTO OUTFILE or
SELECT INTO DUMPFILE statement is enabled by select_into_disk_sync, this variable sets
an optional delay (in milliseconds) following synchronization. 0 (the default) means no delay.

As of MySQL 8.0.27, setting the session value of this system variable is a restricted operation. The
session user must have privileges sufficient to set restricted session variables. See Section 7.1.9.1,
“System Variable Privileges”.

• session_track_gtids

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Valid Values

--session-track-gtids=value

session_track_gtids

Global, Session

Yes

No

Enumeration

OFF

OFF

OWN_GTID

ALL_GTIDS

Controls whether the server returns GTIDs to the client, enabling the client to use them to track the
server state. Depending on the variable value, at the end of executing each transaction, the server’s
GTIDs are captured and returned to the client as part of the acknowledgement. The possible values
for session_track_gtids are as follows:

• OFF: The server does not return GTIDs to the client. This is the default.

• OWN_GTID: The server returns the GTIDs for all transactions that were successfully committed by
this client in its current session since the last acknowledgement. Typically, this is the single GTID
for the last transaction committed, but if a single client request resulted in multiple transactions, the
server returns a GTID set containing all the relevant GTIDs.

• ALL_GTIDS: The server returns the global value of its gtid_executed system variable, which
it reads at a point after the transaction is successfully committed. As well as the GTID for the
transaction just committed, this GTID set includes all transactions committed on the server by any
client, and can include transactions committed after the point when the transaction currently being
acknowledged was committed.

session_track_gtids cannot be set within transactional context.

For more information about session state tracking, see Section 7.1.18, “Server Tracking of Client
Session State”.

• session_track_schema

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

986

--session-track-schema[={OFF|ON}]

session_track_schema

Global, Session

Yes

No

Server System Variables

Type

Default Value

Boolean

ON

Controls whether the server tracks when the default schema (database) is set within the current
session and notifies the client to make the schema name available.

If the schema name tracker is enabled, name notification occurs each time the default schema is set,
even if the new schema name is the same as the old.

For more information about session state tracking, see Section 7.1.18, “Server Tracking of Client
Session State”.

• session_track_state_change

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--session-track-state-change[={OFF|
ON}]

session_track_state_change

Global, Session

Yes

No

Boolean

OFF

Controls whether the server tracks changes to the state of the current session and notifies the client
when state changes occur. Changes can be reported for these attributes of client session state:

• The default schema (database).

• Session-specific values for system variables.

• User-defined variables.

• Temporary tables.

• Prepared statements.

If the session state tracker is enabled, notification occurs for each change that involves tracked
session attributes, even if the new attribute values are the same as the old. For example, setting a
user-defined variable to its current value results in a notification.

The session_track_state_change variable controls only notification of when changes occur,
not what the changes are. For example, state-change notifications occur when the default schema
is set or tracked session system variables are assigned, but the notification does not include the
schema name or variable values. To receive notification of the schema name or session system
variable values, use the session_track_schema or session_track_system_variables
system variable, respectively.

Note

Assigning a value to session_track_state_change itself is not
considered a state change and is not reported as such. However, if its
name listed in the value of session_track_system_variables, any
assignments to it do result in notification of the new value.

For more information about session state tracking, see Section 7.1.18, “Server Tracking of Client
Session State”.

987

Server System Variables

• session_track_system_variables

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--session-track-system-variables=#

session_track_system_variables

Global, Session

Yes

No

String

time_zone, autocommit,
character_set_client,
character_set_results,
character_set_connection

Controls whether the server tracks assignments to session system variables and notifies
the client of the name and value of each assigned variable. The variable value is a comma-
separated list of variables for which to track assignments. By default, notification is enabled
for time_zone, autocommit, character_set_client, character_set_results, and
character_set_connection. (The latter three variables are those affected by SET NAMES.)

To enable display of the Statement ID for each statement processed, use the statement_id
variable. For example:

mysql>  SET @@SESSION.session_track_system_variables='statement_id'
mysql>  SELECT 1;
+---+
| 1 |
+---+
| 1 |
+---+
1 row in set (0.0006 sec)
Statement ID: 603835

The special value * causes the server to track assignments to all session variables. If given, this
value must be specified by itself without specific system variable names. This value also enables
display of the Statement ID for each successful statement processed.

To disable notification of session variable assignments, set session_track_system_variables
to the empty string.

If session system variable tracking is enabled, notification occurs for all assignments to tracked
session variables, even if the new values are the same as the old.

For more information about session state tracking, see Section 7.1.18, “Server Tracking of Client
Session State”.

• session_track_transaction_info

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

988

--session-track-transaction-
info=value

session_track_transaction_info

Global, Session

Yes

No

Enumeration

OFF

Valid Values

Server System Variables

OFF

STATE

CHARACTERISTICS

Controls whether the server tracks the state and characteristics of transactions within
the current session and notifies the client to make this information available. These
session_track_transaction_info values are permitted:

• OFF: Disable transaction state tracking. This is the default.

• STATE: Enable transaction state tracking without characteristics tracking. State tracking enables
the client to determine whether a transaction is in progress and whether it could be moved to a
different session without being rolled back.

• CHARACTERISTICS: Enable transaction state tracking, including characteristics tracking.

Characteristics tracking enables the client to determine how to restart a transaction in another
session so that it has the same characteristics as in the original session. The following
characteristics are relevant for this purpose:

ISOLATION LEVEL
READ ONLY
READ WRITE
WITH CONSISTENT SNAPSHOT

For a client to safely relocate a transaction to another session, it must track not only transaction state
but also transaction characteristics. In addition, the client must track the transaction_isolation
and transaction_read_only system variables to correctly determine the session defaults. (To
track these variables, list them in the value of the session_track_system_variables system
variable.)

For more information about session state tracking, see Section 7.1.18, “Server Tracking of Client
Session State”.

• sha256_password_auto_generate_rsa_keys

Command-Line Format

Deprecated

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--sha256-password-auto-generate-rsa-
keys[={OFF|ON}]

8.0.16

sha256_password_auto_generate_rsa_keys

Global

No

No

Boolean

ON

The server uses this variable to determine whether to autogenerate RSA private/public key-pair files
in the data directory if they do not already exist.

At startup, the server automatically generates RSA private/public key-pair files in the data directory
if all of these conditions are true: The sha256_password_auto_generate_rsa_keys or
caching_sha2_password_auto_generate_rsa_keys system variable is enabled; no RSA
options are specified; the RSA files are missing from the data directory. These key-pair files enable
secure password exchange using RSA over unencrypted connections for accounts authenticated

989

Server System Variables

by the sha256_password or caching_sha2_password plugin; see Section 8.4.1.3, “SHA-256
Pluggable Authentication”, and Section 8.4.1.2, “Caching SHA-2 Pluggable Authentication”.

For more information about RSA file autogeneration, including file names and characteristics, see
Section 8.3.3.1, “Creating SSL and RSA Certificates and Keys using MySQL”

The auto_generate_certs system variable is related but controls autogeneration of SSL
certificate and key files needed for secure connections using SSL.

• sha256_password_private_key_path

Command-Line Format

Deprecated

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--sha256-password-private-key-
path=file_name

8.0.16

sha256_password_private_key_path

Global

No

No

File name

private_key.pem

The value of this variable is the path name of the RSA private key file for the sha256_password
authentication plugin. If the file is named as a relative path, it is interpreted relative to the server data
directory. The file must be in PEM format.

Important

Because this file stores a private key, its access mode should be restricted so
that only the MySQL server can read it.

For information about sha256_password, see Section 8.4.1.3, “SHA-256 Pluggable
Authentication”.

• sha256_password_proxy_users

Command-Line Format

Deprecated

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--sha256-password-proxy-users[={OFF|
ON}]

8.0.16

sha256_password_proxy_users

Global

Yes

No

Boolean

OFF

This variable controls whether the sha256_password built-in authentication plugin supports proxy
users. It has no effect unless the check_proxy_users system variable is enabled. For information
about user proxying, see Section 8.2.19, “Proxy Users”.

• sha256_password_public_key_path

Command-Line Format

--sha256-password-public-key-
path=file_name

Deprecated

8.0.16

990

Server System Variables

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

sha256_password_public_key_path

Global

No

No

File name

public_key.pem

The value of this variable is the path name of the RSA public key file for the sha256_password
authentication plugin. If the file is named as a relative path, it is interpreted relative to the server data
directory. The file must be in PEM format. Because this file stores a public key, copies can be freely
distributed to client users. (Clients that explicitly specify a public key when connecting to the server
using RSA password encryption must use the same public key as that used by the server.)

For information about sha256_password, including information about how clients specify the RSA
public key, see Section 8.4.1.3, “SHA-256 Pluggable Authentication”.

• shared_memory

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Platform Specific

Type

Default Value

--shared-memory[={OFF|ON}]

shared_memory

Global

No

No

Windows

Boolean

OFF

(Windows only.) Whether the server permits shared-memory connections.

• shared_memory_base_name

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Platform Specific

Type

Default Value

--shared-memory-base-name=name

shared_memory_base_name

Global

No

No

Windows

String

MYSQL

(Windows only.) The name of shared memory to use for shared-memory connections. This is useful
when running multiple MySQL instances on a single physical machine. The default name is MYSQL.
The name is case-sensitive.

This variable applies only if the server is started with the shared_memory system variable enabled
to support shared-memory connections.

• show_create_table_skip_secondary_engine

Command-Line Format

--show-create-table-skip-secondary-
engine[={OFF|ON}]

991

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Server System Variables

8.0.18

show_create_table_skip_secondary_engine

Session

Yes

Yes

Boolean

OFF

Enabling show_create_table_skip_secondary_engine causes the SECONDARY ENGINE
clause to be excluded from SHOW CREATE TABLE output, and from CREATE TABLE statements
dumped by the mysqldump utility.

mysqldump provides the --show-create-skip-secondary-engine option. When specified, it
enables the show_create_table_skip_secondary_engine system variable for the duration of
the dump operation.

Attempting a mysqldump operation with the --show-create-skip-secondary-
engine option on a release prior to MySQL 8.0.18 that does not support the
show_create_table_skip_secondary_engine variable causes an error.

For use with HeatWave. See HeatWave User Guide.

• show_create_table_verbosity

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--show-create-table-verbosity[={OFF|
ON}]

show_create_table_verbosity

Global, Session

Yes

No

Boolean

OFF

SHOW CREATE TABLE normally does not show the ROW_FORMAT table option if the row format is
the default format. Enabling this variable causes SHOW CREATE TABLE to display ROW_FORMAT
regardless of whether it is the default format.

• show_gipk_in_create_table_and_information_schema

Command-Line Format

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

--show-gipk-in-create-table-and-
information-schema[={OFF|ON}]

8.0.30

show_gipk_in_create_table_and_information_schema

Global, Session

Yes

No

Boolean

992

Server System Variables

Default Value

ON

Whether generated invisible primary keys are visible in the output of SHOW statements and in
Information Schema tables. When this variable is set to OFF, such keys are not shown.

This variable is not replicated.

For more information, see Section 15.1.20.11, “Generated Invisible Primary Keys”.

• show_old_temporals

Command-Line Format

--show-old-temporals[={OFF|ON}]

Deprecated

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Yes

show_old_temporals

Global, Session

Yes

No

Boolean

OFF

Whether SHOW CREATE TABLE output includes comments to flag temporal columns found to be in
pre-5.6.4 format (TIME, DATETIME, and TIMESTAMP columns without support for fractional seconds
precision). This variable is disabled by default. If enabled, SHOW CREATE TABLE output looks like
this:

CREATE TABLE `mytbl` (
  `ts` timestamp /* 5.5 binary format */ NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `dt` datetime /* 5.5 binary format */ DEFAULT NULL,
  `t` time /* 5.5 binary format */ DEFAULT NULL
) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci

Output for the COLUMN_TYPE column of the Information Schema COLUMNS table is affected similarly.

This variable is deprecated and subject to removal in a future MySQL release.

As of MySQL 8.0.27, setting the session value of this system variable is a restricted operation. The
session user must have privileges sufficient to set restricted session variables. See Section 7.1.9.1,
“System Variable Privileges”.

• skip_external_locking

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

--skip-external-locking[={OFF|ON}]

skip_external_locking

Global

No

No

Boolean

993

Server System Variables

Default Value

ON

This is OFF if mysqld uses external locking (system locking), ON if external locking is disabled. This
affects only MyISAM table access.

This variable is set by the --external-locking or --skip-external-locking option.
External locking is disabled by default.

External locking affects only MyISAM table access. For more information, including conditions under
which it can and cannot be used, see Section 10.11.5, “External Locking”.

• skip_name_resolve

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--skip-name-resolve[={OFF|ON}]

skip_name_resolve

Global

No

No

Boolean

OFF

Whether to resolve host names when checking client connections. If this variable is OFF, mysqld
resolves host names when checking client connections. If it is ON, mysqld uses only IP numbers; in
this case, all Host column values in the grant tables must be IP addresses. See Section 7.1.12.3,
“DNS Lookups and the Host Cache”.

Depending on the network configuration of your system and the Host values for your accounts,
clients may need to connect using an explicit --host option, such as --host=127.0.0.1 or --
host=::1.

An attempt to connect to the host 127.0.0.1 normally resolves to the localhost account.
However, this fails if the server is run with skip_name_resolve enabled. If you plan to do that,
make sure an account exists that can accept a connection. For example, to be able to connect as
root using --host=127.0.0.1 or --host=::1, create these accounts:

CREATE USER 'root'@'127.0.0.1' IDENTIFIED BY 'root-password';
CREATE USER 'root'@'::1' IDENTIFIED BY 'root-password';

• skip_networking

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--skip-networking[={OFF|ON}]

skip_networking

Global

No

No

Boolean

OFF

This variable controls whether the server permits TCP/IP connections. By default, it is disabled
(permit TCP connections). If enabled, the server permits only local (non-TCP/IP) connections and all
interaction with mysqld must be made using named pipes or shared memory (on Windows) or Unix

994

Server System Variables

socket files (on Unix). This option is highly recommended for systems where only local clients are
permitted. See Section 7.1.12.3, “DNS Lookups and the Host Cache”.

Because starting the server with --skip-grant-tables disables authentication checks, the
server also disables remote connections in that case by enabling skip_networking.

• skip_show_database

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--skip-show-database

skip_show_database

Global

No

No

Boolean

OFF

This prevents people from using the SHOW DATABASES statement if they do not have the SHOW
DATABASES privilege. This can improve security if you have concerns about users being able to see
databases belonging to other users. Its effect depends on the SHOW DATABASES privilege: If the
variable value is ON, the SHOW DATABASES statement is permitted only to users who have the SHOW
DATABASES privilege, and the statement displays all database names. If the value is OFF, SHOW
DATABASES is permitted to all users, but displays the names of only those databases for which the
user has the SHOW DATABASES or other privilege.

Caution

Because any static global privilege is considered a privilege for all
databases, any static global privilege enables a user to see all database
names with SHOW DATABASES or by examining the SCHEMATA table of
INFORMATION_SCHEMA, except databases that have been restricted at the
database level by partial revokes.

• slow_launch_time

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

--slow-launch-time=#

slow_launch_time

Global

Yes

No

Integer

2

0

31536000

seconds

If creating a thread takes longer than this many seconds, the server increments the
Slow_launch_threads status variable.

• slow_query_log

Command-Line Format

System Variable

--slow-query-log[={OFF|ON}]

slow_query_log

995

Server System Variables

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Global

Yes

No

Boolean

OFF

Whether the slow query log is enabled. The value can be 0 (or OFF) to disable the log or 1 (or ON)
to enable the log. The destination for log output is controlled by the log_output system variable; if
that value is NONE, no log entries are written even if the log is enabled.

“Slow” is determined by the value of the long_query_time variable. See Section 7.4.5, “The Slow
Query Log”.

• slow_query_log_file

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--slow-query-log-file=file_name

slow_query_log_file

Global

Yes

No

File name

host_name-slow.log

The name of the slow query log file. The default value is host_name-slow.log, but the initial value
can be changed with the --slow_query_log_file option.

• socket

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value (Windows)

Default Value (Other)

--socket={file_name|pipe_name}

socket

Global

No

No

String

MySQL

/tmp/mysql.sock

On Unix platforms, this variable is the name of the socket file that is used for local client connections.
The default is /tmp/mysql.sock. (For some distribution formats, the directory might be different,
such as /var/lib/mysql for RPMs.)

On Windows, this variable is the name of the named pipe that is used for local client connections.
The default value is MySQL (not case-sensitive).

• sort_buffer_size

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

996

--sort-buffer-size=#

sort_buffer_size

Global, Session

Yes

Yes

Server System Variables

Type

Default Value

Minimum Value

Integer

262144

32768

Maximum Value (Windows)

4294967295

Maximum Value (Other, 64-bit platforms)

18446744073709551615

Maximum Value (Other, 32-bit platforms)

4294967295

Unit

bytes

Each session that must perform a sort allocates a buffer of this size. sort_buffer_size is
not specific to any storage engine and applies in a general manner for optimization. At minimum
the sort_buffer_size value must be large enough to accommodate fifteen tuples in the sort
buffer. Also, increasing the value of max_sort_length may require increasing the value of
sort_buffer_size. For more information, see Section 10.2.1.16, “ORDER BY Optimization”

If you see many Sort_merge_passes per second in SHOW GLOBAL STATUS output, you can
consider increasing the sort_buffer_size value to speed up ORDER BY or GROUP BY operations
that cannot be improved with query optimization or improved indexing.

The optimizer tries to work out how much space is needed but can allocate more, up to the limit.
Setting it larger than required globally slows down most queries that perform sorts. It is best to
increase it as a session setting, and only for the sessions that need a larger size. On Linux, there are
thresholds of 256KB and 2MB where larger values may significantly slow down memory allocation,
so you should consider staying below one of those values. Experiment to find the best value for your
workload. See Section B.3.3.5, “Where MySQL Stores Temporary Files”.

The maximum permissible setting for sort_buffer_size is 4GB−1. Larger values are permitted
for 64-bit platforms (except 64-bit Windows, for which large values are truncated to 4GB−1 with a
warning).

• sql_auto_is_null

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

sql_auto_is_null

Global, Session

Yes

Yes

Boolean

OFF

If this variable is enabled, then after a statement that successfully inserts an automatically generated
AUTO_INCREMENT value, you can find that value by issuing a statement of the following form:

SELECT * FROM tbl_name WHERE auto_col IS NULL

If the statement returns a row, the value returned is the same as if you invoked the
LAST_INSERT_ID() function. For details, including the return value after a multiple-row insert, see
Section 14.15, “Information Functions”. If no AUTO_INCREMENT value was successfully inserted, the
SELECT statement returns no row.

The behavior of retrieving an AUTO_INCREMENT value by using an IS NULL comparison is used by
some ODBC programs, such as Access. See Obtaining Auto-Increment Values. This behavior can
be disabled by setting sql_auto_is_null to OFF.

Prior to MySQL 8.0.16, the transformation of WHERE auto_col IS NULL to WHERE auto_col =
LAST_INSERT_ID() was performed only when the statement was executed, so that the value of

997

Server System Variables

sql_auto_is_null during execution determined whether the query was transformed. In MySQL
8.0.16 and later, the transformation is performed during statement preparation.

The default value of sql_auto_is_null is OFF.

• sql_big_selects

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

sql_big_selects

Global, Session

Yes

Yes

Boolean

ON

If set to OFF, MySQL aborts SELECT statements that are likely to take a very long time to execute
(that is, statements for which the optimizer estimates that the number of examined rows exceeds the
value of max_join_size). This is useful when an inadvisable WHERE statement has been issued.
The default value for a new connection is ON, which permits all SELECT statements.

If you set the max_join_size system variable to a value other than DEFAULT, sql_big_selects
is set to OFF.

• sql_buffer_result

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

sql_buffer_result

Global, Session

Yes

Yes

Boolean

OFF

If enabled, sql_buffer_result forces results from SELECT statements to be put into temporary
tables. This helps MySQL free the table locks early and can be beneficial in cases where it takes a
long time to send results to the client. The default value is OFF.

• sql_generate_invisible_primary_key

Command-Line Format

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--sql-generate-invisible-primary-
key[={OFF|ON}]

8.0.30

sql_generate_invisible_primary_key

Global, Session

Yes

No

Boolean

OFF

Whether this server adds a generated invisible primary key to any InnoDB table that is created
without one.

This variable is not replicated. In addition, even if set on the replica, it is ignored by replication
applier threads; this means that, by default, a replica does not generate a primary key for
any replicated table which, on the source, was created without one. In MySQL 8.0.32 and

998

Server System Variables

later, you can cause the replica to generate invisible primary keys for such tables by setting
REQUIRE_TABLE_PRIMARY_KEY_CHECK = GENERATE as part of a CHANGE REPLICATION
SOURCE TO statement, optionally specifying a replication channel.

For more information and examples, see Section 15.1.20.11, “Generated Invisible Primary Keys”.

• sql_log_off

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Valid Values

sql_log_off

Global, Session

Yes

No

Boolean

OFF

OFF (enable logging)

ON (disable logging)

This variable controls whether logging to the general query log is disabled for the current session
(assuming that the general query log itself is enabled). The default value is OFF (that is, enable
logging). To disable or enable general query logging for the current session, set the session
sql_log_off variable to ON or OFF.

Setting the session value of this system variable is a restricted operation. The session user must
have privileges sufficient to set restricted session variables. See Section 7.1.9.1, “System Variable
Privileges”.

• sql_mode

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Valid Values

--sql-mode=name

sql_mode

Global, Session

Yes

Yes

Set

ONLY_FULL_GROUP_BY
STRICT_TRANS_TABLES
NO_ZERO_IN_DATE NO_ZERO_DATE
ERROR_FOR_DIVISION_BY_ZERO
NO_ENGINE_SUBSTITUTION

ALLOW_INVALID_DATES

ANSI_QUOTES

ERROR_FOR_DIVISION_BY_ZERO

HIGH_NOT_PRECEDENCE

IGNORE_SPACE

NO_AUTO_VALUE_ON_ZERO

NO_BACKSLASH_ESCAPES

NO_DIR_IN_CREATE

999

Server System Variables

NO_ENGINE_SUBSTITUTION

NO_UNSIGNED_SUBTRACTION

NO_ZERO_DATE

NO_ZERO_IN_DATE

ONLY_FULL_GROUP_BY

PAD_CHAR_TO_FULL_LENGTH

PIPES_AS_CONCAT

REAL_AS_FLOAT

STRICT_ALL_TABLES

STRICT_TRANS_TABLES

TIME_TRUNCATE_FRACTIONAL

The current server SQL mode, which can be set dynamically. For details, see Section 7.1.11, “Server
SQL Modes”.

Note

MySQL installation programs may configure the SQL mode during the
installation process.

If the SQL mode differs from the default or from what you expect, check for a
setting in an option file that the server reads at startup.

• sql_notes

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

sql_notes

Global, Session

Yes

No

Boolean

ON

If enabled (the default), diagnostics of Note level increment warning_count and the server records
them. If disabled, Note diagnostics do not increment warning_count and the server does not
record them. mysqldump includes output to disable this variable so that reloading the dump file does
not produce warnings for events that do not affect the integrity of the reload operation.

• sql_quote_show_create

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

1000

sql_quote_show_create

Global, Session

Yes

No

Boolean

Server System Variables

Default Value

ON

If enabled (the default), the server quotes identifiers for SHOW CREATE TABLE and SHOW CREATE
DATABASE statements. If disabled, quoting is disabled. This option is enabled by default so that
replication works for identifiers that require quoting. See Section 15.7.7.10, “SHOW CREATE TABLE
Statement”, and Section 15.7.7.6, “SHOW CREATE DATABASE Statement”.

• sql_require_primary_key

Command-Line Format

--sql-require-primary-key[={OFF|ON}]

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

8.0.13

sql_require_primary_key

Global, Session

Yes

Yes

Boolean

OFF

Whether statements that create new tables or alter the structure of existing tables enforce the
requirement that tables have a primary key.

Setting the session value of this system variable is a restricted operation. The session user must
have privileges sufficient to set restricted session variables. See Section 7.1.9.1, “System Variable
Privileges”.

Enabling this variable helps avoid performance problems in row-based replication that can occur
when tables have no primary key. Suppose that a table has no primary key and an update or delete
modifies multiple rows. On the replication source server, this operation can be performed using a
single table scan but, when replicated using row-based replication, results in a table scan for each
row to be modified on the replica. With a primary key, these table scans do not occur.

sql_require_primary_key applies to both base tables and TEMPORARY tables, and changes to
its value are replicated to replica servers. As of MySQL 8.0.18, it applies only to storage engines that
can participate in replication.

When enabled, sql_require_primary_key has these effects:

• Attempts to create a new table with no primary key fail with an error. This includes CREATE

TABLE ... LIKE. It also includes CREATE TABLE ... SELECT, unless the CREATE TABLE
part includes a primary key definition.

• Attempts to drop the primary key from an existing table fail with an error, with the exception that
dropping the primary key and adding a primary key in the same ALTER TABLE statement is
permitted.

Dropping the primary key fails even if the table also contains a UNIQUE NOT NULL index.

• Attempts to import a table with no primary key fail with an error.

The REQUIRE_TABLE_PRIMARY_KEY_CHECK option of the CHANGE REPLICATION SOURCE TO
statement (MySQL 8.0.23 and later) or CHANGE MASTER TO statement (before MySQL 8.0.23)
enables a replica to select its own policy for primary key checks. When the option is set to ON for
a replication channel, the replica always uses the value ON for the sql_require_primary_key
system variable in replication operations, requiring a primary key. When the option is set to OFF,
the replica always uses the value OFF for the sql_require_primary_key system variable
in replication operations, so that a primary key is never required, even if the source required
one. When the REQUIRE_TABLE_PRIMARY_KEY_CHECK option is set to STREAM, which is

1001

Server System Variables

the default, the replica uses whatever value is replicated from the source for each transaction.
With the STREAM setting for the REQUIRE_TABLE_PRIMARY_KEY_CHECK option, if privilege
checks are in use for the replication channel, the PRIVILEGE_CHECKS_USER account needs
privileges sufficient to set restricted session variables, so that it can set the session value for the
sql_require_primary_key system variable. With the ON or OFF settings, the account does not
need these privileges. For more information, see Section 19.3.3, “Replication Privilege Checks”.

• sql_safe_updates

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

sql_safe_updates

Global, Session

Yes

Yes

Boolean

OFF

If this variable is enabled, UPDATE and DELETE statements that do not use a key in the WHERE
clause or a LIMIT clause produce an error. This makes it possible to catch UPDATE and DELETE
statements where keys are not used properly and that would probably change or delete a large
number of rows. The default value is OFF.

For the mysql client, sql_safe_updates can be enabled by using the --safe-updates option.
For more information, see Using Safe-Updates Mode (--safe-updates).

• sql_select_limit

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

sql_select_limit

Global, Session

Yes

Yes

Integer

18446744073709551615

0

18446744073709551615

The maximum number of rows to return from SELECT statements. For more information, see Using
Safe-Updates Mode (--safe-updates).

The default value for a new connection is the maximum number of rows that the server permits per
table. Typical default values are (232)−1 or (264)−1. If you have changed the limit, the default value
can be restored by assigning a value of DEFAULT.

If a SELECT has a LIMIT clause, the LIMIT takes precedence over the value of
sql_select_limit.

• sql_warnings

System Variable

Scope

Dynamic

SET_VAR Hint Applies

1002

Type

sql_warnings

Global, Session

Yes

No

Boolean

Server System Variables

Default Value

OFF

This variable controls whether single-row INSERT statements produce an information string if
warnings occur. The default is OFF. Set the value to ON to produce an information string.

• ssl_ca

Command-Line Format

--ssl-ca=file_name

System Variable

Scope

Dynamic (≥ 8.0.16)
Dynamic (≤ 8.0.15)
SET_VAR Hint Applies

Type

Default Value

ssl_ca

Global

Yes

No

No

File name

NULL

The path name of the Certificate Authority (CA) certificate file in PEM format. The file contains a list
of trusted SSL Certificate Authorities.

As of MySQL 8.0.16, this variable is dynamic and can be modified at runtime to affect the TLS
context the server uses for new connections established after the execution of ALTER INSTANCE
RELOAD TLS or after a restart if the variable value was persisted. See Server-Side Runtime
Configuration and Monitoring for Encrypted Connections. Prior to MySQL 8.0.16, this variable can be
set only at server startup.

• ssl_capath

Command-Line Format

--ssl-capath=dir_name

System Variable

Scope

Dynamic (≥ 8.0.16)
Dynamic (≤ 8.0.15)
SET_VAR Hint Applies

Type

Default Value

ssl_capath

Global

Yes

No

No

Directory name

NULL

The path name of the directory that contains trusted SSL Certificate Authority (CA) certificate files in
PEM format. You must run OpenSSL rehash on the directory specified by this option prior to using
it. On Linux systems, you can invoke rehash like this:

$> openssl rehash path/to/directory

On Windows platforms, you can use the c_rehash script in a command prompt, like this:

\> c_rehash path/to/directory

See openssl-rehash for complete syntax and other information.

As of MySQL 8.0.16, this variable is dynamic and can be modified at runtime to affect the TLS
context the server uses for new connections established after the execution of ALTER INSTANCE
RELOAD TLS or after a restart if the variable value was persisted. See Server-Side Runtime
Configuration and Monitoring for Encrypted Connections. Prior to MySQL 8.0.16, this variable can be
set only at server startup.

1003

Server System Variables

• ssl_cert

Command-Line Format

--ssl-cert=file_name

System Variable

Scope

Dynamic (≥ 8.0.16)
Dynamic (≤ 8.0.15)
SET_VAR Hint Applies

Type

Default Value

ssl_cert

Global

Yes

No

No

File name

NULL

The path name of the server SSL public key certificate file in PEM format.

If the server is started with ssl_cert set to a certificate that uses any restricted cipher or cipher
category, the server starts with support for encrypted connections disabled. For information about
cipher restrictions, see Connection Cipher Configuration.

As of MySQL 8.0.16, this variable is dynamic and can be modified at runtime to affect the TLS
context the server uses for new connections established after the execution of ALTER INSTANCE
RELOAD TLS or after a restart if the variable value was persisted. See Server-Side Runtime
Configuration and Monitoring for Encrypted Connections. Prior to MySQL 8.0.16, this variable can be
set only at server startup.

Note

Chained SSL certificate support was added in v8.0.30; previously only the
first certificate was read.

• ssl_cipher

Command-Line Format

System Variable

Scope

Dynamic (≥ 8.0.16)
Dynamic (≤ 8.0.15)
SET_VAR Hint Applies

Type

Default Value

--ssl-cipher=name

ssl_cipher

Global

Yes

No

No

String

NULL

The list of permissible encryption ciphers for connections that use TLS protocols up through
TLSv1.2. If no cipher in the list is supported, encrypted connections that use these TLS protocols do
not work.

For greatest portability, the cipher list should be a list of one or more cipher names, separated by
colons. The following example shows two cipher names separated by a colon:

[mysqld]

1004

Server System Variables

ssl_cipher="DHE-RSA-AES128-GCM-SHA256:AES128-SHA"

OpenSSL supports the syntax for specifying ciphers described in the OpenSSL documentation at
https://www.openssl.org/docs/manmaster/man1/ciphers.html.

For information about which encryption ciphers MySQL supports, see Section 8.3.2, “Encrypted
Connection TLS Protocols and Ciphers”.

As of MySQL 8.0.16, this variable is dynamic and can be modified at runtime to affect the TLS
context the server uses for new connections established after the execution of ALTER INSTANCE
RELOAD TLS or after a restart if the variable value was persisted. See Server-Side Runtime
Configuration and Monitoring for Encrypted Connections. Prior to MySQL 8.0.16, this variable can be
set only at server startup.

• ssl_crl

Command-Line Format

--ssl-crl=file_name

System Variable

Scope

Dynamic (≥ 8.0.16)
Dynamic (≤ 8.0.15)
SET_VAR Hint Applies

Type

Default Value

ssl_crl

Global

Yes

No

No

File name

NULL

The path name of the file containing certificate revocation lists in PEM format.

As of MySQL 8.0.16, this variable is dynamic and can be modified at runtime to affect the TLS
context the server uses for new connections established after the execution of ALTER INSTANCE
RELOAD TLS or after a restart if the variable value was persisted. See Server-Side Runtime
Configuration and Monitoring for Encrypted Connections. Prior to MySQL 8.0.16, this variable can be
set only at server startup.

• ssl_crlpath

Command-Line Format

--ssl-crlpath=dir_name

System Variable

Scope

Dynamic (≥ 8.0.16)
Dynamic (≤ 8.0.15)
SET_VAR Hint Applies

Type

Default Value

ssl_crlpath

Global

Yes

No

No

Directory name

NULL

The path of the directory that contains certificate revocation-list files in PEM format.

As of MySQL 8.0.16, this variable is dynamic and can be modified at runtime to affect the TLS
context the server uses for new connections established after the execution of ALTER INSTANCE
RELOAD TLS or after a restart if the variable value was persisted. See Server-Side Runtime
Configuration and Monitoring for Encrypted Connections. Prior to MySQL 8.0.16, this variable can be
set only at server startup.

1005

Server System Variables

• ssl_fips_mode

Command-Line Format

--ssl-fips-mode={OFF|ON|STRICT}

Deprecated

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Valid Values

8.0.34

ssl_fips_mode

Global

No

No

Enumeration

OFF

OFF (or 0)

ON (or 1)

STRICT (or 2)

Controls whether to enable FIPS mode on the server side. The ssl_fips_mode system variable
differs from other ssl_xxx system variables in that it is not used to control whether the server
permits encrypted connections, but rather to affect which cryptographic operations are permitted.
See Section 8.8, “FIPS Support”.

These ssl_fips_mode values are permitted:

• OFF (or 0): Disable FIPS mode.

• ON (or 1): Enable FIPS mode.

• STRICT (or 2): Enable “strict” FIPS mode.

Note

If the OpenSSL FIPS Object Module is not available, the only permitted value
for ssl_fips_mode is OFF. In this case, setting ssl_fips_mode to ON or
STRICT at startup causes the server to produce an error message and exit.

As of MySQL 8.0.34, this option is deprecated and made read-only. Expect it to be removed in a
future version of MySQL.

• ssl_key

Command-Line Format

--ssl-key=file_name

System Variable

Scope

Dynamic (≥ 8.0.16)
Dynamic (≤ 8.0.15)
SET_VAR Hint Applies

Type

ssl_key

Global

Yes

No

No

File name

1006

Server System Variables

Default Value

NULL

The path name of the server SSL private key file in PEM format. For better security, use a certificate
with an RSA key size of at least 2048 bits.

If the key file is protected by a passphrase, the server prompts the user for the passphrase. The
password must be given interactively; it cannot be stored in a file. If the passphrase is incorrect, the
program continues as if it could not read the key.

As of MySQL 8.0.16, this variable is dynamic and can be modified at runtime to affect the TLS
context the server uses for new connections established after the execution of ALTER INSTANCE
RELOAD TLS or after a restart if the variable value was persisted. See Server-Side Runtime
Configuration and Monitoring for Encrypted Connections. Prior to MySQL 8.0.16, this variable can be
set only at server startup.

• ssl_session_cache_mode

Command-Line Format

--ssl_session_cache_mode={ON|OFF}

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Valid Values

8.0.29

ssl_session_cache_mode

Global

Yes

No

Boolean

ON

ON

OFF

Controls whether to enable the session cache in memory on the server side and session-ticket
generation by the server. The default mode is ON (enable session cache mode). A change to the
ssl_session_cache_mode system variable has an effect only after the ALTER INSTANCE
RELOAD TLS statement has been executed, or after a restart if the variable value was persisted.

These ssl_session_cache_mode values are permitted:

• ON: Enable session cache mode.

• OFF: Disable session cache mode.

The server does not advertise its support for session resumption if the value of this system variable
is OFF. When running on OpenSSL 1.0.x the session tickets are always generated, but the tickets
are not usable when ssl_session_cache_mode is enabled.

The current value in effect for ssl_session_cache_mode can be observed with the
Ssl_session_cache_mode status variable.

• ssl_session_cache_timeout

Command-Line Format

--ssl_session_cache_timeout

Introduced

System Variable

Scope

Dynamic

8.0.29

ssl_session_cache_timeout

Global

Yes

1007

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

Server System Variables

No

Integer

300

0

84600

seconds

Sets a period of time during which prior session reuse is permitted when establishing a new
encrypted connection to the server, provided the ssl_session_cache_mode system variable is
enabled and prior session data is available. If the session timeout expires, a session can no longer
be reused.

The default value is 300 seconds and the maximum value is 84600 (or one day in seconds). A
change to the ssl_session_cache_timeout system variable has an effect only after the ALTER
INSTANCE RELOAD TLS statement has been executed, or after a restart if the variable value was
persisted. The current value in effect for ssl_session_cache_timeout can be observed with the
Ssl_session_cache_timeout status variable.

• statement_id

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

statement_id

Session

No

No

Integer

Each statement executed in the current session is assigned a sequence number. This can be used
together with the session_track_system_variables system variable to identify this statement
in Performance Schema tables such as the events_statements_history table.

• stored_program_cache

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

--stored-program-cache=#

stored_program_cache

Global

Yes

No

Integer

256

16

524288

Sets a soft upper limit for the number of cached stored routines per connection. The value of
this variable is specified in terms of the number of stored routines held in each of the two caches
maintained by the MySQL Server for, respectively, stored procedures and stored functions.

Whenever a stored routine is executed this cache size is checked before the first or top-level
statement in the routine is parsed; if the number of routines of the same type (stored procedures or
stored functions according to which is being executed) exceeds the limit specified by this variable,
the corresponding cache is flushed and memory previously allocated for cached objects is freed.

1008

Server System Variables

This allows the cache to be flushed safely, even when there are dependencies between stored
routines.

The stored procedure and stored function caches exists in parallel with the stored program definition
cache partition of the dictionary object cache. The stored procedure and stored function caches are
per connection, while the stored program definition cache is shared. The existence of objects in the
stored procedure and stored function caches have no dependence on the existence of objects in the
stored program definition cache, and vice versa. For more information, see Section 16.4, “Dictionary
Object Cache”.

• stored_program_definition_cache

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

--stored-program-definition-cache=#

stored_program_definition_cache

Global

Yes

No

Integer

256

256

524288

Defines a limit for the number of stored program definition objects, both used and unused, that can
be kept in the dictionary object cache.

Unused stored program definition objects are only kept in the dictionary object cache when the
number in use is less than the capacity defined by stored_program_definition_cache.

A setting of 0 means that stored program definition objects are only kept in the dictionary object
cache while they are in use.

The stored program definition cache partition exists in parallel with the stored procedure and stored
function caches that are configured using the stored_program_cache option.

The stored_program_cache option sets a soft upper limit for the number of cached stored
procedures or functions per connection, and the limit is checked each time a connection executes
a stored procedure or function. The stored program definition cache partition, on the other hand,
is a shared cache that stores stored program definition objects for other purposes. The existence
of objects in the stored program definition cache partition has no dependence on the existence of
objects in the stored procedure cache or stored function cache, and vice versa.

For related information, see Section 16.4, “Dictionary Object Cache”.

• super_read_only

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

--super-read-only[={OFF|ON}]

super_read_only

Global

Yes

No

Boolean

1009

Server System Variables

Default Value

OFF

If the read_only system variable is enabled, the server permits no client updates except from
users who have the CONNECTION_ADMIN privilege (or the deprecated SUPER privilege). If the
super_read_only system variable is also enabled, the server prohibits client updates even
from users who have CONNECTION_ADMIN or SUPER. See the description of the read_only
system variable for a description of read-only mode and information about how read_only and
super_read_only interact.

Client updates prevented when super_read_only is enabled include operations that do not
necessarily appear to be updates, such as CREATE FUNCTION (to install a loadable function),
INSTALL PLUGIN, and INSTALL COMPONENT. These operations are prohibited because they
involve changes to tables in the mysql system schema.

Similarly, if the Event Scheduler is enabled, enabling the super_read_only system variable
prevents it from updating event “last executed” timestamps in the events data dictionary table. This
causes the Event Scheduler to stop the next time it tries to execute a scheduled event, after writing
a message to the server error log. (In this situation the event_scheduler system variable does
not change from ON to OFF. An implication is that this variable rejects the DBA intent that the Event
Scheduler be enabled or disabled, where its actual status of started or stopped may be distinct.). If
super_read_only is subsequently disabled after being enabled, the server automatically restarts
the Event Scheduler as needed, as of MySQL 8.0.26. Prior to MySQL 8.0.26, it is necessary to
manually restart the Event Scheduler by enabling it again.

Changes to super_read_only on a replication source server are not replicated to replica servers.
The value can be set on a replica independent of the setting on the source.

• syseventlog.facility

Command-Line Format

--syseventlog.facility=value

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

8.0.13

syseventlog.facility

Global

Yes

No

String

daemon

The facility for error log output written to syslog (what type of program is sending the message).
This variable is unavailable unless the log_sink_syseventlog error log component is installed.
See Section 7.4.2.8, “Error Logging to the System Log”.

The permitted values can vary per operating system; consult your system syslog documentation.

This variable does not exist on Windows.

• syseventlog.include_pid

Command-Line Format

--syseventlog.include-pid[={OFF|ON}]

Introduced

System Variable

Scope

Dynamic

1010

SET_VAR Hint Applies

8.0.13

syseventlog.include_pid

Global

Yes

No

Server System Variables

Type

Default Value

Boolean

ON

Whether to include the server process ID in each line of error log output written to syslog. This
variable is unavailable unless the log_sink_syseventlog error log component is installed. See
Section 7.4.2.8, “Error Logging to the System Log”.

This variable does not exist on Windows.

• syseventlog.tag

Command-Line Format

--syseventlog.tag=tag

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

8.0.13

syseventlog.tag

Global

Yes

No

String

empty string

The tag to be added to the server identifier in error log output written to syslog or the Windows
Event Log. This variable is unavailable unless the log_sink_syseventlog error log component is
installed. See Section 7.4.2.8, “Error Logging to the System Log”.

By default, no tag is set, so the server identifier is simply MySQL on Windows, and mysqld on other
platforms. If a tag value of tag is specified, it is appended to the server identifier with a leading
hyphen, resulting in a syslog identifier of mysqld-tag (or MySQL-tag on Windows).

On Windows, to use a tag that does not already exist, the server must be run from an account with
Administrator privileges, to permit creation of a registry entry for the tag. Elevated privileges are not
required if the tag already exists.

• system_time_zone

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

system_time_zone

Global

No

No

String

The server system time zone. When the server begins executing, it inherits a time zone setting
from the machine defaults, possibly modified by the environment of the account used for running
the server or the startup script. The value is used to set system_time_zone. To explicitly specify
the system time zone, set the TZ environment variable or use the --timezone option of the
mysqld_safe script.

As of MySQL 8.0.26, in addition to startup time initialization, if the server host time zone changes (for
example, due to daylight saving time), system_time_zone reflects that change, which has these
implications for applications:

• Queries that reference system_time_zone will get one value before a daylight saving change

and a different value after the change.

1011

Server System Variables

• For queries that begin executing before a daylight saving change and end after the change, the
system_time_zone remains constant within the query because the value is usually cached at
the beginning of execution.

The system_time_zone variable differs from the time_zone variable. Although they might have
the same value, the latter variable is used to initialize the time zone for each client that connects.
See Section 7.1.15, “MySQL Server Time Zone Support”.

• table_definition_cache

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

--table-definition-cache=#

table_definition_cache

Global

Yes

No

Integer

-1 (signifies autosizing; do not assign this literal
value)

400

524288

The number of table definitions that can be stored in the table definition cache. If you use a large
number of tables, you can create a large table definition cache to speed up opening of tables. The
table definition cache takes less space and does not use file descriptors, unlike the normal table
cache. The minimum value is 400. The default value is based on the following formula, capped to a
limit of 2000:

MIN(400 + table_open_cache / 2, 2000)

For InnoDB, the table_definition_cache setting acts as a soft limit for the number of table
instances in the dictionary object cache and the number file-per-table tablespaces that can be open
at one time.

If the number of table instances in the dictionary object cache exceeds the
table_definition_cache limit, an LRU mechanism begins marking table instances for eviction
and eventually removes them from the dictionary object cache. The number of open tables with
cached metadata can be higher than the table_definition_cache limit due to table instances
with foreign key relationships, which are not placed on the LRU list.

The number of file-per-table tablespaces that can be open at one time is limited by both the
table_definition_cache and innodb_open_files settings. If both variables are set, the
highest setting is used. If neither variable is set, the table_definition_cache setting, which
has a higher default value, is used. If the number of open tablespaces exceeds the limit defined by
table_definition_cache or innodb_open_files, an LRU mechanism searches the LRU list
for tablespace files that are fully flushed and not currently being extended. This process is performed
each time a new tablespace is opened. Only inactive tablespaces are closed.

The table definition cache exists in parallel with the table definition cache partition of the dictionary
object cache. Both caches store table definitions but serve different parts of the MySQL server.
Objects in one cache have no dependence on the existence of objects in the other. For more
information, see Section 16.4, “Dictionary Object Cache”.

1012

Server System Variables

• table_encryption_privilege_check

Command-Line Format

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--table-encryption-privilege-
check[={OFF|ON}]

8.0.16

table_encryption_privilege_check

Global

Yes

No

Boolean

OFF

Controls the TABLE_ENCRYPTION_ADMIN privilege check that occurs when creating or altering a
schema or general tablespace with encryption that differs from the default_table_encryption
setting, or when creating or altering a table with an encryption setting that differs from the default
schema encryption. The check is disabled by default.

Setting table_encryption_privilege_check at runtime requires the SUPER privilege.

table_encryption_privilege_check supports SET PERSIST and SET PERSIST_ONLY
syntax. See Section 7.1.9.3, “Persisted System Variables”.

For more information, see Defining an Encryption Default for Schemas and General Tablespaces.

• table_open_cache

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

--table-open-cache=#

table_open_cache

Global

Yes

No

Integer

4000

1

524288

The number of open tables for all threads. Increasing this value increases the number of file
descriptors that mysqld requires. The effective value of this variable is the greater of the effective
value of open_files_limit - 10 - the effective value of max_connections / 2, and 400;
that is

MAX(
    (open_files_limit - 10 - max_connections) / 2,
    400
   )

You can check whether you need to increase the table cache by checking the Opened_tables
status variable. If the value of Opened_tables is large and you do not use FLUSH TABLES often
(which just forces all tables to be closed and reopened), then you should increase the value of the
table_open_cache variable. For more information about the table cache, see Section 10.4.3.1,
“How MySQL Opens and Closes Tables”.

1013

Server System Variables

• table_open_cache_instances

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

--table-open-cache-instances=#

table_open_cache_instances

Global

No

No

Integer

16

1

64

The number of open tables cache instances. To improve scalability by reducing contention among
sessions, the open tables cache can be partitioned into several smaller cache instances of size
table_open_cache / table_open_cache_instances . A session needs to lock only one
instance to access it for DML statements. This segments cache access among instances, permitting
higher performance for operations that use the cache when there are many sessions accessing
tables. (DDL statements still require a lock on the entire cache, but such statements are much less
frequent than DML statements.)

A value of 8 or 16 is recommended on systems that routinely use 16 or more cores. However, if
you have many large triggers on your tables that cause a high memory load, the default setting for
table_open_cache_instances might lead to excessive memory usage. In that situation, it can
be helpful to set table_open_cache_instances to 1 in order to restrict memory usage.

• tablespace_definition_cache

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

--tablespace-definition-cache=#

tablespace_definition_cache

Global

Yes

No

Integer

256

256

524288

Defines a limit for the number of tablespace definition objects, both used and unused, that can be
kept in the dictionary object cache.

Unused tablespace definition objects are only kept in the dictionary object cache when the number in
use is less than the capacity defined by tablespace_definition_cache.

A setting of 0 means that tablespace definition objects are only kept in the dictionary object cache
while they are in use.

For more information, see Section 16.4, “Dictionary Object Cache”.

• temptable_max_mmap

Command-Line Format

--temptable-max-mmap=#

1014

Introduced

8.0.23

Server System Variables

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

temptable_max_mmap

Global

Yes

No

Integer

1073741824

0

2^64-1

bytes

Defines the maximum amount of memory (in bytes) the TempTable storage engine is permitted
to allocate from memory-mapped temporary files before it starts storing data to InnoDB internal
temporary tables on disk. A setting of 0 disables allocation of memory from memory-mapped
temporary files. For more information, see Section 10.4.4, “Internal Temporary Table Use in MySQL”.

• temptable_max_ram

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

--temptable-max-ram=#

temptable_max_ram

Global

Yes

No

Integer

1073741824

2097152

2^64-1

bytes

Defines the maximum amount of memory that can be occupied by the TempTable storage engine
before it starts storing data on disk. The default value is 1073741824 bytes (1GiB). For more
information, see Section 10.4.4, “Internal Temporary Table Use in MySQL”.

• temptable_use_mmap

Command-Line Format

--temptable-use-mmap[={OFF|ON}]

Introduced

Deprecated

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

8.0.16

8.0.26

temptable_use_mmap

Global

Yes

No

Boolean

ON

Defines whether the TempTable storage engine allocates space for internal in-memory temporary
tables as memory-mapped temporary files when the amount of memory occupied by the
TempTable storage engine exceeds the limit defined by the temptable_max_ram variable. When
temptable_use_mmap is disabled, the TempTable storage engine uses InnoDB on-disk internal

1015

Server System Variables

temporary tables instead. For more information, see Section 10.4.4, “Internal Temporary Table Use
in MySQL”.

• thread_cache_size

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

--thread-cache-size=#

thread_cache_size

Global

Yes

No

Integer

-1 (signifies autosizing; do not assign this literal
value)

0

16384

How many threads the server should cache for reuse. When a client disconnects, the client's
threads are put in the cache if there are fewer than thread_cache_size threads there. Requests
for threads are satisfied by reusing threads taken from the cache if possible, and only when the
cache is empty is a new thread created. This variable can be increased to improve performance
if you have a lot of new connections. Normally, this does not provide a notable performance
improvement if you have a good thread implementation. However, if your server sees hundreds of
connections per second you should normally set thread_cache_size high enough so that most
new connections use cached threads. By examining the difference between the Connections and
Threads_created status variables, you can see how efficient the thread cache is. For details, see
Section 7.1.10, “Server Status Variables”.

The default value is based on the following formula, capped to a limit of 100:

8 + (max_connections / 100)

• thread_handling

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Valid Values

--thread-handling=name

thread_handling

Global

No

No

Enumeration

one-thread-per-connection

no-threads

one-thread-per-connection

loaded-dynamically

The thread-handling model used by the server for connection threads. The permissible values
are no-threads (the server uses a single thread to handle one connection), one-thread-
per-connection (the server uses one thread to handle each client connection), and loaded-
dynamically (set by the thread pool plugin when it initializes). no-threads is useful for
debugging under Linux; see Section 7.9, “Debugging MySQL”.

1016

Server System Variables

• thread_pool_algorithm

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

--thread-pool-algorithm=#

thread_pool_algorithm

Global

No

No

Integer

0

0

1

This variable controls which algorithm the thread pool plugin uses:

• 0: Use a conservative low-concurrency algorithm.

• 1: Use an aggressive high-currency algorithm which performs better with optimal thread counts,
but performance may be degraded if the number of connections reaches extremely high values.

This variable is available only if the thread pool plugin is enabled. See Section 7.6.3, “MySQL
Enterprise Thread Pool”.

• thread_pool_dedicated_listeners

Command-Line Format

--thread-pool-dedicated-listeners

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

8.0.23

thread_pool_dedicated_listeners

Global

No

No

Boolean

OFF

Dedicates a listener thread in each thread group to listen for incoming statements from connections
assigned to the group.

• OFF: (Default) Disables dedicated listener threads.

• ON: Dedicates a listener thread in each thread group to listen for incoming statements from
connections assigned to the group. Dedicated listener threads do not execute queries.

Enabling thread_pool_dedicated_listeners is only useful when a transaction
limit is defined by thread_pool_max_transactions_limit. Otherwise,
thread_pool_dedicated_listeners should not be enabled.

HeatWave Service introduced this variable in MySQL 8.0.23. It is available with MySQL Enterprise
Edition from MySQL 8.0.31.

• thread_pool_high_priority_connection

Command-Line Format

--thread-pool-high-priority-
connection=#

System Variable

thread_pool_high_priority_connection1017

Server System Variables

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Global, Session

Yes

No

Integer

0

0

1

This variable affects queuing of new statements prior to execution. If the value is 0 (false, the
default), statement queuing uses both the low-priority and high-priority queues. If the value is 1
(true), queued statements always go to the high-priority queue.

This variable is available only if the thread pool plugin is enabled. See Section 7.6.3, “MySQL
Enterprise Thread Pool”.

• thread_pool_max_active_query_threads

Command-Line Format

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

--thread-pool-max-active-query-
threads

8.0.19

thread_pool_max_active_query_threads

Global

Yes

No

Integer

0

0

512

The maximum permissible number of active (running) query threads per group. If the value is 0, the
thread pool plugin uses up to as many threads as are available.

This variable is available only if the thread pool plugin is enabled. See Section 7.6.3, “MySQL
Enterprise Thread Pool”.

• thread_pool_max_transactions_limit

Command-Line Format

--thread-pool-max-transactions-limit

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

1018

8.0.23

thread_pool_max_transactions_limit

Global

Yes

No

Integer

0

0

Server System Variables

Maximum Value

1000000

The maximum number of transactions permitted by the thread pool plugin. Defining a transaction
limit binds a thread to a transaction until it commits, which helps stabilize throughput during high
concurrency.

The default value of 0 means that there is no transaction limit. The variable is dynamic but cannot
be changed from 0 to a higher value at runtime and vice versa. A non-zero value at startup permits
dynamic configuration at runtime. The CONNECTION_ADMIN privilege is required to configure
thread_pool_max_transactions_limit at runtime.

When you define a transaction limit, enabling thread_pool_dedicated_listeners creates a
dedicated listener thread in each thread group. The additional dedicated listener thread consumes
more resources and affects thread pool performance. thread_pool_dedicated_listeners
should therefore be used cautiously.

When the limit defined by thread_pool_max_transactions_limit has been reached, new
connections appear to hang until one or more existing transactions are completed. The same occurs
when attempting to start a new transaction on an existing connection. If existing connections are
blocked or long-running, a privileged connection may be required to access the server to increase
the limit, remove the limit, or kill running transactions. See Privileged Connections.

HeatWave Service introduced this variable in MySQL 8.0.23. It is available with MySQL Enterprise
Edition in from MySQL 8.0.31.

• thread_pool_max_unused_threads

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

--thread-pool-max-unused-threads=#

thread_pool_max_unused_threads

Global

Yes

No

Integer

0

0

4096

The maximum permitted number of unused threads in the thread pool. This variable makes it
possible to limit the amount of memory used by sleeping threads.

A value of 0 (the default) means no limit on the number of sleeping threads. A value of N where N is
greater than 0 means 1 consumer thread and N−1 reserve threads. In this case, if a thread is ready
to sleep but the number of sleeping threads is already at the maximum, the thread exits rather than
going to sleep.

A sleeping thread is either sleeping as a consumer thread or a reserve thread. The thread pool
permits one thread to be the consumer thread when sleeping. If a thread goes to sleep and there
is no existing consumer thread, it sleeps as a consumer thread. When a thread must be woken up,
a consumer thread is selected if there is one. A reserve thread is selected only when there is no
consumer thread to wake up.

This variable is available only if the thread pool plugin is enabled. See Section 7.6.3, “MySQL
Enterprise Thread Pool”.

1019

Server System Variables

• thread_pool_prio_kickup_timer

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

--thread-pool-prio-kickup-timer=#

thread_pool_prio_kickup_timer

Global

Yes

No

Integer

1000

0

4294967294

milliseconds

This variable affects statements waiting for execution in the low-priority queue. The value is the
number of milliseconds before a waiting statement is moved to the high-priority queue. The default is
1000 (1 second).

This variable is available only if the thread pool plugin is enabled. See Section 7.6.3, “MySQL
Enterprise Thread Pool”.

• thread_pool_query_threads_per_group

Command-Line Format

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

--thread-pool-query-threads-per-
group

8.0.31

thread_pool_query_threads_per_group

Global

Yes

No

Integer

1

1

4096

The maximum number of query threads permitted in a thread group. The maximum
value is 4096, but if thread_pool_max_transactions_limit is set,
thread_pool_query_threads_per_group must not exceed that value.

The default value of 1 means there is one active query thread in each thread group, which
works well for many loads. When you are using the high concurrency thread pool algorithm
(thread_pool_algorithm = 1), consider increasing the value if you experience slower response
times due to long-running transactions.

The CONNECTION_ADMIN privilege is required to configure
thread_pool_query_threads_per_group at runtime.

If you decrease the value of thread_pool_query_threads_per_group at runtime, threads
that are currently running user queries are allowed to complete, then moved to the reserve pool or
terminated. if you increment the value at runtime and the thread group needs more threads, these
are taken from the reserve pool if possible, otherwise they are created.

1020

This variable is available from MySQL 8.0.31 in HeatWave Service and MySQL Enterprise Edition.

Server System Variables

• thread_pool_size

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value (≥ 8.0.19)
Maximum Value (≤ 8.0.18)

--thread-pool-size=#

thread_pool_size

Global

No

No

Integer

16

1

512

64

The number of thread groups in the thread pool. This is the most important parameter controlling
thread pool performance. It affects how many statements can execute simultaneously. If a value
outside the range of permissible values is specified, the thread pool plugin does not load and the
server writes a message to the error log.

This variable is available only if the thread pool plugin is enabled. See Section 7.6.3, “MySQL
Enterprise Thread Pool”.

• thread_pool_stall_limit

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

--thread-pool-stall-limit=#

thread_pool_stall_limit

Global

Yes

No

Integer

6

4

600

milliseconds * 10

This variable affects executing statements. The value is the amount of time a statement has to finish
after starting to execute before it becomes defined as stalled, at which point the thread pool permits
the thread group to begin executing another statement. The value is measured in 10 millisecond
units, so the default of 6 means 60ms. Short wait values permit threads to start more quickly. Short
values are also better for avoiding deadlock situations. Long wait values are useful for workloads that
include long-running statements, to avoid starting too many new statements while the current ones
execute.

This variable is available only if the thread pool plugin is enabled. See Section 7.6.3, “MySQL
Enterprise Thread Pool”.

• thread_pool_transaction_delay

Command-Line Format

--thread-pool-transaction-delay

Introduced

System Variable

8.0.31

thread_pool_transaction_delay

1021

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Server System Variables

Global

Yes

No

Integer

0

0

300000

The delay period before executing a new transaction, in milliseconds. The maximum value is 300000
(5 minutes).

A transaction delay can be used in cases where parallel transactions affect the performance of other
operations due to resource contention. For example, if parallel transactions affect index creation or
an online buffer pool resizing operation, you can configure a transaction delay to reduce resource
contention while those operations are running.

Worker threads sleep for the number of milliseconds specified by
thread_pool_transaction_delay before executing a new transaction.

The thread_pool_transaction_delay setting does not affect queries issued from a privileged
connection (a connection assigned to the Admin thread group). These queries are not subject to a
configured transaction delay.

• thread_stack

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value (64-bit platforms, ≥ 8.0.27)
Default Value (64-bit platforms, ≤ 8.0.26)
Default Value (32-bit platforms, ≥ 8.0.27)
Default Value (32-bit platforms, ≤ 8.0.26)
Minimum Value

--thread-stack=#

thread_stack

Global

No

No

Integer

1048576

286720

1048576

221184

131072

Maximum Value (64-bit platforms)

18446744073709550592

Maximum Value (32-bit platforms)

4294966272

Unit

Block Size

bytes

1024

The stack size for each thread. The default is large enough for normal operation. If the thread stack
size is too small, it limits the complexity of the SQL statements that the server can handle, the
recursion depth of stored procedures, and other memory-consuming actions.

• time_zone

System Variable

Scope

Dynamic

1022

time_zone

Global, Session

Yes

Server System Variables

SET_VAR Hint Applies (≥ 8.0.17)
SET_VAR Hint Applies (≤ 8.0.16)
Type

Default Value

Minimum Value (≥ 8.0.19)
Minimum Value (≤ 8.0.18)
Maximum Value (≥ 8.0.19)
Maximum Value (≤ 8.0.18)

Yes

No

String

SYSTEM

-13:59

-12:59

+14:00

+13:00

The current time zone. This variable is used to initialize the time zone for each client that
connects. By default, the initial value of this is 'SYSTEM' (which means, “use the value of
system_time_zone”). The value can be specified explicitly at server startup with the --default-
time-zone option. See Section 7.1.15, “MySQL Server Time Zone Support”.

Note

If set to SYSTEM, every MySQL function call that requires a time zone
calculation makes a system library call to determine the current system time
zone. This call may be protected by a global mutex, resulting in contention.

• timestamp

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

timestamp

Session

Yes

Yes

Numeric

UNIX_TIMESTAMP()

1

2147483647

Set the time for this client. This is used to get the original timestamp if you use the binary log to
restore rows. timestamp_value should be a Unix epoch timestamp (a value like that returned by
UNIX_TIMESTAMP(), not a value in 'YYYY-MM-DD hh:mm:ss' format) or DEFAULT.

Setting timestamp to a constant value causes it to retain that value until it is changed again.
Setting timestamp to DEFAULT causes its value to be the current date and time as of the time it is
accessed.

timestamp is a DOUBLE rather than BIGINT because its value includes a microseconds part. The
maximum value corresponds to '2038-01-19 03:14:07' UTC, the same as for the TIMESTAMP
data type.

SET timestamp affects the value returned by NOW() but not by SYSDATE(). This means that
timestamp settings in the binary log have no effect on invocations of SYSDATE(). The server can be
started with the --sysdate-is-now option to cause SYSDATE() to be a synonym for NOW(), in
which case SET timestamp affects both functions.

• tls_ciphersuites

Command-Line Format

--tls-ciphersuites=ciphersuite_list

Introduced

System Variable

8.0.16

tls_ciphersuites

1023

Server System Variables

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Global

Yes

No

String

NULL

Which ciphersuites the server permits for encrypted connections that use TLSv1.3. The value is a list
of zero or more colon-separated ciphersuite names.

The ciphersuites that can be named for this variable depend on the SSL library used to compile
MySQL. If this variable is not set, its default value is NULL, which means that the server permits the
default set of ciphersuites. If the variable is set to the empty string, no ciphersuites are enabled and
encrypted connections cannot be established. For more information, see Section 8.3.2, “Encrypted
Connection TLS Protocols and Ciphers”.

• tls_version

Command-Line Format

--tls-version=protocol_list

System Variable

Scope

Dynamic (≥ 8.0.16)
Dynamic (≤ 8.0.15)
SET_VAR Hint Applies

Type

tls_version

Global

Yes

No

No

String

Default Value (≥ 8.0.28)
Default Value (≥ 8.0.16, ≤ 8.0.27)
Default Value (≤ 8.0.15)

TLSv1.2,TLSv1.3

TLSv1,TLSv1.1,TLSv1.2,TLSv1.3

TLSv1,TLSv1.1,TLSv1.2

Which protocols the server permits for encrypted connections. The value is a list of one or more
comma-separated protocol names, which are not case-sensitive. The protocols that can be named
for this variable depend on the SSL library used to compile MySQL. Permitted protocols should be
chosen such as not to leave “holes” in the list. For details, see Section 8.3.2, “Encrypted Connection
TLS Protocols and Ciphers”.

As of MySQL 8.0.16, this variable is dynamic and can be modified at runtime to affect the TLS
context the server uses for new connections. See Server-Side Runtime Configuration and Monitoring
for Encrypted Connections. Prior to MySQL 8.0.16, this variable can be set only at server startup.

Important

• Support for the TLSv1 and TLSv1.1 connection protocols is removed

from MySQL Server as of MySQL 8.0.28. The protocols were deprecated
from MySQL 8.0.26. See Removal of Support for the TLSv1 and TLSv1.1
Protocols for more information.

• Support for the TLSv1.3 protocol is available in MySQL Server as

of MySQL 8.0.16, provided that MySQL Server was compiled using
OpenSSL 1.1.1 or higher. The server checks the version of OpenSSL
at startup, and if it is lower than 1.1.1, TLSv1.3 is removed from the
default value for the system variable. In that case, the defaults are
“TLSv1,TLSv1.1,TLSv1.2” up to and including MySQL 8.0.27, and
“TLSv1.2” from MySQL 8.0.28.

Setting this variable to an empty string disables encrypted connections.

1024

• tmp_table_size

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

Server System Variables

--tmp-table-size=#

tmp_table_size

Global, Session

Yes

Yes

Integer

16777216

1024

18446744073709551615

bytes

Defines the maximum size of internal in-memory temporary tables created by the MEMORY storage
engine and, as of MySQL 8.0.28, the TempTable storage engine. If an internal in-memory temporary
table exceeds this size, it is automatically converted to an on-disk internal temporary table.

The tmp_table_size variable does not apply to user-created MEMORY tables. User-created
TempTable tables are not supported.

When using the MEMORY storage engine for internal in-memory temporary tables, the actual size limit
is the smaller of tmp_table_size and max_heap_table_size. The max_heap_table_size
setting does not apply to TempTable tables.

Increase the value of tmp_table_size (and max_heap_table_size if necessary when using the
MEMORY storage engine for internal in-memory temporary tables) if you do many advanced GROUP
BY queries and you have lots of memory.

You can compare the number of internal on-disk temporary tables created to the total number
of internal temporary tables created by comparing Created_tmp_disk_tables and
Created_tmp_tables values.

See also Section 10.4.4, “Internal Temporary Table Use in MySQL”.

• tmpdir

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

--tmpdir=dir_name

tmpdir

Global

No

No

Directory name

The path of the directory to use for creating temporary files. It might be useful if your default /tmp
directory resides on a partition that is too small to hold temporary tables. This variable can be set
to a list of several paths that are used in round-robin fashion. Paths should be separated by colon
characters (:) on Unix and semicolon characters (;) on Windows.

tmpdir can be a non-permanent location, such as a directory on a memory-based file system or a
directory that is cleared when the server host restarts. If the MySQL server is acting as a replica, and
you are using a non-permanent location for tmpdir, consider setting a different temporary directory
for the replica using the replica_load_tmpdir or slave_load_tmpdir variable. For a replica,
the temporary files used to replicate LOAD DATA statements are stored in this directory, so with a

1025

Server System Variables

permanent location they can survive machine restarts, although replication can now continue after a
restart if the temporary files have been removed.

For more information about the storage location of temporary files, see Section B.3.3.5, “Where
MySQL Stores Temporary Files”.

• transaction_alloc_block_size

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

Block Size

--transaction-alloc-block-size=#

transaction_alloc_block_size

Global, Session

Yes

No

Integer

8192

1024

131072

bytes

1024

The amount in bytes by which to increase a per-transaction memory pool which needs memory. See
the description of transaction_prealloc_size.

• transaction_isolation

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Valid Values

--transaction-isolation=name

transaction_isolation

Global, Session

Yes

No

Enumeration

REPEATABLE-READ

READ-UNCOMMITTED

READ-COMMITTED

REPEATABLE-READ

SERIALIZABLE

The transaction isolation level. The default is REPEATABLE-READ.

The transaction isolation level has three scopes: global, session, and next transaction. This
three-scope implementation leads to some nonstandard isolation-level assignment semantics, as
described later.

To set the global transaction isolation level at startup, use the --transaction-isolation server
option.

At runtime, the isolation level can be set directly using the SET statement to assign a value to the
transaction_isolation system variable, or indirectly using the SET TRANSACTION statement.
If you set transaction_isolation directly to an isolation level name that contains a space, the

1026

Server System Variables

name should be enclosed within quotation marks, with the space replaced by a dash. For example,
use this SET statement to set the global value:

SET GLOBAL transaction_isolation = 'READ-COMMITTED';

Setting the global transaction_isolation value sets the isolation level for all subsequent
sessions. Existing sessions are unaffected.

To set the session or next-level transaction_isolation value, use the SET statement. For most
session system variables, these statements are equivalent ways to set the value:

SET @@SESSION.var_name = value;
SET SESSION var_name = value;
SET var_name = value;
SET @@var_name = value;

As mentioned previously, the transaction isolation level has a next-transaction scope, in
addition to the global and session scopes. To enable the next-transaction scope to be set,
SET syntax for assigning session system variable values has nonstandard semantics for
transaction_isolation:

• To set the session isolation level, use any of these syntaxes:

SET @@SESSION.transaction_isolation = value;
SET SESSION transaction_isolation = value;
SET transaction_isolation = value;

For each of those syntaxes, these semantics apply:

• Sets the isolation level for all subsequent transactions performed within the session.

• Permitted within transactions, but does not affect the current ongoing transaction.

• If executed between transactions, overrides any preceding statement that sets the next-

transaction isolation level.

• Corresponds to SET SESSION TRANSACTION ISOLATION LEVEL (with the SESSION

keyword).

• To set the next-transaction isolation level, use this syntax:

SET @@transaction_isolation = value;

For that syntax, these semantics apply:

• Sets the isolation level only for the next single transaction performed within the session.

• Subsequent transactions revert to the session isolation level.

• Not permitted within transactions.

• Corresponds to SET TRANSACTION ISOLATION LEVEL (without the SESSION keyword).

For more information about SET TRANSACTION and its relationship to the
transaction_isolation system variable, see Section 15.3.7, “SET TRANSACTION Statement”.

• transaction_prealloc_size

Command-Line Format

--transaction-prealloc-size=#

Deprecated

System Variable

Scope

8.0.29

transaction_prealloc_size

Global, Session

1027

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

Block Size

Server System Variables

Yes

No

Integer

4096

1024

131072

bytes

1024

There is a per-transaction memory pool from which various transaction-related allocations
take memory. The initial size of the pool in bytes is transaction_prealloc_size. For
every allocation that cannot be satisfied from the pool because it has insufficient memory
available, the pool is increased by transaction_alloc_block_size bytes. When the
transaction ends, the pool is truncated to transaction_prealloc_size bytes. By making
transaction_prealloc_size sufficiently large to contain all statements within a single
transaction, you can avoid many malloc() calls.

Beginning with MySQL 8.0.29, transaction_prealloc_size is deprecated; the initial size
of the transaction memory pool is fixed, and setting this variable no longer has any effect. (The
functioning of transaction_alloc_block_size is unaffected by this change.) Expect
transaction_prealloc_size to be removed in a future release of MySQL.

• transaction_read_only

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--transaction-read-only[={OFF|ON}]

transaction_read_only

Global, Session

Yes

No

Boolean

OFF

The transaction access mode. The value can be OFF (read/write; the default) or ON (read only).

The transaction access mode has three scopes: global, session, and next transaction. This three-
scope implementation leads to some nonstandard access-mode assignment semantics, as described
later.

To set the global transaction access mode at startup, use the --transaction-read-only server
option.

At runtime, the access mode can be set directly using the SET statement to assign a value to the
transaction_read_only system variable, or indirectly using the SET TRANSACTION statement.
For example, use this SET statement to set the global value:

SET GLOBAL transaction_read_only = ON;

Setting the global transaction_read_only value sets the access mode for all subsequent
sessions. Existing sessions are unaffected.

To set the session or next-level transaction_read_only value, use the SET statement. For most
session system variables, these statements are equivalent ways to set the value:

SET @@SESSION.var_name = value;
SET SESSION var_name = value;

1028

Server System Variables

SET var_name = value;
SET @@var_name = value;

As mentioned previously, the transaction access mode has a next-transaction scope, in
addition to the global and session scopes. To enable the next-transaction scope to be set,
SET syntax for assigning session system variable values has nonstandard semantics for
transaction_read_only,

• To set the session access mode, use any of these syntaxes:

SET @@SESSION.transaction_read_only = value;
SET SESSION transaction_read_only = value;
SET transaction_read_only = value;

For each of those syntaxes, these semantics apply:

• Sets the access mode for all subsequent transactions performed within the session.

• Permitted within transactions, but does not affect the current ongoing transaction.

• If executed between transactions, overrides any preceding statement that sets the next-

transaction access mode.

• Corresponds to SET SESSION TRANSACTION {READ WRITE | READ ONLY} (with the

SESSION keyword).

• To set the next-transaction access mode, use this syntax:

SET @@transaction_read_only = value;

For that syntax, these semantics apply:

• Sets the access mode only for the next single transaction performed within the session.

• Subsequent transactions revert to the session access mode.

• Not permitted within transactions.

• Corresponds to SET TRANSACTION {READ WRITE | READ ONLY} (without the SESSION

keyword).

For more information about SET TRANSACTION and its relationship to the
transaction_read_only system variable, see Section 15.3.7, “SET TRANSACTION Statement”.

• unique_checks

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

unique_checks

Global, Session

Yes

Yes

Boolean

ON

If set to 1 (the default), uniqueness checks for secondary indexes in InnoDB tables are performed. If
set to 0, storage engines are permitted to assume that duplicate keys are not present in input data.
If you know for certain that your data does not contain uniqueness violations, you can set this to 0 to
speed up large table imports to InnoDB.

Setting this variable to 0 does not require storage engines to ignore duplicate keys. An engine is still
permitted to check for them and issue duplicate-key errors if it detects them.

1029

Server System Variables

• updatable_views_with_limit

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--updatable-views-with-limit[={OFF|
ON}]

updatable_views_with_limit

Global, Session

Yes

Yes

Boolean

1

This variable controls whether updates to a view can be made when the view does not contain
all columns of the primary key defined in the underlying table, if the update statement contains a
LIMIT clause. (Such updates often are generated by GUI tools.) An update is an UPDATE or DELETE
statement. Primary key here means a PRIMARY KEY, or a UNIQUE index in which no column can
contain NULL.

The variable can have two values:

• 1 or YES: Issue a warning only (not an error message). This is the default value.

• 0 or NO: Prohibit the update.

• use_secondary_engine

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Valid Values

8.0.13

use_secondary_engine

Session

Yes

Yes

Enumeration

ON

OFF

ON

FORCED

For future use.

Whether to execute queries using a secondary engine.

For use with HeatWave. See HeatWave User Guide.

• validate_password.xxx

The validate_password component implements a set of system variables having names of the
form validate_password.xxx. These variables affect password testing by that component; see
Section 8.4.3.2, “Password Validation Options and Variables”.

• version

The version number for the server. The value might also include a suffix indicating server build
or configuration information. -debug indicates that the server was built with debugging support
enabled.

1030

Server System Variables

• version_comment

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

version_comment

Global

No

No

String

The CMake configuration program has a COMPILATION_COMMENT_SERVER option that permits a
comment to be specified when building MySQL. This variable contains the value of that comment.
(Prior to MySQL 8.0.14, version_comment is set by the COMPILATION_COMMENT option.) See
Section 2.8.7, “MySQL Source-Configuration Options”.

• version_compile_machine

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

The type of the server binary.

• version_compile_os

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

version_compile_machine

Global

No

No

String

version_compile_os

Global

No

No

String

The type of operating system on which MySQL was built.

• version_compile_zlib

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

The version of the compiled-in zlib library.

• wait_timeout

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

version_compile_zlib

Global

No

No

String

--wait-timeout=#

wait_timeout

Global, Session

Yes

No

Integer

1031

Server System Variables

Default Value

Minimum Value

Maximum Value (Windows)

Maximum Value (Other)

Unit

28800

1

2147483

31536000

seconds

The number of seconds the server waits for activity on a noninteractive connection before closing it.

On thread startup, the session wait_timeout value is initialized from the global wait_timeout
value or from the global interactive_timeout value, depending on the type of client (as
defined by the CLIENT_INTERACTIVE connect option to mysql_real_connect()). See also
interactive_timeout.

• warning_count

The number of errors, warnings, and notes that resulted from the last statement that generated
messages. This variable is read only. See Section 15.7.7.42, “SHOW WARNINGS Statement”.

• windowing_use_high_precision

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--windowing-use-high-
precision[={OFF|ON}]

windowing_use_high_precision

Global, Session

Yes

Yes

Boolean

ON

Whether to compute window operations without loss of precision. See Section 10.2.1.21, “Window
Function Optimization”.

• xa_detach_on_prepare

Command-Line Format

--xa-detach-on-prepare[={OFF|ON}]

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

8.0.29

xa_detach_on_prepare

Global, Session

Yes

No

Boolean

ON

When set to ON (enabled), all XA transactions are detached (disconnected) from the connection
(session) as part of XA PREPARE. This means that the XA transaction can be committed or
rolled back by another connection, even if the originating connection has not terminated, and this
connection can start new transactions.

Temporary tables cannot be used inside detached XA transactions.

When this is OFF (disabled), an XA transaction is strictly associated with the same connection until
the session disconnects. It is recommended that you allow it to be enabled (the default behavior) for
replication.

1032

Using System Variables

For more information, see Section 15.3.8.2, “XA Transaction States”.

7.1.9 Using System Variables

The MySQL server maintains many system variables that configure its operation. Section 7.1.8, “Server
System Variables”, describes the meaning of these variables. Each system variable has a default
value. System variables can be set at server startup using options on the command line or in an
option file. Most of them can be changed dynamically while the server is running by means of the SET
statement, which enables you to modify operation of the server without having to stop and restart it.
You can also use system variable values in expressions.

Many system variables are built in. System variables may also be installed by server plugins or
components:

• System variables implemented by a server plugin are exposed when the plugin is installed and have
names that begin with the plugin name. For example, the audit_log plugin implements a system
variable named audit_log_policy.

• System variables implemented by a component are exposed when the component is installed and

have names that begin with a component-specific prefix. For example, the log_filter_dragnet
error log filter component implements a system variable named log_error_filter_rules, the
full name of which is dragnet.log_error_filter_rules. To refer to this variable, use the full
name.

There are two scopes in which system variables exist. Global variables affect the overall operation
of the server. Session variables affect its operation for individual client connections. A given system
variable can have both a global and a session value. Global and session system variables are related
as follows:

• When the server starts, it initializes each global variable to its default value. These defaults can
be changed by options specified on the command line or in an option file. (See Section 6.2.2,
“Specifying Program Options”.)

• The server also maintains a set of session variables for each client that connects. The client's

session variables are initialized at connect time using the current values of the corresponding global
variables. For example, a client's SQL mode is controlled by the session sql_mode value, which is
initialized when the client connects to the value of the global sql_mode value.

For some system variables, the session value is not initialized from the corresponding global value; if
so, that is indicated in the variable description.

System variable values can be set globally at server startup by using options on the command line
or in an option file. At startup, the syntax for system variables is the same as for command options,
so within variable names, dashes and underscores may be used interchangeably. For example, --
general_log=ON and --general-log=ON are equivalent.

When you use a startup option to set a variable that takes a numeric value, the value can be given with
a suffix of K, M, or G (either uppercase or lowercase) to indicate a multiplier of 1024, 10242 or 10243;
that is, units of kilobytes, megabytes, or gigabytes, respectively. As of MySQL 8.0.14, a suffix can also
be T, P, and E to indicate a multiplier of 10244, 10245 or 10246. Thus, the following command starts the
server with a sort buffer size of 256 kilobytes and a maximum packet size of one gigabyte:

mysqld --sort-buffer-size=256K --max-allowed-packet=1G

Within an option file, those variables are set like this:

[mysqld]
sort_buffer_size=256K
max_allowed_packet=1G

The lettercase of suffix letters does not matter; 256K and 256k are equivalent, as are 1G and 1g.

1033

Using System Variables

To restrict the maximum value to which a system variable can be set at runtime with the SET
statement, specify this maximum by using an option of the form --maximum-var_name=value at
server startup. For example, to prevent the value of sort_buffer_size from being increased to
more than 32MB at runtime, use the option --maximum-sort-buffer-size=32M.

Many system variables are dynamic and can be changed at runtime by using the SET statement. For a
list, see Section 7.1.9.2, “Dynamic System Variables”. To change a system variable with SET, refer to
it by name, optionally preceded by a modifier. At runtime, system variable names must be written using
underscores, not dashes. The following examples briefly illustrate this syntax:

• Set a global system variable:

SET GLOBAL max_connections = 1000;
SET @@GLOBAL.max_connections = 1000;

• Persist a global system variable to the mysqld-auto.cnf file (and set the runtime value):

SET PERSIST max_connections = 1000;
SET @@PERSIST.max_connections = 1000;

• Persist a global system variable to the mysqld-auto.cnf file (without setting the runtime value):

SET PERSIST_ONLY back_log = 1000;
SET @@PERSIST_ONLY.back_log = 1000;

• Set a session system variable:

SET SESSION sql_mode = 'TRADITIONAL';
SET @@SESSION.sql_mode = 'TRADITIONAL';
SET @@sql_mode = 'TRADITIONAL';

For complete details about SET syntax, see Section 15.7.6.1, “SET Syntax for Variable Assignment”.
For a description of the privilege requirements for setting and persisting system variables, see
Section 7.1.9.1, “System Variable Privileges”

Suffixes for specifying a value multiplier can be used when setting a variable at server startup, but not
to set the value with SET at runtime. On the other hand, with SET you can assign a variable's value
using an expression, which is not true when you set a variable at server startup. For example, the first
of the following lines is legal at server startup, but the second is not:

$> mysql --max_allowed_packet=16M
$> mysql --max_allowed_packet=16*1024*1024

Conversely, the second of the following lines is legal at runtime, but the first is not:

mysql> SET GLOBAL max_allowed_packet=16M;
mysql> SET GLOBAL max_allowed_packet=16*1024*1024;

To display system variable names and values, use the SHOW VARIABLES statement:

mysql> SHOW VARIABLES;
+---------------------------------+-----------------------------------+
| Variable_name                   | Value                             |
+---------------------------------+-----------------------------------+
| auto_increment_increment        | 1                                 |
| auto_increment_offset           | 1                                 |
| automatic_sp_privileges         | ON                                |
| back_log                        | 151                               |
| basedir                         | /home/mysql/                      |
| binlog_cache_size               | 32768                             |
| bulk_insert_buffer_size         | 8388608                           |
| character_set_client            | utf8mb4                           |
| character_set_connection        | utf8mb4                           |
| character_set_database          | utf8mb4                           |
| character_set_filesystem        | binary                            |
| character_set_results           | utf8mb4                           |
| character_set_server            | utf8mb4                           |
| character_set_system            | utf8mb3                           |

1034

Using System Variables

| character_sets_dir              | /home/mysql/share/charsets/       |
| check_proxy_users               | OFF                               |
| collation_connection            | utf8mb4_0900_ai_ci                |
| collation_database              | utf8mb4_0900_ai_ci                |
| collation_server                | utf8mb4_0900_ai_ci                |
...
| innodb_autoextend_increment     | 8                                 |
| innodb_buffer_pool_size         | 8388608                           |
| innodb_commit_concurrency       | 0                                 |
| innodb_concurrency_tickets      | 500                               |
| innodb_data_file_path           | ibdata1:10M:autoextend            |
| innodb_data_home_dir            |                                   |
...
| version                         | 8.0.31                            |
| version_comment                 | Source distribution               |
| version_compile_machine         | x86_64                            |
| version_compile_os              | Linux                             |
| version_compile_zlib            | 1.2.12                            |
| wait_timeout                    | 28800                             |
+---------------------------------+-----------------------------------+

With a LIKE clause, the statement displays only those variables that match the pattern. To obtain a
specific variable name, use a LIKE clause as shown:

SHOW VARIABLES LIKE 'max_join_size';
SHOW SESSION VARIABLES LIKE 'max_join_size';

To get a list of variables whose name match a pattern, use the % wildcard character in a LIKE clause:

SHOW VARIABLES LIKE '%size%';
SHOW GLOBAL VARIABLES LIKE '%size%';

Wildcard characters can be used in any position within the pattern to be matched. Strictly speaking,
because _ is a wildcard that matches any single character, you should escape it as \_ to match it
literally. In practice, this is rarely necessary.

For SHOW VARIABLES, if you specify neither GLOBAL nor SESSION, MySQL returns SESSION values.

The reason for requiring the GLOBAL keyword when setting GLOBAL-only variables but not when
retrieving them is to prevent problems in the future:

• Were a SESSION variable to be removed that has the same name as a GLOBAL variable, a client
with privileges sufficient to modify global variables might accidentally change the GLOBAL variable
rather than just the SESSION variable for its own session.

• Were a SESSION variable to be added with the same name as a GLOBAL variable, a client that
intends to change the GLOBAL variable might find only its own SESSION variable changed.

7.1.9.1 System Variable Privileges

A system variable can have a global value that affects server operation as a whole, a session value
that affects only the current session, or both:

• For dynamic system variables, the SET statement can be used to change their global or session
runtime value (or both), to affect operation of the current server instance. (For information about
dynamic variables, see Section 7.1.9.2, “Dynamic System Variables”.)

• For certain global system variables, SET can be used to persist their value to the mysqld-
auto.cnf file in the data directory, to affect server operation for subsequent startups. (For
information about persisting system variables and the mysqld-auto.cnf file, see Section 7.1.9.3,
“Persisted System Variables”.)

• For persisted global system variables, RESET PERSIST can be used to remove their value from

mysqld-auto.cnf, to affect server operation for subsequent startups.

This section describes the privileges required for operations that assign values to system variables at
runtime. This includes operations that affect runtime values, and operations that persist values.

1035

Using System Variables

To set a global system variable, use a SET statement with the appropriate keyword. These privileges
apply:

• To set a global system variable runtime value, use the SET GLOBAL statement, which requires the

SYSTEM_VARIABLES_ADMIN privilege (or the deprecated SUPER privilege).

• To persist a global system variable to the mysqld-auto.cnf file (and set the runtime value), use
the SET PERSIST statement, which requires the SYSTEM_VARIABLES_ADMIN or SUPER privilege.

• To persist a global system variable to the mysqld-auto.cnf file (without setting the runtime value),

use the SET PERSIST_ONLY statement, which requires the SYSTEM_VARIABLES_ADMIN and
PERSIST_RO_VARIABLES_ADMIN privileges. SET PERSIST_ONLY can be used for both dynamic
and read-only system variables, but is particularly useful for persisting read-only variables, for which
SET PERSIST cannot be used.

• Some global system variables are persist-restricted (see Section 7.1.9.4, “Nonpersistible and Persist-
Restricted System Variables”). To persist these variables, use the SET PERSIST_ONLY statement,
which requires the privileges described previously. In addition, you must connect to the server
using an encrypted connection and supply an SSL certificate with the Subject value specified by the
persist_only_admin_x509_subject system variable.

To remove a persisted global system variable from the mysqld-auto.cnf file, use the RESET
PERSIST statement. These privileges apply:

• For dynamic system variables, RESET PERSIST requires the SYSTEM_VARIABLES_ADMIN or

SUPER privilege.

• For read-only system variables, RESET PERSIST requires the SYSTEM_VARIABLES_ADMIN and

PERSIST_RO_VARIABLES_ADMIN privileges.

• For persist-restricted variables, RESET PERSIST does not require an encrypted connection to the

server made using a particular SSL certificate.

If a global system variable has any exceptions to the preceding privilege requirements, the variable
description indicates those exceptions. Examples include default_table_encryption and
mandatory_roles, which require additional privileges. These additional privileges apply to operations
that set the global runtime value, but not operations that persist the value.

To set a session system variable runtime value, use the SET SESSION statement. In contrast to
setting global runtime values, setting session runtime values normally requires no special privileges
and can be done by any user to affect the current session. For some system variables, setting the
session value may have effects outside the current session and thus is a restricted operation that can
be done only by users who have a special privilege:

• As of MySQL 8.0.14, the privilege required is SESSION_VARIABLES_ADMIN.

Note

Any user who has SYSTEM_VARIABLES_ADMIN or SUPER effectively has
SESSION_VARIABLES_ADMIN by implication and need not be granted
SESSION_VARIABLES_ADMIN explicitly.

• Prior to MySQL 8.0.14, the privilege required is SYSTEM_VARIABLES_ADMIN or SUPER.

If a session system variable is restricted, the variable description indicates that restriction. Examples
include binlog_format and sql_log_bin. Setting the session value of these variables affects
binary logging for the current session, but may also have wider implications for the integrity of server
replication and backups.

SESSION_VARIABLES_ADMIN enables administrators to minimize the privilege footprint of users who
may previously have been granted SYSTEM_VARIABLES_ADMIN or SUPER for the purpose of enabling
them to modify restricted session system variables. Suppose that an administrator has created the
following role to confer the ability to set restricted session system variables:

1036

Using System Variables

CREATE ROLE set_session_sysvars;
GRANT SYSTEM_VARIABLES_ADMIN ON *.* TO set_session_sysvars;

Any user granted the set_session_sysvars role (and who has that role active) is able to set
restricted session system variables. However, that user is also able to set global system variables,
which may be undesirable.

By modifying the role to have SESSION_VARIABLES_ADMIN instead of SYSTEM_VARIABLES_ADMIN,
the role privileges can be reduced to the ability to set restricted session system variables and nothing
else. To modify the role, use these statements:

GRANT SESSION_VARIABLES_ADMIN ON *.* TO set_session_sysvars;
REVOKE SYSTEM_VARIABLES_ADMIN ON *.* FROM set_session_sysvars;

Modifying the role has an immediate effect: Any account granted the set_session_sysvars role no
longer has SYSTEM_VARIABLES_ADMIN and is not able to set global system variables without being
granted that ability explicitly. A similar GRANT/REVOKE sequence can be applied to any account that
was granted SYSTEM_VARIABLES_ADMIN directly rather than by means of a role.

7.1.9.2 Dynamic System Variables

Many server system variables are dynamic and can be set at runtime. See Section 15.7.6.1, “SET
Syntax for Variable Assignment”. For a description of the privilege requirements for setting system
variables, see Section 7.1.9.1, “System Variable Privileges”

The following table lists all dynamic system variables applicable within mysqld.

The table lists each variable's data type and scope. The last column indicates whether the scope for
each variable is Global, Session, or both. Please see the corresponding item descriptions for details on
setting and using the variables. Where appropriate, direct links to further information about the items
are provided.

Variables that have a type of “string” take a string value. Variables that have a type of “numeric” take a
numeric value. Variables that have a type of “boolean” can be set to 0, 1, ON or OFF. Variables that are
marked as “enumeration” normally should be set to one of the available values for the variable, but can
also be set to the number that corresponds to the desired enumeration value. For enumerated system
variables, the first enumeration value corresponds to 0. This differs from the ENUM data type used for
table columns, for which the first enumeration value corresponds to 1.

Table 7.5 Dynamic System Variable Summary

Variable Name

Variable Type

Variable Scope

activate_all_roles_on_login

Boolean

admin_ssl_ca

admin_ssl_capath

admin_ssl_cert

admin_ssl_cipher

admin_ssl_crl

admin_ssl_crlpath

admin_ssl_key

File name

Directory name

File name

String

File name

Directory name

File name

admin_tls_ciphersuites

admin_tls_version

String

String

audit_log_connection_policy

Enumeration

audit_log_disable

Boolean

audit_log_exclude_accounts

String

audit_log_flush

Boolean

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

1037

Using System Variables

Variable Name

Variable Type

Variable Scope

audit_log_format_unix_timestamp Boolean

audit_log_include_accounts

audit_log_max_size

String

Integer

audit_log_password_history_keep_days

Integer

audit_log_prune_seconds

audit_log_read_buffer_size

audit_log_rotate_on_size

Integer

Integer

Integer

audit_log_statement_policy

Enumeration

authentication_fido_rp_id

String

authentication_kerberos_service_principal

String

authentication_ldap_sasl_auth_method_name

String

String
authentication_ldap_sasl_bind_base_dn

authentication_ldap_sasl_bind_root_dnString

String
authentication_ldap_sasl_bind_root_pwd

authentication_ldap_sasl_ca_path String

authentication_ldap_sasl_group_search_attr

String

authentication_ldap_sasl_group_search_filter

String

authentication_ldap_sasl_init_pool_size

Integer

authentication_ldap_sasl_log_statusInteger

Integer
authentication_ldap_sasl_max_pool_size

authentication_ldap_sasl_referral Boolean

authentication_ldap_sasl_server_hostString

authentication_ldap_sasl_server_port

Integer

authentication_ldap_sasl_tls

Boolean

authentication_ldap_sasl_user_search_attr

String

authentication_ldap_simple_auth_method_name

String

authentication_ldap_simple_bind_base_dn

String

authentication_ldap_simple_bind_root_dn

String

authentication_ldap_simple_bind_root_pwd

String

authentication_ldap_simple_ca_pathString

authentication_ldap_simple_group_search_attr

String

authentication_ldap_simple_group_search_filter

String

Integer
authentication_ldap_simple_init_pool_size

authentication_ldap_simple_log_status

Integer

authentication_ldap_simple_max_pool_size

Integer

authentication_ldap_simple_referralBoolean

String
authentication_ldap_simple_server_host

authentication_ldap_simple_server_port

Integer

authentication_ldap_simple_tls

Boolean

authentication_ldap_simple_user_search_attr

String

authentication_policy

String

1038

Global

Global

Global

Global

Global

Varies

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Using System Variables

Variable Name

Variable Type

Variable Scope

auto_increment_increment

auto_increment_offset

autocommit

automatic_sp_privileges

avoid_temporal_upgrade

big_tables

binlog_cache_size

binlog_checksum

Integer

Integer

Boolean

Boolean

Boolean

Boolean

Integer

String

binlog_direct_non_transactional_updates

Boolean

binlog_encryption

binlog_error_action

Boolean

Enumeration

binlog_expire_logs_auto_purge Boolean

binlog_expire_logs_seconds

Integer

binlog_format

Enumeration

binlog_group_commit_sync_delay Integer

binlog_group_commit_sync_no_delay_count

Integer

binlog_max_flush_queue_time

Integer

binlog_order_commits

Boolean

binlog_row_image

binlog_row_metadata

Enumeration

Enumeration

binlog_row_value_options

Set

binlog_rows_query_log_events

Boolean

binlog_stmt_cache_size

Integer

binlog_transaction_compression Boolean

binlog_transaction_compression_level_zstd

Integer

binlog_transaction_dependency_history_size

Integer

binlog_transaction_dependency_tracking

Enumeration

block_encryption_mode

bulk_insert_buffer_size

character_set_client

character_set_connection

character_set_database

character_set_filesystem

character_set_results

character_set_server

check_proxy_users

clone_autotune_concurrency

clone_block_ddl

clone_buffer_size

clone_ddl_timeout

clone_delay_after_data_drop

String

Integer

String

String

String

String

String

String

Boolean

Boolean

Boolean

Integer

Integer

Integer

Both

Both

Both

Global

Global

Both

Global

Global

Both

Global

Global

Global

Global

Both

Global

Global

Global

Global

Both

Global

Both

Both

Global

Both

Both

Global

Global

Both

Both

Both

Both

Both

Both

Both

Both

Global

Global

Global

Global

Global

Global

1039

Using System Variables

Variable Name

Variable Type

Variable Scope

clone_donor_timeout_after_network_failure

Integer

clone_enable_compression

Boolean

clone_max_concurrency

clone_max_data_bandwidth

Integer

Integer

clone_max_network_bandwidth

Integer

clone_ssl_ca

clone_ssl_cert

clone_ssl_key

clone_valid_donor_list

collation_connection

collation_database

collation_server

completion_type

File name

File name

File name

String

String

String

String

Enumeration

component_scheduler.enabled

Boolean

concurrent_insert

connect_timeout

Enumeration

Integer

connection_control_failed_connections_threshold

Integer

connection_control_max_connection_delay

Integer

connection_control_min_connection_delay

Integer

connection_memory_chunk_size Integer

connection_memory_limit

cte_max_recursion_depth

debug

debug_sync

Integer

Integer

String

String

default_collation_for_utf8mb4

Enumeration

default_password_lifetime

Integer

default_storage_engine

Enumeration

default_table_encryption

Boolean

default_tmp_storage_engine

Enumeration

default_week_format

Integer

delay_key_write

delayed_insert_limit

delayed_insert_timeout

delayed_queue_size

div_precision_increment

Enumeration

Integer

Integer

Integer

Integer

dragnet.log_error_filter_rules

String

end_markers_in_json

Boolean

enforce_gtid_consistency

Enumeration

enterprise_encryption.maximum_rsa_key_size

Integer

enterprise_encryption.rsa_support_legacy_padding

Boolean

eq_range_index_dive_limit

Integer

1040

Global

Global

Global

Global

Global

Global

Global

Global

Global

Both

Both

Both

Both

Global

Global

Global

Global

Global

Global

Both

Both

Both

Both

Session

Both

Global

Both

Both

Both

Both

Global

Global

Global

Global

Both

Global

Both

Global

Global

Global

Both

Using System Variables

Variable Name

event_scheduler

expire_logs_days

explain_format

Variable Type

Enumeration

Integer

Enumeration

explicit_defaults_for_timestamp Boolean

flush

flush_time

foreign_key_checks

ft_boolean_syntax

general_log

general_log_file

Boolean

Integer

Boolean

String

Boolean

File name

generated_random_password_lengthInteger

global_connection_memory_limit

Integer

global_connection_memory_trackingBoolean

group_concat_max_len

Integer

group_replication_advertise_recovery_endpoints

String

group_replication_allow_local_lower_version_join

Boolean

group_replication_auto_increment_increment

Integer

group_replication_autorejoin_tries Integer

group_replication_bootstrap_groupBoolean

group_replication_clone_thresholdInteger

group_replication_communication_debug_options

String

group_replication_communication_max_message_size

Integer

String
group_replication_communication_stack

group_replication_components_stop_timeout

Integer

Integer
group_replication_compression_threshold

group_replication_consistency

Enumeration

group_replication_enforce_update_everywhere_checks

Boolean

group_replication_exit_state_actionEnumeration

group_replication_flow_control_applier_threshold

Integer

group_replication_flow_control_certifier_threshold

Integer

group_replication_flow_control_hold_percent

Integer

group_replication_flow_control_max_quota

Integer

group_replication_flow_control_member_quota_percent

Integer

Integer
group_replication_flow_control_min_quota

group_replication_flow_control_min_recovery_quota

Integer

group_replication_flow_control_modeEnumeration

group_replication_flow_control_periodInteger

group_replication_flow_control_release_percent

Integer

group_replication_force_membersString

group_replication_group_name

String

group_replication_group_seeds String

Variable Scope

Global

Global

Both

Both

Global

Global

Both

Global

Global

Global

Both

Global

Both

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

1041

Using System Variables

Variable Name

Variable Type

Variable Scope

group_replication_gtid_assignment_block_size

Integer

group_replication_ip_allowlist

group_replication_ip_whitelist

String

String

group_replication_local_address String

Integer
group_replication_member_expel_timeout

group_replication_member_weightInteger

group_replication_message_cache_size

Integer

group_replication_paxos_single_leaderBoolean

group_replication_poll_spin_loops Integer

group_replication_recovery_complete_at

Enumeration

group_replication_recovery_compression_algorithms

Set

Boolean
group_replication_recovery_get_public_key

File name
group_replication_recovery_public_key_path

group_replication_recovery_reconnect_interval

Integer

group_replication_recovery_retry_count

Integer

group_replication_recovery_ssl_caString

group_replication_recovery_ssl_capathString

group_replication_recovery_ssl_certString

group_replication_recovery_ssl_cipherString

group_replication_recovery_ssl_crlFile name

group_replication_recovery_ssl_crlpathDirectory name

group_replication_recovery_ssl_keyString

group_replication_recovery_ssl_verify_server_cert

Boolean

group_replication_recovery_tls_ciphersuites

String

group_replication_recovery_tls_versionString

group_replication_recovery_use_sslBoolean

group_replication_recovery_zstd_compression_level

Integer

group_replication_single_primary_modeBoolean

group_replication_ssl_mode

Enumeration

group_replication_start_on_boot Boolean

group_replication_tls_source

Enumeration

group_replication_transaction_size_limit

Integer

group_replication_unreachable_majority_timeout

Integer

group_replication_view_change_uuidString

gtid_executed_compression_periodInteger

gtid_mode

gtid_next

gtid_purged

Enumeration

Enumeration

String

histogram_generation_max_mem_size

Integer

host_cache_size

identity

Integer

Integer

1042

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Session

Global

Both

Global

Session

Using System Variables

Variable Name

Variable Type

immediate_server_version

Integer

information_schema_stats_expiry Integer

init_connect

init_replica

init_slave

String

String

String

innodb_adaptive_flushing

Boolean

innodb_adaptive_flushing_lwm Integer

innodb_adaptive_hash_index

Boolean

innodb_adaptive_max_sleep_delayInteger

innodb_api_bk_commit_interval

Integer

innodb_api_trx_level

Integer

innodb_autoextend_increment

Integer

innodb_background_drop_list_emptyBoolean

innodb_buffer_pool_dump_at_shutdown

Boolean

innodb_buffer_pool_dump_now Boolean

innodb_buffer_pool_dump_pct

Integer

innodb_buffer_pool_filename

File name

innodb_buffer_pool_in_core_file Boolean

innodb_buffer_pool_load_abort

Boolean

innodb_buffer_pool_load_now

Boolean

innodb_buffer_pool_size

Integer

innodb_change_buffer_max_size Integer

innodb_change_buffering

Enumeration

innodb_change_buffering_debug Integer

innodb_checkpoint_disabled

Boolean

innodb_checksum_algorithm

Enumeration

innodb_cmp_per_index_enabled Boolean

innodb_commit_concurrency

Integer

innodb_compress_debug

Enumeration

innodb_compression_failure_threshold_pct

Integer

innodb_compression_level

Integer

innodb_compression_pad_pct_maxInteger

innodb_concurrency_tickets

innodb_ddl_buffer_size

Integer

Integer

innodb_ddl_log_crash_reset_debugBoolean

innodb_ddl_threads

innodb_deadlock_detect

Integer

Boolean

innodb_default_row_format

Enumeration

innodb_disable_sort_file_cache Boolean

innodb_doublewrite

Enumeration

innodb_extend_and_initialize

Boolean

Variable Scope

Session

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Session

Global

Session

Global

Global

Global

Global

Global

1043

Using System Variables

Variable Name

Variable Type

Variable Scope

innodb_fast_shutdown

Integer

innodb_fil_make_page_dirty_debugInteger

innodb_file_per_table

innodb_fill_factor

innodb_flush_log_at_timeout

Boolean

Integer

Integer

innodb_flush_log_at_trx_commit Enumeration

innodb_flush_neighbors

Enumeration

innodb_flush_sync

innodb_flushing_avg_loops

innodb_fsync_threshold

innodb_ft_aux_table

innodb_ft_enable_diag_print

innodb_ft_enable_stopword

Boolean

Integer

Integer

String

Boolean

Boolean

innodb_ft_num_word_optimize

Integer

innodb_ft_result_cache_limit

Integer

innodb_ft_server_stopword_table String

innodb_ft_user_stopword_table String

innodb_idle_flush_pct

innodb_io_capacity

innodb_io_capacity_max

Integer

Integer

Integer

innodb_limit_optimistic_insert_debugInteger

innodb_lock_wait_timeout

innodb_log_buffer_size

Integer

Integer

innodb_log_checkpoint_fuzzy_nowBoolean

innodb_log_checkpoint_now

innodb_log_checksums

Boolean

Boolean

innodb_log_compressed_pages Boolean

innodb_log_spin_cpu_abs_lwm Integer

innodb_log_spin_cpu_pct_hwm Integer

innodb_log_wait_for_flush_spin_hwmInteger

innodb_log_write_ahead_size

Integer

innodb_log_writer_threads

innodb_lru_scan_depth

Boolean

Integer

innodb_max_dirty_pages_pct

Numeric

innodb_max_dirty_pages_pct_lwmNumeric

innodb_max_purge_lag

Integer

innodb_max_purge_lag_delay

Integer

innodb_max_undo_log_size

Integer

innodb_merge_threshold_set_all_debug

Integer

innodb_monitor_disable

innodb_monitor_enable

String

String

1044

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Both

Global

Global

Global

Both

Global

Global

Global

Global

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Using System Variables

Variable Name

innodb_monitor_reset

innodb_monitor_reset_all

innodb_old_blocks_pct

innodb_old_blocks_time

Variable Type

Enumeration

Enumeration

Integer

Integer

innodb_online_alter_log_max_sizeInteger

innodb_open_files

Integer

innodb_optimize_fulltext_only

Boolean

innodb_parallel_read_threads

Integer

innodb_print_all_deadlocks

innodb_print_ddl_logs

innodb_purge_batch_size

Boolean

Boolean

Integer

innodb_purge_rseg_truncate_frequency

Integer

innodb_random_read_ahead

Boolean

innodb_read_ahead_threshold

Integer

innodb_redo_log_archive_dirs

String

innodb_redo_log_capacity

innodb_redo_log_encrypt

innodb_replication_delay

innodb_rollback_segments

Integer

Boolean

Integer

Integer

innodb_saved_page_number_debugInteger

innodb_segment_reserve_factor Numeric

innodb_spin_wait_delay

Integer

innodb_spin_wait_pause_multiplierInteger

innodb_stats_auto_recalc

Boolean

innodb_stats_include_delete_markedBoolean

innodb_stats_method

Enumeration

innodb_stats_on_metadata

innodb_stats_persistent

Boolean

Boolean

innodb_stats_persistent_sample_pages

Integer

innodb_stats_transient_sample_pages

Integer

innodb_status_output

innodb_status_output_locks

innodb_strict_mode

innodb_sync_spin_loops

innodb_table_locks

innodb_thread_concurrency

innodb_thread_sleep_delay

Boolean

Boolean

Boolean

Integer

Boolean

Integer

Integer

innodb_tmpdir

Directory name

innodb_trx_purge_view_update_only_debug

Boolean

innodb_trx_rseg_n_slots_debug Integer

innodb_undo_log_encrypt

Boolean

Variable Scope

Global

Global

Global

Global

Global

Global

Global

Session

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Both

Global

Both

Global

Global

Both

Global

Global

Global

1045

Using System Variables

Variable Name

Variable Type

Variable Scope

innodb_undo_log_truncate

innodb_undo_tablespaces

innodb_use_fdatasync

insert_id

interactive_timeout

Boolean

Integer

Boolean

Integer

Integer

internal_tmp_disk_storage_engineEnumeration

internal_tmp_mem_storage_engineEnumeration

join_buffer_size

keep_files_on_create

key_buffer_size

key_cache_age_threshold

key_cache_block_size

key_cache_division_limit

keyring_aws_cmk_id

Integer

Boolean

Integer

Integer

Integer

Integer

String

keyring_aws_region

Enumeration

keyring_encrypted_file_data

File name

keyring_encrypted_file_password String

keyring_file_data

File name

keyring_hashicorp_auth_path

String

keyring_hashicorp_ca_path

File name

keyring_hashicorp_caching

Boolean

keyring_hashicorp_role_id

keyring_hashicorp_secret_id

keyring_hashicorp_server_url

keyring_hashicorp_store_path

String

String

String

String

keyring_okv_conf_dir

Directory name

keyring_operations

last_insert_id

lc_messages

lc_time_names

local_infile

lock_wait_timeout

Boolean

Integer

String

String

Boolean

Integer

log_bin_trust_function_creators Boolean

log_bin_use_v1_row_events

Boolean

log_error_services

log_error_suppression_list

log_error_verbosity

log_output

String

String

Integer

Set

log_queries_not_using_indexes Boolean

log_raw

log_slow_admin_statements

Boolean

Boolean

1046

Global

Global

Global

Session

Both

Global

Both

Both

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Session

Both

Both

Global

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Using System Variables

Variable Type

Variable Scope

Variable Name

log_slow_extra

log_slow_replica_statements

log_slow_slave_statements

Boolean

Boolean

Boolean

log_statements_unsafe_for_binlogBoolean

log_syslog

log_syslog_facility

log_syslog_include_pid

log_syslog_tag

Boolean

String

Boolean

String

log_throttle_queries_not_using_indexes

Integer

log_timestamps

long_query_time

low_priority_updates

mandatory_roles

master_info_repository

Enumeration

Numeric

Boolean

String

String

master_verify_checksum

Boolean

max_allowed_packet

max_binlog_cache_size

max_binlog_size

max_binlog_stmt_cache_size

max_connect_errors

max_connections

max_delayed_threads

max_error_count

max_execution_time

max_heap_table_size

max_insert_delayed_threads

max_join_size

max_length_for_sort_data

max_points_in_geometry

max_prepared_stmt_count

max_relay_log_size

max_seeks_for_key

max_sort_length

max_sp_recursion_depth

max_user_connections

max_write_lock_count

min_examined_row_limit

myisam_data_pointer_size

myisam_max_sort_file_size

myisam_repair_threads

myisam_sort_buffer_size

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Integer

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Both

Both

Global

Global

Global

Both

Global

Global

Global

Global

Global

Both

Both

Both

Both

Both

Both

Both

Both

Global

Global

Both

Both

Both

Both

Global

Both

Global

Global

Both

Both

1047

Using System Variables

Variable Name

myisam_stats_method

myisam_use_mmap

mysql_firewall_mode

mysql_firewall_trace

Variable Type

Enumeration

Boolean

Boolean

Boolean

mysql_native_password_proxy_usersBoolean

mysqlx_compression_algorithms Set

mysqlx_connect_timeout

Integer

mysqlx_deflate_default_compression_level

Integer

mysqlx_deflate_max_client_compression_level

Integer

mysqlx_document_id_unique_prefixInteger

mysqlx_enable_hello_notice

Boolean

mysqlx_idle_worker_thread_timeoutInteger

mysqlx_interactive_timeout

Integer

mysqlx_lz4_default_compression_level

Integer

mysqlx_lz4_max_client_compression_level

Integer

mysqlx_max_allowed_packet

mysqlx_max_connections

mysqlx_min_worker_threads

mysqlx_read_timeout

mysqlx_wait_timeout

mysqlx_write_timeout

Integer

Integer

Integer

Integer

Integer

Integer

Integer
mysqlx_zstd_default_compression_level

mysqlx_zstd_max_client_compression_level

Integer

ndb_allow_copying_alter_table

Boolean

ndb_autoincrement_prefetch_sz Integer

ndb_batch_size

ndb_blob_read_batch_bytes

ndb_blob_write_batch_bytes

Integer

Integer

Integer

ndb_clear_apply_status

Boolean

ndb_conflict_role

Enumeration

ndb_data_node_neighbour

ndb_dbg_check_shares

Integer

Integer

ndb_default_column_format

Enumeration

ndb_default_column_format

Enumeration

ndb_deferred_constraints

ndb_deferred_constraints

Integer

Integer

ndb_distribution

ndb_distribution

Enumeration

Enumeration

ndb_eventbuffer_free_percent

Integer

ndb_eventbuffer_max_alloc

ndb_extra_logging

Integer

Integer

Variable Scope

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Session

Session

Session

Global

Global

Both

Both

Both

Both

Both

Global

Global

Global

Both

Global

Global

Both

Both

Global

Global

Global

Global

Global

1048

Using System Variables

Variable Type

Variable Scope

Variable Name

ndb_force_send

ndb_fully_replicated

ndb_index_stat_enable

ndb_index_stat_option

ndb_join_pushdown

ndb_log_binlog_index

ndb_log_cache_size

ndb_log_empty_epochs

ndb_log_empty_epochs

ndb_log_empty_update

ndb_log_empty_update

ndb_log_exclusive_reads

ndb_log_exclusive_reads

Boolean

Boolean

Boolean

String

Boolean

Boolean

Integer

Boolean

Boolean

Boolean

Boolean

Boolean

Boolean

ndb_log_transaction_compressionBoolean

ndb_log_transaction_compression_level_zstd

Integer

ndb_log_update_as_write

ndb_log_update_minimal

ndb_log_updated_only

ndb_metadata_check

Boolean

Boolean

Boolean

Boolean

ndb_metadata_check_interval

Integer

ndb_metadata_sync

ndb_optimization_delay

Boolean

Integer

ndb_optimized_node_selection

Integer

ndb_read_backup

Boolean

ndb_recv_thread_activation_thresholdInteger

ndb_recv_thread_cpu_mask

ndb_replica_batch_size

Bitmap

Integer

ndb_replica_blob_write_batch_bytesInteger

ndb_report_thresh_binlog_epoch_slipInteger

ndb_report_thresh_binlog_mem_usage

Integer

ndb_row_checksum

Integer

ndb_schema_dist_lock_wait_timeoutInteger

ndb_show_foreign_key_mock_tablesBoolean

ndb_slave_conflict_role

Enumeration

ndb_table_no_logging

ndb_table_temporary

ndb_use_exact_count

ndb_use_transactions

ndbinfo_max_bytes

ndbinfo_max_rows

ndbinfo_offline

Boolean

Boolean

Boolean

Boolean

Integer

Integer

Boolean

Both

Both

Both

Both

Both

Global

Global

Global

Global

Global

Global

Both

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Both

Global

Global

Global

Session

Session

Both

Both

Both

Both

Global

1049

Using System Variables

Variable Name

Variable Type

Variable Scope

ndbinfo_show_hidden

Boolean

net_buffer_length

net_read_timeout

net_retry_count

net_write_timeout

new

offline_mode

old_alter_table

optimizer_prune_level

optimizer_search_depth

optimizer_switch

optimizer_trace

optimizer_trace_features

optimizer_trace_limit

Integer

Integer

Integer

Integer

Boolean

Boolean

Boolean

Integer

Integer

Set

String

String

Integer

optimizer_trace_max_mem_size Integer

optimizer_trace_offset

original_commit_timestamp

original_server_version

parser_max_mem_size

partial_revokes

password_history

password_require_current

password_reuse_interval

Integer

Numeric

Integer

Integer

Boolean

Integer

Boolean

Integer

performance_schema_max_digest_sample_age

Integer

performance_schema_show_processlist

Boolean

preload_buffer_size

print_identified_with_as_hex

profiling

profiling_history_size

Integer

Boolean

Boolean

Integer

protocol_compression_algorithms Set

pseudo_replica_mode

pseudo_slave_mode

pseudo_thread_id

query_alloc_block_size

query_prealloc_size

rand_seed1

rand_seed2

range_alloc_block_size

Boolean

Boolean

Integer

Integer

Integer

Integer

Integer

Integer

range_optimizer_max_mem_size Integer

rbr_exec_mode

read_buffer_size

Enumeration

Integer

1050

Both

Both

Both

Both

Both

Both

Global

Both

Both

Both

Both

Both

Both

Both

Both

Both

Session

Session

Both

Global

Global

Global

Global

Global

Global

Both

Both

Both

Both

Global

Session

Session

Session

Both

Both

Session

Session

Both

Both

Session

Both

Using System Variables

Variable Type

Variable Scope

Variable Name

read_only

read_rnd_buffer_size

regexp_stack_limit

regexp_time_limit

relay_log_info_repository

relay_log_purge

replica_allow_batching

replica_checkpoint_group

replica_checkpoint_period

Boolean

Integer

Integer

Integer

String

Boolean

Boolean

Integer

Integer

replica_compressed_protocol

Boolean

replica_exec_mode

Enumeration

replica_max_allowed_packet

replica_net_timeout

Integer

Integer

replica_parallel_type

Enumeration

replica_parallel_workers

Integer

replica_pending_jobs_size_max

Integer

replica_preserve_commit_order Boolean

replica_sql_verify_checksum

Boolean

replica_transaction_retries

Integer

replica_type_conversions

Set

replication_optimize_for_static_plugin_config

Boolean

Boolean
replication_sender_observe_commit_only

require_row_format

require_secure_transport

resultset_metadata

rewriter_enabled

Boolean

Boolean

Enumeration

Boolean

rewriter_enabled_for_threads_without_privilege_checks

Boolean

rewriter_verbose

rpl_read_size

Integer

Integer

rpl_semi_sync_master_enabled Boolean

rpl_semi_sync_master_timeout

Integer

rpl_semi_sync_master_trace_levelInteger

rpl_semi_sync_master_wait_for_slave_count

Integer

rpl_semi_sync_master_wait_no_slaveBoolean

rpl_semi_sync_master_wait_point Enumeration

rpl_semi_sync_replica_enabled Boolean

rpl_semi_sync_replica_trace_levelInteger

rpl_semi_sync_slave_enabled

Boolean

rpl_semi_sync_slave_trace_level

Integer

rpl_semi_sync_source_enabled Boolean

rpl_semi_sync_source_timeout

Integer

Global

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Session

Global

Session

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

1051

Using System Variables

Variable Name

Variable Type

Variable Scope

rpl_semi_sync_source_trace_levelInteger

rpl_semi_sync_source_wait_for_replica_count

Integer

rpl_semi_sync_source_wait_no_replicaBoolean

rpl_semi_sync_source_wait_point Enumeration

rpl_stop_replica_timeout

rpl_stop_slave_timeout

schema_definition_cache

Integer

Integer

Integer

secondary_engine_cost_thresholdNumeric

select_into_buffer_size

select_into_disk_sync

select_into_disk_sync_delay

server_id

Integer

Boolean

Integer

Integer

session_track_gtids

Enumeration

session_track_schema

session_track_state_change

Boolean

Boolean

session_track_system_variables String

session_track_transaction_info

Enumeration

sha256_password_proxy_users Boolean

show_create_table_skip_secondary_engine

Boolean

show_create_table_verbosity

Boolean

show_gipk_in_create_table_and_information_schema

Boolean

show_old_temporals

slave_allow_batching

slave_checkpoint_group

slave_checkpoint_period

Boolean

Boolean

Integer

Integer

slave_compressed_protocol

Boolean

slave_exec_mode

Enumeration

slave_max_allowed_packet

slave_net_timeout

slave_parallel_type

Integer

Integer

Enumeration

slave_parallel_workers

Integer

slave_pending_jobs_size_max

Integer

slave_preserve_commit_order

Boolean

slave_rows_search_algorithms

Set

slave_sql_verify_checksum

slave_transaction_retries

slave_type_conversions

slow_launch_time

slow_query_log

slow_query_log_file

sort_buffer_size

Boolean

Integer

Set

Integer

Boolean

File name

Integer

Global

Global

Global

Global

Global

Global

Global

Session

Both

Both

Both

Global

Both

Both

Both

Both

Both

Global

Session

Both

Both

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Both

1052

Using System Variables

Variable Name

Variable Type

Variable Scope

source_verify_checksum

sql_auto_is_null

sql_big_selects

sql_buffer_result

Boolean

Boolean

Boolean

Boolean

sql_generate_invisible_primary_keyBoolean

sql_log_bin

sql_log_off

sql_mode

sql_notes

sql_quote_show_create

sql_replica_skip_counter

sql_require_primary_key

sql_safe_updates

sql_select_limit

sql_slave_skip_counter

sql_warnings

ssl_ca

ssl_capath

ssl_cert

ssl_cipher

ssl_crl

ssl_crlpath

ssl_key

ssl_session_cache_mode

ssl_session_cache_timeout

stored_program_cache

Boolean

Boolean

Set

Boolean

Boolean

Integer

Boolean

Boolean

Integer

Integer

Boolean

File name

Directory name

File name

String

File name

Directory name

File name

Boolean

Integer

Integer

stored_program_definition_cache Integer

super_read_only

sync_binlog

sync_master_info

sync_relay_log

sync_relay_log_info

sync_source_info

syseventlog.facility

syseventlog.include_pid

syseventlog.tag

table_definition_cache

Boolean

Integer

Integer

Integer

Integer

Integer

String

Boolean

String

Integer

table_encryption_privilege_check Boolean

table_open_cache

tablespace_definition_cache

temptable_max_mmap

Integer

Integer

Integer

Global

Both

Both

Both

Both

Session

Both

Both

Both

Both

Global

Both

Both

Both

Global

Both

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

1053

Using System Variables

Variable Name

Variable Type

Variable Scope

temptable_max_ram

temptable_use_mmap

Integer

Boolean

terminology_use_previous

Enumeration

thread_cache_size

Integer

thread_pool_high_priority_connectionInteger

thread_pool_max_active_query_threads

Integer

thread_pool_max_transactions_limitInteger

thread_pool_max_unused_threadsInteger

thread_pool_prio_kickup_timer

Integer

thread_pool_query_threads_per_group

Integer

thread_pool_stall_limit

Integer

thread_pool_transaction_delay

Integer

time_zone

timestamp

tls_ciphersuites

tls_version

tmp_table_size

transaction_alloc_block_size

String

Numeric

String

String

Integer

Integer

transaction_allow_batching

Boolean

transaction_isolation

Enumeration

transaction_prealloc_size

transaction_read_only

Integer

Boolean

transaction_write_set_extraction Enumeration

unique_checks

updatable_views_with_limit

Boolean

Boolean

Global

Global

Both

Global

Both

Global

Global

Global

Global

Global

Global

Global

Both

Session

Global

Global

Both

Both

Session

Both

Both

Both

Both

Both

Both

use_secondary_engine

Enumeration

Session

validate_password_check_user_nameBoolean

validate_password_dictionary_file File name

validate_password_length

Integer

validate_password_mixed_case_count

Integer

validate_password_number_countInteger

validate_password_policy

Enumeration

validate_password_special_char_count

Integer

validate_password.changed_characters_percentage

Integer

validate_password.check_user_nameBoolean

validate_password.dictionary_file File name

validate_password.length

Integer

validate_password.mixed_case_count

Integer

validate_password.number_count Integer

validate_password.policy

Enumeration

validate_password.special_char_count

Integer

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

1054

Using System Variables

Variable Name

Variable Type

Variable Scope

version_tokens_session

wait_timeout

String

Integer

windowing_use_high_precision

Boolean

xa_detach_on_prepare

Boolean

7.1.9.3 Persisted System Variables

Both

Both

Both

Both

The MySQL server maintains system variables that configure its operation. A system variable can have
a global value that affects server operation as a whole, a session value that affects the current session,
or both. Many system variables are dynamic and can be changed at runtime using the SET statement
to affect operation of the current server instance. SET can also be used to persist certain global system
variables to the mysqld-auto.cnf file in the data directory, to affect server operation for subsequent
startups. RESET PERSIST removes persisted settings from mysqld-auto.cnf.

The following discussion describes aspects of persisting system variables:

• Overview of Persisted System Variables

• Syntax for Persisting System Variables

• Obtaining Information About Persisted System Variables

• Format and Server Handling of the mysqld-auto.cnf File

• Persisting Sensitive System Variables

Overview of Persisted System Variables

The capability of persisting global system variables at runtime enables server configuration that
persists across server startups. Although many system variables can be set at startup from a my.cnf
option file, or at runtime using the SET statement, those methods of configuring the server either
require login access to the server host, or do not provide the capability of persistently configuring the
server at runtime or remotely:

• Modifying an option file requires direct access to that file, which requires login access to the MySQL

server host. This is not always convenient.

• Modifying system variables with SET GLOBAL is a runtime capability that can be done from clients
run locally or from remote hosts, but the changes affect only the currently running server instance.
The settings are not persistent and do not carry over to subsequent server startups.

To augment administrative capabilities for server configuration beyond what is achievable by editing
option files or using SET GLOBAL, MySQL provides variants of SET syntax that persist system variable
settings to a file named mysqld-auto.cnf file in the data directory. Examples:

SET PERSIST max_connections = 1000;
SET @@PERSIST.max_connections = 1000;

SET PERSIST_ONLY back_log = 100;
SET @@PERSIST_ONLY.back_log = 100;

MySQL also provides a RESET PERSIST statement for removing persisted system variables from
mysqld-auto.cnf.

Server configuration performed by persisting system variables has these characteristics:

• Persisted settings are made at runtime.

• Persisted settings are permanent. They apply across server restarts.

• Persisted settings can be made from local clients or clients who connect from a remote host. This

provides the convenience of remotely configuring multiple MySQL servers from a central client host.

1055

Using System Variables

• To persist system variables, you need not have login access to the MySQL server host or file system
access to option files. Ability to persist settings is controlled using the MySQL privilege system. See
Section 7.1.9.1, “System Variable Privileges”.

• An administrator with sufficient privileges can reconfigure a server by persisting system variables,

then cause the server to use the changed settings immediately by executing a RESTART statement.

• Persisted settings provide immediate feedback about errors. An error in a manually entered setting
might not be discovered until much later. SET statements that persist system variables avoid the
possibility of malformed settings because settings with syntax errors do not succeed and do not
change server configuration.

Syntax for Persisting System Variables

These SET syntax options are available for persisting system variables:

• To persist a global system variable to the mysqld-auto.cnf option file in the data directory,

precede the variable name by the PERSIST keyword or the @@PERSIST. qualifier:

SET PERSIST max_connections = 1000;
SET @@PERSIST.max_connections = 1000;

Like SET GLOBAL, SET PERSIST sets the global variable runtime value, but also writes the variable
setting to the mysqld-auto.cnf file (replacing any existing variable setting if there is one).

• To persist a global system variable to the mysqld-auto.cnf file without setting the global
variable runtime value, precede the variable name by the PERSIST_ONLY keyword or the
@@PERSIST_ONLY. qualifier:

SET PERSIST_ONLY back_log = 1000;
SET @@PERSIST_ONLY.back_log = 1000;

Like PERSIST, PERSIST_ONLY writes the variable setting to mysqld-auto.cnf. However,
unlike PERSIST, PERSIST_ONLY does not modify the global variable runtime value. This makes
PERSIST_ONLY suitable for configuring read-only system variables that can be set only at server
startup.

For more information about SET, see Section 15.7.6.1, “SET Syntax for Variable Assignment”.

These RESET PERSIST syntax options are available for removing persisted system variables:

• To remove all persisted variables from mysqld-auto.cnf, use RESET PERSIST without naming

any system variable:

RESET PERSIST;

• To remove a specific persisted variable from mysqld-auto.cnf, name it in the statement:

RESET PERSIST system_var_name;

This includes plugin system variables, even if the plugin is not currently installed. If the variable is not
present in the file, an error occurs.

• To remove a specific persisted variable from mysqld-auto.cnf, but produce a warning rather than
an error if the variable is not present in the file, add an IF EXISTS clause to the previous syntax:

RESET PERSIST IF EXISTS system_var_name;

For more information about RESET PERSIST, see Section 15.7.8.7, “RESET PERSIST Statement”.

Using SET to persist a global system variable to a value of DEFAULT or to its literal default value
assigns the variable its default value and adds a setting for the variable to mysqld-auto.cnf. To
remove the variable from the file, use RESET PERSIST.

1056

Using System Variables

Some system variables cannot be persisted. See Section 7.1.9.4, “Nonpersistible and Persist-
Restricted System Variables”.

A system variable implemented by a plugin can be persisted if the plugin is installed when the SET
statement is executed. Assignment of the persisted plugin variable takes effect for subsequent server
restarts if the plugin is still installed. If the plugin is no longer installed, the plugin variable does not exist
when the server reads the mysqld-auto.cnf file. In this case, the server writes a warning to the error
log and continues:

currently unknown variable 'var_name'
was read from the persisted config file

Obtaining Information About Persisted System Variables

The Performance Schema persisted_variables table provides an SQL interface to the mysqld-
auto.cnf file, enabling its contents to be inspected at runtime using SELECT statements. See
Section 29.12.14.1, “Performance Schema persisted_variables Table”.

The Performance Schema variables_info table contains information showing when and by which
user each system variable was most recently set. See Section 29.12.14.2, “Performance Schema
variables_info Table”.

RESET PERSIST affects the contents of the persisted_variables table because the table
contents correspond to the contents of the mysqld-auto.cnf file. On the other hand, because
RESET PERSIST does not change variable values, it has no effect on the contents of the
variables_info table until the server is restarted.

Format and Server Handling of the mysqld-auto.cnf File

The mysqld-auto.cnf file uses a JSON format like this (reformatted slightly for readability):

{
  "Version": 1,
  "mysql_server": {
    "max_connections": {
      "Value": "152",
      "Metadata": {
        "Timestamp": 1519921341372531,
        "User": "root",
        "Host": "localhost"
      }
    },
    "transaction_isolation": {
      "Value": "READ-COMMITTED",
      "Metadata": {
        "Timestamp": 1519921553880520,
        "User": "root",
        "Host": "localhost"
      }
    },
    "mysql_server_static_options": {
      "innodb_api_enable_mdl": {
        "Value": "0",
        "Metadata": {
          "Timestamp": 1519922873467872,
          "User": "root",
          "Host": "localhost"
        }
      },
      "log_slave_updates": {
        "Value": "1",
        "Metadata": {
          "Timestamp": 1519925628441588,
          "User": "root",
          "Host": "localhost"
        }
      }
    }

1057

Using System Variables

  }
}

At startup, the server processes the mysqld-auto.cnf file after all other option files (see
Section 6.2.2.2, “Using Option Files”). The server handles the file contents as follows:

• If the persisted_globals_load system variable is disabled, the server ignores the mysqld-

auto.cnf file.

• The "mysql_server_static_options" section contains read-only variables persisted using
SET PERSIST_ONLY. The section may also (despite its name) contain certain dynamic variables
that are not read only. All variables present inside this section are appended to the command line
and processed with other command-line options.

• All remaining persisted variables are set by executing the equivalent of a SET GLOBAL statement
later, just before the server starts listening for client connections. These settings therefore do not
take effect until late in the startup process, which might be unsuitable for certain system variables. It
may be preferable to set such variables in my.cnf rather than in mysqld-auto.cnf.

Management of the mysqld-auto.cnf file should be left to the server. Manipulation of the file should
be performed only using SET and RESET PERSIST statements, not manually:

• Removal of the file results in a loss of all persisted settings at the next server startup. (This is

permissible if your intent is to reconfigure the server without these settings.) To remove all settings in
the file without removing the file itself, use this statement:

RESET PERSIST;

• Manual changes to the file may result in a parse error at server startup. In this case, the server

reports an error and exits. If this issue occurs, start the server with the persisted_globals_load
system variable disabled or with the --no-defaults option. Alternatively, remove the mysqld-
auto.cnf file. However, as noted previously, removing this file results in a loss of all persisted
settings.

Persisting Sensitive System Variables

From MySQL 8.0.29, MySQL Server has the capability to securely store persisted system variable
values containing sensitive data such as private keys or passwords, and restrict viewing of the values.
No MySQL Server system variables are currently marked as sensitive, but the new capability allows
system variables containing sensitive data to be persisted securely in the future. After upgrading to
MySQL 8.0.29, the format of the mysqld-auto.cnf option file remains the same until the first time a
SET PERSIST or SET PERSIST ONLY statement is issued, and at that point it is changed to a new
format, even if the system variable involved is not sensitive. In the new format, the option file cannot be
read by older releases of MySQL Server.

Note

A keyring component must be enabled on the MySQL Server instance to
support secure storage for persisted system variable values, rather than a
keyring plugin, which do not support the function. See Section 8.4.4, “The
MySQL Keyring”.

In the mysqld-auto.cnf option file, the names and values of sensitive system variables are stored
in an encrypted format, along with a generated file key to decrypt them. The generated file key is in
turn encrypted using a master key (persisted_variables_key) that is stored in a keyring. When
the server starts up, the persisted sensitive system variables are decrypted and used. By default,
if encrypted values are present in the option file but cannot be successfully decrypted at startup,
their default settings are used. The optional most secure setting makes the server halt startup if the
encrypted values cannot be decrypted.

The system variable persist_sensitive_variables_in_plaintext controls whether the server
is permitted to store the values of sensitive system variables in an unencrypted format, if keyring

1058

Using System Variables

component support is not available at the time when SET PERSIST is used to set the value. It also
controls whether or not the server can start if the encrypted values cannot be decrypted.

• The default setting, ON, encrypts the values if keyring component support is available, and persists
them unencrypted (with a warning) if it is not. The next time any persisted system variable is set, if
keyring support is available at that time, the server encrypts the values of any unencrypted sensitive
system variables. The ON setting also allows the server to start if encrypted system variable values
cannot be decrypted, in which case a warning is issued and the default values for the system
variables are used. In that situation, their values cannot be changed until they can be decrypted.

• The most secure setting, OFF, means sensitive system variable values cannot be persisted if keyring
component support is unavailable. The OFF setting also means the server does not start if encrypted
system variable values cannot be decrypted.

The privilege SENSITIVE_VARIABLES_OBSERVER allows a holder to view the values of sensitive
system variables in the Performance Schema tables global_variables, session_variables,
variables_by_thread, and persisted_variables, to issue SELECT statements to return their
values, and to track changes to them in session trackers for connections. Users without this privilege
cannot view or track those system variable values.

If a SET statement is issued for a sensitive system variable, the query is rewritten to replace the value
with “<redacted>” before it is logged to the general log and audit log. This takes place even if secure
storage through a keyring component is not available on the server instance.

7.1.9.4 Nonpersistible and Persist-Restricted System Variables

SET PERSIST and SET PERSIST_ONLY enable global system variables to be persisted to the
mysqld-auto.cnf option file in the data directory (see Section 15.7.6.1, “SET Syntax for Variable
Assignment”). However, not all system variables can be persisted, or can be persisted only under
certain restrictive conditions. Here are some reasons why a system variable might be nonpersistible or
persist-restricted:

• Session system variables cannot be persisted. Session variables cannot be set at server startup, so

there is no reason to persist them.

• A global system variable might involve sensitive data such that it should be settable only by a user

with direct access to the server host.

• A global system variable might be read only (that is, set only by the server). In this case, it cannot be

set by users at all, whether at server startup or at runtime.

• A global system variable might be intended only for internal use.

Nonpersistible system variables cannot be persisted under any circumstances. As of MySQL 8.0.14,
persist-restricted system variables can be persisted with SET PERSIST_ONLY, but only by users for
which the following conditions are satisfied:

• The persist_only_admin_x509_subject system variable is set to an SSL certificate X.509

Subject value.

• The user connects to the server using an encrypted connection and supplies an SSL certificate with

the designated Subject value.

• The user has sufficient privileges to use SET PERSIST_ONLY (see Section 7.1.9.1, “System

Variable Privileges”).

For example, protocol_version is read only and set only by the server, so it cannot be persisted
under any circumstances. On the other hand, bind_address is persist-restricted, so it can be set by
users who satisfy the preceding conditions.

The following system variables are nonpersistible. This list may change with ongoing development.

audit_log_current_session
audit_log_filter_id

1059

Using System Variables

caching_sha2_password_digest_rounds
character_set_system
core_file
have_statement_timeout
have_symlink
hostname
innodb_version
keyring_hashicorp_auth_path
keyring_hashicorp_ca_path
keyring_hashicorp_caching
keyring_hashicorp_commit_auth_path
keyring_hashicorp_commit_ca_path
keyring_hashicorp_commit_caching
keyring_hashicorp_commit_role_id
keyring_hashicorp_commit_server_url
keyring_hashicorp_commit_store_path
keyring_hashicorp_role_id
keyring_hashicorp_secret_id
keyring_hashicorp_server_url
keyring_hashicorp_store_path
large_files_support
large_page_size
license
locked_in_memory
log_bin
log_bin_basename
log_bin_index
lower_case_file_system
ndb_version
ndb_version_string
persist_only_admin_x509_subject
persisted_globals_load
protocol_version
relay_log_basename
relay_log_index
server_uuid
skip_external_locking
system_time_zone
version_comment
version_compile_machine
version_compile_os
version_compile_zlib

Persist-restricted system variables are those that are read only and can be set on the
command line or in an option file, other than persist_only_admin_x509_subject and
persisted_globals_load. This list may change with ongoing development.

audit_log_file
audit_log_format
auto_generate_certs
basedir
bind_address
caching_sha2_password_auto_generate_rsa_keys
caching_sha2_password_private_key_path
caching_sha2_password_public_key_path
character_sets_dir
daemon_memcached_engine_lib_name
daemon_memcached_engine_lib_path
daemon_memcached_option
datadir
default_authentication_plugin
ft_stopword_file
init_file
innodb_buffer_pool_load_at_startup
innodb_data_file_path
innodb_data_home_dir
innodb_dedicated_server
innodb_directories
innodb_force_load_corrupted
innodb_log_group_home_dir
innodb_page_size
innodb_read_only

1060

Using System Variables

innodb_temp_data_file_path
innodb_temp_tablespaces_dir
innodb_undo_directory
innodb_undo_tablespaces
keyring_encrypted_file_data
keyring_encrypted_file_password
lc_messages_dir
log_error
mecab_rc_file
named_pipe
pid_file
plugin_dir
port
relay_log
relay_log_info_file
replica_load_tmpdir
secure_file_priv
sha256_password_auto_generate_rsa_keys
sha256_password_private_key_path
sha256_password_public_key_path
shared_memory
shared_memory_base_name
skip_networking
slave_load_tmpdir
socket
ssl_ca
ssl_capath
ssl_cert
ssl_crl
ssl_crlpath
ssl_key
tmpdir
version_tokens_session_number

To configure the server to enable persisting persist-restricted system variables, use this procedure:

1. Ensure that MySQL is configured to support encrypted connections. See Section 8.3.1,

“Configuring MySQL to Use Encrypted Connections”.

2. Designate an SSL certificate X.509 Subject value that signifies the ability to persist persist-

restricted system variables, and generate a certificate that has that Subject. See Section 8.3.3,
“Creating SSL and RSA Certificates and Keys”.

3. Start the server with persist_only_admin_x509_subject set to the designated Subject value.

For example, put these lines in your server my.cnf file:

[mysqld]
persist_only_admin_x509_subject="subject-value"

The format of the Subject value is the same as used for CREATE USER ... REQUIRE SUBJECT.
See Section 15.7.1.3, “CREATE USER Statement”.

You must perform this step directly on the MySQL server host because
persist_only_admin_x509_subject itself cannot be persisted at runtime.

4. Restart the server.

5. Distribute the SSL certificate that has the designated Subject value to users who are to be

permitted to persist persist-restricted system variables.

Suppose that myclient-cert.pem is the SSL certificate to be used by clients who can persist
persist-restricted system variables. Display the certificate contents using the openssl command:

$> openssl x509 -text -in myclient-cert.pem
Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number: 2 (0x2)
    Signature Algorithm: md5WithRSAEncryption

1061

Using System Variables

        Issuer: C=US, ST=IL, L=Chicago, O=MyOrg, OU=CA, CN=MyCN
        Validity
            Not Before: Oct 18 17:03:03 2018 GMT
            Not After : Oct 15 17:03:03 2028 GMT
        Subject: C=US, ST=IL, L=Chicago, O=MyOrg, OU=client, CN=MyCN
...

The openssl output shows that the certificate Subject value is:

C=US, ST=IL, L=Chicago, O=MyOrg, OU=client, CN=MyCN

To specify the Subject for MySQL, use this format:

/C=US/ST=IL/L=Chicago/O=MyOrg/OU=client/CN=MyCN

Configure the server my.cnf file with the Subject value:

[mysqld]
persist_only_admin_x509_subject="/C=US/ST=IL/L=Chicago/O=MyOrg/OU=client/CN=MyCN"

Restart the server so that the new configuration takes effect.

Distribute the SSL certificate (and any other associated SSL files) to the appropriate users. Such a
user then connects to the server with the certificate and any other SSL options required to establish an
encrypted connection.

To use X.509, clients must specify the --ssl-key and --ssl-cert options to connect. It is
recommended but not required that --ssl-ca also be specified so that the public certificate provided
by the server can be verified. For example:

$> mysql --ssl-key=myclient-key.pem --ssl-cert=myclient-cert.pem --ssl-ca=mycacert.pem

Assuming that the user has sufficient privileges to use SET PERSIST_ONLY, persist-restricted system
variables can be persisted like this:

mysql> SET PERSIST_ONLY socket = '/tmp/mysql.sock';
Query OK, 0 rows affected (0.00 sec)

If the server is not configured to enable persisting persist-restricted system variables, or the user does
not satisfy the required conditions for that capability, an error occurs:

mysql> SET PERSIST_ONLY socket = '/tmp/mysql.sock';
ERROR 1238 (HY000): Variable 'socket' is a non persistent read only variable

7.1.9.5 Structured System Variables

A structured variable differs from a regular system variable in two respects:

• Its value is a structure with components that specify server parameters considered to be closely

related.

• There might be several instances of a given type of structured variable. Each one has a different

name and refers to a different resource maintained by the server.

MySQL supports one structured variable type, which specifies parameters governing the operation of
key caches. A key cache structured variable has these components:

• key_buffer_size

• key_cache_block_size

• key_cache_division_limit

• key_cache_age_threshold

This section describes the syntax for referring to structured variables. Key cache variables are used
for syntax examples, but specific details about how key caches operate are found elsewhere, in
Section 10.10.2, “The MyISAM Key Cache”.

1062

Using System Variables

To refer to a component of a structured variable instance, you can use a compound name in
instance_name.component_name format. Examples:

hot_cache.key_buffer_size
hot_cache.key_cache_block_size
cold_cache.key_cache_block_size

For each structured system variable, an instance with the name of default is always predefined. If
you refer to a component of a structured variable without any instance name, the default instance
is used. Thus, default.key_buffer_size and key_buffer_size both refer to the same system
variable.

Structured variable instances and components follow these naming rules:

• For a given type of structured variable, each instance must have a name that is unique within

variables of that type. However, instance names need not be unique across structured variable
types. For example, each structured variable has an instance named default, so default is not
unique across variable types.

• The names of the components of each structured variable type must be unique across all system
variable names. If this were not true (that is, if two different types of structured variables could
share component member names), it would not be clear which default structured variable to use for
references to member names that are not qualified by an instance name.

• If a structured variable instance name is not legal as an unquoted identifier, refer to it as a quoted

identifier using backticks. For example, hot-cache is not legal, but `hot-cache` is.

• global, session, and local are not legal instance names. This avoids a conflict with notation

such as @@GLOBAL.var_name for referring to nonstructured system variables.

Currently, the first two rules have no possibility of being violated because the only structured variable
type is the one for key caches. These rules may assume greater significance if some other type of
structured variable is created in the future.

With one exception, you can refer to structured variable components using compound names in any
context where simple variable names can occur. For example, you can assign a value to a structured
variable using a command-line option:

$> mysqld --hot_cache.key_buffer_size=64K

In an option file, use this syntax:

[mysqld]
hot_cache.key_buffer_size=64K

If you start the server with this option, it creates a key cache named hot_cache with a size of 64KB in
addition to the default key cache that has a default size of 8MB.

Suppose that you start the server as follows:

$> mysqld --key_buffer_size=256K \
         --extra_cache.key_buffer_size=128K \
         --extra_cache.key_cache_block_size=2048

In this case, the server sets the size of the default key cache to 256KB. (You could also have written
--default.key_buffer_size=256K.) In addition, the server creates a second key cache named
extra_cache that has a size of 128KB, with the size of block buffers for caching table index blocks
set to 2048 bytes.

The following example starts the server with three different key caches having sizes in a 3:1:1 ratio:

$> mysqld --key_buffer_size=6M \
         --hot_cache.key_buffer_size=2M \
         --cold_cache.key_buffer_size=2M

1063

Server Status Variables

Structured variable values may be set and retrieved at runtime as well. For example, to set a key cache
named hot_cache to a size of 10MB, use either of these statements:

mysql> SET GLOBAL hot_cache.key_buffer_size = 10*1024*1024;
mysql> SET @@GLOBAL.hot_cache.key_buffer_size = 10*1024*1024;

To retrieve the cache size, do this:

mysql> SELECT @@GLOBAL.hot_cache.key_buffer_size;

However, the following statement does not work. The variable is not interpreted as a compound name,
but as a simple string for a LIKE pattern-matching operation:

mysql> SHOW GLOBAL VARIABLES LIKE 'hot_cache.key_buffer_size';

This is the exception to being able to use structured variable names anywhere a simple variable name
may occur.

7.1.10 Server Status Variables

The MySQL server maintains many status variables that provide information about its operation.
You can view these variables and their values by using the SHOW [GLOBAL | SESSION] STATUS
statement (see Section 15.7.7.37, “SHOW STATUS Statement”). The optional GLOBAL keyword
aggregates the values over all connections, and SESSION shows the values for the current connection.

mysql> SHOW GLOBAL STATUS;
+-----------------------------------+------------+
| Variable_name                     | Value      |
+-----------------------------------+------------+
| Aborted_clients                   | 0          |
| Aborted_connects                  | 0          |
| Bytes_received                    | 155372598  |
| Bytes_sent                        | 1176560426 |
...
| Connections                       | 30023      |
| Created_tmp_disk_tables           | 0          |
| Created_tmp_files                 | 3          |
| Created_tmp_tables                | 2          |
...
| Threads_created                   | 217        |
| Threads_running                   | 88         |
| Uptime                            | 1389872    |
+-----------------------------------+------------+

Many status variables are reset to 0 by the FLUSH STATUS statement.

This section provides a description of each status variable. For a status variable summary, see
Section 7.1.6, “Server Status Variable Reference”. For information about status variables specific to
NDB Cluster, see NDB Cluster Status Variables.

The status variables have the following meanings.

• Aborted_clients

The number of connections that were aborted because the client died without closing the connection
properly. See Section B.3.2.9, “Communication Errors and Aborted Connections”.

• Aborted_connects

The number of failed attempts to connect to the MySQL server. See Section B.3.2.9,
“Communication Errors and Aborted Connections”.

For additional connection-related information, check the Connection_errors_xxx status variables
and the host_cache table.

• Authentication_ldap_sasl_supported_methods

1064

Server Status Variables

The authentication_ldap_sasl plugin that implements SASL LDAP authentication supports
multiple authentication methods, but depending on host system configuration, they might not all
be available. The Authentication_ldap_sasl_supported_methods variable provides
discoverability for the supported methods. Its value is a string consisting of supported method names
separated by spaces. Example: "SCRAM-SHA 1 SCRAM-SHA-256 GSSAPI"

This variable was added in MySQL 8.0.21.

• Binlog_cache_disk_use

The number of transactions that used the temporary binary log cache but that exceeded the value of
binlog_cache_size and used a temporary file to store statements from the transaction.

The number of nontransactional statements that caused the binary log transaction cache to be
written to disk is tracked separately in the Binlog_stmt_cache_disk_use status variable.

• Acl_cache_items_count

The number of cached privilege objects. Each object is the privilege combination of a user and its
active roles.

• Binlog_cache_use

The number of transactions that used the binary log cache.

• Binlog_stmt_cache_disk_use

The number of nontransaction statements that used the binary log statement cache but that
exceeded the value of binlog_stmt_cache_size and used a temporary file to store those
statements.

• Binlog_stmt_cache_use

The number of nontransactional statements that used the binary log statement cache.

• Bytes_received

The number of bytes received from all clients.

• Bytes_sent

The number of bytes sent to all clients.

• Caching_sha2_password_rsa_public_key

The public key used by the caching_sha2_password authentication plugin for RSA key pair-
based password exchange. The value is nonempty only if the server successfully initializes the
private and public keys in the files named by the caching_sha2_password_private_key_path
and caching_sha2_password_public_key_path system variables. The value of
Caching_sha2_password_rsa_public_key comes from the latter file.

• Com_xxx

The Com_xxx statement counter variables indicate the number of times each xxx statement has
been executed. There is one status variable for each type of statement. For example, Com_delete
and Com_update count DELETE and UPDATE statements, respectively. Com_delete_multi and
Com_update_multi are similar but apply to DELETE and UPDATE statements that use multiple-
table syntax.

All Com_stmt_xxx variables are increased even if a prepared statement argument is unknown
or an error occurred during execution. In other words, their values correspond to the number of
requests issued, not to the number of requests successfully completed. For example, because status

1065

Server Status Variables

variables are initialized for each server startup and do not persist across restarts, the Com_restart
and Com_shutdown variables that track RESTART and SHUTDOWN statements normally have a value
of zero, but can be nonzero if RESTART or SHUTDOWN statements were executed but failed.

The Com_stmt_xxx status variables are as follows:

• Com_stmt_prepare

• Com_stmt_execute

• Com_stmt_fetch

• Com_stmt_send_long_data

• Com_stmt_reset

• Com_stmt_close

Those variables stand for prepared statement commands. Their names refer to the COM_xxx
command set used in the network layer. In other words, their values increase whenever prepared
statement API calls such as mysql_stmt_prepare(), mysql_stmt_execute(), and so forth
are executed. However, Com_stmt_prepare, Com_stmt_execute and Com_stmt_close
also increase for PREPARE, EXECUTE, or DEALLOCATE PREPARE, respectively. Additionally, the
values of the older statement counter variables Com_prepare_sql, Com_execute_sql, and
Com_dealloc_sql increase for the PREPARE, EXECUTE, and DEALLOCATE PREPARE statements.
Com_stmt_fetch stands for the total number of network round-trips issued when fetching from
cursors.

Com_stmt_reprepare indicates the number of times statements were automatically reprepared by
the server, for example, after metadata changes to tables or views referred to by the statement. A
reprepare operation increments Com_stmt_reprepare, and also Com_stmt_prepare.

Com_explain_other indicates the number of EXPLAIN FOR CONNECTION statements executed.
See Section 10.8.4, “Obtaining Execution Plan Information for a Named Connection”.

Com_change_repl_filter indicates the number of CHANGE REPLICATION FILTER statements
executed.

• Compression

Whether the client connection uses compression in the client/server protocol.

As of MySQL 8.0.18, this status variable is deprecated; expect it to be removed in a future version of
MySQL. See Configuring Legacy Connection Compression.

• Compression_algorithm

The name of the compression algorithm in use for the current connection to the server. The value
can be any algorithm permitted in the value of the protocol_compression_algorithms system
variable. For example, the value is uncompressed if the connection does not use compression, or
zlib if the connection uses the zlib algorithm.

For more information, see Section 6.2.8, “Connection Compression Control”.

This variable was added in MySQL 8.0.18.

1066

Server Status Variables

• Compression_level

The compression level in use for the current connection to the server. The value is 6 for zlib
connections (the default zlib algorithm compression level), 1 to 22 for zstd connections, and 0 for
uncompressed connections.

For more information, see Section 6.2.8, “Connection Compression Control”.

This variable was added in MySQL 8.0.18.

• Connection_errors_xxx

These variables provide information about errors that occur during the client connection process.
They are global only and represent error counts aggregated across connections from all hosts.
These variables track errors not accounted for by the host cache (see Section 7.1.12.3, “DNS
Lookups and the Host Cache”), such as errors that are not associated with TCP connections, occur
very early in the connection process (even before an IP address is known), or are not specific to any
particular IP address (such as out-of-memory conditions).

• Connection_errors_accept

The number of errors that occurred during calls to accept() on the listening port.

• Connection_errors_internal

The number of connections refused due to internal errors in the server, such as failure to start a
new thread or an out-of-memory condition.

• Connection_errors_max_connections

The number of connections refused because the server max_connections limit was reached.

• Connection_errors_peer_address

The number of errors that occurred while searching for connecting client IP addresses.

• Connection_errors_select

The number of errors that occurred during calls to select() or poll() on the listening port.
(Failure of this operation does not necessarily means a client connection was rejected.)

• Connection_errors_tcpwrap

The number of connections refused by the libwrap library.

• Connections

The number of connection attempts (successful or not) to the MySQL server.

• Created_tmp_disk_tables

The number of internal on-disk temporary tables created by the server while executing statements.

You can compare the number of internal on-disk temporary tables created to the total number
of internal temporary tables created by comparing Created_tmp_disk_tables and
Created_tmp_tables values.

Note

Due to a known limitation, Created_tmp_disk_tables does not count
on-disk temporary tables created in memory-mapped files. By default,
the TempTable storage engine overflow mechanism creates internal

1067

Server Status Variables

temporary tables in memory-mapped files. This behavior is controlled by the
temptable_use_mmap variable, which is enabled by default.

See also Section 10.4.4, “Internal Temporary Table Use in MySQL”.

• Created_tmp_files

How many temporary files mysqld has created.

• Created_tmp_tables

The number of internal temporary tables created by the server while executing statements.

You can compare the number of internal on-disk temporary tables created to the total number
of internal temporary tables created by comparing Created_tmp_disk_tables and
Created_tmp_tables values.

See also Section 10.4.4, “Internal Temporary Table Use in MySQL”.

Each invocation of the SHOW STATUS statement uses an internal temporary table and increments
the global Created_tmp_tables value.

• Current_tls_ca

The active ssl_ca value in the SSL context that the server uses for new connections. This context
value may differ from the current ssl_ca system variable value if the system variable has been
changed but ALTER INSTANCE RELOAD TLS has not subsequently been executed to reconfigure
the SSL context from the context-related system variable values and update the corresponding
status variables. (This potential difference in values applies to each corresponding pair of context-
related system and status variables. See Server-Side Runtime Configuration and Monitoring for
Encrypted Connections.)

This variable was added in MySQL 8.0.16.

As of MySQL 8.0.21, the Current_tls_xxx status variable values are also available through
the Performance Schema tls_channel_status table. See Section 29.12.21.9, “The
tls_channel_status Table”.

• Current_tls_capath

The active ssl_capath value in the TLS context that the server uses for new connections. For
notes about the relationship between this status variable and its corresponding system variable, see
the description of Current_tls_ca.

This variable was added in MySQL 8.0.16.

• Current_tls_cert

The active ssl_cert value in the TLS context that the server uses for new connections. For notes
about the relationship between this status variable and its corresponding system variable, see the
description of Current_tls_ca.

This variable was added in MySQL 8.0.16.

• Current_tls_cipher

The active ssl_cipher value in the TLS context that the server uses for new connections. For
notes about the relationship between this status variable and its corresponding system variable, see
the description of Current_tls_ca.

This variable was added in MySQL 8.0.16.

1068

Server Status Variables

• Current_tls_ciphersuites

The active tls_ciphersuites value in the TLS context that the server uses for new connections.
For notes about the relationship between this status variable and its corresponding system variable,
see the description of Current_tls_ca.

This variable was added in MySQL 8.0.16.

• Current_tls_crl

The active ssl_crl value in the TLS context that the server uses for new connections. For notes
about the relationship between this status variable and its corresponding system variable, see the
description of Current_tls_ca.

This variable was added in MySQL 8.0.16.

Note

When you reload the TLS context, OpenSSL reloads the file containing the
CRL (certificate revocation list) as part of the process. If the CRL file is large,
the server allocates a large chunk of memory (ten times the file size), which
is doubled while the new instance is being loaded and the old one has not
yet been released. The process resident memory is not immediately reduced
after a large allocation is freed, so if you issue the ALTER INSTANCE
RELOAD TLS statement repeatedly with a large CRL file, the process resident
memory usage may grow as a result of this.

• Current_tls_crlpath

The active ssl_crlpath value in the TLS context that the server uses for new connections. For
notes about the relationship between this status variable and its corresponding system variable, see
the description of Current_tls_ca.

This variable was added in MySQL 8.0.16.

• Current_tls_key

The active ssl_key value in the TLS context that the server uses for new connections. For notes
about the relationship between this status variable and its corresponding system variable, see the
description of Current_tls_ca.

This variable was added in MySQL 8.0.16.

• Current_tls_version

The active tls_version value in the TLS context that the server uses for new connections. For
notes about the relationship between this status variable and its corresponding system variable, see
the description of Current_tls_ca.

This variable was added in MySQL 8.0.16.

• Delayed_errors

This status variable is deprecated (because DELAYED inserts are not supported); expect it to be
removed in a future release.

• Delayed_insert_threads

This status variable is deprecated (because DELAYED inserts are not supported); expect it to be
removed in a future release.

• Delayed_writes

1069

Server Status Variables

This status variable is deprecated (because DELAYED inserts are not supported); expect it to be
removed in a future release.

• dragnet.Status

The result of the most recent assignment to the dragnet.log_error_filter_rules system
variable, empty if no such assignment has occurred.

This variable was added in MySQL 8.0.12.

• Error_log_buffered_bytes

The number of bytes currently used in the Performance Schema error_log table. It is possible for
the value to decrease, for example, if a new event cannot fit until discarding an old event, but the
new event is smaller than the old one.

This variable was added in MySQL 8.0.22.

• Error_log_buffered_events

The number of events currently present in the Performance Schema error_log table. As with
Error_log_buffered_bytes, it is possible for the value to decrease.

This variable was added in MySQL 8.0.22.

• Error_log_expired_events

The number of events discarded from the Performance Schema error_log table to make room for
new events.

This variable was added in MySQL 8.0.22.

• Error_log_latest_write

The time of the last write to the Performance Schema error_log table.

This variable was added in MySQL 8.0.22.

• Flush_commands

The number of times the server flushes tables, whether because a user executed a FLUSH TABLES
statement or due to internal server operation. It is also incremented by receipt of a COM_REFRESH
packet. This is in contrast to Com_flush, which indicates how many FLUSH statements have been
executed, whether FLUSH TABLES, FLUSH LOGS, and so forth.

• Global_connection_memory

The memory used by all user connections to the server. Memory used by system threads
or by the MySQL root account is included in the total, but such threads or users are not
subject to disconnection due to memory usage. This memory is not calculated unless
global_connection_memory_tracking is enabled (disabled by default). The Performance
Schema must also be enabled.

You can control (indirectly) the frequency with which this variable is updated by setting
connection_memory_chunk_size.

The Global_connection_memory status variable was introduced in MySQL 8.0.28.

• Handler_commit

The number of internal COMMIT statements.

1070

Server Status Variables

• Handler_delete

The number of times that rows have been deleted from tables.

• Handler_external_lock

The server increments this variable for each call to its external_lock() function, which generally
occurs at the beginning and end of access to a table instance. There might be differences among
storage engines. This variable can be used, for example, to discover for a statement that accesses
a partitioned table how many partitions were pruned before locking occurred: Check how much the
counter increased for the statement, subtract 2 (2 calls for the table itself), then divide by 2 to get the
number of partitions locked.

• Handler_mrr_init

The number of times the server uses a storage engine's own Multi-Range Read implementation for
table access.

• Handler_prepare

A counter for the prepare phase of two-phase commit operations.

• Handler_read_first

The number of times the first entry in an index was read. If this value is high, it suggests that the
server is doing a lot of full index scans (for example, SELECT col1 FROM foo, assuming that
col1 is indexed).

• Handler_read_key

The number of requests to read a row based on a key. If this value is high, it is a good indication that
your tables are properly indexed for your queries.

• Handler_read_last

The number of requests to read the last key in an index. With ORDER BY, the server issues a first-
key request followed by several next-key requests, whereas with ORDER BY DESC, the server issues
a last-key request followed by several previous-key requests.

• Handler_read_next

The number of requests to read the next row in key order. This value is incremented if you are
querying an index column with a range constraint or if you are doing an index scan.

• Handler_read_prev

The number of requests to read the previous row in key order. This read method is mainly used to
optimize ORDER BY ... DESC.

• Handler_read_rnd

The number of requests to read a row based on a fixed position. This value is high if you are doing a
lot of queries that require sorting of the result. You probably have a lot of queries that require MySQL
to scan entire tables or you have joins that do not use keys properly.

• Handler_read_rnd_next

The number of requests to read the next row in the data file. This value is high if you are doing a lot
of table scans. Generally this suggests that your tables are not properly indexed or that your queries
are not written to take advantage of the indexes you have.

• Handler_rollback

1071

Server Status Variables

The number of requests for a storage engine to perform a rollback operation.

• Handler_savepoint

The number of requests for a storage engine to place a savepoint.

• Handler_savepoint_rollback

The number of requests for a storage engine to roll back to a savepoint.

• Handler_update

The number of requests to update a row in a table.

• Handler_write

The number of requests to insert a row in a table.

• Innodb_buffer_pool_dump_status

The progress of an operation to record the pages held in the InnoDB buffer pool, triggered by the
setting of innodb_buffer_pool_dump_at_shutdown or innodb_buffer_pool_dump_now.

For related information and examples, see Section 17.8.3.6, “Saving and Restoring the Buffer Pool
State”.

• Innodb_buffer_pool_load_status

The progress of an operation to warm up the InnoDB buffer pool by reading in a
set of pages corresponding to an earlier point in time, triggered by the setting of
innodb_buffer_pool_load_at_startup or innodb_buffer_pool_load_now.
If the operation introduces too much overhead, you can cancel it by setting
innodb_buffer_pool_load_abort.

For related information and examples, see Section 17.8.3.6, “Saving and Restoring the Buffer Pool
State”.

• Innodb_buffer_pool_bytes_data

The total number of bytes in the InnoDB buffer pool containing data. The number includes
both dirty and clean pages. For more accurate memory usage calculations than with
Innodb_buffer_pool_pages_data, when compressed tables cause the buffer pool to hold
pages of different sizes.

• Innodb_buffer_pool_pages_data

The number of pages in the InnoDB buffer pool containing data. The number includes both dirty and
clean pages. When using compressed tables, the reported Innodb_buffer_pool_pages_data
value may be larger than Innodb_buffer_pool_pages_total (Bug #59550).

• Innodb_buffer_pool_bytes_dirty

The total current number of bytes held in dirty pages in the InnoDB buffer pool. For more accurate
memory usage calculations than with Innodb_buffer_pool_pages_dirty, when compressed
tables cause the buffer pool to hold pages of different sizes.

• Innodb_buffer_pool_pages_dirty

The current number of dirty pages in the InnoDB buffer pool.

• Innodb_buffer_pool_pages_flushed

The number of requests to flush pages from the InnoDB buffer pool.

1072

Server Status Variables

• Innodb_buffer_pool_pages_free

The number of free pages in the InnoDB buffer pool.

• Innodb_buffer_pool_pages_latched

The number of latched pages in the InnoDB buffer pool. These are pages currently being read or
written, or that cannot be flushed or removed for some other reason. Calculation of this variable is
expensive, so it is available only when the UNIV_DEBUG system is defined at server build time.

• Innodb_buffer_pool_pages_misc

The number of pages in the InnoDB buffer pool that are busy because they have
been allocated for administrative overhead, such as row locks or the adaptive hash
index. This value can also be calculated as Innodb_buffer_pool_pages_total −
Innodb_buffer_pool_pages_free − Innodb_buffer_pool_pages_data. When using
compressed tables, Innodb_buffer_pool_pages_misc may report an out-of-bounds value (Bug
#59550).

• Innodb_buffer_pool_pages_total

The total size of the InnoDB buffer pool, in pages. When using compressed tables,
the reported Innodb_buffer_pool_pages_data value may be larger than
Innodb_buffer_pool_pages_total (Bug #59550)

• Innodb_buffer_pool_read_ahead

The number of pages read into the InnoDB buffer pool by the read-ahead background thread.

• Innodb_buffer_pool_read_ahead_evicted

The number of pages read into the InnoDB buffer pool by the read-ahead background thread that
were subsequently evicted without having been accessed by queries.

• Innodb_buffer_pool_read_ahead_rnd

The number of “random” read-aheads initiated by InnoDB. This happens when a query scans a
large portion of a table but in random order.

• Innodb_buffer_pool_read_requests

The number of logical read requests.

• Innodb_buffer_pool_reads

The number of logical reads that InnoDB could not satisfy from the buffer pool, and had to read
directly from disk.

• Innodb_buffer_pool_resize_status

The status of an operation to resize the InnoDB buffer pool dynamically, triggered by setting
the innodb_buffer_pool_size parameter dynamically. The innodb_buffer_pool_size
parameter is dynamic, which allows you to resize the buffer pool without restarting the server. See
Configuring InnoDB Buffer Pool Size Online for related information.

• Innodb_buffer_pool_resize_status_code

Reports status codes for tracking online buffer pool resizing operations. Each status code represents
a stage in a resizing operation. Status codes include:

• 0: No Resize operation in progress

• 1: Starting Resize

1073

Server Status Variables

• 2: Disabling AHI (Adaptive Hash Index)

• 3: Withdrawing Blocks

• 4: Acquiring Global Lock

• 5: Resizing Pool

• 6: Resizing Hash

• 7: Resizing Failed

You can use this status variable in conjunction with
Innodb_buffer_pool_resize_status_progress to track the progress of each stage of a
resizing operation. The Innodb_buffer_pool_resize_status_progress variable reports a
percentage value indicating the progress of the current stage.

For more information, see Monitoring Online Buffer Pool Resizing Progress.

• Innodb_buffer_pool_resize_status_progress

Reports a percentage value indicating the progress of the current stage of an
online buffer pool resizing operation. This variable is used in conjunction with
Innodb_buffer_pool_resize_status_code, which reports a status code indicating the current
stage of an online buffer pool resizing operation.

The percentage value is updated after each buffer pool instance is processed. As the status code
(reported by Innodb_buffer_pool_resize_status_code) changes from one status to another,
the percentage value is reset to 0.

For related information, see Monitoring Online Buffer Pool Resizing Progress.

• Innodb_buffer_pool_wait_free

Normally, writes to the InnoDB buffer pool happen in the background. When InnoDB needs
to read or create a page and no clean pages are available, InnoDB flushes some dirty pages
first and waits for that operation to finish. This counter counts instances of these waits. If
innodb_buffer_pool_size has been set properly, this value should be small.

• Innodb_buffer_pool_write_requests

The number of writes done to the InnoDB buffer pool.

• Innodb_data_fsyncs

The number of fsync() operations so far. The frequency of fsync() calls is influenced by the
setting of the innodb_flush_method configuration option.

Counts the number of fdatasync() operations if innodb_use_fdatasync is enabled.

• Innodb_data_pending_fsyncs

The current number of pending fsync() operations. The frequency of fsync() calls is influenced
by the setting of the innodb_flush_method configuration option.

• Innodb_data_pending_reads

The current number of pending reads.

• Innodb_data_pending_writes

The current number of pending writes.

1074

Server Status Variables

• Innodb_data_read

The amount of data read since the server was started (in bytes).

• Innodb_data_reads

The total number of data reads (OS file reads).

• Innodb_data_writes

The total number of data writes.

• Innodb_data_written

The amount of data written so far, in bytes.

• Innodb_dblwr_pages_written

The number of pages that have been written to the doublewrite buffer. See Section 17.11.1, “InnoDB
Disk I/O”.

• Innodb_dblwr_writes

The number of doublewrite operations that have been performed. See Section 17.11.1, “InnoDB Disk
I/O”.

• Innodb_have_atomic_builtins

Indicates whether the server was built with atomic instructions.

• Innodb_log_waits

The number of times that the log buffer was too small and a wait was required for it to be flushed
before continuing.

• Innodb_log_write_requests

The number of write requests for the InnoDB redo log.

• Innodb_log_writes

The number of physical writes to the InnoDB redo log file.

• Innodb_num_open_files

The number of files InnoDB currently holds open.

• Innodb_os_log_fsyncs

The number of fsync() writes done to the InnoDB redo log files.

• Innodb_os_log_pending_fsyncs

The number of pending fsync() operations for the InnoDB redo log files.

• Innodb_os_log_pending_writes

The number of pending writes to the InnoDB redo log files.

• Innodb_os_log_written

The number of bytes written to the InnoDB redo log files.

• Innodb_page_size

1075

Server Status Variables

InnoDB page size (default 16KB). Many values are counted in pages; the page size enables them to
be easily converted to bytes.

• Innodb_pages_created

The number of pages created by operations on InnoDB tables.

• Innodb_pages_read

The number of pages read from the InnoDB buffer pool by operations on InnoDB tables.

• Innodb_pages_written

The number of pages written by operations on InnoDB tables.

• Innodb_redo_log_enabled

Whether redo logging is enabled or disabled. See Disabling Redo Logging.

This variable was added in MySQL 8.0.21.

• Innodb_redo_log_capacity_resized

The total redo log capacity for all redo log files, in bytes, after the last completed capacity resize
operation. The value includes ordinary and spare redo log files.

If there is no pending resize down operation, Innodb_redo_log_capacity_resized should be
equal to the innodb_redo_log_capacity setting if it's used, or it's ((innodb_log_files_in_group
* innodb_log_file_size)) if those are used instead. See the innodb_redo_log_capacity
documentation for further clarification. Resize up operations are instantaneous.

For related information, see Section 17.6.5, “Redo Log”.

This variable was added in MySQL 8.0.30.

• Innodb_redo_log_checkpoint_lsn

The redo log checkpoint LSN. For related information, see Section 17.6.5, “Redo Log”.

This variable was added in MySQL 8.0.30.

• Innodb_redo_log_current_lsn

The current LSN represents the last written position in the redo log buffer. InnoDB writes data to the
redo log buffer inside the MySQL process before requesting that the operating system write the data
to the current redo log file. For related information, see Section 17.6.5, “Redo Log”.

This variable was added in MySQL 8.0.30.

• Innodb_redo_log_flushed_to_disk_lsn

The flushed-to-disk LSN. InnoDB first writes data to the redo log and then requests that the
operating system flush the data to disk. The flushed-to-disk LSN represents the last position in the
redo log that InnoDB knows has been flushed to disk. For related information, see Section 17.6.5,
“Redo Log”.

This variable was added in MySQL 8.0.30.

1076

Server Status Variables

• Innodb_redo_log_logical_size

A data size value, in bytes, representing the LSN range containing in-use redo log data, spanning
from the oldest block required by redo log consumers to the latest written block. For related
information, see Section 17.6.5, “Redo Log”.

This variable was added in MySQL 8.0.30.

• Innodb_redo_log_physical_size

The amount of disk space in bytes currently consumed by all redo log files on disk, excluding spare
redo log files. For related information, see Section 17.6.5, “Redo Log”.

This variable was added in MySQL 8.0.30.

• Innodb_redo_log_read_only

Whether the redo log is read-only.

This variable was added in MySQL 8.0.30.

• Innodb_redo_log_resize_status

The redo log resize status indicating the current state of the redo log capacity resize mechanism.
Possible values include:

• OK: There are no issues and no pending redo log capacity resize operations.

• Resizing down: A resize down operation is in progress.

A resize up operation is instantaneous and therefore has no pending status.

This variable was added in MySQL 8.0.30.

• Innodb_redo_log_uuid

The redo log UUID.

This variable was added in MySQL 8.0.30.

• Innodb_row_lock_current_waits

The number of row locks currently waited for by operations on InnoDB tables.

• Innodb_row_lock_time

The total time spent in acquiring row locks for InnoDB tables, in milliseconds.

• Innodb_row_lock_time_avg

The average time to acquire a row lock for InnoDB tables, in milliseconds.

• Innodb_row_lock_time_max

The maximum time to acquire a row lock for InnoDB tables, in milliseconds.

• Innodb_row_lock_waits

The number of times operations on InnoDB tables had to wait for a row lock.

• Innodb_rows_deleted

The number of rows deleted from InnoDB tables.

1077

Server Status Variables

• Innodb_rows_inserted

The number of rows inserted into InnoDB tables.

• Innodb_rows_read

The number of rows read from InnoDB tables.

• Innodb_rows_updated

The estimated number of rows updated in InnoDB tables.

Note

This value is not meant to be 100% accurate. For an accurate (but more
expensive) result, use ROW_COUNT().

• Innodb_system_rows_deleted

The number of rows deleted from InnoDB tables belonging to system-created schemas.

• Innodb_system_rows_inserted

The number of rows inserted into InnoDB tables belonging to system-created schemas.

• Innodb_system_rows_updated

The number of rows updated in InnoDB tables belonging to system-created schemas.

• Innodb_system_rows_read

The number of rows read from InnoDB tables belonging to system-created schemas.

• Innodb_truncated_status_writes

The number of times output from the SHOW ENGINE INNODB STATUS statement has been
truncated.

• Innodb_undo_tablespaces_active

The number of active undo tablespaces. Includes both implicit (InnoDB-created) and explicit (user-
created) undo tablespaces. For information about undo tablespaces, see Section 17.6.3.4, “Undo
Tablespaces”.

• Innodb_undo_tablespaces_explicit

The number of user-created undo tablespaces. For information about undo tablespaces, see
Section 17.6.3.4, “Undo Tablespaces”.

• Innodb_undo_tablespaces_implicit

The number of undo tablespaces created by InnoDB. Two default undo tablespaces are created
by InnoDB when the MySQL instance is initialized. For information about undo tablespaces, see
Section 17.6.3.4, “Undo Tablespaces”.

• Innodb_undo_tablespaces_total

The total number of undo tablespaces. Includes both implicit (InnoDB-created) and explicit (user-
created) undo tablespaces, active and inactive. For information about undo tablespaces, see
Section 17.6.3.4, “Undo Tablespaces”.

1078

Server Status Variables

• Key_blocks_not_flushed

The number of key blocks in the MyISAM key cache that have changed but have not yet been
flushed to disk.

• Key_blocks_unused

The number of unused blocks in the MyISAM key cache. You can use this value to determine how
much of the key cache is in use; see the discussion of key_buffer_size in Section 7.1.8, “Server
System Variables”.

• Key_blocks_used

The number of used blocks in the MyISAM key cache. This value is a high-water mark that indicates
the maximum number of blocks that have ever been in use at one time.

• Key_read_requests

The number of requests to read a key block from the MyISAM key cache.

• Key_reads

The number of physical reads of a key block from disk into the MyISAM key cache. If Key_reads
is large, then your key_buffer_size value is probably too small. The cache miss rate can be
calculated as Key_reads/Key_read_requests.

• Key_write_requests

The number of requests to write a key block to the MyISAM key cache.

• Key_writes

The number of physical writes of a key block from the MyISAM key cache to disk.

• Last_query_cost

The total cost of the last compiled query as computed by the query optimizer. This is useful for
comparing the cost of different query plans for the same query. The default value of 0 means that no
query has been compiled yet. The default value is 0. Last_query_cost has session scope.

In MySQL 8.0.16 and later, this variable shows the cost of queries that have multiple query blocks,
summing the cost estimates of each query block, estimating how many times non-cacheable
subqueries are executed, and multiplying the cost of those query blocks by the number of subquery
executions. (Bug #92766, Bug #28786951) Prior to MySQL 8.0.16, Last_query_cost was
computed accurately only for simple, “flat” queries, but not for complex queries such as those
containing subqueries or UNION. (For the latter, the value was set to 0.)

• Last_query_partial_plans

The number of iterations the query optimizer made in execution plan construction for the previous
query.

Last_query_partial_plans has session scope.

• Locked_connects

The number of attempts to connect to locked user accounts. For information about account locking
and unlocking, see Section 8.2.20, “Account Locking”.

• Max_execution_time_exceeded

The number of SELECT statements for which the execution timeout was exceeded.

1079

Server Status Variables

• Max_execution_time_set

The number of SELECT statements for which a nonzero execution timeout was set. This includes
statements that include a nonzero MAX_EXECUTION_TIME optimizer hint, and statements that
include no such hint but execute while the timeout indicated by the max_execution_time system
variable is nonzero.

• Max_execution_time_set_failed

The number of SELECT statements for which the attempt to set an execution timeout failed.

• Max_used_connections

The maximum number of connections that have been in use simultaneously since the server started.

• Max_used_connections_time

The time at which Max_used_connections reached its current value.

• Not_flushed_delayed_rows

This status variable is deprecated (because DELAYED inserts are not supported); expect it to be
removed in a future release.

• mecab_charset

The character set currently used by the MeCab full-text parser plugin. For related information, see
Section 14.9.9, “MeCab Full-Text Parser Plugin”.

• Ongoing_anonymous_transaction_count

Shows the number of ongoing transactions which have been marked as anonymous. This can be
used to ensure that no further transactions are waiting to be processed.

• Ongoing_anonymous_gtid_violating_transaction_count

This status variable is only available in debug builds. Shows the number of ongoing transactions
which use gtid_next=ANONYMOUS and that violate GTID consistency.

• Ongoing_automatic_gtid_violating_transaction_count

This status variable is only available in debug builds. Shows the number of ongoing transactions
which use gtid_next=AUTOMATIC and that violate GTID consistency.

• Open_files

The number of files that are open. This count includes regular files opened by the server. It does
not include other types of files such as sockets or pipes. Also, the count does not include files that
storage engines open using their own internal functions rather than asking the server level to do so.

• Open_streams

The number of streams that are open (used mainly for logging).

• Open_table_definitions

The number of cached table definitions.

• Open_tables

The number of tables that are open.

• Opened_files

1080

Server Status Variables

The number of files that have been opened with my_open() (a mysys library function). Parts of the
server that open files without using this function do not increment the count.

• Opened_table_definitions

The number of table definitions that have been cached.

• Opened_tables

The number of tables that have been opened. If Opened_tables is big, your table_open_cache
value is probably too small.

• Performance_schema_xxx

Performance Schema status variables are listed in Section 29.16, “Performance Schema Status
Variables”. These variables provide information about instrumentation that could not be loaded or
created due to memory constraints.

• Prepared_stmt_count

The current number of prepared statements. (The maximum number of statements is given by the
max_prepared_stmt_count system variable.)

• Queries

The number of statements executed by the server. This variable includes statements executed within
stored programs, unlike the Questions variable. It does not count COM_PING or COM_STATISTICS
commands.

The discussion at the beginning of this section indicates how to relate this statement-counting status
variable to other such variables.

• Questions

The number of statements executed by the server. This includes only statements sent to the server
by clients and not statements executed within stored programs, unlike the Queries variable. This
variable does not count COM_PING, COM_STATISTICS, COM_STMT_PREPARE, COM_STMT_CLOSE,
or COM_STMT_RESET commands.

The discussion at the beginning of this section indicates how to relate this statement-counting status
variable to other such variables.

• Replica_open_temp_tables

From MySQL 8.0.26, use Replica_open_temp_tables in place of Slave_open_temp_tables,
which is deprecated from that release. In releases before MySQL 8.0.26, use
Slave_open_temp_tables.

Replica_open_temp_tables shows the number of temporary tables that the replication SQL
thread currently has open. If the value is greater than zero, it is not safe to shut down the replica; see
Section 19.5.1.31, “Replication and Temporary Tables”. This variable reports the total count of open
temporary tables for all replication channels.

• Replica_rows_last_search_algorithm_used

From MySQL 8.0.26, use Replica_rows_last_search_algorithm_used in place of
Slave_rows_last_search_algorithm_used, which is deprecated from that release. In
releases before MySQL 8.0.26, use Slave_rows_last_search_algorithm_used.

Replica_rows_last_search_algorithm_used shows the search algorithm that was most
recently used by this replica to locate rows for row-based replication. The result shows whether

1081

Server Status Variables

the replica used indexes, a table scan, or hashing as the search algorithm for the last transaction
executed on any channel.

The method used depends on the setting for the slave_rows_search_algorithms system
variable (which is now deprecated), and the keys that are available on the relevant table.

This variable is available only for debug builds of MySQL.

• Resource_group_supported

Indicates whether the resource group feature is supported.

On some platforms or MySQL server configurations, resource groups are unavailable or have
limitations. In particular, Linux systems might require a manual step for some installation methods.
For details, see Resource Group Restrictions.

• Rpl_semi_sync_master_clients

The number of semisynchronous replicas.

Rpl_semi_sync_master_clients is available when the rpl_semi_sync_master
(semisync_master.so library) plugin was installed on the replica to set up semisynchronous
replication. If the rpl_semi_sync_source plugin (semisync_source.so library) was installed,
Rpl_semi_sync_source_clients is available instead.

• Rpl_semi_sync_master_net_avg_wait_time

The average time in microseconds the source waited for a replica reply. This variable is always 0,
and is deprecated; expect it to be removed in a future version.

Rpl_semi_sync_master_net_avg_wait_time is available when the rpl_semi_sync_master
(semisync_master.so library) plugin was installed on the replica to set up semisynchronous
replication. If the rpl_semi_sync_source plugin (semisync_source.so library) was installed,
Rpl_semi_sync_source_net_avg_wait_time is available instead.

• Rpl_semi_sync_master_net_wait_time

The total time in microseconds the source waited for replica replies. This variable is always 0, and is
deprecated; expect it to be removed in a future version.

Rpl_semi_sync_master_net_wait_time is available when the rpl_semi_sync_master
(semisync_master.so library) plugin was installed on the replica to set up semisynchronous
replication. If the rpl_semi_sync_source plugin (semisync_source.so library) was installed,
Rpl_semi_sync_source_net_wait_time is available instead.

• Rpl_semi_sync_master_net_waits

The total number of times the source waited for replica replies.

Rpl_semi_sync_master_net_waits is available when the rpl_semi_sync_master
(semisync_master.so library) plugin was installed on the replica to set up semisynchronous
replication. If the rpl_semi_sync_source plugin (semisync_source.so library) was installed,
Rpl_semi_sync_source_net_waits is available instead.

• Rpl_semi_sync_master_no_times

The number of times the source turned off semisynchronous replication.

Rpl_semi_sync_master_no_times is available when the rpl_semi_sync_master
(semisync_master.so library) plugin was installed on the replica to set up semisynchronous
replication. If the rpl_semi_sync_source plugin (semisync_source.so library) was installed,
Rpl_semi_sync_source_no_times is available instead.

1082

Server Status Variables

• Rpl_semi_sync_master_no_tx

The number of commits that were not acknowledged successfully by a replica.

Rpl_semi_sync_master_no_tx is available when the rpl_semi_sync_master
(semisync_master.so library) plugin was installed on the replica to set up semisynchronous
replication. If the rpl_semi_sync_source plugin (semisync_source.so library) was installed,
Rpl_semi_sync_source_no_tx is available instead.

• Rpl_semi_sync_master_status

Whether semisynchronous replication currently is operational on the source. The value is ON if the
plugin has been enabled and a commit acknowledgment has occurred. It is OFF if the plugin is not
enabled or the source has fallen back to asynchronous replication due to commit acknowledgment
timeout.

Rpl_semi_sync_master_status is available when the rpl_semi_sync_master
(semisync_master.so library) plugin was installed on the replica to set up semisynchronous
replication. If the rpl_semi_sync_source plugin (semisync_source.so library) was installed,
Rpl_semi_sync_source_status is available instead.

• Rpl_semi_sync_master_timefunc_failures

The number of times the source failed when calling time functions such as gettimeofday().

Rpl_semi_sync_master_timefunc_failures is available when the rpl_semi_sync_master
(semisync_master.so library) plugin was installed on the replica to set up semisynchronous
replication. If the rpl_semi_sync_source plugin (semisync_source.so library) was installed,
Rpl_semi_sync_source_timefunc_failures is available instead.

• Rpl_semi_sync_master_tx_avg_wait_time

The average time in microseconds the source waited for each transaction.

Rpl_semi_sync_master_tx_avg_wait_time is available when the rpl_semi_sync_master
(semisync_master.so library) plugin was installed on the replica to set up semisynchronous
replication. If the rpl_semi_sync_source plugin (semisync_source.so library) was installed,
Rpl_semi_sync_source_tx_avg_wait_time is available instead.

• Rpl_semi_sync_master_tx_wait_time

The total time in microseconds the source waited for transactions.

Rpl_semi_sync_master_tx_wait_time is available when the rpl_semi_sync_master
(semisync_master.so library) plugin was installed on the replica to set up semisynchronous
replication. If the rpl_semi_sync_source plugin (semisync_source.so library) was installed,
Rpl_semi_sync_source_tx_wait_time is available instead.

• Rpl_semi_sync_master_tx_waits

The total number of times the source waited for transactions.

Rpl_semi_sync_master_tx_waits is available when the rpl_semi_sync_master
(semisync_master.so library) plugin was installed on the replica to set up semisynchronous
replication. If the rpl_semi_sync_source plugin (semisync_source.so library) was installed,
Rpl_semi_sync_source_tx_waits is available instead.

• Rpl_semi_sync_master_wait_pos_backtraverse

The total number of times the source waited for an event with binary coordinates lower than events
waited for previously. This can occur when the order in which transactions start waiting for a reply is
different from the order in which their binary log events are written.

1083

Server Status Variables

Rpl_semi_sync_master_wait_pos_backtraverse is available when the
rpl_semi_sync_master (semisync_master.so library) plugin was installed on the replica to set
up semisynchronous replication. If the rpl_semi_sync_source plugin (semisync_source.so
library) was installed, Rpl_semi_sync_source_wait_pos_backtraverse is available instead.

• Rpl_semi_sync_master_wait_sessions

The number of sessions currently waiting for replica replies.

Rpl_semi_sync_master_wait_sessions is available when the rpl_semi_sync_master
(semisync_master.so library) plugin was installed on the replica to set up semisynchronous
replication. If the rpl_semi_sync_source plugin (semisync_source.so library) was installed,
Rpl_semi_sync_source_wait_sessions is available instead.

• Rpl_semi_sync_master_yes_tx

The number of commits that were acknowledged successfully by a replica.

Rpl_semi_sync_master_yes_tx is available when the rpl_semi_sync_master
(semisync_master.so library) plugin was installed on the replica to set up semisynchronous
replication. If the rpl_semi_sync_source plugin (semisync_source.so library) was installed,
Rpl_semi_sync_source_yes_tx is available instead.

• Rpl_semi_sync_source_clients

The number of semisynchronous replicas.

Rpl_semi_sync_source_clients is available when the rpl_semi_sync_source
(semisync_source.so library) plugin was installed on the source to set up semisynchronous
replication. If the rpl_semi_sync_master plugin (semisync_master.so library) was installed,
Rpl_semi_sync_master_clients is available instead.

• Rpl_semi_sync_source_net_avg_wait_time

The average time in microseconds the source waited for a replica reply. This variable is always 0,
and is deprecated; expect it to be removed in a future version.

Rpl_semi_sync_source_net_avg_wait_time is available when the rpl_semi_sync_source
(semisync_source.so library) plugin was installed on the source to set up semisynchronous
replication. If the rpl_semi_sync_master plugin (semisync_master.so library) was installed,
Rpl_semi_sync_master_net_avg_wait_time is available instead.

• Rpl_semi_sync_source_net_wait_time

The total time in microseconds the source waited for replica replies. This variable is always 0, and is
deprecated; expect it to be removed in a future version.

Rpl_semi_sync_source_net_wait_time is available when the rpl_semi_sync_source
(semisync_source.so library) plugin was installed on the source to set up semisynchronous
replication. If the rpl_semi_sync_master plugin (semisync_master.so library) was installed,
Rpl_semi_sync_master_net_wait_time is available instead.

• Rpl_semi_sync_source_net_waits

The total number of times the source waited for replica replies.

Rpl_semi_sync_source_net_waits is available when the rpl_semi_sync_source
(semisync_source.so library) plugin was installed on the source to set up semisynchronous
replication. If the rpl_semi_sync_master plugin (semisync_master.so library) was installed,
Rpl_semi_sync_master_net_waits is available instead.

1084

Server Status Variables

• Rpl_semi_sync_source_no_times

The number of times the source turned off semisynchronous replication.

Rpl_semi_sync_source_no_times is available when the rpl_semi_sync_source
(semisync_source.so library) plugin was installed on the source to set up semisynchronous
replication. If the rpl_semi_sync_master plugin (semisync_master.so library) was installed,
Rpl_semi_sync_master_no_times is available instead.

• Rpl_semi_sync_source_no_tx

The number of commits that were not acknowledged successfully by a replica.

Rpl_semi_sync_source_no_tx is available when the rpl_semi_sync_source
(semisync_source.so library) plugin was installed on the source to set up semisynchronous
replication. If the rpl_semi_sync_master plugin (semisync_master.so library) was installed,
Rpl_semi_sync_master_no_tx is available instead.

• Rpl_semi_sync_source_status

Whether semisynchronous replication currently is operational on the source. The value is ON if the
plugin has been enabled and a commit acknowledgment has occurred. It is OFF if the plugin is not
enabled or the source has fallen back to asynchronous replication due to commit acknowledgment
timeout.

Rpl_semi_sync_source_status is available when the rpl_semi_sync_source
(semisync_source.so library) plugin was installed on the source to set up semisynchronous
replication. If the rpl_semi_sync_master plugin (semisync_master.so library) was installed,
Rpl_semi_sync_master_status is available instead.

• Rpl_semi_sync_source_timefunc_failures

The number of times the source failed when calling time functions such as gettimeofday().

Rpl_semi_sync_source_timefunc_failures is available when the rpl_semi_sync_source
(semisync_source.so library) plugin was installed on the source to set up semisynchronous
replication. If the rpl_semi_sync_master plugin (semisync_master.so library) was installed,
Rpl_semi_sync_master_timefunc_failures is available instead.

• Rpl_semi_sync_source_tx_avg_wait_time

The average time in microseconds the source waited for each transaction.

Rpl_semi_sync_source_tx_avg_wait_time is available when the rpl_semi_sync_source
(semisync_source.so library) plugin was installed on the source to set up semisynchronous
replication. If the rpl_semi_sync_master plugin (semisync_master.so library) was installed,
Rpl_semi_sync_master_tx_avg_wait_time is available instead.

• Rpl_semi_sync_source_tx_wait_time

The total time in microseconds the source waited for transactions.

Rpl_semi_sync_source_tx_wait_time is available when the rpl_semi_sync_source
(semisync_source.so library) plugin was installed on the source to set up semisynchronous
replication. If the rpl_semi_sync_master plugin (semisync_master.so library) was installed,
Rpl_semi_sync_master_tx_wait_time is available instead.

1085

Server Status Variables

• Rpl_semi_sync_source_tx_waits

The total number of times the source waited for transactions.

Rpl_semi_sync_source_tx_waits is available when the rpl_semi_sync_source
(semisync_source.so library) plugin was installed on the source to set up semisynchronous
replication. If the rpl_semi_sync_master plugin (semisync_master.so library) was installed,
Rpl_semi_sync_master_tx_waits is available instead.

• Rpl_semi_sync_source_wait_pos_backtraverse

The total number of times the source waited for an event with binary coordinates lower than events
waited for previously. This can occur when the order in which transactions start waiting for a reply is
different from the order in which their binary log events are written.

Rpl_semi_sync_source_wait_pos_backtraverse is available when
the rpl_semi_sync_source (semisync_source.so library) plugin
was installed on the source to set up semisynchronous replication. If the
rpl_semi_sync_master plugin (semisync_master.so library) was installed,
Rpl_semi_sync_master_wait_pos_backtraverse is available instead.

• Rpl_semi_sync_source_wait_sessions

The number of sessions currently waiting for replica replies.

Rpl_semi_sync_source_wait_sessions is available when the rpl_semi_sync_source
(semisync_source.so library) plugin was installed on the source to set up semisynchronous
replication. If the rpl_semi_sync_master plugin (semisync_master.so library) was installed,
Rpl_semi_sync_master_wait_sessions is available instead.

• Rpl_semi_sync_source_yes_tx

The number of commits that were acknowledged successfully by a replica.

Rpl_semi_sync_source_yes_tx is available when the rpl_semi_sync_source
(semisync_source.so library) plugin was installed on the source to set up semisynchronous
replication. If the rpl_semi_sync_master plugin (semisync_master.so library) was installed,
Rpl_semi_sync_master_yes_tx is available instead.

• Rpl_semi_sync_replica_status

Shows whether semisynchronous replication is currently operational on the replica. This is ON if the
plugin has been enabled and the replication I/O (receiver) thread is running, OFF otherwise.

Rpl_semi_sync_replica_status is available when the rpl_semi_sync_replica
(semisync_replica.so library) plugin was installed on the replica to set up semisynchronous
replication. If the rpl_semi_sync_slave plugin (semisync_slave.so library) was installed,
Rpl_semi_sync_slave_status is available instead.

• Rpl_semi_sync_slave_status

Shows whether semisynchronous replication is currently operational on the replica. This is ON if the
plugin has been enabled and the replication I/O (receiver) thread is running, OFF otherwise.

Rpl_semi_sync_slave_status is available when the rpl_semi_sync_slave
(semisync_slave.so library) plugin was installed on the replica to set up semisynchronous
replication. If the rpl_semi_sync_replica plugin (semisync_replica.so library) was
installed, Rpl_semi_sync_replica_status is available instead.

1086

Server Status Variables

• Rsa_public_key

The value of this variable is the public key used by the sha256_password authentication
plugin for RSA key pair-based password exchange. The value is nonempty only if the
server successfully initializes the private and public keys in the files named by the
sha256_password_private_key_path and sha256_password_public_key_path system
variables. The value of Rsa_public_key comes from the latter file.

For information about sha256_password, see Section 8.4.1.3, “SHA-256 Pluggable
Authentication”.

• Secondary_engine_execution_count

The number of queries offloaded to a secondary engine. This variable was added in MySQL 8.0.13.

For use with HeatWave. See HeatWave User Guide.

• Select_full_join

The number of joins that perform table scans because they do not use indexes. If this value is not 0,
you should carefully check the indexes of your tables.

• Select_full_range_join

The number of joins that used a range search on a reference table.

• Select_range

The number of joins that used ranges on the first table. This is normally not a critical issue even if the
value is quite large.

• Select_range_check

The number of joins without keys that check for key usage after each row. If this is not 0, you should
carefully check the indexes of your tables.

• Select_scan

The number of joins that did a full scan of the first table.

• Slave_open_temp_tables

From MySQL 8.0.26, Slave_open_temp_tables is deprecated and the alias
Replica_open_temp_tables should be used instead. In releases before MySQL 8.0.26, use
Slave_open_temp_tables.

Slave_open_temp_tables shows the number of temporary tables that the replication SQL thread
currently has open. If the value is greater than zero, it is not safe to shut down the replica; see
Section 19.5.1.31, “Replication and Temporary Tables”. This variable reports the total count of open
temporary tables for all replication channels.

• Slave_rows_last_search_algorithm_used

From MySQL 8.0.26, Slave_rows_last_search_algorithm_used is deprecated and the alias
Replica_rows_last_search_algorithm_used should be used instead. In releases before
MySQL 8.0.26, use Slave_rows_last_search_algorithm_used.

Slave_rows_last_search_algorithm_used shows the search algorithm that was most
recently used by this replica to locate rows for row-based replication. The result shows whether

1087

Server Status Variables

the replica used indexes, a table scan, or hashing as the search algorithm for the last transaction
executed on any channel.

The method used depends on the setting for the slave_rows_search_algorithms system
variable, and the keys that are available on the relevant table.

This variable is available only for debug builds of MySQL.

• Slow_launch_threads

The number of threads that have taken more than slow_launch_time seconds to create.

• Slow_queries

The number of queries that have taken more than long_query_time seconds. This counter
increments regardless of whether the slow query log is enabled. For information about that log, see
Section 7.4.5, “The Slow Query Log”.

• Sort_merge_passes

The number of merge passes that the sort algorithm has had to do. If this value is large, you should
consider increasing the value of the sort_buffer_size system variable.

• Sort_range

The number of sorts that were done using ranges.

• Sort_rows

The number of sorted rows.

• Sort_scan

The number of sorts that were done by scanning the table.

• Ssl_accept_renegotiates

The number of negotiates needed to establish the connection.

• Ssl_accepts

The number of accepted SSL connections.

• Ssl_callback_cache_hits

The number of callback cache hits.

• Ssl_cipher

The current encryption cipher (empty for unencrypted connections).

• Ssl_cipher_list

The list of possible SSL ciphers (empty for non-SSL connections). If MySQL supports TLSv1.3, the
value includes the possible TLSv1.3 ciphersuites. See Section 8.3.2, “Encrypted Connection TLS
Protocols and Ciphers”.

• Ssl_client_connects

The number of SSL connection attempts to an SSL-enabled replication source server.

1088

Server Status Variables

• Ssl_connect_renegotiates

The number of negotiates needed to establish the connection to an SSL-enabled replication source
server.

• Ssl_ctx_verify_depth

The SSL context verification depth (how many certificates in the chain are tested).

• Ssl_ctx_verify_mode

The SSL context verification mode.

• Ssl_default_timeout

The default SSL timeout.

• Ssl_finished_accepts

The number of successful SSL connections to the server.

• Ssl_finished_connects

The number of successful replica connections to an SSL-enabled replication source server.

• Ssl_server_not_after

The last date for which the SSL certificate is valid. To check SSL certificate expiration information,
use this statement:

mysql> SHOW STATUS LIKE 'Ssl_server_not%';
+-----------------------+--------------------------+
| Variable_name         | Value                    |
+-----------------------+--------------------------+
| Ssl_server_not_after  | Apr 28 14:16:39 2025 GMT |
| Ssl_server_not_before | May  1 14:16:39 2015 GMT |
+-----------------------+--------------------------+

• Ssl_server_not_before

The first date for which the SSL certificate is valid.

• Ssl_session_cache_hits

The number of SSL session cache hits.

• Ssl_session_cache_misses

The number of SSL session cache misses.

• Ssl_session_cache_mode

The SSL session cache mode. When the value of the ssl_session_cache_mode server variable
is ON, the value of the Ssl_session_cache_mode status variable is SERVER.

• Ssl_session_cache_overflows

The number of SSL session cache overflows.

• Ssl_session_cache_size

The SSL session cache size.

• Ssl_session_cache_timeout

The timeout value in seconds of SSL sessions in the cache.

1089

Server Status Variables

• Ssl_session_cache_timeouts

The number of SSL session cache timeouts.

• Ssl_sessions_reused

This is equal to 0 if TLS was not used in the current MySQL session, or if a TLS session has not
been reused; otherwise it is equal to 1.

Ssl_sessions_reused has session scope.

• Ssl_used_session_cache_entries

How many SSL session cache entries were used.

• Ssl_verify_depth

The verification depth for replication SSL connections.

• Ssl_verify_mode

The verification mode used by the server for a connection that uses SSL. The value is a bitmask; bits
are defined in the openssl/ssl.h header file:

# define SSL_VERIFY_NONE                 0x00
# define SSL_VERIFY_PEER                 0x01
# define SSL_VERIFY_FAIL_IF_NO_PEER_CERT 0x02
# define SSL_VERIFY_CLIENT_ONCE          0x04

SSL_VERIFY_PEER indicates that the server asks for a client certificate. If the client
supplies one, the server performs verification and proceeds only if verification is successful.
SSL_VERIFY_CLIENT_ONCE indicates that a request for the client certificate is performed only in
the initial handshake.

• Ssl_version

The SSL protocol version of the connection (for example, TLSv1). If the connection is not encrypted,
the value is empty.

• Table_locks_immediate

The number of times that a request for a table lock could be granted immediately.

• Table_locks_waited

The number of times that a request for a table lock could not be granted immediately and a wait was
needed. If this is high and you have performance problems, you should first optimize your queries,
and then either split your table or tables or use replication.

• Table_open_cache_hits

The number of hits for open tables cache lookups.

• Table_open_cache_misses

The number of misses for open tables cache lookups.

• Table_open_cache_overflows

The number of overflows for the open tables cache. This is the number of times, after a table is
opened or closed, a cache instance has an unused entry and the size of the instance is larger than
table_open_cache / table_open_cache_instances.

• Tc_log_max_pages_used

1090

Server Status Variables

For the memory-mapped implementation of the log that is used by mysqld when it acts as
the transaction coordinator for recovery of internal XA transactions, this variable indicates
the largest number of pages used for the log since the server started. If the product of
Tc_log_max_pages_used and Tc_log_page_size is always significantly less than the log
size, the size is larger than necessary and can be reduced. (The size is set by the --log-tc-
size option. This variable is unused: It is unneeded for binary log-based recovery, and the memory-
mapped recovery log method is not used unless the number of storage engines that are capable
of two-phase commit and that support XA transactions is greater than one. (InnoDB is the only
applicable engine.)

• Tc_log_page_size

The page size used for the memory-mapped implementation of the XA recovery log. The default
value is determined using getpagesize(). This variable is unused for the same reasons as
described for Tc_log_max_pages_used.

• Tc_log_page_waits

For the memory-mapped implementation of the recovery log, this variable increments each time
the server was not able to commit a transaction and had to wait for a free page in the log. If this
value is large, you might want to increase the log size (with the --log-tc-size option). For binary
log-based recovery, this variable increments each time the binary log cannot be closed because
there are two-phase commits in progress. (The close operation waits until all such transactions are
finished.)

• Telemetry_traces_supported

Whether server telemetry traces is supported.

For more information, see the Server telemetry traces service section in the MySQL Source Code
documentation.

• Threads_cached

The number of threads in the thread cache.

• Threads_connected

The number of currently open connections.

• Threads_created

The number of threads created to handle connections. If Threads_created is big, you may
want to increase the thread_cache_size value. The cache miss rate can be calculated as
Threads_created/Connections.

• Threads_running

The number of threads that are not sleeping.

• Tls_library_version

The runtime version of the OpenSSL library that is in use for this MySQL instance.

This variable was added in MySQL 8.0.30.

• Uptime

The number of seconds that the server has been up.

• Uptime_since_flush_status

1091

Server SQL Modes

The number of seconds since the most recent FLUSH STATUS statement.

7.1.11 Server SQL Modes

The MySQL server can operate in different SQL modes, and can apply these modes differently for
different clients, depending on the value of the sql_mode system variable. DBAs can set the global
SQL mode to match site server operating requirements, and each application can set its session SQL
mode to its own requirements.

Modes affect the SQL syntax MySQL supports and the data validation checks it performs. This makes
it easier to use MySQL in different environments and to use MySQL together with other database
servers.

• Setting the SQL Mode

• The Most Important SQL Modes

• Full List of SQL Modes

• Combination SQL Modes

• Strict SQL Mode

• Comparison of the IGNORE Keyword and Strict SQL Mode

For answers to questions often asked about server SQL modes in MySQL, see Section A.3, “MySQL
8.0 FAQ: Server SQL Mode”.

When working with InnoDB tables, consider also the innodb_strict_mode system variable. It
enables additional error checks for InnoDB tables.

Setting the SQL Mode

The default SQL mode in MySQL 8.0 includes these modes: ONLY_FULL_GROUP_BY,
STRICT_TRANS_TABLES, NO_ZERO_IN_DATE, NO_ZERO_DATE, ERROR_FOR_DIVISION_BY_ZERO,
and NO_ENGINE_SUBSTITUTION.

To set the SQL mode at server startup, use the --sql-mode="modes" option on the command
line, or sql-mode="modes" in an option file such as my.cnf (Unix operating systems) or my.ini
(Windows). modes is a list of different modes separated by commas. To clear the SQL mode explicitly,
set it to an empty string using --sql-mode="" on the command line, or sql-mode="" in an option
file.

Note

MySQL installation programs may configure the SQL mode during the
installation process.

If the SQL mode differs from the default or from what you expect, check for a
setting in an option file that the server reads at startup.

To change the SQL mode at runtime, set the global or session sql_mode system variable using a SET
statement:

SET GLOBAL sql_mode = 'modes';
SET SESSION sql_mode = 'modes';

Setting the GLOBAL variable requires the SYSTEM_VARIABLES_ADMIN privilege (or the deprecated
SUPER privilege) and affects the operation of all clients that connect from that time on. Setting the
SESSION variable affects only the current client. Each client can change its session sql_mode value at
any time.

1092

Server SQL Modes

To determine the current global or session sql_mode setting, select its value:

SELECT @@GLOBAL.sql_mode;
SELECT @@SESSION.sql_mode;

Important

SQL mode and user-defined partitioning.
mode after creating and inserting data into partitioned tables can cause major
changes in the behavior of such tables, and could lead to loss or corruption of
data. It is strongly recommended that you never change the SQL mode once
you have created tables employing user-defined partitioning.

 Changing the server SQL

When replicating partitioned tables, differing SQL modes on the source and
replica can also lead to problems. For best results, you should always use the
same server SQL mode on the source and replica.

For more information, see Section 26.6, “Restrictions and Limitations on
Partitioning”.

The Most Important SQL Modes

The most important sql_mode values are probably these:

•   ANSI

This mode changes syntax and behavior to conform more closely to standard SQL. It is one of the
special combination modes listed at the end of this section.

•   STRICT_TRANS_TABLES

If a value could not be inserted as given into a transactional table, abort the statement. For a
nontransactional table, abort the statement if the value occurs in a single-row statement or the first
row of a multiple-row statement. More details are given later in this section.

•   TRADITIONAL

Make MySQL behave like a “traditional” SQL database system. A simple description of this mode is
“give an error instead of a warning” when inserting an incorrect value into a column. It is one of the
special combination modes listed at the end of this section.

Note

With TRADITIONAL mode enabled, an INSERT or UPDATE aborts as soon as
an error occurs. If you are using a nontransactional storage engine, this may
not be what you want because data changes made prior to the error may not
be rolled back, resulting in a “partially done” update.

When this manual refers to “strict mode,” it means a mode with either or both STRICT_TRANS_TABLES
or STRICT_ALL_TABLES enabled.

Full List of SQL Modes

The following list describes all supported SQL modes:

• ALLOW_INVALID_DATES

Do not perform full checking of dates. Check only that the month is in the range from 1 to 12 and the
day is in the range from 1 to 31. This may be useful for Web applications that obtain year, month,
and day in three different fields and store exactly what the user inserted, without date validation. This
mode applies to DATE and DATETIME columns. It does not apply to TIMESTAMP columns, which
always require a valid date.

1093

Server SQL Modes

With ALLOW_INVALID_DATES disabled, the server requires that month and day values be
legal, and not merely in the range 1 to 12 and 1 to 31, respectively. With strict mode disabled,
invalid dates such as '2004-04-31' are converted to '0000-00-00' and a warning is
generated. With strict mode enabled, invalid dates generate an error. To permit such dates, enable
ALLOW_INVALID_DATES.

• ANSI_QUOTES

Treat " as an identifier quote character (like the ` quote character) and not as a string quote
character. You can still use ` to quote identifiers with this mode enabled. With ANSI_QUOTES
enabled, you cannot use double quotation marks to quote literal strings because they are interpreted
as identifiers.

• ERROR_FOR_DIVISION_BY_ZERO

The ERROR_FOR_DIVISION_BY_ZERO mode affects handling of division by zero, which includes
MOD(N,0). For data-change operations (INSERT, UPDATE), its effect also depends on whether strict
SQL mode is enabled.

• If this mode is not enabled, division by zero inserts NULL and produces no warning.

• If this mode is enabled, division by zero inserts NULL and produces a warning.

• If this mode and strict mode are enabled, division by zero produces an error, unless IGNORE is
given as well. For INSERT IGNORE and UPDATE IGNORE, division by zero inserts NULL and
produces a warning.

For SELECT, division by zero returns NULL. Enabling ERROR_FOR_DIVISION_BY_ZERO causes a
warning to be produced as well, regardless of whether strict mode is enabled.

ERROR_FOR_DIVISION_BY_ZERO is deprecated. ERROR_FOR_DIVISION_BY_ZERO is not part of
strict mode, but should be used in conjunction with strict mode and is enabled by default. A warning
occurs if ERROR_FOR_DIVISION_BY_ZERO is enabled without also enabling strict mode or vice
versa.

Because ERROR_FOR_DIVISION_BY_ZERO is deprecated, you should expect it to be removed in a
future MySQL release as a separate mode name and its effect included in the effects of strict SQL
mode.

• HIGH_NOT_PRECEDENCE

The precedence of the NOT operator is such that expressions such as NOT a BETWEEN b AND c
are parsed as NOT (a BETWEEN b AND c). In some older versions of MySQL, the expression was
parsed as (NOT a) BETWEEN b AND c. The old higher-precedence behavior can be obtained by
enabling the HIGH_NOT_PRECEDENCE SQL mode.

mysql> SET sql_mode = '';
mysql> SELECT NOT 1 BETWEEN -5 AND 5;
        -> 0
mysql> SET sql_mode = 'HIGH_NOT_PRECEDENCE';
mysql> SELECT NOT 1 BETWEEN -5 AND 5;
        -> 1

• IGNORE_SPACE

Permit spaces between a function name and the ( character. This causes built-in function names
to be treated as reserved words. As a result, identifiers that are the same as function names must
be quoted as described in Section 11.2, “Schema Object Names”. For example, because there is a
COUNT() function, the use of count as a table name in the following statement causes an error:

mysql> CREATE TABLE count (i INT);
ERROR 1064 (42000): You have an error in your SQL syntax

1094

Server SQL Modes

The table name should be quoted:

mysql> CREATE TABLE `count` (i INT);
Query OK, 0 rows affected (0.00 sec)

The IGNORE_SPACE SQL mode applies to built-in functions, not to loadable functions or stored
functions. It is always permissible to have spaces after a loadable function or stored function name,
regardless of whether IGNORE_SPACE is enabled.

For further discussion of IGNORE_SPACE, see Section 11.2.5, “Function Name Parsing and
Resolution”.

• NO_AUTO_VALUE_ON_ZERO

NO_AUTO_VALUE_ON_ZERO affects handling of AUTO_INCREMENT columns. Normally, you
generate the next sequence number for the column by inserting either NULL or 0 into it.
NO_AUTO_VALUE_ON_ZERO suppresses this behavior for 0 so that only NULL generates the next
sequence number.

This mode can be useful if 0 has been stored in a table's AUTO_INCREMENT column. (Storing
0 is not a recommended practice, by the way.) For example, if you dump the table with
mysqldump and then reload it, MySQL normally generates new sequence numbers when
it encounters the 0 values, resulting in a table with contents different from the one that was
dumped. Enabling NO_AUTO_VALUE_ON_ZERO before reloading the dump file solves this
problem. For this reason, mysqldump automatically includes in its output a statement that enables
NO_AUTO_VALUE_ON_ZERO.

• NO_BACKSLASH_ESCAPES

Enabling this mode disables the use of the backslash character (\) as an escape character within
strings and identifiers. With this mode enabled, backslash becomes an ordinary character like
any other, and the default escape sequence for LIKE expressions is changed so that no escape
character is used.

• NO_DIR_IN_CREATE

When creating a table, ignore all INDEX DIRECTORY and DATA DIRECTORY directives. This option
is useful on replica servers.

• NO_ENGINE_SUBSTITUTION

Control automatic substitution of the default storage engine when a statement such as CREATE
TABLE or ALTER TABLE specifies a storage engine that is disabled or not compiled in.

By default, NO_ENGINE_SUBSTITUTION is enabled.

Because storage engines can be pluggable at runtime, unavailable engines are treated the same
way:

With NO_ENGINE_SUBSTITUTION disabled, for CREATE TABLE the default engine is used and a
warning occurs if the desired engine is unavailable. For ALTER TABLE, a warning occurs and the
table is not altered.

With NO_ENGINE_SUBSTITUTION enabled, an error occurs and the table is not created or altered if
the desired engine is unavailable.

• NO_UNSIGNED_SUBTRACTION

Subtraction between integer values, where one is of type UNSIGNED, produces an unsigned result by
default. If the result would otherwise have been negative, an error results:

mysql> SET sql_mode = '';

1095

Server SQL Modes

Query OK, 0 rows affected (0.00 sec)

mysql> SELECT CAST(0 AS UNSIGNED) - 1;
ERROR 1690 (22003): BIGINT UNSIGNED value is out of range in '(cast(0 as unsigned) - 1)'

If the NO_UNSIGNED_SUBTRACTION SQL mode is enabled, the result is negative:

mysql> SET sql_mode = 'NO_UNSIGNED_SUBTRACTION';
mysql> SELECT CAST(0 AS UNSIGNED) - 1;
+-------------------------+
| CAST(0 AS UNSIGNED) - 1 |
+-------------------------+
|                      -1 |
+-------------------------+

If the result of such an operation is used to update an UNSIGNED integer column, the result is clipped
to the maximum value for the column type, or clipped to 0 if NO_UNSIGNED_SUBTRACTION is
enabled. With strict SQL mode enabled, an error occurs and the column remains unchanged.

When NO_UNSIGNED_SUBTRACTION is enabled, the subtraction result is signed, even if any
operand is unsigned. For example, compare the type of column c2 in table t1 with that of column c2
in table t2:

mysql> SET sql_mode='';
mysql> CREATE TABLE test (c1 BIGINT UNSIGNED NOT NULL);
mysql> CREATE TABLE t1 SELECT c1 - 1 AS c2 FROM test;
mysql> DESCRIBE t1;
+-------+---------------------+------+-----+---------+-------+
| Field | Type                | Null | Key | Default | Extra |
+-------+---------------------+------+-----+---------+-------+
| c2    | bigint(21) unsigned | NO   |     | 0       |       |
+-------+---------------------+------+-----+---------+-------+

mysql> SET sql_mode='NO_UNSIGNED_SUBTRACTION';
mysql> CREATE TABLE t2 SELECT c1 - 1 AS c2 FROM test;
mysql> DESCRIBE t2;
+-------+------------+------+-----+---------+-------+
| Field | Type       | Null | Key | Default | Extra |
+-------+------------+------+-----+---------+-------+
| c2    | bigint(21) | NO   |     | 0       |       |
+-------+------------+------+-----+---------+-------+

This means that BIGINT UNSIGNED is not 100% usable in all contexts. See Section 14.10, “Cast
Functions and Operators”.

• NO_ZERO_DATE

The NO_ZERO_DATE mode affects whether the server permits '0000-00-00' as a valid date. Its
effect also depends on whether strict SQL mode is enabled.

• If this mode is not enabled, '0000-00-00' is permitted and inserts produce no warning.

• If this mode is enabled, '0000-00-00' is permitted and inserts produce a warning.

• If this mode and strict mode are enabled, '0000-00-00' is not permitted and inserts produce

an error, unless IGNORE is given as well. For INSERT IGNORE and UPDATE IGNORE,
'0000-00-00' is permitted and inserts produce a warning.

NO_ZERO_DATE is deprecated. NO_ZERO_DATE is not part of strict mode, but should be used
in conjunction with strict mode and is enabled by default. A warning occurs if NO_ZERO_DATE is
enabled without also enabling strict mode or vice versa.

Because NO_ZERO_DATE is deprecated, you should expect it to be removed in a future MySQL
release as a separate mode name and its effect included in the effects of strict SQL mode.

1096

Server SQL Modes

• NO_ZERO_IN_DATE

The NO_ZERO_IN_DATE mode affects whether the server permits dates in which the year part
is nonzero but the month or day part is 0. (This mode affects dates such as '2010-00-01' or
'2010-01-00', but not '0000-00-00'. To control whether the server permits '0000-00-00',
use the NO_ZERO_DATE mode.) The effect of NO_ZERO_IN_DATE also depends on whether strict
SQL mode is enabled.

• If this mode is not enabled, dates with zero parts are permitted and inserts produce no warning.

• If this mode is enabled, dates with zero parts are inserted as '0000-00-00' and produce a

warning.

• If this mode and strict mode are enabled, dates with zero parts are not permitted and inserts

produce an error, unless IGNORE is given as well. For INSERT IGNORE and UPDATE IGNORE,
dates with zero parts are inserted as '0000-00-00' and produce a warning.

NO_ZERO_IN_DATE is deprecated. NO_ZERO_IN_DATE is not part of strict mode, but
should be used in conjunction with strict mode and is enabled by default. A warning occurs if
NO_ZERO_IN_DATE is enabled without also enabling strict mode or vice versa.

Because NO_ZERO_IN_DATE is deprecated, you should expect it to be removed in a future MySQL
release as a separate mode name and its effect included in the effects of strict SQL mode.

• ONLY_FULL_GROUP_BY

Reject queries for which the select list, HAVING condition, or ORDER BY list refer to nonaggregated
columns that are neither named in the GROUP BY clause nor are functionally dependent on (uniquely
determined by) GROUP BY columns.

A MySQL extension to standard SQL permits references in the HAVING clause to aliased
expressions in the select list. The HAVING clause can refer to aliases regardless of whether
ONLY_FULL_GROUP_BY is enabled.

For additional discussion and examples, see Section 14.19.3, “MySQL Handling of GROUP BY”.

• PAD_CHAR_TO_FULL_LENGTH

By default, trailing spaces are trimmed from CHAR column values on retrieval. If
PAD_CHAR_TO_FULL_LENGTH is enabled, trimming does not occur and retrieved CHAR values are
padded to their full length. This mode does not apply to VARCHAR columns, for which trailing spaces
are retained on retrieval.

Note

As of MySQL 8.0.13, PAD_CHAR_TO_FULL_LENGTH is deprecated. Expect it
to be removed in a future version of MySQL.

mysql> CREATE TABLE t1 (c1 CHAR(10));
Query OK, 0 rows affected (0.37 sec)

mysql> INSERT INTO t1 (c1) VALUES('xy');
Query OK, 1 row affected (0.01 sec)

mysql> SET sql_mode = '';
Query OK, 0 rows affected (0.00 sec)

mysql> SELECT c1, CHAR_LENGTH(c1) FROM t1;
+------+-----------------+
| c1   | CHAR_LENGTH(c1) |
+------+-----------------+
| xy   |               2 |
+------+-----------------+

1097

Server SQL Modes

1 row in set (0.00 sec)

mysql> SET sql_mode = 'PAD_CHAR_TO_FULL_LENGTH';
Query OK, 0 rows affected (0.00 sec)

mysql> SELECT c1, CHAR_LENGTH(c1) FROM t1;
+------------+-----------------+
| c1         | CHAR_LENGTH(c1) |
+------------+-----------------+
| xy         |              10 |
+------------+-----------------+
1 row in set (0.00 sec)

• PIPES_AS_CONCAT

Treat || as a string concatenation operator (same as CONCAT()) rather than as a synonym for OR.

• REAL_AS_FLOAT

Treat REAL as a synonym for FLOAT. By default, MySQL treats REAL as a synonym for DOUBLE.

• STRICT_ALL_TABLES

Enable strict SQL mode for all storage engines. Invalid data values are rejected. For details, see
Strict SQL Mode.

• STRICT_TRANS_TABLES

Enable strict SQL mode for transactional storage engines, and when possible for nontransactional
storage engines. For details, see Strict SQL Mode.

• TIME_TRUNCATE_FRACTIONAL

Control whether rounding or truncation occurs when inserting a TIME, DATE, or TIMESTAMP value
with a fractional seconds part into a column having the same type but fewer fractional digits. The
default behavior is to use rounding. If this mode is enabled, truncation occurs instead. The following
sequence of statements illustrates the difference:

CREATE TABLE t (id INT, tval TIME(1));
SET sql_mode='';
INSERT INTO t (id, tval) VALUES(1, 1.55);
SET sql_mode='TIME_TRUNCATE_FRACTIONAL';
INSERT INTO t (id, tval) VALUES(2, 1.55);

The resulting table contents look like this, where the first value has been subject to rounding and the
second to truncation:

mysql> SELECT id, tval FROM t ORDER BY id;
+------+------------+
| id   | tval       |
+------+------------+
|    1 | 00:00:01.6 |
|    2 | 00:00:01.5 |
+------+------------+

See also Section 13.2.6, “Fractional Seconds in Time Values”.

Combination SQL Modes

The following special modes are provided as shorthand for combinations of mode values from the
preceding list.

• ANSI

Equivalent to REAL_AS_FLOAT, PIPES_AS_CONCAT, ANSI_QUOTES, IGNORE_SPACE, and
ONLY_FULL_GROUP_BY.

1098

Server SQL Modes

ANSI mode also causes the server to return an error for queries where a set function S with an
outer reference S(outer_ref) cannot be aggregated in the outer query against which the outer
reference has been resolved. This is such a query:

SELECT * FROM t1 WHERE t1.a IN (SELECT MAX(t1.b) FROM t2 WHERE ...);

Here, MAX(t1.b) cannot aggregated in the outer query because it appears in the WHERE clause of
that query. Standard SQL requires an error in this situation. If ANSI mode is not enabled, the server
treats S(outer_ref) in such queries the same way that it would interpret S(const).

See Section 1.6, “MySQL Standards Compliance”.

• TRADITIONAL

TRADITIONAL is equivalent to STRICT_TRANS_TABLES, STRICT_ALL_TABLES,
NO_ZERO_IN_DATE, NO_ZERO_DATE, ERROR_FOR_DIVISION_BY_ZERO, and
NO_ENGINE_SUBSTITUTION.

Strict SQL Mode

Strict mode controls how MySQL handles invalid or missing values in data-change statements such as
INSERT or UPDATE. A value can be invalid for several reasons. For example, it might have the wrong
data type for the column, or it might be out of range. A value is missing when a new row to be inserted
does not contain a value for a non-NULL column that has no explicit DEFAULT clause in its definition.
(For a NULL column, NULL is inserted if the value is missing.) Strict mode also affects DDL statements
such as CREATE TABLE.

If strict mode is not in effect, MySQL inserts adjusted values for invalid or missing values and produces
warnings (see Section 15.7.7.42, “SHOW WARNINGS Statement”). In strict mode, you can produce
this behavior by using INSERT IGNORE or UPDATE IGNORE.

For statements such as SELECT that do not change data, invalid values generate a warning in strict
mode, not an error.

Strict mode produces an error for attempts to create a key that exceeds the maximum key length.
When strict mode is not enabled, this results in a warning and truncation of the key to the maximum
key length.

Strict mode does not affect whether foreign key constraints are checked. foreign_key_checks can
be used for that. (See Section 7.1.8, “Server System Variables”.)

Strict SQL mode is in effect if either STRICT_ALL_TABLES or STRICT_TRANS_TABLES is enabled,
although the effects of these modes differ somewhat:

• For transactional tables, an error occurs for invalid or missing values in a data-change statement
when either STRICT_ALL_TABLES or STRICT_TRANS_TABLES is enabled. The statement is
aborted and rolled back.

• For nontransactional tables, the behavior is the same for either mode if the bad value occurs in the

first row to be inserted or updated: The statement is aborted and the table remains unchanged. If the
statement inserts or modifies multiple rows and the bad value occurs in the second or later row, the
result depends on which strict mode is enabled:

• For STRICT_ALL_TABLES, MySQL returns an error and ignores the rest of the rows. However,
because the earlier rows have been inserted or updated, the result is a partial update. To avoid
this, use single-row statements, which can be aborted without changing the table.

• For STRICT_TRANS_TABLES, MySQL converts an invalid value to the closest valid value for the
column and inserts the adjusted value. If a value is missing, MySQL inserts the implicit default
value for the column data type. In either case, MySQL generates a warning rather than an error

1099

Server SQL Modes

and continues processing the statement. Implicit defaults are described in Section 13.6, “Data
Type Default Values”.

Strict mode affects handling of division by zero, zero dates, and zeros in dates as follows:

• Strict mode affects handling of division by zero, which includes MOD(N,0):

For data-change operations (INSERT, UPDATE):

• If strict mode is not enabled, division by zero inserts NULL and produces no warning.

• If strict mode is enabled, division by zero produces an error, unless IGNORE is given as well. For
INSERT IGNORE and UPDATE IGNORE, division by zero inserts NULL and produces a warning.

For SELECT, division by zero returns NULL. Enabling strict mode causes a warning to be produced
as well.

• Strict mode affects whether the server permits '0000-00-00' as a valid date:

• If strict mode is not enabled, '0000-00-00' is permitted and inserts produce no warning.

• If strict mode is enabled, '0000-00-00' is not permitted and inserts produce an error, unless

IGNORE is given as well. For INSERT IGNORE and UPDATE IGNORE, '0000-00-00' is
permitted and inserts produce a warning.

• Strict mode affects whether the server permits dates in which the year part is nonzero but the month

or day part is 0 (dates such as '2010-00-01' or '2010-01-00'):

• If strict mode is not enabled, dates with zero parts are permitted and inserts produce no warning.

• If strict mode is enabled, dates with zero parts are not permitted and inserts produce an error,

unless IGNORE is given as well. For INSERT IGNORE and UPDATE IGNORE, dates with zero parts
are inserted as '0000-00-00' (which is considered valid with IGNORE) and produce a warning.

For more information about strict mode with respect to IGNORE, see Comparison of the IGNORE
Keyword and Strict SQL Mode.

Strict mode affects handling of division by zero, zero dates, and zeros in dates in conjunction with the
ERROR_FOR_DIVISION_BY_ZERO, NO_ZERO_DATE, and NO_ZERO_IN_DATE modes.

Comparison of the IGNORE Keyword and Strict SQL Mode

This section compares the effect on statement execution of the IGNORE keyword (which downgrades
errors to warnings) and strict SQL mode (which upgrades warnings to errors). It describes which
statements they affect, and which errors they apply to.

The following table presents a summary comparison of statement behavior when the default is to
produce an error versus a warning. An example of when the default is to produce an error is inserting a
NULL into a NOT NULL column. An example of when the default is to produce a warning is inserting a
value of the wrong data type into a column (such as inserting the string 'abc' into an integer column).

Operational Mode

When Statement Default is
Error

When Statement Default is
Warning

Without IGNORE or strict SQL
mode

Error

With IGNORE

Warning

Warning

Warning (same as without
IGNORE or strict SQL mode)

With strict SQL mode

Error (same as without IGNORE
or strict SQL mode)

Error

1100

Server SQL Modes

Operational Mode

When Statement Default is
Error

When Statement Default is
Warning

With IGNORE and strict SQL
mode

Warning

Warning

One conclusion to draw from the table is that when the IGNORE keyword and strict SQL mode are both
in effect, IGNORE takes precedence. This means that, although IGNORE and strict SQL mode can be
considered to have opposite effects on error handling, they do not cancel when used together.

• The Effect of IGNORE on Statement Execution

• The Effect of Strict SQL Mode on Statement Execution

The Effect of IGNORE on Statement Execution

Several statements in MySQL support an optional IGNORE keyword. This keyword causes the server
to downgrade certain types of errors and generate warnings instead. For a multiple-row statement,
downgrading an error to a warning may enable a row to be processed. Otherwise, IGNORE causes
the statement to skip to the next row instead of aborting. (For nonignorable errors, an error occurs
regardless of the IGNORE keyword.)

Example: If the table t has a primary key column i containing unique values, attempting to insert the
same value of i into multiple rows normally produces a duplicate-key error:

mysql> CREATE TABLE t (i INT NOT NULL PRIMARY KEY);
mysql> INSERT INTO t (i) VALUES(1),(1);
ERROR 1062 (23000): Duplicate entry '1' for key 't.PRIMARY'

With IGNORE, the row containing the duplicate key still is not inserted, but a warning occurs instead of
an error:

mysql> INSERT IGNORE INTO t (i) VALUES(1),(1);
Query OK, 1 row affected, 1 warning (0.01 sec)
Records: 2  Duplicates: 1  Warnings: 1

mysql> SHOW WARNINGS;
+---------+------+-----------------------------------------+
| Level   | Code | Message                                 |
+---------+------+-----------------------------------------+
| Warning | 1062 | Duplicate entry '1' for key 't.PRIMARY' |
+---------+------+-----------------------------------------+
1 row in set (0.00 sec)

Example: If the table t2 has a NOT NULL column id, attempting to insert NULL produces an error in
strict SQL mode:

mysql> CREATE TABLE t2 (id INT NOT NULL);
mysql> INSERT INTO t2 (id) VALUES(1),(NULL),(3);
ERROR 1048 (23000): Column 'id' cannot be null
mysql> SELECT * FROM t2;
Empty set (0.00 sec)

If the SQL mode is not strict, IGNORE causes the NULL to be inserted as the column implicit default (0
in this case), which enables the row to be handled without skipping it:

mysql> INSERT INTO t2 (id) VALUES(1),(NULL),(3);
mysql> SELECT * FROM t2;
+----+
| id |
+----+
|  1 |
|  0 |
|  3 |
+----+

These statements support the IGNORE keyword:

1101

Server SQL Modes

• CREATE TABLE ... SELECT: IGNORE does not apply to the CREATE TABLE or SELECT parts of
the statement but to inserts into the table of rows produced by the SELECT. Rows that duplicate an
existing row on a unique key value are discarded.

• DELETE: IGNORE causes MySQL to ignore errors during the process of deleting rows.

• INSERT: With IGNORE, rows that duplicate an existing row on a unique key value are discarded.
Rows set to values that would cause data conversion errors are set to the closest valid values
instead.

 For partitioned tables where no partition matching a given value is found, IGNORE causes the insert
operation to fail silently for rows containing the unmatched value.

• LOAD DATA, LOAD XML: With IGNORE, rows that duplicate an existing row on a unique key value

are discarded.

• UPDATE: With IGNORE, rows for which duplicate-key conflicts occur on a unique key value are not

updated. Rows updated to values that would cause data conversion errors are updated to the closest
valid values instead.

The IGNORE keyword applies to the following ignorable errors:

• ER_BAD_NULL_ERROR

• ER_DUP_ENTRY

• ER_DUP_ENTRY_WITH_KEY_NAME

• ER_DUP_KEY

• ER_NO_PARTITION_FOR_GIVEN_VALUE

• ER_NO_PARTITION_FOR_GIVEN_VALUE_SILENT

• ER_NO_REFERENCED_ROW_2

• ER_ROW_DOES_NOT_MATCH_GIVEN_PARTITION_SET

• ER_ROW_IS_REFERENCED_2

• ER_SUBQUERY_NO_1_ROW

• ER_VIEW_CHECK_FAILED

The Effect of Strict SQL Mode on Statement Execution

The MySQL server can operate in different SQL modes, and can apply these modes differently for
different clients, depending on the value of the sql_mode system variable. In “strict” SQL mode, the
server upgrades certain warnings to errors.

For example, in non-strict SQL mode, inserting the string 'abc' into an integer column results in
conversion of the value to 0 and a warning:

mysql> SET sql_mode = '';
Query OK, 0 rows affected (0.00 sec)

mysql> INSERT INTO t (i) VALUES('abc');
Query OK, 1 row affected, 1 warning (0.01 sec)

mysql> SHOW WARNINGS;
+---------+------+--------------------------------------------------------+
| Level   | Code | Message                                                |
+---------+------+--------------------------------------------------------+
| Warning | 1366 | Incorrect integer value: 'abc' for column 'i' at row 1 |
+---------+------+--------------------------------------------------------+

1102

Connection Management

1 row in set (0.00 sec)

In strict SQL mode, the invalid value is rejected with an error:

mysql> SET sql_mode = 'STRICT_ALL_TABLES';
Query OK, 0 rows affected (0.00 sec)

mysql> INSERT INTO t (i) VALUES('abc');
ERROR 1366 (HY000): Incorrect integer value: 'abc' for column 'i' at row 1

For more information about possible settings of the sql_mode system variable, see Section 7.1.11,
“Server SQL Modes”.

Strict SQL mode applies to the following statements under conditions for which some value might be
out of range or an invalid row is inserted into or deleted from a table:

• ALTER TABLE

• CREATE TABLE

• CREATE TABLE ... SELECT

• DELETE (both single table and multiple table)

• INSERT

• LOAD DATA

• LOAD XML

• SELECT SLEEP()

• UPDATE (both single table and multiple table)

Within stored programs, individual statements of the types just listed execute in strict SQL mode if the
program was defined while strict mode was in effect.

Strict SQL mode applies to the following errors, which represent a class of errors in which an input
value is either invalid or missing. A value is invalid if it has the wrong data type for the column or might
be out of range. A value is missing if a new row to be inserted does not contain a value for a NOT NULL
column that has no explicit DEFAULT clause in its definition.

ER_BAD_NULL_ERROR
ER_CUT_VALUE_GROUP_CONCAT
ER_DATA_TOO_LONG
ER_DATETIME_FUNCTION_OVERFLOW
ER_DIVISION_BY_ZERO
ER_INVALID_ARGUMENT_FOR_LOGARITHM
ER_NO_DEFAULT_FOR_FIELD
ER_NO_DEFAULT_FOR_VIEW_FIELD
ER_TOO_LONG_KEY
ER_TRUNCATED_WRONG_VALUE
ER_TRUNCATED_WRONG_VALUE_FOR_FIELD
ER_WARN_DATA_OUT_OF_RANGE
ER_WARN_NULL_TO_NOTNULL
ER_WARN_TOO_FEW_RECORDS
ER_WRONG_ARGUMENTS
ER_WRONG_VALUE_FOR_TYPE
WARN_DATA_TRUNCATED

Note

Because continued MySQL development defines new errors, there may be
errors not in the preceding list to which strict SQL mode applies.

7.1.12 Connection Management

1103

Connection Management

This section describes how MySQL Server manages connections. This includes a description of the
available connection interfaces, how the server uses connection handler threads, details about the
administrative connection interface, and management of DNS lookups.

7.1.12.1 Connection Interfaces

This section describes aspects of how the MySQL server manages client connections.

• Network Interfaces and Connection Manager Threads

• Client Connection Thread Management

• Connection Volume Management

Network Interfaces and Connection Manager Threads

The server is capable of listening for client connections on multiple network interfaces. Connection
manager threads handle client connection requests on the network interfaces that the server listens to:

• On all platforms, one manager thread handles TCP/IP connection requests.

• On Unix, the same manager thread also handles Unix socket file connection requests.

• On Windows, one manager thread handles shared-memory connection requests, and another

handles named-pipe connection requests.

• On all platforms, an additional network interface may be enabled to accept administrative TCP/IP
connection requests. This interface can use the manager thread that handles “ordinary” TCP/IP
requests, or a separate thread.

The server does not create threads to handle interfaces that it does not listen to. For example, a
Windows server that does not have support for named-pipe connections enabled does not create a
thread to handle them.

Individual server plugins or components may implement their own connection interface:

• X Plugin enables MySQL Server to communicate with clients using X Protocol. See Section 22.5, “X

Plugin”.

Client Connection Thread Management

Connection manager threads associate each client connection with a thread dedicated to it that
handles authentication and request processing for that connection. Manager threads create a new
thread when necessary but try to avoid doing so by consulting the thread cache first to see whether it
contains a thread that can be used for the connection. When a connection ends, its thread is returned
to the thread cache if the cache is not full.

In this connection thread model, there are as many threads as there are clients currently connected,
which has some disadvantages when server workload must scale to handle large numbers of
connections. For example, thread creation and disposal becomes expensive. Also, each thread
requires server and kernel resources, such as stack space. To accommodate a large number of
simultaneous connections, the stack size per thread must be kept small, leading to a situation where
it is either too small or the server consumes large amounts of memory. Exhaustion of other resources
can occur as well, and scheduling overhead can become significant.

MySQL Enterprise Edition includes a thread pool plugin that provides an alternative thread-handling
model designed to reduce overhead and improve performance. It implements a thread pool that
increases server performance by efficiently managing statement execution threads for large numbers
of client connections. See Section 7.6.3, “MySQL Enterprise Thread Pool”.

To control and monitor how the server manages threads that handle client connections, several system
and status variables are relevant. (See Section 7.1.8, “Server System Variables”, and Section 7.1.10,
“Server Status Variables”.)

1104

Connection Management

• The thread_cache_size system variable determines the thread cache size. By default, the
server autosizes the value at startup, but it can be set explicitly to override this default. A value
of 0 disables caching, which causes a thread to be set up for each new connection and disposed
of when the connection terminates. To enable N inactive connection threads to be cached, set
thread_cache_size to N at server startup or at runtime. A connection thread becomes inactive
when the client connection with which it was associated terminates.

• To monitor the number of threads in the cache and how many threads have been created because
a thread could not be taken from the cache, check the Threads_cached and Threads_created
status variables.

• When the thread stack is too small, this limits the complexity of the SQL statements the server can
handle, the recursion depth of stored procedures, and other memory-consuming actions. To set a
stack size of N bytes for each thread, start the server with thread_stack set to N.

Connection Volume Management

To control the maximum number of clients the server permits to connect simultaneously, set the
max_connections system variable at server startup or at runtime. It may be necessary to increase
max_connections if more clients attempt to connect simultaneously then the server is configured to
handle (see Section B.3.2.5, “Too many connections”). If the server refuses a connection because the
max_connections limit is reached, it increments the Connection_errors_max_connections
status variable.

mysqld actually permits max_connections + 1 client connections. The extra connection is reserved
for use by accounts that have the CONNECTION_ADMIN privilege (or the deprecated SUPER privilege).
By granting the privilege to administrators and not to normal users (who should not need it), an
administrator can connect to the server and use SHOW PROCESSLIST to diagnose problems even
if the maximum number of unprivileged clients are connected. See Section 15.7.7.29, “SHOW
PROCESSLIST Statement”.

As of MySQL 8.0.14, the server also permits administrative connections on an administrative network
interface, which you can set up using a dedicated IP address and port. See Section 7.1.12.2,
“Administrative Connection Management”.

The Group Replication plugin interacts with MySQL Server using internal sessions to perform SQL
API operations. In releases to MySQL 8.0.18, these sessions count towards the client connections
limit specified by the max_connections server system variable. In those releases, if the server has
reached the max_connections limit when Group Replication is started or attempts to perform an
operation, the operation is unsuccessful and Group Replication or the server itself might stop. From
MySQL 8.0.19, Group Replication's internal sessions are handled separately from client connections,
so they do not count towards the max_connections limit and are not refused if the server has
reached this limit.

The maximum number of client connections MySQL supports (that is, the maximum value to which
max_connections can be set) depends on several factors:

• The quality of the thread library on a given platform.

• The amount of RAM available.

• The amount of RAM is used for each connection.

• The workload from each connection.

• The desired response time.

• The number of file descriptors available.

Linux or Solaris should be able to support at least 500 to 1000 simultaneous connections routinely and
as many as 10,000 connections if you have many gigabytes of RAM available and the workload from
each is low or the response time target undemanding.

1105

Connection Management

Increasing the max_connections value increases the number of file descriptors that mysqld
requires. If the required number of descriptors are not available, the server reduces the value of
max_connections. For comments on file descriptor limits, see Section 10.4.3.1, “How MySQL Opens
and Closes Tables”.

Increasing the open_files_limit system variable may be necessary, which may also require
raising the operating system limit on how many file descriptors can be used by MySQL. Consult your
operating system documentation to determine whether it is possible to increase the limit and how to do
so. See also Section B.3.2.16, “File Not Found and Similar Errors”.

7.1.12.2 Administrative Connection Management

As mentioned in Connection Volume Management, to allow for the need to perform administrative
operations even when max_connections connections are already established on the interfaces used
for ordinary connections, the MySQL server permits a single administrative connection to users who
have the CONNECTION_ADMIN privilege (or the deprecated SUPER privilege).

Additionally, as of MySQL 8.0.14, the server permits dedicating a TCP/IP port for administrative
connections, as described in the following sections.

• Administrative Interface Characteristics

• Administrative Interface Support for Encrypted Connections

Administrative Interface Characteristics

The administrative connection interface has these characteristics:

• The server enables the interface only if the admin_address system variable is set at startup to

indicate the IP address for it. If admin_address is not set, the server maintains no administrative
interface.

• The admin_port system variable specifies the interface TCP/IP port number (default 33062).

• There is no limit on the number of administrative connections, but connections are permitted only for

users who have the SERVICE_CONNECTION_ADMIN privilege.

• The create_admin_listener_thread system variable enables DBAs to choose at startup
whether the administrative interface has its own separate thread. The default is OFF; that is, the
manager thread for ordinary connections on the main interface also handles connections for the
administrative interface.

These lines in the server my.cnf file enable the administrative interface on the loopback interface and
configure it to use port number 33064 (that is, a port different from the default):

[mysqld]
admin_address=127.0.0.1
admin_port=33064

MySQL client programs connect to either the main or administrative interface by specifying appropriate
connection parameters. If the server running on the local host is using the default TCP/IP port numbers
of 3306 and 33062 for the main and administrative interfaces, these commands connect to those
interfaces:

mysql --protocol=TCP --port=3306
mysql --protocol=TCP --port=33062

Administrative Interface Support for Encrypted Connections

Prior to MySQL 8.0.21, the administrative interface supports encrypted connections using the
connection-encryption configuration that applies to the main interface. As of MySQL 8.0.21, the
administrative interface has its own configuration parameters for encrypted connections. These

1106

Connection Management

correspond to the main interface parameters but enable independent configuration of encrypted
connections for the administrative interface:

• The admin_tls_xxx and admin_ssl_xxx system variables are like the tls_xxx and ssl_xxx
system variables, but they configure the TLS context for the administrative interface rather than the
main interface.

• The --admin-ssl option is like the --ssl option, but it enables or disables support for encrypted

connections on the administrative interface rather than the main interface.

Because support for encrypted connections is enabled by default, it is normally unnecessary to
specify --admin-ssl. As of MySQL 8.0.26, --admin-ssl is deprecated and subject to removal in
a future MySQL version.

For general information about configuring connection-encryption support, see Section 8.3.1,
“Configuring MySQL to Use Encrypted Connections”, and Section 8.3.2, “Encrypted Connection TLS
Protocols and Ciphers”. That discussion is written for the main connection interface, but the parameter
names are similar for the administrative connection interface. Use that discussion together with the
following remarks, which provide information specific to the administrative interface.

TLS configuration for the administrative interface follows these rules:

• If --admin-ssl is enabled (the default), the administrative interface supports encrypted

connections. For connections on the interface, the applicable TLS context depends on whether any
nondefault administrative TLS parameter is configured:

• If all administrative TLS parameters have their default values, the administrative interface uses the

same TLS context as the main interface.

• If any administrative TLS parameter has a nondefault value, the administrative interface uses
the TLS context defined by its own parameters. (This is the case if any admin_tls_xxx or
admin_ssl_xxx system variable is set to a value different from its default.) If a valid TLS context
cannot be created from those parameters, the administrative interface falls back to the main
interface TLS context.

• If --admin-ssl is disabled (for example, by specifying --admin-ssl=OFF, encrypted connections
to the administrative interface are disabled. This is true even if administrative TLS parameters have
nondefault values because disabling --admin-ssl takes precedence.

It is also possible to disable encrypted connections on the administrative interface without specifying
--admin-ssl in negated form. Set the admin_tls_version system variable to the empty value
to indicate that no TLS versions are supported. For example, these lines in the server my.cnf file
disable encrypted connections on the administrative interface:

[mysqld]
admin_tls_version=''

Examples:

• This configuration in the server my.cnf file enables the administrative interface, but does not set any

of the TLS parameters specific to that interface:

[mysqld]
admin_address=127.0.0.1

As a result, the administrative interface supports encrypted connections (because encryption is
supported by default when the administrative interface is enabled), and uses the main interface TLS
context. When clients connect to the administrative interface, they should use the same certificate
and key files as for ordinary connections on the main interface. For example (enter the command on
a single line):

mysql --protocol=TCP --port=33062

1107

Connection Management

      --ssl-ca=ca.pem
      --ssl-cert=client-cert.pem
      --ssl-key=client-key.pem

• This server configuration enables the administrative interface and sets the TLS certificate and key file

parameters specific to that interface:

[mysqld]
admin_address=127.0.0.1
admin_ssl_ca=admin-ca.pem
admin_ssl_cert=admin-server-cert.pem
admin_ssl_key=admin-server-key.pem

As a result, the administrative interface supports encrypted connections using its own TLS context.
When clients connect to the administrative interface, they should use certificate and key files specific
to that interface. For example (enter the command on a single line):

mysql --protocol=TCP --port=33062
      --ssl-ca=admin-ca.pem
      --ssl-cert=admin-client-cert.pem
      --ssl-key=admin-client-key.pem

7.1.12.3 DNS Lookups and the Host Cache

The MySQL server maintains an in-memory host cache that contains information about clients: IP
address, host name, and error information. The Performance Schema host_cache table exposes the
contents of the host cache so that it can be examined using SELECT statements. This may help you
diagnose the causes of connection problems. See Section 29.12.21.3, “The host_cache Table”.

The following sections discuss how the host cache works, as well as other topics such as how to
configure and monitor the cache.

• Host Cache Operation

• Configuring the Host Cache

• Monitoring the Host Cache

• Flushing the Host Cache

• Dealing with Blocked Hosts

Host Cache Operation

The server uses the host cache only for non-localhost TCP connections. It does not use the cache for
TCP connections established using a loopback interface address (for example, 127.0.0.1 or ::1), or
for connections established using a Unix socket file, named pipe, or shared memory.

The server uses the host cache for several purposes:

• By caching the results of IP-to-host name lookups, the server avoids doing a Domain Name System
(DNS) lookup for each client connection. Instead, for a given host, it needs to perform a lookup only
for the first connection from that host.

• The cache contains information about errors that occur during the client connection process.
Some errors are considered “blocking.” If too many of these occur successively from a given
host without a successful connection, the server blocks further connections from that host. The
max_connect_errors system variable determines the permitted number of successive errors
before blocking occurs.

For each applicable new client connection, the server uses the client IP address to check whether the
client host name is in the host cache. If so, the server refuses or continues to process the connection
request depending on whether or not the host is blocked. If the host is not in the cache, the server

1108

Connection Management

attempts to resolve the host name. First, it resolves the IP address to a host name and resolves that
host name back to an IP address. Then it compares the result to the original IP address to ensure that
they are the same. The server stores information about the result of this operation in the host cache. If
the cache is full, the least recently used entry is discarded.

The server performs host name resolution using the getaddrinfo() system call.

The server handles entries in the host cache like this:

1. When the first TCP client connection reaches the server from a given IP address, a new cache
entry is created to record the client IP, host name, and client lookup validation flag. Initially, the
host name is set to NULL and the flag is false. This entry is also used for subsequent client TCP
connections from the same originating IP.

2.

If the validation flag for the client IP entry is false, the server attempts an IP-to-host name-to-IP
DNS resolution. If that is successful, the host name is updated with the resolved host name and
the validation flag is set to true. If resolution is unsuccessful, the action taken depends on whether
the error is permanent or transient. For permanent failures, the host name remains NULL and
the validation flag is set to true. For transient failures, the host name and validation flag remain
unchanged. (In this case, another DNS resolution attempt occurs the next time a client connects
from this IP.)

3.

If an error occurs while processing an incoming client connection from a given IP address, the
server updates the corresponding error counters in the entry for that IP. For a description of the
errors recorded, see Section 29.12.21.3, “The host_cache Table”.

To unblock blocked hosts, flush the host cache; see Dealing with Blocked Hosts.

It is possible for a blocked host to become unblocked even without flushing the host cache if activity
from other hosts occurs:

• If the cache is full when a connection arrives from a client IP not in the cache, the server discards the

least recently used cache entry to make room for the new entry.

• If the discarded entry is for a blocked host, that host becomes unblocked.

Some connection errors are not associated with TCP connections, occur very early in the connection
process (even before an IP address is known), or are not specific to any particular IP address (such as
out-of-memory conditions). For information about these errors, check the Connection_errors_xxx
status variables (see Section 7.1.10, “Server Status Variables”).

Configuring the Host Cache

The host cache is enabled by default. The host_cache_size system variable controls its size, as
well as the size of the Performance Schema host_cache table that exposes the cache contents. The
cache size can be set at server startup and changed at runtime. For example, to set the size to 100 at
startup, put these lines in the server my.cnf file:

[mysqld]
host_cache_size=200

To change the size to 300 at runtime, do this:

SET GLOBAL host_cache_size=300;

Setting host_cache_size to 0, either at server startup or at runtime, disables the host cache. With
the cache disabled, the server performs a DNS lookup every time a client connects.

Changing the cache size at runtime causes an implicit host cache flushing operation that clears the
host cache, truncates the host_cache table, and unblocks any blocked hosts; see Flushing the Host
Cache.

1109

Connection Management

Using the --skip-host-cache option is similar to setting the host_cache_size system variable to
0, but host_cache_size is more flexible because it can also be used to resize, enable, and disable
the host cache at runtime, not just at server startup. Starting the server with --skip-host-cache
does not prevent runtime changes to the value of host_cache_size, but such changes have no
effect and the cache is not re-enabled even if host_cache_size is set larger than 0.

To disable DNS host name lookups, start the server with the skip_name_resolve system variable
enabled. In this case, the server uses only IP addresses and not host names to match connecting
hosts to rows in the MySQL grant tables. Only accounts specified in those tables using IP addresses
can be used. (A client may not be able to connect if no account exists that specifies the client IP
address.)

If you have a very slow DNS and many hosts, you might be able to improve performance either
by enabling skip_name_resolve to disable DNS lookups, or by increasing the value of
host_cache_size to make the host cache larger.

To disallow TCP/IP connections entirely, start the server with the skip_networking system variable
enabled.

To adjust the permitted number of successive connection errors before host blocking occurs, set the
max_connect_errors system variable. For example, to set the value at startup put these lines in the
server my.cnf file:

[mysqld]
max_connect_errors=10000

To change the value at runtime, do this:

SET GLOBAL max_connect_errors=10000;

Monitoring the Host Cache

The Performance Schema host_cache table exposes the contents of the host cache. This table
can be examined using SELECT statements, which may help you diagnose the causes of connection
problems. For information about this table, see Section 29.12.21.3, “The host_cache Table”.

Flushing the Host Cache

Flushing the host cache might be advisable or desirable under these conditions:

• Some of your client hosts change IP address.

• The error message Host 'host_name' is blocked occurs for connections from legitimate

hosts. (See Dealing with Blocked Hosts.)

Flushing the host cache has these effects:

• It clears the in-memory host cache.

• It removes all rows from the Performance Schema host_cache table that exposes the cache

contents.

• It unblocks any blocked hosts. This enables further connection attempts from those hosts.

To flush the host cache, use any of these methods:

• Change the value of the host_cache_size system variable. This requires the
SYSTEM_VARIABLES_ADMIN privilege (or the deprecated SUPER privilege).

• Execute a TRUNCATE TABLE statement that truncates the Performance Schema host_cache

table. This requires the DROP privilege for the table.

1110

IPv6 Support

• Execute a FLUSH HOSTS statement. This requires the RELOAD privilege.

Note

FLUSH HOSTS is deprecated as of MySQL 8.0.23, and is scheduled for
removal in a future release.

• Execute a mysqladmin flush-hosts command. This requires the DROP privilege for the

Performance Schema host_cache table or the RELOAD privilege.

Dealing with Blocked Hosts

The server uses the host cache to track errors that occur during the client connection process. If the
following error occurs, it means that mysqld has received many connection requests from the given
host that were interrupted in the middle:

Host 'host_name' is blocked because of many connection errors.
Unblock with 'mysqladmin flush-hosts'

The value of the max_connect_errors system variable determines how many
successive interrupted connection requests the server permits before blocking a host. After
max_connect_errors failed requests without a successful connection, the server assumes that
something is wrong (for example, that someone is trying to break in), and blocks the host from further
connection requests.

To unblock blocked hosts, flush the host cache; see Flushing the Host Cache.

Alternatively, to avoid having the error message occur, set max_connect_errors as described
in Configuring the Host Cache. The default value of max_connect_errors is 100. Increasing
max_connect_errors to a large value makes it less likely that a host reaches the threshold and
becomes blocked. However, if the Host 'host_name' is blocked error message occurs, first
verify that there is nothing wrong with TCP/IP connections from the blocked hosts. It does no good to
increase the value of max_connect_errors if there are network problems.

7.1.13 IPv6 Support

Support for IPv6 in MySQL includes these capabilities:

• MySQL Server can accept TCP/IP connections from clients connecting over IPv6. For example, this

command connects over IPv6 to the MySQL server on the local host:

$> mysql -h ::1

To use this capability, two things must be true:

• Your system must be configured to support IPv6. See Section 7.1.13.1, “Verifying System Support

for IPv6”.

• The default MySQL server configuration permits IPv6 connections in addition to IPv4 connections.
To change the default configuration, start the server with the bind_address system variable set
to an appropriate value. See Section 7.1.8, “Server System Variables”.

• MySQL account names permit IPv6 addresses to enable DBAs to specify privileges for clients that
connect to the server over IPv6. See Section 8.2.4, “Specifying Account Names”. IPv6 addresses
can be specified in account names in statements such as CREATE USER, GRANT, and REVOKE. For
example:

mysql> CREATE USER 'bill'@'::1' IDENTIFIED BY 'secret';
mysql> GRANT SELECT ON mydb.* TO 'bill'@'::1';

• IPv6 functions enable conversion between string and internal format IPv6 address formats, and
checking whether values represent valid IPv6 addresses. For example, INET6_ATON() and

1111

IPv6 Support

INET6_NTOA() are similar to INET_ATON() and INET_NTOA(), but handle IPv6 addresses in
addition to IPv4 addresses. See Section 14.23, “Miscellaneous Functions”.

• From MySQL 8.0.14, Group Replication group members can use IPv6 addresses for

communications within the group. A group can contain a mix of members using IPv6 and members
using IPv4. See Section 20.5.5, “Support For IPv6 And For Mixed IPv6 And IPv4 Groups”.

The following sections describe how to set up MySQL so that clients can connect to the server over
IPv6.

7.1.13.1 Verifying System Support for IPv6

Before MySQL Server can accept IPv6 connections, the operating system on your server host must
support IPv6. As a simple test to determine whether that is true, try this command:

$> ping6 ::1
16 bytes from ::1, icmp_seq=0 hlim=64 time=0.171 ms
16 bytes from ::1, icmp_seq=1 hlim=64 time=0.077 ms
...

To produce a description of your system's network interfaces, invoke ifconfig -a and look for IPv6
addresses in the output.

If your host does not support IPv6, consult your system documentation for instructions on enabling it.
It might be that you need only reconfigure an existing network interface to add an IPv6 address. Or a
more extensive change might be needed, such as rebuilding the kernel with IPv6 options enabled.

These links may be helpful in setting up IPv6 on various platforms:

• Windows

• Gentoo Linux

• Ubuntu Linux

• Linux (Generic)

• macOS

7.1.13.2 Configuring the MySQL Server to Permit IPv6 Connections

The MySQL server listens on one or more network sockets for TCP/IP connections. Each socket is
bound to one address, but it is possible for an address to map onto multiple network interfaces.

Set the bind_address system variable at server startup to specify the TCP/IP connections that a
server instance accepts. As of MySQL 8.0.13, you can specify multiple values for this option, including
any combination of IPv6 addresses, IPv4 addresses, and host names that resolve to IPv6 or IPv4
addresses. Alternatively, you can specify one of the wildcard address formats that permit listening
on multiple network interfaces. A value of *, which is the default, or a value of ::, permit both IPv4
and IPv6 connections on all server host IPv4 and IPv6 interfaces. For more information, see the
bind_address description in Section 7.1.8, “Server System Variables”.

7.1.13.3 Connecting Using the IPv6 Local Host Address

The following procedure shows how to configure MySQL to permit IPv6 connections by clients that
connect to the local server using the ::1 local host address. The instructions given here assume that
your system supports IPv6.

1. Start the MySQL server with an appropriate bind_address setting to permit it to accept IPv6
connections. For example, put the following lines in the server option file and restart the server:

[mysqld]

1112

IPv6 Support

bind_address = *

Specifying * (or ::) as the value for bind_address permits both IPv4 and IPv6 connections
on all server host IPv4 and IPv6 interfaces. If you want to bind the server to a specific list of
addresses, you can do this as of MySQL 8.0.13 by specifying a comma-separated list of values for
bind_address. This example specifies the local host addresses for both IPv4 and IPv6:

[mysqld]
bind_address = 127.0.0.1,::1

For more information, see the bind_address description in Section 7.1.8, “Server System
Variables”.

2. As an administrator, connect to the server and create an account for a local user who can connect

from the ::1 local IPv6 host address:

mysql> CREATE USER 'ipv6user'@'::1' IDENTIFIED BY 'ipv6pass';

For the permitted syntax of IPv6 addresses in account names, see Section 8.2.4, “Specifying
Account Names”. In addition to the CREATE USER statement, you can issue GRANT statements that
give specific privileges to the account, although that is not necessary for the remaining steps in this
procedure.

3.

Invoke the mysql client to connect to the server using the new account:

$> mysql -h ::1 -u ipv6user -pipv6pass

4. Try some simple statements that show connection information:

mysql> STATUS
...
Connection:   ::1 via TCP/IP
...

mysql> SELECT CURRENT_USER(), @@bind_address;
+----------------+----------------+
| CURRENT_USER() | @@bind_address |
+----------------+----------------+
| ipv6user@::1   | ::             |
+----------------+----------------+

7.1.13.4 Connecting Using IPv6 Nonlocal Host Addresses

The following procedure shows how to configure MySQL to permit IPv6 connections by remote clients.
It is similar to the preceding procedure for local clients, but the server and client hosts are distinct and
each has its own nonlocal IPv6 address. The example uses these addresses:

Server host: 2001:db8:0:f101::1
Client host: 2001:db8:0:f101::2

These addresses are chosen from the nonroutable address range recommended by IANA for
documentation purposes and suffice for testing on your local network. To accept IPv6 connections from
clients outside the local network, the server host must have a public address. If your network provider
assigns you an IPv6 address, you can use that. Otherwise, another way to obtain an address is to use
an IPv6 broker; see Section 7.1.13.5, “Obtaining an IPv6 Address from a Broker”.

1. Start the MySQL server with an appropriate bind_address setting to permit it to accept IPv6
connections. For example, put the following lines in the server option file and restart the server:

[mysqld]
bind_address = *

Specifying * (or ::) as the value for bind_address permits both IPv4 and IPv6 connections
on all server host IPv4 and IPv6 interfaces. If you want to bind the server to a specific list of
addresses, you can do this as of MySQL 8.0.13 by specifying a comma-separated list of values for

1113

IPv6 Support

bind_address. This example specifies an IPv4 address as well as the required server host IPv6
address:

[mysqld]
bind_address = 198.51.100.20,2001:db8:0:f101::1

For more information, see the bind_address description in Section 7.1.8, “Server System
Variables”.

2. On the server host (2001:db8:0:f101::1), create an account for a user who can connect from

the client host (2001:db8:0:f101::2):

mysql> CREATE USER 'remoteipv6user'@'2001:db8:0:f101::2' IDENTIFIED BY 'remoteipv6pass';

3. On the client host (2001:db8:0:f101::2), invoke the mysql client to connect to the server using

the new account:

$> mysql -h 2001:db8:0:f101::1 -u remoteipv6user -premoteipv6pass

4. Try some simple statements that show connection information:

mysql> STATUS
...
Connection:   2001:db8:0:f101::1 via TCP/IP
...

mysql> SELECT CURRENT_USER(), @@bind_address;
+-----------------------------------+----------------+
| CURRENT_USER()                    | @@bind_address |
+-----------------------------------+----------------+
| remoteipv6user@2001:db8:0:f101::2 | ::             |
+-----------------------------------+----------------+

7.1.13.5 Obtaining an IPv6 Address from a Broker

If you do not have a public IPv6 address that enables your system to communicate over IPv6 outside
your local network, you can obtain one from an IPv6 broker. The Wikipedia IPv6 Tunnel Broker
page lists several brokers and their features, such as whether they provide static addresses and the
supported routing protocols.

After configuring your server host to use a broker-supplied IPv6 address, start the MySQL server
with an appropriate bind_address setting to permit the server to accept IPv6 connections. You can
specify * (or ::) as the bind_address value, or bind the server to the specific IPv6 address provided
by the broker. For more information, see the bind_address description in Section 7.1.8, “Server
System Variables”.

Note that if the broker allocates dynamic addresses, the address provided for your system might
change the next time you connect to the broker. If so, any accounts you create that name the original
address become invalid. To bind to a specific address but avoid this change-of-address problem, you
might be able to arrange with the broker for a static IPv6 address.

The following example shows how to use Freenet6 as the broker and the gogoc IPv6 client package
on Gentoo Linux.

1. Create an account at Freenet6 by visiting this URL and signing up:

http://gogonet.gogo6.com

2. After creating the account, go to this URL, sign in, and create a user ID and password for the IPv6

broker:

http://gogonet.gogo6.com/page/freenet6-registration

3. As root, install gogoc:

1114

Network Namespace Support

$> emerge gogoc

4. Edit /etc/gogoc/gogoc.conf to set the userid and password values. For example:

userid=gogouser
passwd=gogopass

5. Start gogoc:

$> /etc/init.d/gogoc start

To start gogoc each time your system boots, execute this command:

$> rc-update add gogoc default

6. Use ping6 to try to ping a host:

$> ping6 ipv6.google.com

7. To see your IPv6 address:

$> ifconfig tun

7.1.14 Network Namespace Support

A network namespace is a logical copy of the network stack from the host system. Network
namespaces are useful for setting up containers or virtual environments. Each namespace has its own
IP addresses, network interfaces, routing tables, and so forth. The default or global namespace is the
one in which the host system physical interfaces exist.

Namespace-specific address spaces can lead to problems when MySQL connections cross
namespaces. For example, the network address space for a MySQL instance running in a container or
virtual network may differ from the address space of the host machine. This can produce phenomena
such as a client connection from an address in one namespace appearing to the MySQL server to be
coming from a different address, even for client and server running on the same machine. Suppose
that both processes run on a host with IP address 203.0.113.10 but use different namespaces. A
connection may produce a result like this:

$> mysql --user=admin --host=203.0.113.10 --protocol=tcp

mysql> SELECT USER();
+--------------------+
| USER()             |
+--------------------+
| admin@198.51.100.2 |
+--------------------+

In this case, the expected USER() value is admin@203.0.113.10. Such behavior can make it difficult
to assign account permissions properly if the address from which an connection originates is not what it
appears.

To address this issue, MySQL enables specifying the network namespace to use for TCP/IP
connections, so that both endpoints of connections use an agreed-upon common address space.

MySQL 8.0.22 and higher supports network namespaces on platforms that implement them. Support
within MySQL applies to:

• The MySQL server, mysqld.

• X Plugin.

• The mysql client and the mysqlxtest test suite client. (Other clients are not supported. They must

be invoked from within the network namespace of the server to which they are to connect.)

• Regular replication.

1115

Network Namespace Support

• Group Replication, only when using the MySQL communication stack to establish group

communication connections (from MySQL 8.0.27).

The following sections describe how to use network namespaces in MySQL:

• Host System Prerequisites

• MySQL Configuration

• Network Namespace Monitoring

Host System Prerequisites

Prior to using network namespace support in MySQL, these host system prerequisites must be
satisfied:

• The host operating system must support network namespaces. (For example, Linux.)

• Any network namespace to be used by MySQL must first be created on the host system.

• Host name resolution must be configured by the system administrator to support network

namespaces.

Note

A known limitation is that, within MySQL, host name resolution does not work
for names specified in network namespace-specific host files. For example,
if the address for a host name in the red namespace is specified in the /
etc/netns/red/hosts file, binding to the name fails on both the server
and client sides. The workaround is to use the IP address rather than the host
name.

• The system administrator must enable the CAP_SYS_ADMIN operating system privilege for the

MySQL binaries that support network namespaces (mysqld, mysql, mysqlxtest).

Important

Enabling CAP_SYS_ADMIN is a security sensitive operation because it
enables a process to perform other privileged actions in addition to setting
namespaces. For a description of its effects, see https://man7.org/linux/man-
pages/man7/capabilities.7.html.

Because CAP_SYS_ADMIN must be enabled explicitly by the system
administrator, MySQL binaries by default do not have network namespace
support enabled. The system administrator should evaluate the security
implications of running MySQL processes with CAP_SYS_ADMIN before
enabling it.

The instructions in the following example set up network namespaces named red and blue. The
names you choose may differ, as may the network addresses and interfaces on your host system.

Invoke the commands shown here either as the root operating system user or by prefixing each
command with sudo. For example, to invoke the ip or setcap command if you are not root, use
sudo ip or sudo setcap.

To configure network namespaces, use the ip command. For some operations, the ip command must
execute within a particular namespace (which must already exist). In such cases, begin the command
like this:

ip netns exec namespace_name

For example, this command executes within the red namespace to bring up the loopback interface:

1116

Network Namespace Support

ip netns exec red ip link set lo up

To add namespaces named red and blue, each with its own virtual Ethernet device used as a link
between namespaces and its own loopback interface:

ip netns add red
ip link add veth-red type veth peer name vpeer-red
ip link set vpeer-red netns red
ip addr add 192.0.2.1/24 dev veth-red
ip link set veth-red up
ip netns exec red ip addr add 192.0.2.2/24 dev vpeer-red
ip netns exec red ip link set vpeer-red up
ip netns exec red ip link set lo up

ip netns add blue
ip link add veth-blue type veth peer name vpeer-blue
ip link set vpeer-blue netns blue
ip addr add 198.51.100.1/24 dev veth-blue
ip link set veth-blue up
ip netns exec blue ip addr add 198.51.100.2/24 dev vpeer-blue
ip netns exec blue ip link set vpeer-blue up
ip netns exec blue ip link set lo up

# if you want to enable inter-subnet routing...
sysctl net.ipv4.ip_forward=1
ip netns exec red ip route add default via 192.0.2.1
ip netns exec blue ip route add default via 198.51.100.1

A diagram of the links between namespaces looks like this:

red              global           blue

192.0.2.2   <=>  192.0.2.1
(vpeer-red)      (veth-red)

                 198.51.100.1 <=> 198.51.100.2
                 (veth-blue)      (vpeer-blue)

To check which namespaces and links exist:

ip netns list
ip link list

To see the routing tables for the global and named namespaces:

ip route show
ip netns exec red ip route show
ip netns exec blue ip route show

To remove the red and blue links and namespaces:

ip link del veth-red
ip link del veth-blue

ip netns del red
ip netns del blue

sysctl net.ipv4.ip_forward=0

So that the MySQL binaries that include network namespace support can actually use namespaces,
you must grant them the CAP_SYS_ADMIN capability. The following setcap commands assume that
you have changed location to the directory containing your MySQL binaries (adjust the pathname for
your system as necessary):

cd /usr/local/mysql/bin

To grant CAP_SYS_ADMIN capability to the appropriate binaries:

setcap cap_sys_admin+ep ./mysqld
setcap cap_sys_admin+ep ./mysql

1117

Network Namespace Support

setcap cap_sys_admin+ep ./mysqlxtest

To check CAP_SYS_ADMIN capability:

$> getcap ./mysqld ./mysql ./mysqlxtest
./mysqld = cap_sys_admin+ep
./mysql = cap_sys_admin+ep
./mysqlxtest = cap_sys_admin+ep

To remove CAP_SYS_ADMIN capability:

setcap -r ./mysqld
setcap -r ./mysql
setcap -r ./mysqlxtest

Important

If you reinstall binaries to which you have previously applied setcap, you must
use setcap again. For example, if you perform an in-place MySQL upgrade,
failure to grant the CAP_SYS_ADMIN capability again results in namespace-
related failures. The server fails with this error for attempts to bind to an address
with a named namespace:

[ERROR] [MY-013408] [Server] setns() failed with error 'Operation not permitted'

A client invoked with the --network-namespace option fails like this:

ERROR: Network namespace error: Operation not permitted

MySQL Configuration

Assuming that the preceding host system prerequisites have been satisfied, MySQL enables
configuring the server-side namespace for the listening (inbound) side of connections and the client-
side namespace for the outbound side of connections.

On the server side, the bind_address, admin_address, and mysqlx_bind_address system
variables have extended syntax for specifying the network namespace to use for a given IP address or
host name on which to listen for incoming connections. To specify a namespace for an address, add a
slash and the namespace name. For example, a server my.cnf file might contain these lines:

[mysqld]
bind_address = 127.0.1.1,192.0.2.2/red,198.51.100.2/blue
admin_address = 102.0.2.2/red
mysqlx_bind_address = 102.0.2.2/red

These rules apply:

• A network namespace can be specified for an IP address or a host name.

• A network namespace cannot be specified for a wildcard IP address.

• For a given address, the network namespace is optional. If given, it must be specified as a /ns suffix

immediately following the address.

• An address with no /ns suffix uses the host system global namespace. The global namespace is

therefore the default.

• An address with a /ns suffix uses the namespace named ns.

• The host system must support network namespaces and each named namespace must previously

have been set up. Naming a nonexistent namespace produces an error.

• bind_address and (as of MySQL 8.0.21) mysqlx_bind_address accept a list of multiple

comma-separated addresses, the variable value can specify addresses in the global namespace, in
named namespaces, or a mix.

1118

Network Namespace Support

If an error occurs during server startup for attempts to use a namespace, the server does not start. If
errors occur for X Plugin during plugin initialization such that it is unable to bind to any address, the
plugin fails its initialization sequence and the server does not load it.

On the client side, a network namespace can be specified in these contexts:

• For the mysql client and the mysqlxtest test suite client, use the --network-namespace option.

For example:

mysql --host=192.0.2.2 --network-namespace=red

If the --network-namespace option is omitted, the connection uses the default (global)
namespace.

• For replication connections from replica servers to source servers, use the CHANGE REPLICATION
SOURCE TO statement (from MySQL 8.0.23) or CHANGE MASTER TO statement (before MySQL
8.0.23) and specify the NETWORK_NAMESPACE option. For example:

CHANGE REPLICATION SOURCE TO
  SOURCE_HOST = '192.0.2.2',
  NETWORK_NAMESPACE = 'red';

If the NETWORK_NAMESPACE option is omitted, replication connections use the default (global)
namespace.

The following example sets up a MySQL server that listens for connections in the global, red, and
blue namespaces, and shows how to configure accounts that connect from the red and blue
namespaces. It is assumed that the red and blue namespaces have already been created as shown
in Host System Prerequisites.

1. Configure the server to listen on addresses in multiple namespaces. Put these lines in the server

my.cnf file and start the server:

[mysqld]
bind_address = 127.0.1.1,192.0.2.2/red,198.51.100.2/blue

The value tells the server to listen on the loopback address 127.0.0.1 in the global namespace,
the address 192.0.2.2 in the red namespace, and the address 198.51.100.2 in the blue
namespace.

2. Connect to the server in the global namespace and create accounts that have permission to

connect from an address in the address space of each named namespace:

$> mysql -u root -h 127.0.0.1 -p
Enter password: root_password

mysql> CREATE USER 'red_user'@'192.0.2.2'
       IDENTIFIED BY 'red_user_password';
mysql> CREATE USER 'blue_user'@'198.51.100.2'
       IDENTIFIED BY 'blue_user_password';

3. Verify that you can connect to the server in each named namespace:

$> mysql -u red_user -h 192.0.2.2 --network-namespace=red -p
Enter password: red_user_password

mysql> SELECT USER();
+--------------------+
| USER()             |
+--------------------+
| red_user@192.0.2.2 |
+--------------------+

$> mysql -u blue_user -h 198.51.100.2 --network-namespace=blue -p
Enter password: blue_user_password

1119

MySQL Server Time Zone Support

mysql> SELECT USER();
+------------------------+
| USER()                 |
+------------------------+
| blue_user@198.51.100.2 |
+------------------------+

Note

You might see different results from USER(), which can return a value that
includes a host name rather than an IP address if your DNS is configured
to be able to resolve the address to the corresponding host name and the
server is not run with the skip_name_resolve system variable enabled.

You might also try invoking mysql without the --network-namespace option to see whether the
connection attempt succeeds, and, if so, how the USER() value is affected.

Network Namespace Monitoring

For replication monitoring purposes, these information sources have a column that displays the
applicable network namespace for connections:

• The Performance Schema replication_connection_configuration table. See

Section 29.12.11.10, “The replication_connection_configuration Table”.

• The replica server connection metadata repository. See Section 19.2.4.2, “Replication Metadata

Repositories”.

• The SHOW REPLICA STATUS (or before MySQL 8.0.22, SHOW SLAVE STATUS) statement. See

Section 15.7.7.35, “SHOW REPLICA STATUS Statement”.

7.1.15 MySQL Server Time Zone Support

This section describes the time zone settings maintained by MySQL, how to load the system tables
required for named time support, how to stay current with time zone changes, and how to enable leap-
second support.

Beginning with MySQL 8.0.19, time zone offsets are also supported for inserted datetime values; see
Section 13.2.2, “The DATE, DATETIME, and TIMESTAMP Types”, for more information.

For information about time zone settings in replication setups, see Section 19.5.1.14, “Replication and
System Functions” and Section 19.5.1.33, “Replication and Time Zones”.

• Time Zone Variables

• Populating the Time Zone Tables

• Staying Current with Time Zone Changes

• Time Zone Leap Second Support

Time Zone Variables

MySQL Server maintains several time zone settings:

• The server system time zone. When the server starts, it attempts to determine the time zone of the

host machine and uses it to set the system_time_zone system variable.

To explicitly specify the system time zone for MySQL Server at startup, set the TZ environment
variable before you start mysqld. If you start the server using mysqld_safe, its --timezone
option provides another way to set the system time zone. The permissible values for TZ and --
timezone are system dependent. Consult your operating system documentation to see what values
are acceptable.

1120

MySQL Server Time Zone Support

• The server current time zone. The global time_zone system variable indicates the time zone the

server currently is operating in. The initial time_zone value is 'SYSTEM', which indicates that the
server time zone is the same as the system time zone.

Note

If set to SYSTEM, every MySQL function call that requires a time zone
calculation makes a system library call to determine the current system time
zone. This call may be protected by a global mutex, resulting in contention.

The initial global server time zone value can be specified explicitly at startup with the --default-
time-zone option on the command line, or you can use the following line in an option file:

default-time-zone='timezone'

If you have the SYSTEM_VARIABLES_ADMIN privilege (or the deprecated SUPER privilege), you can
set the global server time zone value at runtime with this statement:

SET GLOBAL time_zone = timezone;

• Per-session time zones. Each client that connects has its own session time zone setting, given

by the session time_zone variable. Initially, the session variable takes its value from the global
time_zone variable, but the client can change its own time zone with this statement:

SET time_zone = timezone;

The session time zone setting affects display and storage of time values that are zone-sensitive. This
includes the values displayed by functions such as NOW() or CURTIME(), and values stored in and
retrieved from TIMESTAMP columns. Values for TIMESTAMP columns are converted from the session
time zone to UTC for storage, and from UTC to the session time zone for retrieval.

The session time zone setting does not affect values displayed by functions such as
UTC_TIMESTAMP() or values in DATE, TIME, or DATETIME columns. Nor are values in those data
types stored in UTC; the time zone applies for them only when converting from TIMESTAMP values. If
you want locale-specific arithmetic for DATE, TIME, or DATETIME values, convert them to UTC, perform
the arithmetic, and then convert back.

The current global and session time zone values can be retrieved like this:

SELECT @@GLOBAL.time_zone, @@SESSION.time_zone;

timezone values can be given in several formats, none of which are case-sensitive:

• As the value 'SYSTEM', indicating that the server time zone is the same as the system time zone.

• As a string indicating an offset from UTC of the form [H]H:MM, prefixed with a + or -, such as

'+10:00', '-6:00', or '+05:30'. A leading zero can optionally be used for hours values less
than 10; MySQL prepends a leading zero when storing and retrieving the value in such cases.
MySQL converts '-00:00' or '-0:00' to '+00:00'.

Prior to MySQL 8.0.19, this value had to be in the range '-12:59' to '+13:00', inclusive;
beginning with MySQL 8.0.19, the permitted range is '-13:59' to '+14:00', inclusive.

• As a named time zone, such as 'Europe/Helsinki', 'US/Eastern', 'MET', or 'UTC'.

Note

Named time zones can be used only if the time zone information tables in
the mysql database have been created and populated. Otherwise, use of a
named time zone results in an error:

mysql> SET time_zone = 'UTC';
ERROR 1298 (HY000): Unknown or incorrect time zone: 'UTC'

1121

MySQL Server Time Zone Support

Populating the Time Zone Tables

Several tables in the mysql system schema exist to store time zone information (see Section 7.3, “The
mysql System Schema”). The MySQL installation procedure creates the time zone tables, but does not
load them. To do so manually, use the following instructions.

Note

Loading the time zone information is not necessarily a one-time operation
because the information changes occasionally. When such changes occur,
applications that use the old rules become out of date and you may find it
necessary to reload the time zone tables to keep the information used by your
MySQL server current. See Staying Current with Time Zone Changes.

If your system has its own zoneinfo database (the set of files describing time zones), use the
mysql_tzinfo_to_sql program to load the time zone tables. Examples of such systems are Linux,
macOS, FreeBSD, and Solaris. One likely location for these files is the /usr/share/zoneinfo
directory. If your system has no zoneinfo database, you can use a downloadable package, as
described later in this section.

To load the time zone tables from the command line, pass the zoneinfo directory path name to
mysql_tzinfo_to_sql and send the output into the mysql program. For example:

mysql_tzinfo_to_sql /usr/share/zoneinfo | mysql -u root -p mysql

The mysql command shown here assumes that you connect to the server using an account such
as root that has privileges for modifying tables in the mysql system schema. Adjust the connection
parameters as required.

mysql_tzinfo_to_sql reads your system's time zone files and generates SQL statements from
them. mysql processes those statements to load the time zone tables.

mysql_tzinfo_to_sql also can be used to load a single time zone file or generate leap second
information:

• To load a single time zone file tz_file that corresponds to a time zone name tz_name, invoke

mysql_tzinfo_to_sql like this:

mysql_tzinfo_to_sql tz_file tz_name | mysql -u root -p mysql

With this approach, you must execute a separate command to load the time zone file for each named
zone that the server needs to know about.

• If your time zone must account for leap seconds, initialize leap second information like this, where

tz_file is the name of your time zone file:

mysql_tzinfo_to_sql --leap tz_file | mysql -u root -p mysql

After running mysql_tzinfo_to_sql, restart the server so that it does not continue to use any
previously cached time zone data.

If your system has no zoneinfo database (for example, Windows), you can use a package containing
SQL statements that is available for download at the MySQL Developer Zone:

https://dev.mysql.com/downloads/timezones.html

Warning

Do not use a downloadable time zone package if your system has a zoneinfo
database. Use the mysql_tzinfo_to_sql utility instead. Otherwise, you may
cause a difference in datetime handling between MySQL and other applications
on your system.

1122

MySQL Server Time Zone Support

To use an SQL-statement time zone package that you have downloaded, unpack it, then load the
unpacked file contents into the time zone tables:

mysql -u root -p mysql < file_name

Then restart the server.

Warning

Do not use a downloadable time zone package that contains MyISAM tables.
That is intended for older MySQL versions. MySQL now uses InnoDB for the
time zone tables. Trying to replace them with MyISAM tables causes problems.

Staying Current with Time Zone Changes

When time zone rules change, applications that use the old rules become out of date. To stay current,
it is necessary to make sure that your system uses current time zone information is used. For MySQL,
there are multiple factors to consider in staying current:

• The operating system time affects the value that the MySQL server uses for times if its time zone
is set to SYSTEM. Make sure that your operating system is using the latest time zone information.
For most operating systems, the latest update or service pack prepares your system for the time
changes. Check the website for your operating system vendor for an update that addresses the time
changes.

• If you replace the system's /etc/localtime time zone file with a version that uses rules differing
from those in effect at mysqld startup, restart mysqld so that it uses the updated rules. Otherwise,
mysqld might not notice when the system changes its time.

• If you use named time zones with MySQL, make sure that the time zone tables in the mysql

database are up to date:

• If your system has its own zoneinfo database, reload the MySQL time zone tables whenever the

zoneinfo database is updated.

• For systems that do not have their own zoneinfo database, check the MySQL Developer Zone for
updates. When a new update is available, download it and use it to replace the content of your
current time zone tables.

For instructions for both methods, see Populating the Time Zone Tables. mysqld caches time zone
information that it looks up, so after updating the time zone tables, restart mysqld to make sure that
it does not continue to serve outdated time zone data.

If you are uncertain whether named time zones are available, for use either as the server's time zone
setting or by clients that set their own time zone, check whether your time zone tables are empty. The
following query determines whether the table that contains time zone names has any rows:

mysql> SELECT COUNT(*) FROM mysql.time_zone_name;
+----------+
| COUNT(*) |
+----------+
|        0 |
+----------+

A count of zero indicates that the table is empty. In this case, no applications currently are using named
time zones, and you need not update the tables (unless you want to enable named time zone support).
A count greater than zero indicates that the table is not empty and that its contents are available to
be used for named time zone support. In this case, be sure to reload your time zone tables so that
applications that use named time zones can obtain correct query results.

To check whether your MySQL installation is updated properly for a change in Daylight Saving Time
rules, use a test like the one following. The example uses values that are appropriate for the 2007 DST
1-hour change that occurs in the United States on March 11 at 2 a.m.

1123

MySQL Server Time Zone Support

The test uses this query:

SELECT
  CONVERT_TZ('2007-03-11 2:00:00','US/Eastern','US/Central') AS time1,
  CONVERT_TZ('2007-03-11 3:00:00','US/Eastern','US/Central') AS time2;

The two time values indicate the times at which the DST change occurs, and the use of named time
zones requires that the time zone tables be used. The desired result is that both queries return the
same result (the input time, converted to the equivalent value in the 'US/Central' time zone).

Before updating the time zone tables, you see an incorrect result like this:

+---------------------+---------------------+
| time1               | time2               |
+---------------------+---------------------+
| 2007-03-11 01:00:00 | 2007-03-11 02:00:00 |
+---------------------+---------------------+

After updating the tables, you should see the correct result:

+---------------------+---------------------+
| time1               | time2               |
+---------------------+---------------------+
| 2007-03-11 01:00:00 | 2007-03-11 01:00:00 |
+---------------------+---------------------+

Time Zone Leap Second Support

Leap second values are returned with a time part that ends with :59:59. This means that a function
such as NOW() can return the same value for two or three consecutive seconds during the leap
second. It remains true that literal temporal values having a time part that ends with :59:60 or :59:61
are considered invalid.

If it is necessary to search for TIMESTAMP values one second before the leap second, anomalous
results may be obtained if you use a comparison with 'YYYY-MM-DD hh:mm:ss' values. The
following example demonstrates this. It changes the session time zone to UTC so there is no difference
between internal TIMESTAMP values (which are in UTC) and displayed values (which have time zone
correction applied).

mysql> CREATE TABLE t1 (
         a INT,
         ts TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
         PRIMARY KEY (ts)
       );
Query OK, 0 rows affected (0.01 sec)

mysql> -- change to UTC
mysql> SET time_zone = '+00:00';
Query OK, 0 rows affected (0.00 sec)

mysql> -- Simulate NOW() = '2008-12-31 23:59:59'
mysql> SET timestamp = 1230767999;
Query OK, 0 rows affected (0.00 sec)

mysql> INSERT INTO t1 (a) VALUES (1);
Query OK, 1 row affected (0.00 sec)

mysql> -- Simulate NOW() = '2008-12-31 23:59:60'
mysql> SET timestamp = 1230768000;
Query OK, 0 rows affected (0.00 sec)

mysql> INSERT INTO t1 (a) VALUES (2);
Query OK, 1 row affected (0.00 sec)

mysql> -- values differ internally but display the same
mysql> SELECT a, ts, UNIX_TIMESTAMP(ts) FROM t1;
+------+---------------------+--------------------+
| a    | ts                  | UNIX_TIMESTAMP(ts) |

1124

Resource Groups

+------+---------------------+--------------------+
|    1 | 2008-12-31 23:59:59 |         1230767999 |
|    2 | 2008-12-31 23:59:59 |         1230768000 |
+------+---------------------+--------------------+
2 rows in set (0.00 sec)

mysql> -- only the non-leap value matches
mysql> SELECT * FROM t1 WHERE ts = '2008-12-31 23:59:59';
+------+---------------------+
| a    | ts                  |
+------+---------------------+
|    1 | 2008-12-31 23:59:59 |
+------+---------------------+
1 row in set (0.00 sec)

mysql> -- the leap value with seconds=60 is invalid
mysql> SELECT * FROM t1 WHERE ts = '2008-12-31 23:59:60';
Empty set, 2 warnings (0.00 sec)

To work around this, you can use a comparison based on the UTC value actually stored in the column,
which has the leap second correction applied:

mysql> -- selecting using UNIX_TIMESTAMP value return leap value
mysql> SELECT * FROM t1 WHERE UNIX_TIMESTAMP(ts) = 1230768000;
+------+---------------------+
| a    | ts                  |
+------+---------------------+
|    2 | 2008-12-31 23:59:59 |
+------+---------------------+
1 row in set (0.00 sec)

7.1.16 Resource Groups

MySQL supports creation and management of resource groups, and permits assigning threads
running within the server to particular groups so that threads execute according to the resources
available to the group. Group attributes enable control over its resources, to enable or restrict resource
consumption by threads in the group. DBAs can modify these attributes as appropriate for different
workloads.

Currently, CPU time is a manageable resource, represented by the concept of “virtual CPU” as a term
that includes CPU cores, hyperthreads, hardware threads, and so forth. The server determines at
startup how many virtual CPUs are available, and database administrators with appropriate privileges
can associate these CPUs with resource groups and assign threads to groups.

For example, to manage execution of batch jobs that need not execute with high priority, a DBA can
create a Batch resource group, and adjust its priority up or down depending on how busy the server
is. (Perhaps batch jobs assigned to the group should run at lower priority during the day and at higher
priority during the night.) The DBA can also adjust the set of CPUs available to the group. Groups can
be enabled or disabled to control whether threads are assignable to them.

The following sections describe aspects of resource group use in MySQL:

• Resource Group Elements

• Resource Group Attributes

• Resource Group Management

• Resource Group Replication

• Resource Group Restrictions

Important

On some platforms or MySQL server configurations, resource groups are
unavailable or have limitations. In particular, Linux systems might require a

1125

Resource Groups

manual step for some installation methods. For details, see Resource Group
Restrictions.

Resource Group Elements

These capabilities provide the SQL interface for resource group management in MySQL:

• SQL statements enable creating, altering, and dropping resource groups, and enable assigning

threads to resource groups. An optimizer hint enables assigning individual statements to resource
groups.

• Resource group privileges provide control over which users can perform resource group operations.

• The Information Schema RESOURCE_GROUPS table exposes information about resource group

definitions and the Performance Schema threads table shows the resource group assignment for
each thread.

• Status variables provide execution counts for each management SQL statement.

Resource Group Attributes

Resource groups have attributes that define the group. All attributes can be set at group creation time.
Some attributes are fixed at creation time; others can be modified any time thereafter.

These attributes are defined at resource group creation time and cannot be modified:

• Each group has a name. Resource group names are identifiers like table and column names, and

need not be quoted in SQL statements unless they contain special characters or are reserved words.
Group names are not case-sensitive and may be up to 64 characters long.

• Each group has a type, which is either SYSTEM or USER. The resource group type affects the

range of priority values assignable to the group, as described later. This attribute together with the
differences in permitted priorities enables system threads to be identified so as to protect them from
contention for CPU resources against user threads.

System and user threads correspond to background and foreground threads as listed in the
Performance Schema threads table.

These attributes are defined at resource group creation time and can be modified any time thereafter:

• The CPU affinity is the set of virtual CPUs the resource group can use. An affinity can be any

nonempty subset of the available CPUs. If a group has no affinity, it can use all available CPUs.

• The thread priority is the execution priority for threads assigned to the resource group. Priority values
range from -20 (highest priority) to 19 (lowest priority). The default priority is 0, for both system and
user groups.

System groups are permitted a higher priority than user groups, ensuring that user threads never
have a higher priority than system threads:

• For system resource groups, the permitted priority range is -20 to 0.

• For user resource groups, the permitted priority range is 0 to 19.

• Each group can be enabled or disabled, affording administrators control over thread assignment.

Threads can be assigned only to enabled groups.

Resource Group Management

By default, there is one system group and one user group, named SYS_default and USR_default,
respectively. These default groups cannot be dropped and their attributes cannot be modified. Each
default group has no CPU affinity and priority 0.

1126

Resource Groups

Newly created system and user threads are assigned to the SYS_default and USR_default groups,
respectively.

For user-defined resource groups, all attributes are assigned at group creation time. After a group has
been created, its attributes can be modified, with the exception of the name and type attributes.

To create and manage user-defined resource groups, use these SQL statements:

• CREATE RESOURCE GROUP creates a new group. See Section 15.7.2.2, “CREATE RESOURCE

GROUP Statement”.

• ALTER RESOURCE GROUP modifies an existing group. See Section 15.7.2.1, “ALTER RESOURCE

GROUP Statement”.

• DROP RESOURCE GROUP drops an existing group. See Section 15.7.2.3, “DROP RESOURCE

GROUP Statement”.

Those statements require the RESOURCE_GROUP_ADMIN privilege.

To manage resource group assignments, use these capabilities:

• SET RESOURCE GROUP assigns threads to a group. See Section 15.7.2.4, “SET RESOURCE

GROUP Statement”.

• The RESOURCE_GROUP optimizer hint assigns individual statements to a group. See Section 10.9.3,

“Optimizer Hints”.

Those operations require the RESOURCE_GROUP_ADMIN or RESOURCE_GROUP_USER privilege.

Resource group definitions are stored in the resource_groups data dictionary table so that
groups persist across server restarts. Because resource_groups is part of the data dictionary,
it is not directly accessible by users. Resource group information is available using the Information
Schema RESOURCE_GROUPS table, which is implemented as a view on the data dictionary table. See
Section 28.3.26, “The INFORMATION_SCHEMA RESOURCE_GROUPS Table”.

Initially, the RESOURCE_GROUPS table has these rows describing the default groups:

mysql> SELECT * FROM INFORMATION_SCHEMA.RESOURCE_GROUPS\G
*************************** 1. row ***************************
   RESOURCE_GROUP_NAME: USR_default
   RESOURCE_GROUP_TYPE: USER
RESOURCE_GROUP_ENABLED: 1
              VCPU_IDS: 0-3
       THREAD_PRIORITY: 0
*************************** 2. row ***************************
   RESOURCE_GROUP_NAME: SYS_default
   RESOURCE_GROUP_TYPE: SYSTEM
RESOURCE_GROUP_ENABLED: 1
              VCPU_IDS: 0-3
       THREAD_PRIORITY: 0

The THREAD_PRIORITY values are 0, indicating the default priority. The VCPU_IDS values show a
range comprising all available CPUs. For the default groups, the displayed value varies depending on
the system on which the MySQL server runs.

Earlier discussion mentioned a scenario involving a resource group named Batch to manage
execution of batch jobs that need not execute with high priority. To create such a group, use a
statement similar to this:

CREATE RESOURCE GROUP Batch
  TYPE = USER
  VCPU = 2-3            -- assumes a system with at least 4 CPUs
  THREAD_PRIORITY = 10;

To verify that the resource group was created as expected, check the RESOURCE_GROUPS table:

1127

Resource Groups

mysql> SELECT * FROM INFORMATION_SCHEMA.RESOURCE_GROUPS
       WHERE RESOURCE_GROUP_NAME = 'Batch'\G
*************************** 1. row ***************************
   RESOURCE_GROUP_NAME: Batch
   RESOURCE_GROUP_TYPE: USER
RESOURCE_GROUP_ENABLED: 1
              VCPU_IDS: 2-3
       THREAD_PRIORITY: 10

If the THREAD_PRIORITY value is 0 rather than 10, check whether your platform or system
configuration limits the resource group capability; see Resource Group Restrictions.

To assign a thread to the Batch group, do this:

SET RESOURCE GROUP Batch FOR thread_id;

Thereafter, statements in the named thread execute with Batch group resources.

If a session's own current thread should be in the Batch group, execute this statement within the
session:

SET RESOURCE GROUP Batch;

Thereafter, statements in the session execute with Batch group resources.

To execute a single statement using the Batch group, use the RESOURCE_GROUP optimizer hint:

INSERT /*+ RESOURCE_GROUP(Batch) */ INTO t2 VALUES(2);

Threads assigned to the Batch group execute with its resources, which can be modified as desired:

• For times when the system is highly loaded, decrease the number of CPUs assigned to the group,

lower its priority, or (as shown) both:

ALTER RESOURCE GROUP Batch
  VCPU = 3
  THREAD_PRIORITY = 19;

• For times when the system is lightly loaded, increase the number of CPUs assigned to the group,

raise its priority, or (as shown) both:

ALTER RESOURCE GROUP Batch
  VCPU = 0-3
  THREAD_PRIORITY = 0;

Resource Group Replication

Resource group management is local to the server on which it occurs. Resource group SQL
statements and modifications to the resource_groups data dictionary table are not written to the
binary log and are not replicated.

Resource Group Restrictions

On some platforms or MySQL server configurations, resource groups are unavailable or have
limitations:

• Resource groups are unavailable if the thread pool plugin is installed.

• Resource groups are unavailable on macOS, which provides no API for binding CPUs to a thread.

• On FreeBSD and Solaris, resource group thread priorities are ignored. (Effectively, all threads run at

priority 0.) Attempts to change priorities result in a warning:

mysql> ALTER RESOURCE GROUP abc THREAD_PRIORITY = 10;
Query OK, 0 rows affected, 1 warning (0.18 sec)

1128

Resource Groups

mysql> SHOW WARNINGS;
+---------+------+-------------------------------------------------------------+
| Level   | Code | Message                                                     |
+---------+------+-------------------------------------------------------------+
| Warning | 4560 | Attribute thread_priority is ignored (using default value). |
+---------+------+-------------------------------------------------------------+

• On Linux, resource groups thread priorities are ignored unless the CAP_SYS_NICE capability is

set. Granting CAP_SYS_NICE capability to a process enables a range of privileges; consult http://
man7.org/linux/man-pages/man7/capabilities.7.html for the full list. Please be careful when enabling
this capability.

On Linux platforms using systemd and kernel support for Ambient Capabilities (Linux 4.3 or newer),
the recommended way to enable CAP_SYS_NICE capability is to modify the MySQL service file and
leave the mysqld binary unmodified. To adjust the service file for MySQL, use this procedure:

1. Run the appropriate command for your platform:

• Oracle Linux, Red Hat, and Fedora systems:

$> sudo systemctl edit mysqld

• SUSE, Ubuntu, and Debian systems:

$> sudo systemctl edit mysql

2. Using an editor, add the following text to the service file:

[Service]
AmbientCapabilities=CAP_SYS_NICE

3. Restart the MySQL service.

If you cannot enable the CAP_SYS_NICE capability as just described, it can be set manually using
the setcap command, specifying the path name to the mysqld executable (this requires sudo
access). You can check the capabilities using getcap. For example:

$> sudo setcap cap_sys_nice+ep /path/to/mysqld
$> getcap /path/to/mysqld
/path/to/mysqld = cap_sys_nice+ep

As a safety measure, restrict execution of the mysqld binary to the root user and users with mysql
group membership:

$> sudo chown root:mysql /path/to/mysqld
$> sudo chmod 0750 /path/to/mysqld

Important

If manual use of setcap is required, it must be performed after each reinstall.

• On Windows, threads run at one of five thread priority levels. The resource group thread priority

range of -20 to 19 maps onto those levels as indicated in the following table.

Table 7.6 Resource Group Thread Priority on Windows

Priority Range

-20 to -10

-9 to -1

0

1 to 10

11 to 19

Windows Priority Level

THREAD_PRIORITY_HIGHEST

THREAD_PRIORITY_ABOVE_NORMAL

THREAD_PRIORITY_NORMAL

THREAD_PRIORITY_BELOW_NORMAL

THREAD_PRIORITY_LOWEST

1129

Server-Side Help Support

7.1.17 Server-Side Help Support

MySQL Server supports a HELP statement that returns information from the MySQL Reference Manual
(see Section 15.8.3, “HELP Statement”). This information is stored in several tables in the mysql
schema (see Section 7.3, “The mysql System Schema”). Proper operation of the HELP statement
requires that these help tables be initialized.

For a new installation of MySQL using a binary or source distribution on Unix, help-table content
initialization occurs when you initialize the data directory (see Section 2.9.1, “Initializing the Data
Directory”). For an RPM distribution on Linux or binary distribution on Windows, content initialization
occurs as part of the MySQL installation process.

For a MySQL upgrade using a binary distribution, help-table content is upgraded automatically by the
server as of MySQL 8.0.16. Prior to MySQL 8.0.16, the content is not upgraded automatically, but you
can upgrade it manually. Locate the fill_help_tables.sql file in the share or share/mysql
directory. Change location into that directory and process the file with the mysql client as follows:

mysql -u root -p mysql < fill_help_tables.sql

The command shown here assumes that you connect to the server using an account such as root
that has privileges for modifying tables in the mysql schema. Adjust the connection parameters as
required.

Prior to MySQL 8.0.16, if you are working with Git and a MySQL development source tree, the source
tree contains only a “stub” version of fill_help_tables.sql. To obtain a non-stub copy, use one
from a source or binary distribution.

Note

Each MySQL series has its own series-specific reference manual, so help-table
content is series specific as well. This has implications for replication because
help-table content should match the MySQL series. If you load MySQL 8.0 help
content into a MySQL 8.0 replication server, it does not make sense to replicate
that content to a replica server from a different MySQL series and for which that
content is not appropriate. For this reason, as you upgrade individual servers
in a replication scenario, you should upgrade each server's help tables, using
the instructions given earlier. (Manual help-content upgrade is necessary only
for replication servers from versions lower than 8.0.16. As mentioned in the
preceding instructions, content upgrades occur automatically as of MySQL
8.0.16.)

7.1.18 Server Tracking of Client Session State

The MySQL server implements several session state trackers. A client can enable these trackers to
receive notification of changes to its session state.

• Uses for Session State Trackers

• Available Session State Trackers

• C API Session State Tracker Support

• Test Suite Session State Tracker Support

Uses for Session State Trackers

Session state trackers have uses such as these:

• To facilitate session migration.

• To facilitate transaction switching.

1130

Server Tracking of Client Session State

The tracker mechanism provides a means for MySQL connectors and client applications to determine
whether any session context is available to permit session migration from one server to another. (To
change sessions in a load-balanced environment, it is necessary to detect whether there is session
state to take into consideration when deciding whether a switch can be made.)

The tracker mechanism permits applications to know when transactions can be moved from one
session to another. Transaction state tracking enables this, which is useful for applications that may
wish to move transactions from a busy server to one that is less loaded. For example, a load-balancing
connector managing a client connection pool could move transactions between available sessions in
the pool.

However, session switching cannot be done at arbitrary times. If a session is in the middle of a
transaction for which reads or writes have been done, switching to a different session implies a
transaction rollback on the original session. A session switch must be done only when a transaction
does not yet have any reads or writes performed within it.

Examples of when transactions might reasonably be switched:

• Immediately after START TRANSACTION

• After COMMIT AND CHAIN

In addition to knowing transaction state, it is useful to know transaction characteristics, so as to use the
same characteristics if the transaction is moved to a different session. The following characteristics are
relevant for this purpose:

READ ONLY
READ WRITE
ISOLATION LEVEL
WITH CONSISTENT SNAPSHOT

Available Session State Trackers

To support the session-tracking activities, notification is available for these types of client session state
information:

• Changes to these attributes of client session state:

• The default schema (database).

• Session-specific values for system variables.

• User-defined variables.

• Temporary tables.

• Prepared statements.

The session_track_state_change system variable controls this tracker.

• Changes to the default schema name. The session_track_schema system variable controls this

tracker.

• Changes to the session values of system variables. The session_track_system_variables

system variable controls this tracker. The SENSITIVE_VARIABLES_OBSERVER privilege is required
to track changes to the values of sensitive system variables.

• Available GTIDs. The session_track_gtids system variable controls this tracker.

• Information about transaction state and characteristics. The session_track_transaction_info

system variable controls this tracker.

For descriptions of the tracker-related system variables, see Section 7.1.8, “Server System Variables”.
Those system variables permit control over which change notifications occur, but do not provide a

1131

Server Tracking of Client Session State

way to access notification information. Notification occurs in the MySQL client/server protocol, which
includes tracker information in OK packets so that session state changes can be detected.

C API Session State Tracker Support

To enable client applications to extract state-change information from OK packets returned by the
server, the MySQL C API provides a pair of functions:

• mysql_session_track_get_first() fetches the first part of the state-change information

received from the server. See mysql_session_track_get_first().

• mysql_session_track_get_next() fetches any remaining state-change information received
from the server. Following a successful call to mysql_session_track_get_first(), call this
function repeatedly as long as it returns success. See mysql_session_track_get_next().

Test Suite Session State Tracker Support

The mysqltest program has disable_session_track_info and
enable_session_track_info commands that control whether session tracker notifications occur.
You can use these commands to see from the command line what notifications SQL statements
produce. Suppose that a file testscript contains the following mysqltest script:

DROP TABLE IF EXISTS test.t1;
CREATE TABLE test.t1 (i INT, f FLOAT);
--enable_session_track_info
SET @@SESSION.session_track_schema=ON;
SET @@SESSION.session_track_system_variables='*';
SET @@SESSION.session_track_state_change=ON;
USE information_schema;
SET NAMES 'utf8mb4';
SET @@SESSION.session_track_transaction_info='CHARACTERISTICS';
SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;
SET TRANSACTION READ WRITE;
START TRANSACTION;
SELECT 1;
INSERT INTO test.t1 () VALUES();
INSERT INTO test.t1 () VALUES(1, RAND());
COMMIT;

Run the script as follows to see the information provided by the enabled trackers. For a
description of the Tracker: information displayed by mysqltest for the various trackers, see
mysql_session_track_get_first().

$> mysqltest < testscript
DROP TABLE IF EXISTS test.t1;
CREATE TABLE test.t1 (i INT, f FLOAT);
SET @@SESSION.session_track_schema=ON;
SET @@SESSION.session_track_system_variables='*';
-- Tracker : SESSION_TRACK_SYSTEM_VARIABLES
-- session_track_system_variables
-- *

SET @@SESSION.session_track_state_change=ON;
-- Tracker : SESSION_TRACK_SYSTEM_VARIABLES
-- session_track_state_change
-- ON

USE information_schema;
-- Tracker : SESSION_TRACK_SCHEMA
-- information_schema

-- Tracker : SESSION_TRACK_STATE_CHANGE
-- 1

SET NAMES 'utf8mb4';
-- Tracker : SESSION_TRACK_SYSTEM_VARIABLES
-- character_set_client
-- utf8mb4

1132

Server Tracking of Client Session State

-- character_set_connection
-- utf8mb4
-- character_set_results
-- utf8mb4

-- Tracker : SESSION_TRACK_STATE_CHANGE
-- 1

SET @@SESSION.session_track_transaction_info='CHARACTERISTICS';
-- Tracker : SESSION_TRACK_SYSTEM_VARIABLES
-- session_track_transaction_info
-- CHARACTERISTICS

-- Tracker : SESSION_TRACK_STATE_CHANGE
-- 1

-- Tracker : SESSION_TRACK_TRANSACTION_CHARACTERISTICS
--

-- Tracker : SESSION_TRACK_TRANSACTION_STATE
-- ________

SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;
-- Tracker : SESSION_TRACK_TRANSACTION_CHARACTERISTICS
-- SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;

SET TRANSACTION READ WRITE;
-- Tracker : SESSION_TRACK_TRANSACTION_CHARACTERISTICS
-- SET TRANSACTION ISOLATION LEVEL SERIALIZABLE; SET TRANSACTION READ WRITE;

START TRANSACTION;
-- Tracker : SESSION_TRACK_TRANSACTION_CHARACTERISTICS
-- SET TRANSACTION ISOLATION LEVEL SERIALIZABLE; START TRANSACTION READ WRITE;

-- Tracker : SESSION_TRACK_TRANSACTION_STATE
-- T_______

SELECT 1;
1
1
-- Tracker : SESSION_TRACK_TRANSACTION_STATE
-- T_____S_

INSERT INTO test.t1 () VALUES();
-- Tracker : SESSION_TRACK_TRANSACTION_STATE
-- T___W_S_

INSERT INTO test.t1 () VALUES(1, RAND());
-- Tracker : SESSION_TRACK_TRANSACTION_STATE
-- T___WsS_

COMMIT;
-- Tracker : SESSION_TRACK_TRANSACTION_CHARACTERISTICS
--

-- Tracker : SESSION_TRACK_TRANSACTION_STATE
-- ________

ok

Preceding the START TRANSACTION statement, two SET TRANSACTION statements execute
that set the isolation level and access mode characteristics for the next transaction. The
SESSION_TRACK_TRANSACTION_CHARACTERISTICS value indicates those next-transaction values
that have been set.

Following the COMMIT statement that ends the transaction, the
SESSION_TRACK_TRANSACTION_CHARACTERISTICS value is reported as empty. This indicates that
the next-transaction characteristics that were set preceding the start of the transaction have been reset,
and that the session defaults apply. To track changes to those session defaults, track the session
values of the transaction_isolation and transaction_read_only system variables.

1133

The Server Shutdown Process

To see information about GTIDs, enable the SESSION_TRACK_GTIDS tracker using the
session_track_gtids system system variable.

7.1.19 The Server Shutdown Process

The server shutdown process takes place as follows:

1. The shutdown process is initiated.

This can occur initiated several ways. For example, a user with the SHUTDOWN privilege can
execute a mysqladmin shutdown command. mysqladmin can be used on any platform
supported by MySQL. Other operating system-specific shutdown initiation methods are possible
as well: The server shuts down on Unix when it receives a SIGTERM signal. A server running as a
service on Windows shuts down when the services manager tells it to.

2. The server creates a shutdown thread if necessary.

Depending on how shutdown was initiated, the server might create a thread to handle the shutdown
process. If shutdown was requested by a client, a shutdown thread is created. If shutdown is the
result of receiving a SIGTERM signal, the signal thread might handle shutdown itself, or it might
create a separate thread to do so. If the server tries to create a shutdown thread and cannot (for
example, if memory is exhausted), it issues a diagnostic message that appears in the error log:

Error: Can't create thread to kill server

3. The server stops accepting new connections.

To prevent new activity from being initiated during shutdown, the server stops accepting new
client connections by closing the handlers for the network interfaces to which it normally listens for
connections: the TCP/IP port, the Unix socket file, the Windows named pipe, and shared memory
on Windows.

4. The server terminates current activity.

For each thread associated with a client connection, the server breaks the connection to the client
and marks the thread as killed. Threads die when they notice that they are so marked. Threads
for idle connections die quickly. Threads that currently are processing statements check their
state periodically and take longer to die. For additional information about thread termination, see
Section 15.7.8.4, “KILL Statement”, in particular for the instructions about killed REPAIR TABLE or
OPTIMIZE TABLE operations on MyISAM tables.

For threads that have an open transaction, the transaction is rolled back. If a thread is updating a
nontransactional table, an operation such as a multiple-row UPDATE or INSERT may leave the table
partially updated because the operation can terminate before completion.

If the server is a replication source server, it treats threads associated with currently connected
replicas like other client threads. That is, each one is marked as killed and exits when it next checks
its state.

If the server is a replica server, it stops the replication I/O and SQL threads, if they are active,
before marking client threads as killed. The SQL thread is permitted to finish its current statement
(to avoid causing replication problems), and then stops. If the SQL thread is in the middle of a
transaction at this point, the server waits until the current replication event group (if any) has
finished executing, or until the user issues a KILL QUERY or KILL CONNECTION statement. See
also Section 15.4.2.9, “STOP SLAVE Statement”. Since nontransactional statements cannot be
rolled back, in order to guarantee crash-safe replication, only transactional tables should be used.

Note

To guarantee crash safety on the replica, you must run the replica with --
relay-log-recovery enabled.

1134

The MySQL Data Directory

See also Section 19.2.4, “Relay Log and Replication Metadata Repositories”).

5. The server shuts down or closes storage engines.

At this stage, the server flushes the table cache and closes all open tables.

Each storage engine performs any actions necessary for tables that it manages. InnoDB flushes
its buffer pool to disk (unless innodb_fast_shutdown is 2), writes the current LSN to the
tablespace, and terminates its own internal threads. MyISAM flushes any pending index writes for a
table.

6. The server exits.

To provide information to management processes, the server returns one of the exit codes described in
the following list. The phrase in parentheses indicates the action taken by systemd in response to the
code, for platforms on which systemd is used to manage the server.

• 0 = successful termination (no restart done)

• 1 = unsuccessful termination (no restart done)

• 2 = unsuccessful termination (restart done)

7.2 The MySQL Data Directory

Information managed by the MySQL server is stored under a directory known as the data directory.
The following list briefly describes the items typically found in the data directory, with cross references
for additional information:

• Data directory subdirectories. Each subdirectory of the data directory is a database directory and
corresponds to a database managed by the server. All MySQL installations have certain standard
databases:

• The mysql directory corresponds to the mysql system schema, which contains information

required by the MySQL server as it runs. This database contains data dictionary tables and system
tables. See Section 7.3, “The mysql System Schema”.

• The performance_schema directory corresponds to the Performance Schema, which provides

information used to inspect the internal execution of the server at runtime. See Chapter 29,
MySQL Performance Schema.

• The sys directory corresponds to the sys schema, which provides a set of objects to help

interpret Performance Schema information more easily. See Chapter 30, MySQL sys Schema.

• The ndbinfo directory corresponds to the ndbinfo database that stores information specific

to NDB Cluster (present only for installations built to include NDB Cluster). See Section 25.6.16,
“ndbinfo: The NDB Cluster Information Database”.

Other subdirectories correspond to databases created by users or applications.

Note

INFORMATION_SCHEMA is a standard database, but its implementation uses
no corresponding database directory.

• Log files written by the server. See Section 7.4, “MySQL Server Logs”.

• InnoDB tablespace and log files. See Chapter 17, The InnoDB Storage Engine.

• Default/autogenerated SSL and RSA certificate and key files. See Section 8.3.3, “Creating SSL and

RSA Certificates and Keys”.

1135

The mysql System Schema

• The server process ID file (while the server is running).

• The mysqld-auto.cnf file that stores persisted global system variable settings. See

Section 15.7.6.1, “SET Syntax for Variable Assignment”.

Some items in the preceding list can be relocated elsewhere by reconfiguring the server. In addition,
the --datadir option enables the location of the data directory itself to be changed. For a given
MySQL installation, check the server configuration to determine whether items have been moved.

7.3 The mysql System Schema

The mysql schema is the system schema. It contains tables that store information required by the
MySQL server as it runs. A broad categorization is that the mysql schema contains data dictionary
tables that store database object metadata, and system tables used for other operational purposes.
The following discussion further subdivides the set of system tables into smaller categories.

• Data Dictionary Tables

• Grant System Tables

• Object Information System Tables

• Log System Tables

• Server-Side Help System Tables

• Time Zone System Tables

• Replication System Tables

• Optimizer System Tables

• Miscellaneous System Tables

The remainder of this section enumerates the tables in each category, with cross references for
additional information. Data dictionary tables and system tables use the InnoDB storage engine unless
otherwise indicated.

mysql system tables and data dictionary tables reside in a single InnoDB tablespace file named
mysql.ibd in the MySQL data directory. Previously, these tables were created in individual
tablespace files in the mysql database directory.

Data-at-rest encryption can be enabled for the mysql system schema tablespace. For more
information, see Section 17.13, “InnoDB Data-at-Rest Encryption”.

Data Dictionary Tables

These tables comprise the data dictionary, which contains metadata about database objects. For
additional information, see Chapter 16, MySQL Data Dictionary.

Important

The data dictionary is new in MySQL 8.0. A data dictionary-enabled server
entails some general operational differences compared to previous MySQL
releases. For details, see Section 16.7, “Data Dictionary Usage Differences”.
Also, for upgrades to MySQL 8.0 from MySQL 5.7, the upgrade procedure
differs somewhat from previous MySQL releases and requires that you verify
the upgrade readiness of your installation by checking specific prerequisites.
For more information, see Chapter 3, Upgrading MySQL, particularly
Section 3.6, “Preparing Your Installation for Upgrade”.

• catalogs: Catalog information.

1136

Data Dictionary Tables

• character_sets: Information about available character sets.

• check_constraints: Information about CHECK constraints defined on tables. See

Section 15.1.20.6, “CHECK Constraints”.

• collations: Information about collations for each character set.

•   column_statistics: Histogram statistics for column values. See Section 10.9.6, “Optimizer

Statistics”.

• column_type_elements: Information about types used by columns.

• columns: Information about columns in tables.

• dd_properties: A table that identifies data dictionary properties, such as its version. The server

uses this to determine whether the data dictionary must be upgraded to a newer version.

• events: Information about Event Scheduler events. See Section 27.4, “Using the Event Scheduler”.
If the server is started with the --skip-grant-tables option, the event scheduler is disabled and
events registered in the table do not run. See Section 27.4.2, “Event Scheduler Configuration”.

• foreign_keys, foreign_key_column_usage: Information about foreign keys.

• index_column_usage: Information about columns used by indexes.

• index_partitions: Information about partitions used by indexes.

• index_stats: Used to store dynamic index statistics generated when ANALYZE TABLE is

executed.

• indexes: Information about table indexes.

• innodb_ddl_log: Stores DDL logs for crash-safe DDL operations.

• parameter_type_elements: Information about stored procedure and function parameters, and

about return values for stored functions.

• parameters: Information about stored procedures and functions. See Section 27.2, “Using Stored

Routines”.

• resource_groups: Information about resource groups. See Section 7.1.16, “Resource Groups”.

• routines: Information about stored procedures and functions. See Section 27.2, “Using Stored

Routines”.

• schemata: Information about schemata. In MySQL, a schema is a database, so this table provides

information about databases.

• st_spatial_reference_systems: Information about available spatial reference systems for

spatial data.

• table_partition_values: Information about values used by table partitions.

• table_partitions: Information about partitions used by tables.

• table_stats: Information about dynamic table statistics generated when ANALYZE TABLE is

executed.

• tables: Information about tables in databases.

• tablespace_files: Information about files used by tablespaces.

• tablespaces: Information about active tablespaces.

• triggers: Information about triggers.

1137

Grant System Tables

• view_routine_usage: Information about dependencies between views and stored functions used

by them.

• view_table_usage: Used to track dependencies between views and their underlying tables.

Data dictionary tables are invisible. They cannot be read with SELECT, do not appear in the output of
SHOW TABLES, are not listed in the INFORMATION_SCHEMA.TABLES table, and so forth. However, in
most cases there are corresponding INFORMATION_SCHEMA tables that can be queried. Conceptually,
the INFORMATION_SCHEMA provides a view through which MySQL exposes data dictionary metadata.
For example, you cannot select from the mysql.schemata table directly:

mysql> SELECT * FROM mysql.schemata;
ERROR 3554 (HY000): Access to data dictionary table 'mysql.schemata' is rejected.

Instead, select that information from the corresponding INFORMATION_SCHEMA table:

mysql> SELECT * FROM INFORMATION_SCHEMA.SCHEMATA\G
*************************** 1. row ***************************
              CATALOG_NAME: def
               SCHEMA_NAME: mysql
DEFAULT_CHARACTER_SET_NAME: utf8mb4
    DEFAULT_COLLATION_NAME: utf8mb4_0900_ai_ci
                  SQL_PATH: NULL
        DEFAULT_ENCRYPTION: NO
*************************** 2. row ***************************
              CATALOG_NAME: def
               SCHEMA_NAME: information_schema
DEFAULT_CHARACTER_SET_NAME: utf8mb3
    DEFAULT_COLLATION_NAME: utf8mb3_general_ci
                  SQL_PATH: NULL
        DEFAULT_ENCRYPTION: NO
*************************** 3. row ***************************
              CATALOG_NAME: def
               SCHEMA_NAME: performance_schema
DEFAULT_CHARACTER_SET_NAME: utf8mb4
    DEFAULT_COLLATION_NAME: utf8mb4_0900_ai_ci
                  SQL_PATH: NULL
        DEFAULT_ENCRYPTION: NO
...

There is no Information Schema table that corresponds exactly to mysql.indexes, but
INFORMATION_SCHEMA.STATISTICS contains much of the same information.

As of yet, there are no INFORMATION_SCHEMA tables that correspond exactly to
mysql.foreign_keys, mysql.foreign_key_column_usage. The standard SQL way to obtain
foreign key information is by using the INFORMATION_SCHEMA REFERENTIAL_CONSTRAINTS and
KEY_COLUMN_USAGE tables; these tables are now implemented as views on the foreign_keys,
foreign_key_column_usage, and other data dictionary tables.

Some system tables from before MySQL 8.0 have been replaced by data dictionary tables and are no
longer present in the mysql system schema:

• The events data dictionary table supersedes the event table from before MySQL 8.0.

• The parameters and routines data dictionary tables together supersede the proc table from

before MySQL 8.0.

Grant System Tables

These system tables contain grant information about user accounts and the privileges held by
them. For additional information about the structure, contents, and purpose of the these tables, see
Section 8.2.3, “Grant Tables”.

As of MySQL 8.0, the grant tables are InnoDB (transactional) tables. Previously, these were MyISAM
(nontransactional) tables. The change of grant-table storage engine underlies an accompanying

1138

Object Information System Tables

change in MySQL 8.0 to the behavior of account-management statements such as CREATE USER and
GRANT. Previously, an account-management statement that named multiple users could succeed for
some users and fail for others. The statements are now transactional and either succeed for all named
users or roll back and have no effect if any error occurs.

Note

If MySQL is upgraded from an older version but the grant tables have not been
upgraded from MyISAM to InnoDB, the server considers them read only and
account-management statements produce an error. For upgrade instructions,
see Chapter 3, Upgrading MySQL.

• user: User accounts, global privileges, and other nonprivilege columns.

• global_grants: Assignments of dynamic global privileges to users; see Static Versus Dynamic

Privileges.

• db: Database-level privileges.

• tables_priv: Table-level privileges.

• columns_priv: Column-level privileges.

• procs_priv: Stored procedure and function privileges.

• proxies_priv: Proxy-user privileges.

• default_roles: This table lists default roles to be activated after a user connects and

authenticates, or executes SET ROLE DEFAULT.

• role_edges: This table lists edges for role subgraphs.

A given user table row might refer to a user account or a role. The server can distinguish whether
a row represents a user account, a role, or both by consulting the role_edges table for information
about relations between authentication IDs.

• password_history: Information about password changes.

Object Information System Tables

These system tables contain information about components, loadable functions, and server-side
plugins:

• component: The registry for server components installed using INSTALL COMPONENT. Any

components listed in this table are installed by a loader service during the server startup sequence.
See Section 7.5.1, “Installing and Uninstalling Components”.

• func: The registry for loadable functions installed using CREATE FUNCTION. During the normal
startup sequence, the server loads functions registered in this table. If the server is started with
the --skip-grant-tables option, functions registered in the table are not loaded and are
unavailable. See Section 7.7.1, “Installing and Uninstalling Loadable Functions”.

Note

Like the mysql.func system table, the Performance Schema
user_defined_functions table lists loadable functions installed
using CREATE FUNCTION. Unlike the mysql.func table, the
user_defined_functions table also lists functions installed
automatically by server components or plugins. This difference makes
user_defined_functions preferable to mysql.func for checking which
functions are installed. See Section 29.12.21.10, “The user_defined_functions
Table”.

1139

Log System Tables

• plugin: The registry for server-side plugins installed using INSTALL PLUGIN. During the normal

startup sequence, the server loads plugins registered in this table. If the server is started with the --
skip-grant-tables option, plugins registered in the table are not loaded and are unavailable.
See Section 7.6.1, “Installing and Uninstalling Plugins”.

Log System Tables

The server uses these system tables for logging:

•   general_log: The general query log table.

•   slow_log: The slow query log table.

Log tables use the CSV storage engine.

For more information, see Section 7.4, “MySQL Server Logs”.

Server-Side Help System Tables

These system tables contain server-side help information:

•   help_category: Information about help categories.

•   help_keyword: Keywords associated with help topics.

•   help_relation: Mappings between help keywords and topics.

•   help_topic: Help topic contents.

For more information, see Section 7.1.17, “Server-Side Help Support”.

Time Zone System Tables

These system tables contain time zone information:

•   time_zone: Time zone IDs and whether they use leap seconds.

•   time_zone_leap_second: When leap seconds occur.

•   time_zone_name: Mappings between time zone IDs and names.

•     time_zone_transition, time_zone_transition_type: Time zone descriptions.

For more information, see Section 7.1.15, “MySQL Server Time Zone Support”.

Replication System Tables

The server uses these system tables to support replication:

•   gtid_executed: Table for storing GTID values. See mysql.gtid_executed Table.

•   ndb_binlog_index: Binary log information for NDB Cluster replication. This table is created

only if the server is built with NDBCLUSTER support. See Section 25.7.4, “NDB Cluster Replication
Schema and Tables”.

•       slave_master_info, slave_relay_log_info, slave_worker_info: Used to store

replication information on replica servers. See Section 19.2.4, “Relay Log and Replication Metadata
Repositories”.

All of the tables just listed use the InnoDB storage engine.

Optimizer System Tables

These system tables are for use by the optimizer:

1140

Miscellaneous System Tables

•     innodb_index_stats, innodb_table_stats: Used for InnoDB persistent optimizer
statistics. See Section 17.8.10.1, “Configuring Persistent Optimizer Statistics Parameters”.

•     server_cost, engine_cost: The optimizer cost model uses tables that contain cost estimate
information about operations that occur during query execution. server_cost contains optimizer
cost estimates for general server operations. engine_cost contains estimates for operations
specific to particular storage engines. See Section 10.9.5, “The Optimizer Cost Model”.

Miscellaneous System Tables

Other system tables do not fit the preceding categories:

•     audit_log_filter, audit_log_user: If MySQL Enterprise Audit is installed, these tables
provide persistent storage of audit log filter definitions and user accounts. See Audit Log Tables.

•           firewall_group_allowlist, firewall_groups, firewall_memebership,

firewall_users, firewall_whitelist: If MySQL Enterprise Firewall is installed, these tables
provide persistent storage for information used by the firewall. See Section 8.4.7, “MySQL Enterprise
Firewall”.

•   servers: Used by the FEDERATED storage engine. See Section 18.8.2.2, “Creating a

FEDERATED Table Using CREATE SERVER”.

•   innodb_dynamic_metadata: Used by the InnoDB storage engine to store fast-changing table

metadata such as auto-increment counter values and index tree corruption flags. Replaces the data
dictionary buffer table that resided in the InnoDB system tablespace.

7.4 MySQL Server Logs

MySQL Server has several logs that can help you find out what activity is taking place.

Log Type

Error log

General query log

Binary log

Relay log

Slow query log

DDL log (metadata log)

Information Written to Log

Problems encountered starting, running, or
stopping mysqld

Established client connections and statements
received from clients

Statements that change data (also used for
replication)

Data changes received from a replication source
server

Queries that took more than long_query_time
seconds to execute

Metadata operations performed by DDL
statements

By default, no logs are enabled, except the error log on Windows. (The DDL log is always created
when required, and has no user-configurable options; see The DDL Log.) The following log-specific
sections provide information about the server options that enable logging.

By default, the server writes files for all enabled logs in the data directory. You can force the server
to close and reopen the log files (or in some cases switch to a new log file) by flushing the logs. Log
flushing occurs when you issue a FLUSH LOGS statement; execute mysqladmin with a flush-logs
or refresh argument; or execute mysqldump with a --flush-logs option. See Section 15.7.8.3,
“FLUSH Statement”, Section 6.5.2, “mysqladmin — A MySQL Server Administration Program”, and
Section 6.5.4, “mysqldump — A Database Backup Program”. In addition, the binary log is flushed when
its size reaches the value of the max_binlog_size system variable.

1141

Selecting General Query Log and Slow Query Log Output Destinations

You can control the general query and slow query logs during runtime. You can enable or disable
logging, or change the log file name. You can tell the server to write general query and slow query
entries to log tables, log files, or both. For details, see Section 7.4.1, “Selecting General Query Log and
Slow Query Log Output Destinations”, Section 7.4.3, “The General Query Log”, and Section 7.4.5, “The
Slow Query Log”.

The relay log is used only on replicas, to hold data changes from the replication source server
that must also be made on the replica. For discussion of relay log contents and configuration, see
Section 19.2.4.1, “The Relay Log”.

For information about log maintenance operations such as expiration of old log files, see Section 7.4.6,
“Server Log Maintenance”.

For information about keeping logs secure, see Section 8.1.2.3, “Passwords and Logging”.

7.4.1 Selecting General Query Log and Slow Query Log Output Destinations

MySQL Server provides flexible control over the destination of output written to the general query log
and the slow query log, if those logs are enabled. Possible destinations for log entries are log files or
the general_log and slow_log tables in the mysql system database. File output, table output, or
both can be selected.

• Log Control at Server Startup

• Log Control at Runtime

• Log Table Benefits and Characteristics

Log Control at Server Startup

The log_output system variable specifies the destination for log output. Setting this variable does not
in itself enable the logs; they must be enabled separately.

• If log_output is not specified at startup, the default logging destination is FILE.

• If log_output is specified at startup, its value is a list one or more comma-separated words chosen
from TABLE (log to tables), FILE (log to files), or NONE (do not log to tables or files). NONE, if present,
takes precedence over any other specifiers.

The general_log system variable controls logging to the general query log for the selected log
destinations. If specified at server startup, general_log takes an optional argument of 1 or 0
to enable or disable the log. To specify a file name other than the default for file logging, set the
general_log_file variable. Similarly, the slow_query_log variable controls logging to the slow
query log for the selected destinations and setting slow_query_log_file specifies a file name
for file logging. If either log is enabled, the server opens the corresponding log file and writes startup
messages to it. However, further logging of queries to the file does not occur unless the FILE log
destination is selected.

Examples:

• To write general query log entries to the log table and the log file, use --log_output=TABLE,FILE

to select both log destinations and --general_log to enable the general query log.

• To write general and slow query log entries only to the log tables, use --log_output=TABLE to

select tables as the log destination and --general_log and --slow_query_log to enable both
logs.

• To write slow query log entries only to the log file, use --log_output=FILE to select files as the
log destination and --slow_query_log to enable the slow query log. In this case, because the
default log destination is FILE, you could omit the log_output setting.

1142

Selecting General Query Log and Slow Query Log Output Destinations

Log Control at Runtime

The system variables associated with log tables and files enable runtime control over logging:

• The log_output variable indicates the current logging destination. It can be modified at runtime to

change the destination.

• The general_log and slow_query_log variables indicate whether the general query log and

slow query log are enabled (ON) or disabled (OFF). You can set these variables at runtime to control
whether the logs are enabled.

• The general_log_file and slow_query_log_file variables indicate the names of the general

query log and slow query log files. You can set these variables at server startup or at runtime to
change the names of the log files.

• To disable or enable general query logging for the current session, set the session sql_log_off

variable to ON or OFF. (This assumes that the general query log itself is enabled.)

Log Table Benefits and Characteristics

The use of tables for log output offers the following benefits:

• Log entries have a standard format. To display the current structure of the log tables, use these

statements:

SHOW CREATE TABLE mysql.general_log;
SHOW CREATE TABLE mysql.slow_log;

• Log contents are accessible through SQL statements. This enables the use of queries that select

only those log entries that satisfy specific criteria. For example, to select log contents associated with
a particular client (which can be useful for identifying problematic queries from that client), it is easier
to do this using a log table than a log file.

• Logs are accessible remotely through any client that can connect to the server and issue queries (if
the client has the appropriate log table privileges). It is not necessary to log in to the server host and
directly access the file system.

The log table implementation has the following characteristics:

• In general, the primary purpose of log tables is to provide an interface for users to observe the

runtime execution of the server, not to interfere with its runtime execution.

• CREATE TABLE, ALTER TABLE, and DROP TABLE are valid operations on a log table. For ALTER
TABLE and DROP TABLE, the log table cannot be in use and must be disabled, as described later.

• By default, the log tables use the CSV storage engine that writes data in comma-separated values

format. For users who have access to the .CSV files that contain log table data, the files are easy to
import into other programs such as spreadsheets that can process CSV input.

The log tables can be altered to use the MyISAM storage engine. You cannot use ALTER TABLE to
alter a log table that is in use. The log must be disabled first. No engines other than CSV or MyISAM
are legal for the log tables.

Log Tables and “Too many open files” Errors.
the log tables use the CSV storage engine, you may find that disabling and enabling the general
query log or slow query log repeatedly at runtime results in a number of open file descriptors for the
.CSV file, possibly resulting in a “Too many open files” error. To work around this issue, execute
FLUSH TABLES or ensure that the value of open_files_limit is greater than the value of
table_open_cache_instances.

  If you select TABLE as a log destination and

• To disable logging so that you can alter (or drop) a log table, you can use the following strategy.

The example uses the general query log; the procedure for the slow query log is similar but uses the
slow_log table and slow_query_log system variable.

1143

The Error Log

SET @old_log_state = @@GLOBAL.general_log;
SET GLOBAL general_log = 'OFF';
ALTER TABLE mysql.general_log ENGINE = MyISAM;
SET GLOBAL general_log = @old_log_state;

• TRUNCATE TABLE is a valid operation on a log table. It can be used to expire log entries.

• RENAME TABLE is a valid operation on a log table. You can atomically rename a log table (to

perform log rotation, for example) using the following strategy:

USE mysql;
DROP TABLE IF EXISTS general_log2;
CREATE TABLE general_log2 LIKE general_log;
RENAME TABLE general_log TO general_log_backup, general_log2 TO general_log;

• CHECK TABLE is a valid operation on a log table.

• LOCK TABLES cannot be used on a log table.

• INSERT, DELETE, and UPDATE cannot be used on a log table. These operations are permitted only

internally to the server itself.

• FLUSH TABLES WITH READ LOCK and the state of the read_only system variable have no effect

on log tables. The server can always write to the log tables.

• Entries written to the log tables are not written to the binary log and thus are not replicated to

replicas.

• To flush the log tables or log files, use FLUSH TABLES or FLUSH LOGS, respectively.

• Partitioning of log tables is not permitted.

• A mysqldump dump includes statements to recreate those tables so that they are not missing after

reloading the dump file. Log table contents are not dumped.

7.4.2 The Error Log

This section discusses how to configure the MySQL server for logging of diagnostic messages
to the error log. For information about selecting the error message character set and language,
see Section 12.6, “Error Message Character Set”, and Section 12.12, “Setting the Error Message
Language”.

The error log contains a record of mysqld startup and shutdown times. It also contains diagnostic
messages such as errors, warnings, and notes that occur during server startup and shutdown, and
while the server is running. For example, if mysqld notices that a table needs to be automatically
checked or repaired, it writes a message to the error log.

Depending on error log configuration, error messages may also populate the Performance Schema
error_log table, to provide an SQL interface to the log and enable its contents to be queried. See
Section 29.12.21.2, “The error_log Table”.

On some operating systems, the error log contains a stack trace if mysqld exits abnormally. The trace
can be used to determine where mysqld exited. See Section 7.9, “Debugging MySQL”.

If used to start mysqld, mysqld_safe may write messages to the error log. For example, when
mysqld_safe notices abnormal mysqld exits, it restarts mysqld and writes a mysqld restarted
message to the error log.

The following sections discuss aspects of configuring error logging.

7.4.2.1 Error Log Configuration

In MySQL 8.0, error logging uses the MySQL component architecture described at Section 7.5,
“MySQL Components”. The error log subsystem consists of components that perform log event filtering

1144

The Error Log

and writing, as well as a system variable that configures which components to load and enable to
achieve the desired logging result.

This section discusses how to load and enable components for error logging. For instructions specific
to log filters, see Section 7.4.2.4, “Types of Error Log Filtering”. For instructions specific to the JSON
and system log sinks, see Section 7.4.2.7, “Error Logging in JSON Format”, and Section 7.4.2.8,
“Error Logging to the System Log”. For additional details about all available log components, see
Section 7.5.3, “Error Log Components”.

Component-based error logging offers these features:

• Log events that can be filtered by filter components to affect the information available for writing.

• Log events that are output by sink (writer) components. Multiple sink components can be enabled, to

write error log output to multiple destinations.

• Built-in filter and sink components that implement the default error log format.

• A loadable sink that enables logging in JSON format.

• A loadable sink that enables logging to the system log.

• System variables that control which log components to load and enable and how each component

operates.

Error log configuration is described under the following topics in this section:

• The Default Error Log Configuration

• Error Log Configuration Methods

• Implicit Error Log Configuration

• Explicit Error Log Configuration

• Changing the Error Log Configuration Method

• Troubleshooting Configuration Issues

• Configuring Multiple Log Sinks

• Log Sink Performance Schema Support

The Default Error Log Configuration

The log_error_services system variable controls which loadable log components to
load (as of MySQL 8.0.30) and which log components to enable for error logging. By default,
log_error_services has this value:

mysql> SELECT @@GLOBAL.log_error_services;
+----------------------------------------+
| @@GLOBAL.log_error_services            |
+----------------------------------------+
| log_filter_internal; log_sink_internal |
+----------------------------------------+

That value indicates that log events first pass through the log_filter_internal filter component,
then through the log_sink_internal sink component, both of which are built-in components. A
filter modifies log events seen by components named later in the log_error_services value. A sink
is a destination for log events. Typically, a sink processes log events into log messages that have a
particular format and writes these messages to its associated output, such as a file or the system log.

The combination of log_filter_internal and log_sink_internal implements the default error
log filtering and output behavior. The action of these components is affected by other server options
and system variables:

1145

The Error Log

• The output destination is determined by the --log-error option (and, on Windows, --pid-file

and --console). These determine whether to write error messages to the console or a file and, if to
a file, the error log file name. See Section 7.4.2.2, “Default Error Log Destination Configuration”.

• The log_error_verbosity and log_error_suppression_list system variables affect which
types of log events log_filter_internal permits or suppresses. See Section 7.4.2.5, “Priority-
Based Error Log Filtering (log_filter_internal)”.

When configuring log_error_services, be aware of the following characteristics:

• A list of log components may be delimited by semicolon or (as of MySQL 8.0.12) comma, optionally
followed by space. A given setting cannot use both semicolon and comma separators. Component
order is significant because the server executes components in the order listed.

• The final component in the log_error_services value cannot be a filter. This is an error because

any changes it has on events would have no effect on output:

mysql> SET GLOBAL log_error_services = 'log_filter_internal';
ERROR 1231 (42000): Variable 'log_error_services' can't be set to the value
of 'log_filter_internal'

To correct the problem, include a sink at the end of the value:

mysql> SET GLOBAL log_error_services = 'log_filter_internal; log_sink_internal';

• The order of components named in log_error_services is significant, particularly with respect to

the relative order of filters and sinks. Consider this log_error_services value:

log_filter_internal; log_sink_1; log_sink_2

In this case, log events pass to the built-in filter, then to the first sink, then to the second sink. Both
sinks receive the filtered log events.

Compare that to this log_error_services value:

log_sink_1; log_filter_internal; log_sink_2

In this case, log events pass to the first sink, then to the built-in filter, then to the second sink. The
first sink receives unfiltered events. The second sink receives filtered events. You might configure
error logging this way if you want one log that contains messages for all log events, and another log
that contains messages only for a subset of log events.

Error Log Configuration Methods

Error log configuration involves loading and enabling error log components as necessary and
performing component-specific configuration.

There are two error log configuration methods, implicit and explicit. It is recommended that one
configuration method is selected and used exclusively. Using both methods can result in warnings at
startup. For more information, see Troubleshooting Configuration Issues.

• Implicit Error Log Configuration (introduced in MySQL 8.0.30)

This configuration method loads and enables the log components defined by the
log_error_services variable. Loadable components that are not already loaded are loaded
implicitly at startup before the InnoDB storage engine is fully available. This configuration method
has the following advantages:

• Log components are loaded early in the startup sequence, before the InnoDB storage engine,

making logged information available sooner.

• It avoids loss of buffered log information should a failure occur during startup.

1146

The Error Log

• Installing error log components using INSTALL COMPONENT is not required, simplifying error log

configuration.

To use this method, see Implicit Error Log Configuration.

• Explicit Error Log Configuration

Note

This configuration method is supported for backward compatibility. The
implicit configuration method, introduced in MySQL 8.0.30, is recommended.

This configuration method requires loading error log components using INSTALL COMPONENT and
then configuring log_error_services to enable the log components. INSTALL COMPONENT
adds the component to the mysql.component table (an InnoDB table), and the components to
load at startup are read from this table, which is only accessible after InnoDB is initialized.

Logged information is buffered during the startup sequence while the InnoDB storage engine
is initialized, which is sometimes prolonged by operations such as recovery and data dictionary
upgrade that occur during the InnoDB startup sequence.

To use this method, see Explicit Error Log Configuration.

Implicit Error Log Configuration

This procedure describes how to load and enable error logging components implicitly using
log_error_services. For a discussion of error log configuration methods, see Error Log
Configuration Methods.

To load and enable error logging components implicitly:

1. List the error log components in the log_error_services value.

To load and enable the error log components at server startup, set log_error_services in an
option file. The following example configures the use of the JSON log sink (log_sink_json) in
addition to the built-in log filter and sink (log_filter_internal, log_sink_internal).

[mysqld]
log_error_services='log_filter_internal; log_sink_internal; log_sink_json'

Note

To use the JSON log sink (log_sink_syseventlog) instead of the default
sink (log_sink_internal), you would replace log_sink_internal
with log_sink_json.

To load and enable the component immediately and for subsequent restarts, set
log_error_services using SET PERSIST:

SET PERSIST log_error_services = 'log_filter_internal; log_sink_internal; log_sink_json';

2.

If the error log component exposes any system variables that must be set for component
initialization to succeed, assign those variables appropriate values. You can set these variables in
an option file or using SET PERSIST.

Important

When implementing an implicit configuration, set log_error_services
first to load a component and expose its system variables, and then set
component system variables afterward. This configuration order is required
regardless of whether variable assignment is performed on the command-
line, in an option file, or using SET PERSIST.

1147

The Error Log

To disable a log component, remove it from the log_error_services value. Also remove any
associated component variables settings that you have defined.

Note

Loading a log component implicitly using log_error_services has no
effect on the mysql.component table. It does not add the component to the
mysql.component table, nor does it remove a component previously installed
using INSTALL COMPONENT from the mysql.component table.

Explicit Error Log Configuration

This procedure describes how to load and enable error logging components explicitly by loading
components using INSTALL COMPONENT and then enabling using log_error_services. For a
discussion of error log configuration methods, see Error Log Configuration Methods.

To load and enable error logging components explicitly:

1. Load the component using INSTALL COMPONENT (unless it is built in or already loaded). For

example, to load the JSON log sink, issue the following statement:

INSTALL COMPONENT 'file://component_log_sink_json';

Loading a component using INSTALL COMPONENT registers it in the mysql.component system
table so that the server loads it automatically for subsequent startups, after InnoDB is initialized.

The URN to use when loading a log component with INSTALL COMPONENT is the component
name prefixed with file://component_. For example, for the log_sink_json component, the
corresponding URN is file://component_log_sink_json. For error log component URNs,
see Section 7.5.3, “Error Log Components”.

2.

If the error log component exposes any system variables that must be set for component
initialization to succeed, assign those variables appropriate values. You can set these variables in
an option file or using SET PERSIST.

3. Enable the component by listing it in the log_error_services value.

Important

From MySQL 8.0.30, when loading log components explicitly using
INSTALL COMPONENT, do not persist or set log_error_services in an
option file, which loads log components implicitly at startup. Instead, enable
log components at runtime using a SET GLOBAL statement.

The following example configures the use of the JSON log sink (log_sink_json) in addition to
the built-in log filter and sink (log_filter_internal, log_sink_internal).

SET GLOBAL log_error_services = 'log_filter_internal; log_sink_internal; log_sink_json';

Note

To use the JSON log sink (log_sink_syseventlog) instead of the default
sink (log_sink_internal), you would replace log_sink_internal
with log_sink_json.

To disable a log component, remove it from the log_error_services value. Then, if the component
is loadable and you also want to unload it, use UNINSTALL COMPONENT. Also remove any associated
component variables settings that you have defined.

Attempts to use UNINSTALL COMPONENT to unload a loadable component that is still named in the
log_error_services value produce an error.

1148

Changing the Error Log Configuration Method

The Error Log

If you have previously loaded error log components explicitly using INSTALL COMPONENT and want to
switch to an implicit configuration, as described in Implicit Error Log Configuration, the following steps
are recommended:

1. Set log_error_services back to its default configuration.

SET GLOBAL log_error_services = 'log_filter_internal,log_sink_internal';

2. Use UNINSTALL COMPONENT to uninstall any loadable logging components that you installed
previously. For example, if you installed the JSON log sink previously, uninstall it as shown:

UNINSTALL COMPONENT 'file://component_log_sink_json';

3. Remove any component variable settings for the uninstalled component. For example, if
component variables were set in an option file, remove the settings from the option file. If
component variables were set using SET PERSIST, use RESET PERSIST to clear the settings.

4. Follow the steps in Implicit Error Log Configuration to reimplement your configuration.

If you need to revert from an implicit configuration to an explicit configuration, perform the following
steps:

1. Set log_error_services back to its default configuration to unload implicitly loaded log

components.

SET GLOBAL log_error_services = 'log_filter_internal,log_sink_internal';

2. Remove any component variable settings associated with the uninstalled components. For

example, if component variables were set in an option file, remove the settings from the option file.
If component variables were set using SET PERSIST, use RESET PERSIST to clear the settings.

3. Restart the server to uninstall the log components that were implicitly loaded.

4. Follow the steps in Explicit Error Log Configuration to reimplement your configuration.

Troubleshooting Configuration Issues

From MySQL 8.0.30, log components listed in the log_error_services value at startup are loaded
implicitly early in the MySQL Server startup sequence. If the log component was loaded previously
using INSTALL COMPONENT, the server attempts to load the component again later in the startup
sequence, which produces the following warning:

Cannot load component from specified URN: 'file://component_component_name'

You can check for this warning in the error log or by querying the Performance Schema error_log
table using the following query:

SELECT error_code, data
  FROM performance_schema.error_log
 WHERE data LIKE "%'file://component_%"
   AND error_code="MY-013129" AND data LIKE "%MY-003529%";

To prevent this warning, follow the instructions in Changing the Error Log Configuration Method to
adjust your error log configuration. Either an implicit or explicit error log configuration should be used,
but not both.

A similar error occurs when attempting to explicitly load a component that was implicitly loaded at
startup. For example, if log_error_services lists the JSON log sink component, that component is
implicitly loaded at startup. Attempting to explicitly load the same component later returns this error:

mysql> INSTALL COMPONENT 'file://component_log_sink_json';
ERROR 3529 (HY000): Cannot load component from specified URN: 'file://component_log_sink_json'.

1149

Configuring Multiple Log Sinks

The Error Log

It is possible to configure multiple log sinks, which enables sending output to multiple destinations.
To enable the JSON log sink in addition to (rather than instead of) the default sink, set the
log_error_services value like this:

SET GLOBAL log_error_services = 'log_filter_internal; log_sink_internal; log_sink_json';

To revert to using only the default sink and unload the system log sink, execute these statements:

SET GLOBAL log_error_services = 'log_filter_internal; log_sink_internal;
UNINSTALL COMPONENT 'file://component_log_sink_json';

Log Sink Performance Schema Support

If enabled log components include a sink that provides Performance Schema support, events written to
the error log are also written to the Performance Schema error_log table. This enables examining
error log contents using SQL queries. Currently, the traditional-format log_sink_internal and
JSON-format log_sink_json sinks support this capability. See Section 29.12.21.2, “The error_log
Table”.

7.4.2.2 Default Error Log Destination Configuration

This section describes which server options configure the default error log destination, which can
be the console or a named file. It also indicates which log sink components base their own output
destination on the default destination.

In this discussion, “console” means stderr, the standard error output. This is your terminal or console
window unless the standard error output has been redirected to a different destination.

The server interprets options that determine the default error log destination somewhat differently for
Windows and Unix systems. Be sure to configure the destination using the information appropriate
to your platform. After the server interprets the default error log destination options, it sets the
log_error system variable to indicate the default destination, which affects where several log sink
components write error messages. The following sections address these topics.

• Default Error Log Destination on Windows

• Default Error Log Destination on Unix and Unix-Like Systems

• How the Default Error Log Destination Affects Log Sinks

Default Error Log Destination on Windows

On Windows, mysqld uses the --log-error, --pid-file, and --console options to determine
whether the default error log destination is the console or a file, and, if a file, the file name:

• If --console is given, the default destination is the console. (--console takes precedence over
--log-error if both are given, and the following items regarding --log-error do not apply.)

• If --log-error is not given, or is given without naming a file, the default destination is a file named
host_name.err in the data directory, unless the --pid-file option is specified. In that case, the
file name is the PID file base name with a suffix of .err in the data directory.

• If --log-error is given to name a file, the default destination is that file (with an .err suffix added
if the name has no suffix). The file location is under the data directory unless an absolute path name
is given to specify a different location.

If the default error log destination is the console, the server sets the log_error system variable to
stderr. Otherwise, the default destination is a file and the server sets log_error to the file name.

Default Error Log Destination on Unix and Unix-Like Systems

On Unix and Unix-like systems, mysqld uses the --log-error option to determine whether the
default error log destination is the console or a file, and, if a file, the file name:

1150

The Error Log

• If --log-error is not given, the default destination is the console.

• If --log-error is given without naming a file, the default destination is a file named

host_name.err in the data directory.

• If --log-error is given to name a file, the default destination is that file (with an .err suffix added
if the name has no suffix). The file location is under the data directory unless an absolute path name
is given to specify a different location.

• If --log-error is given in an option file in a [mysqld], [server], or [mysqld_safe] section,

on systems that use mysqld_safe to start the server, mysqld_safe finds and uses the option, and
passes it to mysqld.

Note

It is common for Yum or APT package installations to configure an error log
file location under /var/log with an option like log-error=/var/log/
mysqld.log in a server configuration file. Removing the path name from the
option causes the host_name.err file in the data directory to be used.

If the default error log destination is the console, the server sets the log_error system variable to
stderr. Otherwise, the default destination is a file and the server sets log_error to the file name.

How the Default Error Log Destination Affects Log Sinks

After the server interprets the error log destination configuration options, it sets the log_error system
variable to indicate the default error log destination. Log sink components may base their own output
destination on the log_error value, or determine their destination independently of log_error

If log_error is stderr, the default error log destination is the console, and log sinks that base their
output destination on the default destination also write to the console:

• log_sink_internal, log_sink_json, log_sink_test: These sinks write to the console. This
is true even for sinks such as log_sink_json that can be enabled multiple times; all instances
write to the console.

• log_sink_syseventlog: This sink writes to the system log, regardless of the log_error value.

If log_error is not stderr, the default error log destination is a file and log_error indicates the file
name. Log sinks that base their output destination on the default destination base output file naming on
that file name. (A sink might use exactly that name, or it might use some variant thereof.) Suppose that
the log_error value file_name. Then log sinks use the name like this:

• log_sink_internal, log_sink_test: These sinks write to file_name.

• log_sink_json: Successive instances of this sink named in the log_error_services value
write to files named file_name plus a numbered .NN.json suffix: file_name.00.json,
file_name.01.json, and so forth.

• log_sink_syseventlog: This sink writes to the system log, regardless of the log_error value.

7.4.2.3 Error Event Fields

Error events intended for the error log contain a set of fields, each of which consists of a key/value pair.
An event field may be classified as core, optional, or user-defined:

• A core field is set up automatically for error events. However, its presence in the event during event

processing is not guaranteed because a core field, like any type of field, may be unset by a log
filter. If this happens, the field cannot be found by subsequent processing within that filter and by
components that execute after the filter (such as log sinks).

• An optional field is normally absent but may be present for certain event types. When present, an

optional field provides additional event information as appropriate and available.

1151

The Error Log

• A user-defined field is any field with a name that is not already defined as a core or optional field. A

user-defined field does not exist until created by a log filter.

As implied by the preceding description, any given field may be absent during event processing, either
because it was not present in the first place, or was discarded by a filter. For log sinks, the effect of
field absence is sink specific. For example, a sink might omit the field from the log message, indicate
that the field is missing, or substitute a default. When in doubt, test: use a filter that unsets the field,
then check what the log sink does with it.

The following sections describe the core and optional error event fields. For individual log filter
components, there may be additional filter-specific considerations for these fields, or filters may add
user-defined fields not listed here. For details, see the documentation for specific filters.

• Core Error Event Fields

• Optional Error Event Fields

Core Error Event Fields

These error event fields are core fields:

• time

The event timestamp, with microsecond precision.

• msg

The event message string.

• prio

The event priority, to indicate a system, error, warning, or note/information event. This field
corresponds to severity in syslog. The following table shows the possible priority levels.

Event Type

System event

Error event

Warning event

Note/information event

Numeric Priority

0

1

2

3

The prio value is numeric. Related to it, an error event may also include an optional label field
representing the priority as a string. For example, an event with a prio value of 2 may have a
label value of 'Warning'.

Filter components may include or drop error events based on priority, except that system events are
mandatory and cannot be dropped.

In general, message priorities are determined as follows:

Is the situation or event actionable?

• Yes: Is the situation or event ignorable?

• Yes: Priority is warning.

• No: Priority is error.

• No: Is the situation or event mandatory?

• Yes: Priority is system.

1152

The Error Log

• No: Priority is note/information.

• err_code

The event error code, as a number (for example, 1022).

• err_symbol

The event error symbol, as a string (for example, 'ER_DUP_KEY').

• SQL_state

The event SQLSTATE value, as a string (for example, '23000').

• subsystem

The subsystem in which the event occurred. Possible values are InnoDB (the InnoDB storage
engine), Repl (the replication subsystem), Server (otherwise).

Optional Error Event Fields

Optional error event fields fall into the following categories:

• Additional information about the error, such as the error signaled by the operating system or the error

label:

• OS_errno

The operating system error number.

• OS_errmsg

The operating system error message.

• label

The label corresponding to the prio value, as a string.

• Identification of the client for which the event occurred:

• user

The client user.

• host

The client host.

• thread

The ID of the thread within mysqld responsible for producing the error event. This ID indicates
which part of the server produced the event, and is consistent with general query log and slow
query log messages, which include the connection thread ID.

• query_id

The query ID.

• Debugging information:

• source_file

The source file in which the event occurred, without any leading path.

1153

The Error Log

• source_line

The line within the source file at which the event occurred.

• function

The function in which the event occurred.

• component

The component or plugin in which the event occurred.

7.4.2.4 Types of Error Log Filtering

Error log configuration normally includes one log filter component and one or more log sink
components. For error log filtering, MySQL offers a choice of components:

• log_filter_internal: This filter component provides error log filtering based on

log event priority and error code, in combination with the log_error_verbosity and
log_error_suppression_list system variables. log_filter_internal is built in and
enabled by default. See Section 7.4.2.5, “Priority-Based Error Log Filtering (log_filter_internal)”.

• log_filter_dragnet: This filter component provides error log filtering based on user-supplied

rules, in combination with the dragnet.log_error_filter_rules system variable. See
Section 7.4.2.6, “Rule-Based Error Log Filtering (log_filter_dragnet)”.

7.4.2.5 Priority-Based Error Log Filtering (log_filter_internal)

The log_filter_internal log filter component implements a simple form of log filtering based
on error event priority and error code. To affect how log_filter_internal permits or suppresses
error, warning, and information events intended for the error log, set the log_error_verbosity and
log_error_suppression_list system variables.

log_filter_internal is built in and enabled by default. If this filter is disabled,
log_error_verbosity and log_error_suppression_list have no effect, so filtering must be
performed using another filter service instead where desired (for example, with individual filter rules
when using log_filter_dragnet). For information about filter configuration, see Section 7.4.2.1,
“Error Log Configuration”.

• Verbosity Filtering

• Suppression-List Filtering

• Verbosity and Suppression-List Interaction

Verbosity Filtering

Events intended for the error log have a priority of ERROR, WARNING, or INFORMATION. The
log_error_verbosity system variable controls verbosity based on which priorities to permit for
messages written to the log, as shown in the following table.

log_error_verbosity Value

Permitted Message Priorities

1

2

3

ERROR

ERROR, WARNING

ERROR, WARNING, INFORMATION

If log_error_verbosity is 2 or greater, the server logs messages about statements that are
unsafe for statement-based logging. If the value is 3, the server logs aborted connections and access-
denied errors for new connection attempts. See Section B.3.2.9, “Communication Errors and Aborted
Connections”.

1154

The Error Log

If you use replication, a log_error_verbosity value of 2 or greater is recommended, to
obtain more information about what is happening, such as messages about network failures and
reconnections.

If log_error_verbosity is 2 or greater on a replica, the replica prints messages to the error log to
provide information about its status, such as the binary log and relay log coordinates where it starts its
job, when it is switching to another relay log, when it reconnects after a disconnect, and so forth.

There is also a message priority of SYSTEM that is not subject to verbosity filtering. System messages
about non-error situations are printed to the error log regardless of the log_error_verbosity value.
These messages include startup and shutdown messages, and some significant changes to settings.

In the MySQL error log, system messages are labeled as “System”. Other log sinks might or might
not follow the same convention, and in the resulting logs, system messages might be assigned the
label used for the information priority level, such as “Note” or “Information”. If you apply any additional
filtering or redirection for logging based on the labeling of messages, system messages do not override
your filter, but are handled by it in the same way as other messages.

Suppression-List Filtering

The log_error_suppression_list system variable applies to events intended for the error log
and specifies which events to suppress when they occur with a priority of WARNING or INFORMATION.
For example, if a particular type of warning is considered undesirable “noise” in the error log because it
occurs frequently but is not of interest, it can be suppressed. log_error_suppression_list does
not suppress messages with a priority of ERROR or SYSTEM.

The log_error_suppression_list value may be the empty string for no suppression, or a list
of one or more comma-separated values indicating the error codes to suppress. Error codes may be
specified in symbolic or numeric form. A numeric code may be specified with or without the MY- prefix.
Leading zeros in the numeric part are not significant. Examples of permitted code formats:

ER_SERVER_SHUTDOWN_COMPLETE
MY-000031
000031
MY-31
31

For readability and portability, symbolic values are preferable to numeric values.

Although codes to be suppressed can be expressed in symbolic or numeric form, the numeric value of
each code must be in a permitted range:

• 1 to 999: Global error codes that are used by the server as well as by clients.

• 10000 and higher: Server error codes intended to be written to the error log (not sent to clients).

In addition, each error code specified must actually be used by MySQL. Attempts to specify a code not
within a permitted range or within a permitted range but not used by MySQL produce an error and the
log_error_suppression_list value remains unchanged.

For information about error code ranges and the error symbols and numbers defined within each range,
see Section B.1, “Error Message Sources and Elements”, and MySQL 8.0 Error Message Reference.

The server can generate messages for a given error code at differing priorities, so suppression of a
message associated with an error code listed in log_error_suppression_list depends on its
priority. Suppose that the variable has a value of 'ER_PARSER_TRACE,MY-010001,10002'. Then
log_error_suppression_list has these effects on messages for those codes:

• Messages generated with a priority of WARNING or INFORMATION are suppressed.

• Messages generated with a priority of ERROR or SYSTEM are not suppressed.

1155

Verbosity and Suppression-List Interaction

The Error Log

The effect of log_error_verbosity combines with that of log_error_suppression_list.
Consider a server started with these settings:

[mysqld]
log_error_verbosity=2     # error and warning messages only
log_error_suppression_list='ER_PARSER_TRACE,MY-010001,10002'

In this case, log_error_verbosity permits messages with ERROR or WARNING priority
and discards messages with INFORMATION priority. Of the nondiscarded messages,
log_error_suppression_list discards messages with WARNING priority and any of the named
error codes.

Note

The log_error_verbosity value of 2 shown in the example is also its
default value, so the effect of this variable on INFORMATION messages
is as just described by default, without an explicit setting. You must set
log_error_verbosity to 3 if you want log_error_suppression_list to
affect messages with INFORMATION priority.

Consider a server started with this setting:

[mysqld]
log_error_verbosity=1     # error messages only

In this case, log_error_verbosity permits messages with ERROR priority and discards messages
with WARNING or INFORMATION priority. Setting log_error_suppression_list has no effect
because all error codes it might suppress are already discarded due to the log_error_verbosity
setting.

7.4.2.6 Rule-Based Error Log Filtering (log_filter_dragnet)

The log_filter_dragnet log filter component enables log filtering based on user-defined rules.

To enable the log_filter_dragnet filter, first load the filter component, then modify the
log_error_services value. The following example enables log_filter_dragnet in combination
with the built-in log sink:

INSTALL COMPONENT 'file://component_log_filter_dragnet';
SET GLOBAL log_error_services = 'log_filter_dragnet; log_sink_internal';

To set log_error_services to take effect at server startup, use the instructions at Section 7.4.2.1,
“Error Log Configuration”. Those instructions apply to other error-logging system variables as well.

With log_filter_dragnet enabled, define its filter rules by setting the
dragnet.log_error_filter_rules system variable. A rule set consists of zero or more rules,
where each rule is an IF statement terminated by a period (.) character. If the variable value is empty
(zero rules), no filtering occurs.

Example 1. This rule set drops information events, and, for other events, removes the source_line
field:

SET GLOBAL dragnet.log_error_filter_rules =
  'IF prio>=INFORMATION THEN drop. IF EXISTS source_line THEN unset source_line.';

The effect is similar to the filtering performed by the log_sink_internal filter with a setting of
log_error_verbosity=2.

For readability, you might find it preferable to list the rules on separate lines. For example:

SET GLOBAL dragnet.log_error_filter_rules = '
  IF prio>=INFORMATION THEN drop.
  IF EXISTS source_line THEN unset source_line.
';

1156

The Error Log

Example 2: This rule limits information events to no more than one per 60 seconds:

SET GLOBAL dragnet.log_error_filter_rules =
  'IF prio>=INFORMATION THEN throttle 1/60.';

Once you have the filtering configuration set up as you desire, consider assigning
dragnet.log_error_filter_rules using SET PERSIST rather than SET GLOBAL to make the
setting persist across server restarts. Alternatively, add the setting to the server option file.

When using log_filter_dragnet, log_error_suppression_list is ignored.

To stop using the filtering language, first remove it from the set of error logging components. Usually
this means using a different filter component rather than no filter component. For example:

SET GLOBAL log_error_services = 'log_filter_internal; log_sink_internal';

Again, consider using SET PERSIST rather than SET GLOBAL to make the setting persist across
server restarts.

Then uninstall the filter log_filter_dragnet component:

UNINSTALL COMPONENT 'file://component_log_filter_dragnet';

The following sections describe aspects of log_filter_dragnet operation in more detail:

• Grammar for log_filter_dragnet Rule Language

• Actions for log_filter_dragnet Rules

• Field References in log_filter_dragnet Rules

Grammar for log_filter_dragnet Rule Language

The following grammar defines the language for log_filter_dragnet filter rules. Each rule is an IF
statement terminated by a period (.) character. The language is not case-sensitive.

rule:
    IF condition THEN action
    [ELSEIF condition THEN action] ...
    [ELSE action]
    .

condition: {
    field comparator value
  | [NOT] EXISTS field
  | condition {AND | OR}  condition
}

action: {
    drop
  | throttle {count | count / window_size}
  | set field [:= | =] value
  | unset [field]
}

field: {
    core_field
  | optional_field
  | user_defined_field
}

core_field: {
    time
  | msg
  | prio
  | err_code
  | err_symbol
  | SQL_state
  | subsystem
}

1157

The Error Log

optional_field: {
    OS_errno
  | OS_errmsg
  | label
  | user
  | host
  | thread
  | query_id
  | source_file
  | source_line
  | function
  | component
}

user_defined_field:
    sequence of characters in [a-zA-Z0-9_] class

comparator: {== | != | <> | >= | => | <= | =< | < | >}

value: {
    string_literal
  | integer_literal
  | float_literal
  | error_symbol
  | priority
}

count: integer_literal
window_size: integer_literal

string_literal:
    sequence of characters quoted as '...' or "..."

integer_literal:
    sequence of characters in [0-9] class

float_literal:
    integer_literal[.integer_literal]

error_symbol:
    valid MySQL error symbol such as ER_ACCESS_DENIED_ERROR or ER_STARTUP

priority: {
    ERROR
  | WARNING
  | INFORMATION
}

Simple conditions compare a field to a value or test field existence. To construct more complex
conditions, use the AND and OR operators. Both operators have the same precedence and evaluate left
to right.

To escape a character within a string, precede it by a backslash (\). A backslash is required to include
backslash itself or the string-quoting character, optional for other characters.

For convenience, log_filter_dragnet supports symbolic names for comparisons to certain fields.
For readability and portability, symbolic values are preferable (where applicable) to numeric values.

• Event priority values 1, 2, and 3 can be specified as ERROR, WARNING, and INFORMATION. Priority

symbols are recognized only in comparisons with the prio field. These comparisons are equivalent:

IF prio == INFORMATION THEN ...
IF prio == 3 THEN ...

• Error codes can be specified in numeric form or as the corresponding error symbol. For example,

ER_STARTUP is the symbolic name for error 1408, so these comparisons are equivalent:

IF err_code == ER_STARTUP THEN ...
IF err_code == 1408 THEN ...

1158

The Error Log

Error symbols are recognized only in comparisons with the err_code field and user-defined fields.

To find the error symbol corresponding to a given error code number, use one of these methods:

• Check the list of server errors at Server Error Message Reference.

• Use the perror command. Given an error number argument, perror displays information about

the error, including its symbol.

Suppose that a rule set with error numbers looks like this:

IF err_code == 10927 OR err_code == 10914 THEN drop.
IF err_code == 1131 THEN drop.

Using perror, determine the error symbols:

$> perror 10927 10914 1131
MySQL error code MY-010927 (ER_ACCESS_DENIED_FOR_USER_ACCOUNT_LOCKED):
Access denied for user '%-.48s'@'%-.64s'. Account is locked.
MySQL error code MY-010914 (ER_ABORTING_USER_CONNECTION):
Aborted connection %u to db: '%-.192s' user: '%-.48s' host:
'%-.64s' (%-.64s).
MySQL error code MY-001131 (ER_PASSWORD_ANONYMOUS_USER):
You are using MySQL as an anonymous user and anonymous users
are not allowed to change passwords

Substituting error symbols for numbers, the rule set becomes:

IF err_code == ER_ACCESS_DENIED_FOR_USER_ACCOUNT_LOCKED
  OR err_code == ER_ABORTING_USER_CONNECTION THEN drop.
IF err_code == ER_PASSWORD_ANONYMOUS_USER THEN drop.

Symbolic names can be specified as quoted strings for comparison with string fields, but in such cases
the names are strings that have no special meaning and log_filter_dragnet does not resolve
them to the corresponding numeric value. Also, typos may go undetected, whereas an error occurs
immediately on SET for attempts to use an unquoted symbol unknown to the server.

Actions for log_filter_dragnet Rules

log_filter_dragnet supports these actions in filter rules:

• drop: Drop the current log event (do not log it).

• throttle: Apply rate limiting to reduce log verbosity for events matching particular conditions. The
argument indicates a rate, in the form count or count/window_size. The count value indicates
the permitted number of event occurrences to log per time window. The window_size value is the
time window in seconds; if omitted, the default window is 60 seconds. Both values must be integer
literals.

This rule throttles plugin-shutdown messages to 5 occurrences per 60 seconds:

IF err_code == ER_PLUGIN_SHUTTING_DOWN_PLUGIN THEN throttle 5.

This rule throttles errors and warnings to 1000 occurrences per hour and information messages to
100 occurrences per hour:

IF prio <= INFORMATION THEN throttle 1000/3600 ELSE throttle 100/3600.

• set: Assign a value to a field (and cause the field to exist if it did not already). In subsequent rules,

EXISTS tests against the field name are true, and the new value can be tested by comparison
conditions.

• unset: Discard a field. In subsequent rules, EXISTS tests against the field name are false, and

comparisons of the field against any value are false.

1159

The Error Log

In the special case that the condition refers to exactly one field name, the field name following unset
is optional and unset discards the named field. These rules are equivalent:

IF myfield == 2 THEN unset myfield.
IF myfield == 2 THEN unset.

Field References in log_filter_dragnet Rules

log_filter_dragnet rules support references to core, optional, and user-defined fields in error
events.

• Core Field References

• Optional Field References

• User-Defined Field References

Core Field References

The log_filter_dragnet grammar at Grammar for log_filter_dragnet Rule Language names the
core fields that filter rules recognize. For general descriptions of these fields, see Section 7.4.2.3,
“Error Event Fields”, with which you are assumed to be familiar. The following remarks provide
additional information only as it pertains specifically to core field references as used within
log_filter_dragnet rules.

• prio

The event priority, to indicate an error, warning, or note/information event. In comparisons, each
priority can be specified as a symbolic priority name or an integer literal. Priority symbols are
recognized only in comparisons with the prio field. These comparisons are equivalent:

IF prio == INFORMATION THEN ...
IF prio == 3 THEN ...

The following table shows the permitted priority levels.

Event Type

Error event

Warning event

ERROR

WARNING

Note/information event

INFORMATION

1

2

3

Priority Symbol

Numeric Priority

There is also a message priority of SYSTEM, but system messages cannot be filtered and are always
written to the error log.

Priority values follow the principle that higher priorities have lower values, and vice versa. Priority
values begin at 1 for the most severe events (errors) and increase for events with decreasing priority.
For example, to discard events with priority lower than warnings, test for priority values higher than
WARNING:

IF prio > WARNING THEN drop.

The following examples show the log_filter_dragnet rules to achieve an effect similar to each
log_error_verbosity value permitted by the log_filter_internal filter:

• Errors only (log_error_verbosity=1):

IF prio > ERROR THEN drop.

• Errors and warnings (log_error_verbosity=2):

IF prio > WARNING THEN drop.

1160

The Error Log

• Errors, warnings, and notes (log_error_verbosity=3):

IF prio > INFORMATION THEN drop.

This rule can actually be omitted because there are no prio values greater than INFORMATION,
so effectively it drops nothing.

• err_code

The numeric event error code. In comparisons, the value to test can be specified as a symbolic error
name or an integer literal. Error symbols are recognized only in comparisons with the err_code field
and user-defined fields. These comparisons are equivalent:

IF err_code == ER_ACCESS_DENIED_ERROR THEN ...
IF err_code == 1045 THEN ...

• err_symbol

The event error symbol, as a string (for example, 'ER_DUP_KEY'). err_symbol values are
intended more for identifying particular lines in log output than for use in filter rule comparisons
because log_filter_dragnet does not resolve comparison values specified as strings to the
equivalent numeric error code. (For that to occur, an error must be specified using its unquoted
symbol.)

Optional Field References

The log_filter_dragnet grammar at Grammar for log_filter_dragnet Rule Language names the
optional fields that filter rules recognize. For general descriptions of these fields, see Section 7.4.2.3,
“Error Event Fields”, with which you are assumed to be familiar. The following remarks provide
additional information only as it pertains specifically to optional field references as used within
log_filter_dragnet rules.

• label

The label corresponding to the prio value, as a string. Filter rules can change the label for log sinks
that support custom labels. label values are intended more for identifying particular lines in log
output than for use in filter rule comparisons because log_filter_dragnet does not resolve
comparison values specified as strings to the equivalent numeric priority.

• source_file

The source file in which the event occurred, without any leading path. For example, to test for the
sql/gis/distance.cc file, write the comparison like this:

IF source_file == "distance.cc" THEN ...

User-Defined Field References

Any field name in a log_filter_dragnet filter rule not recognized as a core or optional field name
is taken to refer to a user-defined field.

7.4.2.7 Error Logging in JSON Format

This section describes how to configure error logging using the built-in filter, log_filter_internal,
and the JSON sink, log_sink_json, to take effect immediately and for subsequent server startups.
For general information about configuring error logging, see Section 7.4.2.1, “Error Log Configuration”.

To enable the JSON sink, first load the sink component, then modify the log_error_services
value:

INSTALL COMPONENT 'file://component_log_sink_json';
SET PERSIST log_error_services = 'log_filter_internal; log_sink_json';

1161

The Error Log

To set log_error_services to take effect at server startup, use the instructions at Section 7.4.2.1,
“Error Log Configuration”. Those instructions apply to other error-logging system variables as well.

It is permitted to name log_sink_json multiple times in the log_error_services value. For
example, to write unfiltered events with one instance and filtered events with another instance, you
could set log_error_services like this:

SET PERSIST log_error_services = 'log_sink_json; log_filter_internal; log_sink_json';

The JSON sink determines its output destination based on the default error log destination, which
is given by the log_error system variable. If log_error names a file, the JSON sink bases
output file naming on that file name, plus a numbered .NN.json suffix, with NN starting at 00. For
example, if log_error is file_name, successive instances of log_sink_json named in the
log_error_services value write to file_name.00.json, file_name.01.json, and so forth.

If log_error is stderr, the JSON sink writes to the console. If log_sink_json is named multiple
times in the log_error_services value, they all write to the console, which is likely not useful.

7.4.2.8 Error Logging to the System Log

It is possible to have mysqld write the error log to the system log (the Event Log on Windows, and
syslog on Unix and Unix-like systems).

This section describes how to configure error logging using the built-in filter, log_filter_internal,
and the system log sink, log_sink_syseventlog, to take effect immediately and for subsequent
server startups. For general information about configuring error logging, see Section 7.4.2.1, “Error Log
Configuration”.

To enable the system log sink, first load the sink component, then modify the log_error_services
value:

INSTALL COMPONENT 'file://component_log_sink_syseventlog';
SET PERSIST log_error_services = 'log_filter_internal; log_sink_syseventlog';

To set log_error_services to take effect at server startup, use the instructions at Section 7.4.2.1,
“Error Log Configuration”. Those instructions apply to other error-logging system variables as well.

Note

For MySQL 8.0 configuration, you must enable error logging to the system log
explicitly. This differs from MySQL 5.7 and earlier, for which error logging to the
system log is enabled by default on Windows, and on all platforms requires no
component loading.

Error logging to the system log may require additional system configuration.
Consult the system log documentation for your platform.

On Windows, error messages written to the Event Log within the Application log have these
characteristics:

• Entries marked as Error, Warning, and Note are written to the Event Log, but not messages such

as information statements from individual storage engines.

• Event Log entries have a source of MySQL (or MySQL-tag if syseventlog.tag is defined as tag).

On Unix and Unix-like systems, logging to the system log uses syslog. The following system variables
affect syslog messages:

• syseventlog.facility: The default facility for syslog messages is daemon. Set this variable to

specify a different facility.

• syseventlog.include_pid: Whether to include the server process ID in each line of syslog

output.

1162

The Error Log

• syseventlog.tag: This variable defines a tag to add to the server identifier (mysqld) in syslog

messages. If defined, the tag is appended to the identifier with a leading hyphen.

Note

Prior to MySQL 8.0.13, use the log_syslog_facility,
log_syslog_include_pid, and log_syslog_tag system variables rather
than the syseventlog.xxx variables.

MySQL uses the custom label “System” for important system messages about non-error situations,
such as startup, shutdown, and some significant changes to settings. In logs that do not support
custom labels, including the Event Log on Windows, and syslog on Unix and Unix-like systems,
system messages are assigned the label used for the information priority level. However, these
messages are printed to the log even if the MySQL log_error_verbosity setting normally excludes
messages at the information level.

When a log sink must fall back to a label of “Information” instead of “System” in this way, and the
log event is further processed outside of the MySQL server (for example, filtered or forwarded by a
syslog configuration), these events may by default be processed by the secondary application as
being of “Information” priority rather than “System” priority.

7.4.2.9 Error Log Output Format

Each error log sink (writer) component has a characteristic output format it uses to write messages to
its destination, but other factors may influence the content of the messages:

• The information available to the log sink. If a log filter component executed prior to execution of the

sink component removes a log event field, that field is not available for writing. For information about
log filtering, see Section 7.4.2.4, “Types of Error Log Filtering”.

• The information relevant to the log sink. Not every sink writes all fields available in error events.

• System variables may affect log sinks. See System Variables That Affect Error Log Format.

For names and descriptions of the fields in error events, see Section 7.4.2.3, “Error Event Fields”.
For all log sinks, the thread ID included in error log messages is that of the thread within mysqld
responsible for writing the message. This ID indicates which part of the server produced the message,
and is consistent with general query log and slow query log messages, which include the connection
thread ID.

• log_sink_internal Output Format

• log_sink_json Output Format

• log_sink_syseventlog Output Format

• Early-Startup Logging Output Format

• System Variables That Affect Error Log Format

log_sink_internal Output Format

The internal log sink produces traditional error log output. For example:

2020-08-06T14:25:02.835618Z 0 [Note] [MY-012487] [InnoDB] DDL log recovery : begin
2020-08-06T14:25:02.936146Z 0 [Warning] [MY-010068] [Server] CA certificate /var/mysql/sslinfo/cacert.pem is self signed.
2020-08-06T14:25:02.963127Z 0 [Note] [MY-010253] [Server] IPv6 is available.
2020-08-06T14:25:03.109022Z 5 [Note] [MY-010051] [Server] Event Scheduler: scheduler thread started with id 5

Traditional-format messages have these fields:

time thread [label] [err_code] [subsystem] msg

The [ and ] square bracket characters are literal characters in the message format. They do not
indicate that fields are optional.

1163

The Error Log

The label value corresponds to the string form of the prio error event priority field.

The [err_code] and [subsystem] fields were added in MySQL 8.0. They are missing from logs
generated by older servers. Log parsers can treat these fields as parts of the message text that
is present only for logs written by servers recent enough to include them. Parsers must treat the
err_code part of [err_code] indicators as a string value, not a number, because values such as
MY-012487 and MY-010051 contain nonnumeric characters.

log_sink_json Output Format

The JSON-format log sink produces messages as JSON objects that contain key-value pairs. For
example:

{
  "prio": 3,
  "err_code": 10051,
  "source_line": 561,
  "source_file": "event_scheduler.cc",
  "function": "run",
  "msg": "Event Scheduler: scheduler thread started with id 5",
  "time": "2020-08-06T14:25:03.109022Z",
  "ts": 1596724012005,
  "thread": 5,
  "err_symbol": "ER_SCHEDULER_STARTED",
  "SQL_state": "HY000",
  "subsystem": "Server",
  "buffered": 1596723903109022,
  "label": "Note"
}

The message shown is reformatted for readability. Events written to the error log appear one message
per line.

The ts (timestamp) key was added in MySQL 8.0.20 and is unique to the JSON-format log sink. The
value is an integer indicating milliseconds since the epoch ('1970-01-01 00:00:00' UTC).

The ts and buffered values are Unix timestamp values and can be converted using
FROM_UNIXTIME() and an appropriate divisor:

mysql> SET time_zone = '+00:00';
mysql> SELECT FROM_UNIXTIME(1596724012005/1000.0);
+-------------------------------------+
| FROM_UNIXTIME(1596724012005/1000.0) |
+-------------------------------------+
| 2020-08-06 14:26:52.0050            |
+-------------------------------------+
mysql> SELECT FROM_UNIXTIME(1596723903109022/1000000.0);
+-------------------------------------------+
| FROM_UNIXTIME(1596723903109022/1000000.0) |
+-------------------------------------------+
| 2020-08-06 14:25:03.1090                  |
+-------------------------------------------+

log_sink_syseventlog Output Format

The system log sink produces output that conforms to the system log format used on the local platform.

Early-Startup Logging Output Format

The server generates some error log messages before startup options have been processed, and thus
before it knows error log settings such as the log_error_verbosity and log_timestamps system
variable values, and before it knows which log components are to be used. The server handles error
log messages that are generated early in the startup process as follows:

• Prior to MySQL 8.0.14, the server generates messages with the default timestamp, format,

and verbosity level, and buffers them. After the startup options are processed and the error log
configuration is known, the server flushes the buffered messages. Because these early messages

1164

The General Query Log

use the default log configuration, they may differ from what is specified by the startup options. Also,
the early messages are not flushed to log sinks other than the default. For example, logging to the
JSON sink does not include these early messages because they are not in JSON format.

• As of MySQL 8.0.14, the server buffers log events rather than formatted log messages. This enables
it to retroactively apply configuration settings to those events after the settings are known, with the
result that flushed messages use the configured settings, not the defaults. Also, messages are
flushed to all configured sinks, not just the default sink.

If a fatal error occurs before log configuration is known and the server must exit, the server formats
buffered messages using the logging defaults so they are not lost. If no fatal error occurs but startup
is excessively slow prior to processing startup options, the server periodically formats and flushes
buffered messages using the logging defaults so as not to appear unresponsive. Although this
behavior is similar to pre-8.0.14 behavior in that the defaults are used, it is preferable to losing
messages when exceptional conditions occur.

System Variables That Affect Error Log Format

The log_timestamps system variable controls the time zone of timestamps in messages written
to the error log (as well as to general query log and slow query log files). The server applies
log_timestamps to error events before they reach any log sink; it thus affects error message output
from all sinks.

Permitted log_timestamps values are UTC (the default) and SYSTEM (the local system time zone).
Timestamps are written using ISO 8601 / RFC 3339 format: YYYY-MM-DDThh:mm:ss.uuuuuu plus a
tail value of Z signifying Zulu time (UTC) or ±hh:mm (an offset that indicates the local system time zone
adjustment relative to UTC). For example:

2020-08-07T15:02:00.832521Z            (UTC)
2020-08-07T10:02:00.832521-05:00       (SYSTEM)

7.4.2.10 Error Log File Flushing and Renaming

If you flush the error log using a FLUSH ERROR LOGS or FLUSH LOGS statement, or a mysqladmin
flush-logs command, the server closes and reopens any error log file to which it is writing. To
rename an error log file, do so manually before flushing. Flushing the logs then opens a new file with
the original file name. For example, assuming a log file name of host_name.err, use the following
commands to rename the file and create a new one:

mv host_name.err host_name.err-old
mysqladmin flush-logs error
mv host_name.err-old backup-directory

On Windows, use rename rather than mv.

If the location of the error log file is not writable by the server, the log-flushing operation fails to create a
new log file. For example, on Linux, the server might write the error log to the /var/log/mysqld.log
file, where the /var/log directory is owned by root and is not writable by mysqld. For information
about handling this case, see Section 7.4.6, “Server Log Maintenance”.

If the server is not writing to a named error log file, no error log file renaming occurs when the error log
is flushed.

7.4.3 The General Query Log

The general query log is a general record of what mysqld is doing. The server writes information to
this log when clients connect or disconnect, and it logs each SQL statement received from clients. The
general query log can be very useful when you suspect an error in a client and want to know exactly
what the client sent to mysqld.

Each line that shows when a client connects also includes using connection_type to indicate the
protocol used to establish the connection. connection_type is one of TCP/IP (TCP/IP connection

1165

The General Query Log

established without SSL), SSL/TLS (TCP/IP connection established with SSL), Socket (Unix socket
file connection), Named Pipe (Windows named pipe connection), or Shared Memory (Windows
shared memory connection).

mysqld writes statements to the query log in the order that it receives them, which might differ from the
order in which they are executed. This logging order is in contrast with that of the binary log, for which
statements are written after they are executed but before any locks are released. In addition, the query
log may contain statements that only select data while such statements are never written to the binary
log.

When using statement-based binary logging on a replication source server, statements received by
its replicas are written to the query log of each replica. Statements are written to the query log of the
source if a client reads events with the mysqlbinlog utility and passes them to the server.

However, when using row-based binary logging, updates are sent as row changes rather than SQL
statements, and thus these statements are never written to the query log when binlog_format is
ROW. A given update also might not be written to the query log when this variable is set to MIXED,
depending on the statement used. See Section 19.2.1.1, “Advantages and Disadvantages of
Statement-Based and Row-Based Replication”, for more information.

By default, the general query log is disabled. To specify the initial general query log state explicitly,
use --general_log[={0|1}]. With no argument or an argument of 1, --general_log enables
the log. With an argument of 0, this option disables the log. To specify a log file name, use --
general_log_file=file_name. To specify the log destination, use the log_output system
variable (as described in Section 7.4.1, “Selecting General Query Log and Slow Query Log Output
Destinations”).

Note

If you specify the TABLE log destination, see Log Tables and “Too many open
files” Errors.

If you specify no name for the general query log file, the default name is host_name.log. The server
creates the file in the data directory unless an absolute path name is given to specify a different
directory.

To disable or enable the general query log or change the log file name at runtime, use the global
general_log and general_log_file system variables. Set general_log to 0 (or OFF) to disable
the log or to 1 (or ON) to enable it. Set general_log_file to specify the name of the log file. If a log
file already is open, it is closed and the new file is opened.

When the general query log is enabled, the server writes output to any destinations specified by the
log_output system variable. If you enable the log, the server opens the log file and writes startup
messages to it. However, further logging of queries to the file does not occur unless the FILE log
destination is selected. If the destination is NONE, the server writes no queries even if the general log is
enabled. Setting the log file name has no effect on logging if the log destination value does not contain
FILE.

Server restarts and log flushing do not cause a new general query log file to be generated (although
flushing closes and reopens it). To rename the file and create a new one, use the following commands:

$> mv host_name.log host_name-old.log
$> mysqladmin flush-logs general
$> mv host_name-old.log backup-directory

On Windows, use rename rather than mv.

You can also rename the general query log file at runtime by disabling the log:

SET GLOBAL general_log = 'OFF';

With the log disabled, rename the log file externally (for example, from the command line). Then enable
the log again:

1166

The Binary Log

SET GLOBAL general_log = 'ON';

This method works on any platform and does not require a server restart.

To disable or enable general query logging for the current session, set the session sql_log_off
variable to ON or OFF. (This assumes that the general query log itself is enabled.)

Passwords in statements written to the general query log are rewritten by the server not to occur
literally in plain text. Password rewriting can be suppressed for the general query log by starting the
server with the --log-raw option. This option may be useful for diagnostic purposes, to see the
exact text of statements as received by the server, but for security reasons is not recommended for
production use. See also Section 8.1.2.3, “Passwords and Logging”.

An implication of password rewriting is that statements that cannot be parsed (due, for example, to
syntax errors) are not written to the general query log because they cannot be known to be password
free. Use cases that require logging of all statements including those with errors should use the --
log-raw option, bearing in mind that this also bypasses password rewriting.

Password rewriting occurs only when plain text passwords are expected. For statements with syntax
that expect a password hash value, no rewriting occurs. If a plain text password is supplied erroneously
for such syntax, the password is logged as given, without rewriting.

The log_timestamps system variable controls the time zone of timestamps in messages written to
the general query log file (as well as to the slow query log file and the error log). It does not affect the
time zone of general query log and slow query log messages written to log tables, but rows retrieved
from those tables can be converted from the local system time zone to any desired time zone with
CONVERT_TZ() or by setting the session time_zone system variable.

7.4.4 The Binary Log

The binary log contains “events” that describe database changes such as table creation operations or
changes to table data. It also contains events for statements that potentially could have made changes
(for example, a DELETE which matched no rows), unless row-based logging is used. The binary log
also contains information about how long each statement took that updated data. The binary log has
two important purposes:

• For replication, the binary log on a replication source server provides a record of the data changes to
be sent to replicas. The source sends the information contained in its binary log to its replicas, which
reproduce those transactions to make the same data changes that were made on the source. See
Section 19.2, “Replication Implementation”.

• Certain data recovery operations require use of the binary log. After a backup has been restored,

the events in the binary log that were recorded after the backup was made are re-executed. These
events bring databases up to date from the point of the backup. See Section 9.5, “Point-in-Time
(Incremental) Recovery”.

The binary log is not used for statements such as SELECT or SHOW that do not modify data. To log all
statements (for example, to identify a problem query), use the general query log. See Section 7.4.3,
“The General Query Log”.

Running a server with binary logging enabled makes performance slightly slower. However, the
benefits of the binary log in enabling you to set up replication and for restore operations generally
outweigh this minor performance decrement.

The binary log is resilient to unexpected halts. Only complete events or transactions are logged or read
back.

Passwords in statements written to the binary log are rewritten by the server not to occur literally in
plain text. See also Section 8.1.2.3, “Passwords and Logging”.

From MySQL 8.0.14, binary log files and relay log files can be encrypted, helping to protect these files
and the potentially sensitive data contained in them from being misused by outside attackers, and

1167

The Binary Log

also from unauthorized viewing by users of the operating system where they are stored. You enable
encryption on a MySQL server by setting the binlog_encryption system variable to ON. For more
information, see Section 19.3.2, “Encrypting Binary Log Files and Relay Log Files”.

The following discussion describes some of the server options and variables that affect the operation of
binary logging. For a complete list, see Section 19.1.6.4, “Binary Logging Options and Variables”.

Binary logging is enabled by default (the log_bin system variable is set to ON). The exception is if
you use mysqld to initialize the data directory manually by invoking it with the --initialize or --
initialize-insecure option, when binary logging is disabled by default, but can be enabled by
specifying the --log-bin option.

To disable binary logging, you can specify the --skip-log-bin or --disable-log-bin option at
startup. If either of these options is specified and --log-bin is also specified, the option specified
later takes precedence.

The --log-slave-updates and --slave-preserve-commit-order options require binary
logging. If you disable binary logging, either omit these options, or specify --log-slave-
updates=OFF and --skip-slave-preserve-commit-order. MySQL disables these options by
default when --skip-log-bin or --disable-log-bin is specified. If you specify --log-slave-
updates or --slave-preserve-commit-order together with --skip-log-bin or --disable-
log-bin, a warning or error message is issued.

The --log-bin[=base_name] option is used to specify the base name for binary log files. If you do
not supply the --log-bin option, MySQL uses binlog as the default base name for the binary log
files. For compatibility with earlier releases, if you supply the --log-bin option with no string or with
an empty string, the base name defaults to host_name-bin, using the name of the host machine. It is
recommended that you specify a base name, so that if the host name changes, you can easily continue
to use the same binary log file names (see Section B.3.7, “Known Issues in MySQL”). If you supply
an extension in the log name (for example, --log-bin=base_name.extension), the extension is
silently removed and ignored.

mysqld appends a numeric extension to the binary log base name to generate binary log file names.
The number increases each time the server creates a new log file, thus creating an ordered series of
files. The server creates a new file in the series each time any of the following events occurs:

• The server is started or restarted

• The server flushes the logs.

• The size of the current log file reaches max_binlog_size.

A binary log file may become larger than max_binlog_size if you are using large transactions
because a transaction is written to the file in one piece, never split between files.

To keep track of which binary log files have been used, mysqld also creates a binary log index file
that contains the names of the binary log files. By default, this has the same base name as the binary
log file, with the extension '.index'. You can change the name of the binary log index file with the
--log-bin-index[=file_name] option. You should not manually edit this file while mysqld is
running; doing so would confuse mysqld.

The term “binary log file” generally denotes an individual numbered file containing database events.
The term “binary log” collectively denotes the set of numbered binary log files plus the index file.

The default location for binary log files and the binary log index file is the data directory. You can use
the --log-bin option to specify an alternative location, by adding a leading absolute path name to
the base name to specify a different directory. When the server reads an entry from the binary log
index file, which tracks the binary log files that have been used, it checks whether the entry contains a
relative path. If it does, the relative part of the path is replaced with the absolute path set using the --
log-bin option. An absolute path recorded in the binary log index file remains unchanged; in such a
case, the index file must be edited manually to enable a new path or paths to be used. The binary log
file base name and any specified path are available as the log_bin_basename system variable.

1168

The Binary Log

In MySQL 5.7, a server ID had to be specified when binary logging was enabled, or the server would
not start. In MySQL 8.0, the server_id system variable is set to 1 by default. The server can be
started with this default ID when binary logging is enabled, but an informational message is issued if
you do not specify a server ID explicitly using the server_id system variable. For servers that are
used in a replication topology, you must specify a unique nonzero server ID for each server.

A client that has privileges sufficient to set restricted session system variables (see Section 7.1.9.1,
“System Variable Privileges”) can disable binary logging of its own statements by using a SET
sql_log_bin=OFF statement.

By default, the server logs the length of the event as well as the event itself and uses this to verify that
the event was written correctly. You can also cause the server to write checksums for the events by
setting the binlog_checksum system variable. When reading back from the binary log, the source
uses the event length by default, but can be made to use checksums if available by enabling the
system variable source_verify_checksum (from MySQL 8.0.26) or master_verify_checksum
(before MySQL 8.0.26). The replication I/O (receiver) thread on the replica also verifies events received
from the source. You can cause the replication SQL (applier) thread to use checksums if available
when reading from the relay log by enabling the system variable replica_sql_verify_checksum
(from MySQL 8.0.26) or slave_sql_verify_checksum (before MySQL 8.0.26).

The format of the events recorded in the binary log is dependent on the binary logging format. Three
format types are supported: row-based logging, statement-based logging and mixed-base logging. The
binary logging format used depends on the MySQL version. For general descriptions of the logging
formats, see Section 7.4.4.1, “Binary Logging Formats”. For detailed information about the format of the
binary log, see MySQL Internals: The Binary Log.

The server evaluates the --binlog-do-db and --binlog-ignore-db options in the same way
as it does the --replicate-do-db and --replicate-ignore-db options. For information about
how this is done, see Section 19.2.5.1, “Evaluation of Database-Level Replication and Binary Logging
Options”.

A replica is started with the system variable log_replica_updates (from MySQL 8.0.26) or
log_slave_updates (before MySQL 8.0.26) enabled by default, meaning that the replica writes to
its own binary log any data modifications that are received from the source. The binary log must be
enabled for this setting to work (see Section 19.1.6.3, “Replica Server Options and Variables”). This
setting enables the replica to act as a source to other replicas.

You can delete all binary log files with the RESET MASTER statement, or a subset of them with PURGE
BINARY LOGS. See Section 15.7.8.6, “RESET Statement”, and Section 15.4.1.1, “PURGE BINARY
LOGS Statement”.

If you are using replication, you should not delete old binary log files on the source until you are
sure that no replica still needs to use them. For example, if your replicas never run more than three
days behind, once a day you can execute mysqladmin flush-logs binary on the source and
then remove any logs that are more than three days old. You can remove the files manually, but it is
preferable to use PURGE BINARY LOGS, which also safely updates the binary log index file for you
(and which can take a date argument). See Section 15.4.1.1, “PURGE BINARY LOGS Statement”.

You can display the contents of binary log files with the mysqlbinlog utility. This can be useful when
you want to reprocess statements in the log for a recovery operation. For example, you can update a
MySQL server from the binary log as follows:

$> mysqlbinlog log_file | mysql -h server_name

mysqlbinlog also can be used to display the contents of the relay log file on a replica, because they
are written using the same format as binary log files. For more information on the mysqlbinlog utility
and how to use it, see Section 6.6.9, “mysqlbinlog — Utility for Processing Binary Log Files”. For more
information about the binary log and recovery operations, see Section 9.5, “Point-in-Time (Incremental)
Recovery”.

1169

The Binary Log

Binary logging is done immediately after a statement or transaction completes but before any locks are
released or any commit is done. This ensures that the log is logged in commit order.

Updates to nontransactional tables are stored in the binary log immediately after execution.

Within an uncommitted transaction, all updates (UPDATE, DELETE, or INSERT) that change
transactional tables such as InnoDB tables are cached until a COMMIT statement is received by the
server. At that point, mysqld writes the entire transaction to the binary log before the COMMIT is
executed.

Modifications to nontransactional tables cannot be rolled back. If a transaction that is rolled back
includes modifications to nontransactional tables, the entire transaction is logged with a ROLLBACK
statement at the end to ensure that the modifications to those tables are replicated.

When a thread that handles the transaction starts, it allocates a buffer of binlog_cache_size to
buffer statements. If a statement is bigger than this, the thread opens a temporary file to store the
transaction. The temporary file is deleted when the thread ends. From MySQL 8.0.17, if binary log
encryption is active on the server, the temporary file is encrypted.

The Binlog_cache_use status variable shows the number of transactions that used this buffer (and
possibly a temporary file) for storing statements. The Binlog_cache_disk_use status variable
shows how many of those transactions actually had to use a temporary file. These two variables can be
used for tuning binlog_cache_size to a large enough value that avoids the use of temporary files.

The max_binlog_cache_size system variable (default 4GB, which is also the maximum) can be
used to restrict the total size used to cache a multiple-statement transaction. If a transaction is larger
than this many bytes, it fails and rolls back. The minimum value is 4096.

If you are using the binary log and row based logging, concurrent inserts are converted to normal
inserts for CREATE ... SELECT or INSERT ... SELECT statements. This is done to ensure that
you can re-create an exact copy of your tables by applying the log during a backup operation. If you are
using statement-based logging, the original statement is written to the log.

The binary log format has some known limitations that can affect recovery from backups. See
Section 19.5.1, “Replication Features and Issues”.

Binary logging for stored programs is done as described in Section 27.7, “Stored Program Binary
Logging”.

Note that the binary log format differs in MySQL 8.0 from previous versions of MySQL, due to
enhancements in replication. See Section 19.5.2, “Replication Compatibility Between MySQL
Versions”.

If the server is unable to write to the binary log, flush binary log files, or synchronize the binary log to
disk, the binary log on the replication source server can become inconsistent and replicas can lose
synchronization with the source. The binlog_error_action system variable controls the action
taken if an error of this type is encountered with the binary log.

• The default setting, ABORT_SERVER, makes the server halt binary logging and shut down. At this
point, you can identify and correct the cause of the error. On restart, recovery proceeds as in the
case of an unexpected server halt (see Section 19.4.2, “Handling an Unexpected Halt of a Replica”).

• The setting IGNORE_ERROR provides backward compatibility with older versions of MySQL. With this
setting, the server continues the ongoing transaction and logs the error, then halts binary logging,
but continues to perform updates. At this point, you can identify and correct the cause of the error.
To resume binary logging, log_bin must be enabled again, which requires a server restart. Only
use this option if you require backward compatibility, and the binary log is non-essential on this
MySQL server instance. For example, you might use the binary log only for intermittent auditing or
debugging of the server, and not use it for replication from the server or rely on it for point-in-time
restore operations.

1170

The Binary Log

By default, the binary log is synchronized to disk at each write (sync_binlog=1). If sync_binlog
was not enabled, and the operating system or machine (not only the MySQL server) crashed, there
is a chance that the last statements of the binary log could be lost. To prevent this, enable the
sync_binlog system variable to synchronize the binary log to disk after every N commit groups. See
Section 7.1.8, “Server System Variables”. The safest value for sync_binlog is 1 (the default), but this
is also the slowest.

In earlier MySQL releases, there was a chance of inconsistency between the table content and
binary log content if a crash occurred, even with sync_binlog set to 1. For example, if you are
using InnoDB tables and the MySQL server processes a COMMIT statement, it writes many prepared
transactions to the binary log in sequence, synchronizes the binary log, and then commits the
transaction into InnoDB. If the server unexpectedly exited between those two operations, the
transaction would be rolled back by InnoDB at restart but still exist in the binary log. Such an issue was
resolved in previous releases by enabling InnoDB support for two-phase commit in XA transactions. In
MySQL 8.0, InnoDB support for two-phase commit in XA transactions is always enabled.

InnoDB support for two-phase commit in XA transactions ensures that the binary log and InnoDB
data files are synchronized. However, the MySQL server should also be configured to synchronize
the binary log and the InnoDB logs to disk before committing the transaction. The InnoDB logs are
synchronized by default, and sync_binlog=1 ensures the binary log is synchronized. The effect
of implicit InnoDB support for two-phase commit in XA transactions and sync_binlog=1 is that at
restart after a crash, after doing a rollback of transactions, the MySQL server scans the latest binary
log file to collect transaction xid values and calculate the last valid position in the binary log file. The
MySQL server then tells InnoDB to complete any prepared transactions that were successfully written
to the to the binary log, and truncates the binary log to the last valid position. This ensures that the
binary log reflects the exact data of InnoDB tables, and therefore the replica remains in synchrony with
the source because it does not receive a statement which has been rolled back.

If the MySQL server discovers at crash recovery that the binary log is shorter than it should have
been, it lacks at least one successfully committed InnoDB transaction. This should not happen if
sync_binlog=1 and the disk/file system do an actual sync when they are requested to (some do
not), so the server prints an error message The binary log file_name is shorter than its
expected size. In this case, this binary log is not correct and replication should be restarted from a
fresh snapshot of the source's data.

The session values of the following system variables are written to the binary log and honored by the
replica when parsing the binary log:

• sql_mode (except that the NO_DIR_IN_CREATE mode is not replicated; see Section 19.5.1.39,

“Replication and Variables”)

• foreign_key_checks

• unique_checks

• character_set_client

• collation_connection

• collation_database

• collation_server

• sql_auto_is_null

7.4.4.1 Binary Logging Formats

The server uses several logging formats to record information in the binary log:

• Replication capabilities in MySQL originally were based on propagation of SQL statements from

source to replica. This is called statement-based logging. You can cause this format to be used by
starting the server with --binlog-format=STATEMENT.

1171

The Binary Log

• In row-based logging (the default), the source writes events to the binary log that indicate how

individual table rows are affected. You can cause the server to use row-based logging by starting it
with --binlog-format=ROW.

• A third option is also available: mixed logging. With mixed logging, statement-based logging is used
by default, but the logging mode switches automatically to row-based in certain cases as described
below. You can cause MySQL to use mixed logging explicitly by starting mysqld with the option --
binlog-format=MIXED.

The logging format can also be set or limited by the storage engine being used. This helps to eliminate
issues when replicating certain statements between a source and replica which are using different
storage engines.

With statement-based replication, there may be issues with replicating nondeterministic statements. In
deciding whether or not a given statement is safe for statement-based replication, MySQL determines
whether it can guarantee that the statement can be replicated using statement-based logging. If
MySQL cannot make this guarantee, it marks the statement as potentially unreliable and issues the
warning, Statement may not be safe to log in statement format.

You can avoid these issues by using MySQL's row-based replication instead.

7.4.4.2 Setting The Binary Log Format

You can select the binary logging format explicitly by starting the MySQL server with --binlog-
format=type. The supported values for type are:

• STATEMENT causes logging to be statement based.

• ROW causes logging to be row based. This is the default.

• MIXED causes logging to use mixed format.

Setting the binary logging format does not activate binary logging for the server. The setting only takes
effect when binary logging is enabled on the server, which is the case when the log_bin system
variable is set to ON. From MySQL 8.0, binary logging is enabled by default, and is only disabled if you
specify the --skip-log-bin or --disable-log-bin option at startup.

The logging format also can be switched at runtime, although note that there are a number of
situations in which you cannot do this, as discussed later in this section. Set the global value of the
binlog_format system variable to specify the format for clients that connect subsequent to the
change:

mysql> SET GLOBAL binlog_format = 'STATEMENT';
mysql> SET GLOBAL binlog_format = 'ROW';
mysql> SET GLOBAL binlog_format = 'MIXED';

An individual client can control the logging format for its own statements by setting the session value of
binlog_format:

mysql> SET SESSION binlog_format = 'STATEMENT';
mysql> SET SESSION binlog_format = 'ROW';
mysql> SET SESSION binlog_format = 'MIXED';

Changing the global binlog_format value requires privileges sufficient to set global system
variables. Changing the session binlog_format value requires privileges sufficient to set restricted
session system variables. See Section 7.1.9.1, “System Variable Privileges”.

There are several reasons why a client might want to set binary logging on a per-session basis:

• A session that makes many small changes to the database might want to use row-based logging.

• A session that performs updates that match many rows in the WHERE clause might want to use
statement-based logging because it is more efficient to log a few statements than many rows.

1172

The Binary Log

• Some statements require a lot of execution time on the source, but result in just a few rows being

modified. It might therefore be beneficial to replicate them using row-based logging.

There are exceptions when you cannot switch the replication format at runtime:

• The replication format cannot be changed from within a stored function or a trigger.

• If the NDB storage engine is enabled.

• If a session has open temporary tables, the replication format cannot be changed for the session

(SET @@SESSION.binlog_format).

• If any replication channel has open temporary tables, the replication format cannot be changed

globally (SET @@GLOBAL.binlog_format or SET @@PERSIST.binlog_format).

• If any replication channel applier thread is currently running, the replication format cannot be

changed globally (SET @@GLOBAL.binlog_format or SET @@PERSIST.binlog_format).

Trying to switch the replication format in any of these cases (or attempting to set the
current replication format) results in an error. You can, however, use PERSIST_ONLY (SET
@@PERSIST_ONLY.binlog_format) to change the replication format at any time, because this action
does not modify the runtime global system variable value, and takes effect only after a server restart.

Switching the replication format at runtime is not recommended when any temporary tables exist,
because temporary tables are logged only when using statement-based replication, whereas with row-
based replication and mixed replication, they are not logged.

Switching the replication format while replication is ongoing can also cause issues. Each MySQL
Server can set its own and only its own binary logging format (true whether binlog_format is set
with global or session scope). This means that changing the logging format on a replication source
server does not cause a replica to change its logging format to match. When using STATEMENT mode,
the binlog_format system variable is not replicated. When using MIXED or ROW logging mode, it is
replicated but is ignored by the replica.

A replica is not able to convert binary log entries received in ROW logging format to STATEMENT format
for use in its own binary log. The replica must therefore use ROW or MIXED format if the source does.
Changing the binary logging format on the source from STATEMENT to ROW or MIXED while replication
is ongoing to a replica with STATEMENT format can cause replication to fail with errors such as Error
executing row event: 'Cannot execute statement: impossible to write to
binary log since statement is in row format and BINLOG_FORMAT = STATEMENT.'
Changing the binary logging format on the replica to STATEMENT format when the source is still using
MIXED or ROW format also causes the same type of replication failure. To change the format safely, you
must stop replication and ensure that the same change is made on both the source and the replica.

If you are using InnoDB tables and the transaction isolation level is READ COMMITTED or READ
UNCOMMITTED, only row-based logging can be used. It is possible to change the logging format to
STATEMENT, but doing so at runtime leads very rapidly to errors because InnoDB can no longer
perform inserts.

With the binary log format set to ROW, many changes are written to the binary log using the row-based
format. Some changes, however, still use the statement-based format. Examples include all DDL (data
definition language) statements such as CREATE TABLE, ALTER TABLE, or DROP TABLE.

When row-based binary logging is used, the binlog_row_event_max_size system variable and its
corresponding startup option --binlog-row-event-max-size set a soft limit on the maximum size
of row events. The default value is 8192 bytes, and the value can only be changed at server startup.
Where possible, rows stored in the binary log are grouped into events with a size not exceeding the
value of this setting. If an event cannot be split, the maximum size can be exceeded.

The --binlog-row-event-max-size option is available for servers that are capable of row-based
replication. Rows are stored into the binary log in chunks having a size in bytes not exceeding the
value of this option. The value must be a multiple of 256. The default value is 8192.

1173

The Binary Log

Warning

When using statement-based logging for replication, it is possible for the data
on the source and replica to become different if a statement is designed in
such a way that the data modification is nondeterministic; that is, it is left up
to the query optimizer. In general, this is not a good practice even outside of
replication. For a detailed explanation of this issue, see Section B.3.7, “Known
Issues in MySQL”.

7.4.4.3 Mixed Binary Logging Format

When running in MIXED logging format, the server automatically switches from statement-based to
row-based logging under the following conditions:

• When a function contains UUID().

• When one or more tables with AUTO_INCREMENT columns are updated and a trigger or stored

function is invoked. Like all other unsafe statements, this generates a warning if binlog_format =
STATEMENT.

For more information, see Section 19.5.1.1, “Replication and AUTO_INCREMENT”.

• When the body of a view requires row-based replication, the statement creating the view also uses it.

For example, this occurs when the statement creating a view uses the UUID() function.

• When a call to a loadable function is involved.

• When FOUND_ROWS() or ROW_COUNT() is used. (Bug #12092, Bug #30244)

• When USER(), CURRENT_USER(), or CURRENT_USER is used. (Bug #28086)

• When one of the tables involved is a log table in the mysql database.

• When the LOAD_FILE() function is used. (Bug #39701)

• When a statement refers to one or more system variables. (Bug #31168)

Exception.
the logging format to switch:

 The following system variables, when used with session scope (only), do not cause

• auto_increment_increment

• auto_increment_offset

• character_set_client

• character_set_connection

• character_set_database

• character_set_server

• collation_connection

• collation_database

• collation_server

• foreign_key_checks

• identity

• last_insert_id

1174

The Binary Log

• lc_time_names

• pseudo_thread_id

• sql_auto_is_null

• time_zone

• timestamp

• unique_checks

For information about determining system variable scope, see Section 7.1.9, “Using System
Variables”.

For information about how replication treats sql_mode, see Section 19.5.1.39, “Replication and
Variables”.

In earlier releases, when mixed binary logging format was in use, if a statement was logged by row and
the session that executed the statement had any temporary tables, all subsequent statements were
treated as unsafe and logged in row-based format until all temporary tables in use by that session were
dropped. As of MySQL 8.0, operations on temporary tables are not logged in mixed binary logging
format, and the presence of temporary tables in the session has no impact on the logging mode used
for each statement.

Note

A warning is generated if you try to execute a statement using statement-based
logging that should be written using row-based logging. The warning is shown
both in the client (in the output of SHOW WARNINGS) and through the mysqld
error log. A warning is added to the SHOW WARNINGS table each time such a
statement is executed. However, only the first statement that generated the
warning for each client session is written to the error log to prevent flooding the
log.

In addition to the decisions above, individual engines can also determine the logging format used when
information in a table is updated. The logging capabilities of an individual engine can be defined as
follows:

• If an engine supports row-based logging, the engine is said to be row-logging capable.

• If an engine supports statement-based logging, the engine is said to be statement-logging capable.

A given storage engine can support either or both logging formats. The following table lists the formats
supported by each engine.

Storage Engine

Row Logging Supported

Statement Logging Supported

ARCHIVE

BLACKHOLE

CSV

EXAMPLE

FEDERATED

HEAP

InnoDB

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

No

Yes

Yes

Yes when the transaction
isolation level is REPEATABLE
READ or SERIALIZABLE; No
otherwise.

1175

The Binary Log

Storage Engine

Row Logging Supported

Statement Logging Supported

MyISAM

MERGE

NDB

Yes

Yes

Yes

Yes

Yes

No

Whether a statement is to be logged and the logging mode to be used is determined according to the
type of statement (safe, unsafe, or binary injected), the binary logging format (STATEMENT, ROW, or
MIXED), and the logging capabilities of the storage engine (statement capable, row capable, both, or
neither). (Binary injection refers to logging a change that must be logged using ROW format.)

Statements may be logged with or without a warning; failed statements are not logged, but generate
errors in the log. This is shown in the following decision table. Type, binlog_format, SLC, and
RLC columns outline the conditions, and Error / Warning and Logged as columns represent the
corresponding actions. SLC stands for “statement-logging capable”, and RLC stands for “row-logging
capable”.

Type

binlog_formatSLC

*

*

No

RLC

No

Safe

Safe

Safe

STATEMENT

MIXED

ROW

Yes

Yes

Yes

No

No

No

Unsafe

STATEMENT

Yes

No

1176

Logged as

-

Error /
Warning

Error:
Cannot
execute
statement:
Binary logging
is impossible
since at least
one engine is
involved that
is both row-
incapable and
statement-
incapable.

-

-

STATEMENT

STATEMENT

-

Error:
Cannot
execute
statement:
Binary logging
is impossible
since
BINLOG_FORMAT
= ROW and at
least one table
uses a storage
engine that is
not capable
of row-based
logging.

STATEMENT

Warning:
Unsafe
statement
binlogged
in
statement
format, since

The Binary Log

Type

binlog_formatSLC

RLC

Unsafe

MIXED

Yes

No

Unsafe

ROW

Yes

No

Row Injection

STATEMENT

Yes

No

Row Injection

MIXED

Yes

No

Logged as

Error /
Warning
BINLOG_FORMAT
= STATEMENT

-

Error:
Cannot
execute
statement:
Binary logging
of an unsafe
statement is
impossible
when the
storage engine
is limited to
statement-
based logging,
even if
BINLOG_FORMAT
= MIXED.

-

Error:
Cannot
execute
statement:
Binary logging
is impossible
since
BINLOG_FORMAT
= ROW and at
least one table
uses a storage
engine that is
not capable
of row-based
logging.

-

-

Error:
Cannot
execute row
injection:
Binary logging
is not possible
since at least
one table uses
a storage
engine that is
not capable
of row-based
logging.

Error:
Cannot
execute row
injection:
Binary logging
is not possible
since at least
one table uses

1177

The Binary Log

Type

binlog_formatSLC

RLC

Row Injection

ROW

Yes

No

Safe

STATEMENT

No

Yes

Safe

Safe

MIXED

ROW

Unsafe

STATEMENT

No

No

No

Yes

Yes

Yes

Logged as

-

Error /
Warning
a storage
engine that is
not capable
of row-based
logging.

Error:
Cannot
execute row
injection:
Binary logging
is not possible
since at least
one table uses
a storage
engine that is
not capable
of row-based
logging.

-

Error:
Cannot
execute
statement:
Binary logging
is impossible
since
BINLOG_FORMAT
= STATEMENT
and at least
one table uses
a storage
engine that is
not capable
of statement-
based logging.

-

-

ROW

ROW

-

Error:
Cannot
execute
statement:
Binary logging
is impossible
since
BINLOG_FORMAT
= STATEMENT
and at least
one table uses
a storage
engine that is
not capable
of statement-
based logging.

Unsafe

MIXED

No

Yes

-

ROW

1178

The Binary Log

Type

binlog_formatSLC

Unsafe

ROW

Row Injection

STATEMENT

No

No

Row Injection

MIXED

Row Injection

ROW

Safe

Safe

Safe

STATEMENT

MIXED

ROW

Unsafe

STATEMENT

No

No

Yes

Yes

Yes

Yes

Unsafe

Unsafe

MIXED

ROW

Row Injection

STATEMENT

Yes

Yes

Yes

RLC

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Error /
Warning

-

Logged as

ROW

-

Error:
Cannot
execute row
injection:
Binary
logging is not
possible since
BINLOG_FORMAT
= STATEMENT.

-

-

-

-

-

ROW

ROW

STATEMENT

STATEMENT

ROW

STATEMENT

Warning:
Unsafe
statement
binlogged
in
statement
format since
BINLOG_FORMAT
= STATEMENT.

-

-

ROW

ROW

-

Error:
Cannot
execute row
injection:
Binary logging
is not possible
because
BINLOG_FORMAT
= STATEMENT.

Row Injection

MIXED

Row Injection

ROW

Yes

Yes

Yes

Yes

-

-

ROW

ROW

When a warning is produced by the determination, a standard MySQL warning is produced (and
is available using SHOW WARNINGS). The information is also written to the mysqld error log. Only
one error for each error instance per client connection is logged to prevent flooding the log. The log
message includes the SQL statement that was attempted.

If a replica has log_error_verbosity set to display warnings, the replica prints messages to
the error log to provide information about its status, such as the binary log and relay log coordinates
where it starts its job, when it is switching to another relay log, when it reconnects after a disconnect,
statements that are unsafe for statement-based logging, and so forth.

1179

The Binary Log

7.4.4.4 Logging Format for Changes to mysql Database Tables

The contents of the grant tables in the mysql database can be modified directly (for example, with
INSERT or DELETE) or indirectly (for example, with GRANT or CREATE USER). Statements that affect
mysql database tables are written to the binary log using the following rules:

• Data manipulation statements that change data in mysql database tables directly are logged

according to the setting of the binlog_format system variable. This pertains to statements such as
INSERT, UPDATE, DELETE, REPLACE, DO, LOAD DATA, SELECT, and TRUNCATE TABLE.

• Statements that change the mysql database indirectly are logged as statements regardless of the
value of binlog_format. This pertains to statements such as GRANT, REVOKE, SET PASSWORD,
RENAME USER, CREATE (all forms except CREATE TABLE ... SELECT), ALTER (all forms), and
DROP (all forms).

CREATE TABLE ... SELECT is a combination of data definition and data manipulation. The CREATE
TABLE part is logged using statement format and the SELECT part is logged according to the value of
binlog_format.

7.4.4.5 Binary Log Transaction Compression

Beginning with MySQL 8.0.20, you can enable binary log transaction compression on a MySQL
server instance. When binary log transaction compression is enabled, transaction payloads are
compressed using the zstd algorithm, and then written to the server's binary log file as a single event (a
Transaction_payload_event).

Compressed transaction payloads remain in a compressed state while they are sent in the replication
stream to replicas, other Group Replication group members, or clients such as mysqlbinlog. They
are not decompressed by receiver threads, and are written to the relay log still in their compressed
state. Binary log transaction compression therefore saves storage space both on the originator of
the transaction and on the recipient (and for their backups), and saves network bandwidth when the
transactions are sent between server instances.

Compressed transaction payloads are decompressed when the individual events contained in them
need to be inspected. For example, the Transaction_payload_event is decompressed by an
applier thread in order to apply the events it contains on the recipient. Decompression is also carried
out during recovery, by mysqlbinlog when replaying transactions, and by the SHOW BINLOG
EVENTS and SHOW RELAYLOG EVENTS statements.

You can enable binary log transaction compression on a MySQL server instance using the
binlog_transaction_compression system variable, which defaults to OFF. You can also use
the binlog_transaction_compression_level_zstd system variable to set the level for the
zstd algorithm that is used for compression. This value determines the compression effort, from 1
(the lowest effort) to 22 (the highest effort). As the compression level increases, the compression
ratio increases, which reduces the storage space and network bandwidth required for the transaction
payload. However, the effort required for data compression also increases, taking time and CPU and
memory resources on the originating server. Increases in the compression effort do not have a linear
relationship to increases in the compression ratio.

Setting binlog_transaction_compression or
binlog_transaction_compression_level_zstd (or both) has no immediate effect but rather
applies to all subsequent START REPLICA (START SLAVE) statements.

In NDB 8.0.31 and later, you can enable binary logging of compressed transactions for tables
using the NDB storage engine at run time using the ndb_log_transaction_compression
system variable introduced in that release, and control the level of compression using
ndb_log_transaction_compression_level_zstd. Starting mysqld with --
binlog-transaction-compression on the command line or in a my.cnf file causes
ndb_log_transaction_compression to be enabled automatically and any setting for the --
ndb-log-transaction-compression option to be ignored; to disable binary log transaction

1180

The Binary Log

compression for the NDB storage engine only, set ndb_log_transaction_compression=OFF in a
client session after starting mysqld.

(Prior to NDB 8.0.31: Binary log transaction compression can be enabled in NDB Cluster,
but only when starting the server using the --binlog-transaction-compression option
(and possibly --binlog-transaction-compression-level-zstd as well); changing the value
of either or both of the system variables binlog_transaction_compression and
binlog_transaction_compression_level_zstd at run time has no effect on the logging of NDB
tables.)

The following types of event are excluded from binary log transaction compression, so are always
written uncompressed to the binary log:

• Events relating to the GTID for the transaction (including anonymous GTID events).

• Other types of control event, such as view change events and heartbeat events.

• Incident events and the whole of any transactions that contain them.

• Non-transactional events and the whole of any transactions that contain them. A transaction

involving a mix of non-transactional and transactional storage engines does not have its payload
compressed.

• Events that are logged using statement-based binary logging. Binary log transaction compression is

only applied for the row-based binary logging format.

Binary log encryption can be used on binary log files that contain compressed transactions.

Behaviors When Binary Log Transaction Compression is Enabled

Transactions with payloads that are compressed can be rolled back like any other transaction, and they
can also be filtered out on a replica by the usual filtering options. Binary log transaction compression
can be applied to XA transactions.

When binary log transaction compression is enabled, the max_allowed_packet and
replica_max_allowed_packet or slave_max_allowed_packet limits for the server still apply,
and are measured on the compressed size of the Transaction_payload_event, plus the bytes
used for the event header.

Important

Compressed transaction payloads are sent as a single packet, rather than each
event of the transaction being sent in an individual packet, as is the case when
binary log transaction compression is not in use. If your replication topology
handles large transactions, be aware that a large transaction which can be
replicated successfully when binary log transaction compression is not in use,
might stop replication due to its size when binary log transaction compression is
in use.

For multithreaded workers, each transaction (including its GTID event and
Transaction_payload_event) is assigned to a worker thread. The worker thread decompresses
the transaction payload and applies the individual events in it one by one. If an error is found applying
any event within the Transaction_payload_event, the complete transaction is reported to the
co-ordinator as having failed. When replica_parallel_type or slave_parallel_type is
set to DATABASE, all the databases affected by the transaction are mapped before the transaction
is scheduled. The use of binary log transaction compression with the DATABASE policy can reduce
parallelism compared to uncompressed transactions, which are mapped and scheduled for each event.

For semisynchronous replication (see Section 19.4.10, “Semisynchronous Replication”), the replica
acknowledges the transaction when the complete Transaction_payload_event has been
received.

1181

The Binary Log

When binary log checksums are enabled (which is the default), the replication source server does not
write checksums for individual events in a compressed transaction payload. Instead, a checksum is
written for the complete Transaction_payload_event, and individual checksums are written for
any events that were not compressed, such as events relating to GTIDs.

For the SHOW BINLOG EVENTS and SHOW RELAYLOG EVENTS statements, the
Transaction_payload_event is first printed as a single unit, then it is unpacked and each event
inside it is printed.

For operations that reference the end position of an event, such as START REPLICA (or
before MySQL 8.0.22, START SLAVE) with the UNTIL clause, SOURCE_POS_WAIT() or
MASTER_POS_WAIT(), and sql_replica_skip_counter or sql_slave_skip_counter,
you must specify the end position of the compressed transaction payload (the
Transaction_payload_event). When skipping events using sql_replica_skip_counter or
sql_slave_skip_counter, a compressed transaction payload is counted as a single counter value,
so all the events inside it are skipped as a unit.

Combining Compressed and Uncompressed Transaction Payloads

MySQL Server releases that support binary log transaction compression can handle a mix of
compressed and uncompressed transaction payloads.

• The system variables relating to binary log transaction compression do not need to be set the

same on all Group Replication group members, and are not replicated from sources to replicas
in a replication topology. You can decide whether or not binary log transaction compression is
appropriate for each MySQL Server instance that has a binary log.

• If transaction compression is enabled then disabled on a server, compression is not applied to future
transactions originated on that server, but transaction payloads that have been compressed can still
be handled and displayed.

• If transaction compression is specified for individual sessions by setting the session value of

binlog_transaction_compression, the binary log can contain a mix of compressed and
uncompressed transaction payloads.

When a source in a replication topology and its replica both have binary log transaction compression
enabled, the replica receives compressed transaction payloads and writes them compressed to its
relay log. It decompresses the transaction payloads to apply the transactions, and then compresses
them again after applying for writing to its binary log. Any downstream replicas receive the compressed
transaction payloads.

When a source in a replication topology has binary log transaction compression enabled but its replica
does not, the replica receives compressed transaction payloads and writes them compressed to its
relay log. It decompresses the transaction payloads to apply the transactions, and then writes them
uncompressed to its own binary log, if it has one. Any downstream replicas receive the uncompressed
transaction payloads.

When a source in a replication topology does not have binary log transaction compression enabled but
its replica does, if the replica has a binary log, it compresses the transaction payloads after applying
them, and writes the compressed transaction payloads to its binary log. Any downstream replicas
receive the compressed transaction payloads.

When a MySQL server instance has no binary log, if it is at a release from MySQL 8.0.20, it
can receive, handle, and display compressed transaction payloads regardless of its value for
binlog_transaction_compression. Compressed transaction payloads received by such
server instances are written in their compressed state to the relay log, so they benefit indirectly from
compression that was carried out by other servers in the replication topology.

A replica at a release before MySQL 8.0.20 cannot replicate from a source with binary log transaction
compression enabled. A replica at or above MySQL 8.0.20 can replicate from a source at an

1182

The Slow Query Log

earlier release that does not support binary log transaction compression, and can carry out its own
compression on transactions received from that source when writing them to its own binary log.

Monitoring Binary Log Transaction Compression

You can monitor the effects of binary log transaction compression using the Performance Schema
table binary_log_transaction_compression_stats. The statistics include the data
compression ratio for the monitored period, and you can also view the effect of compression on the last
transaction on the server. You can reset the statistics by truncating the table. Statistics for binary logs
and relay logs are split out so you can see the impact of compression for each log type. The MySQL
server instance must have a binary log to produce these statistics.

The Performance Schema table events_stages_current shows when a transaction is in the stage
of decompression or compression for its transaction payload, and displays its progress for this stage.
Compression is carried out by the worker thread handling the transaction, just before the transaction is
committed, provided that there are no events in the finalized capture cache that exclude the transaction
from binary log transaction compression (for example, incident events). When decompression is
required, it is carried out for one event from the payload at a time.

mysqlbinlog with the --verbose option includes comments stating the compressed size and the
uncompressed size for compressed transaction payloads, and the compression algorithm that was
used.

You can enable connection compression at the protocol level for replication connections,
using the SOURCE_COMPRESSION_ALGORITHMS | MASTER_COMPRESSION_ALGORITHMS
and SOURCE_ZSTD_COMPRESSION_LEVEL | MASTER_ZSTD_COMPRESSION_LEVELoptions
of the CHANGE REPLICATION SOURCE TO statement (from MySQL 8.0.23) or CHANGE
MASTER TO statement (before MySQL 8.0.23), or the replica_compressed_protocol or
slave_compressed_protocol system variable. If you enable binary log transaction compression
in a system where connection compression is also enabled, the impact of connection compression
is reduced, as there might be little opportunity to further compress the compressed transaction
payloads. However, connection compression can still operate on uncompressed events and on
message headers. Binary log transaction compression can be enabled in combination with connection
compression if you need to save storage space as well as network bandwidth. For more information
on connection compression for replication connections, see Section 6.2.8, “Connection Compression
Control”.

For Group Replication, compression is enabled by default for messages that exceed the threshold
set by the group_replication_compression_threshold system variable. You can also
configure compression for messages sent for distributed recovery by the method of state transfer from
a donor's binary log, using the group_replication_recovery_compression_algorithms and
group_replication_recovery_zstd_compression_level system variables. If you enable
binary log transaction compression in a system where these are configured, Group Replication's
message compression can still operate on uncompressed events and on message headers, but
its impact is reduced. For more information on message compression for Group Replication, see
Section 20.7.4, “Message Compression”.

7.4.5 The Slow Query Log

The slow query log consists of SQL statements that take more than long_query_time seconds
to execute and require at least min_examined_row_limit rows to be examined. The slow query
log can be used to find queries that take a long time to execute and are therefore candidates for
optimization. However, examining a long slow query log can be a time-consuming task. To make this
easier, you can use the mysqldumpslow command to process a slow query log file and summarize its
contents. See Section 6.6.10, “mysqldumpslow — Summarize Slow Query Log Files”.

The time to acquire the initial locks is not counted as execution time. mysqld writes a statement to the
slow query log after it has been executed and after all locks have been released, so log order might
differ from execution order.

1183

The Slow Query Log

• Slow Query Log Parameters

• Slow Query Log Contents

Slow Query Log Parameters

The minimum and default values of long_query_time are 0 and 10, respectively. The value can be
specified to a resolution of microseconds.

By default, administrative statements are not logged, nor are queries that do not use indexes
for lookups. This behavior can be changed using log_slow_admin_statements and
log_queries_not_using_indexes, as described later.

By default, the slow query log is disabled. To specify the initial slow query log state explicitly, use
--slow_query_log[={0|1}]. With no argument or an argument of 1, --slow_query_log
enables the log. With an argument of 0, this option disables the log. To specify a log file name, use --
slow_query_log_file=file_name. To specify the log destination, use the log_output system
variable (as described in Section 7.4.1, “Selecting General Query Log and Slow Query Log Output
Destinations”).

Note

If you specify the TABLE log destination, see Log Tables and “Too many open
files” Errors.

If you specify no name for the slow query log file, the default name is host_name-slow.log. The
server creates the file in the data directory unless an absolute path name is given to specify a different
directory.

To disable or enable the slow query log or change the log file name at runtime, use the global
slow_query_log and slow_query_log_file system variables. Set slow_query_log to 0 to
disable the log or to 1 to enable it. Set slow_query_log_file to specify the name of the log file. If a
log file already is open, it is closed and the new file is opened.

The server writes less information to the slow query log if you use the --log-short-format option.

To include slow administrative statements in the slow query log, enable the
log_slow_admin_statements system variable. Administrative statements include ALTER TABLE,
ANALYZE TABLE, CHECK TABLE, CREATE INDEX, DROP INDEX, OPTIMIZE TABLE, and REPAIR
TABLE.

To include queries that do not use indexes for row lookups in the statements written to the slow query
log, enable the log_queries_not_using_indexes system variable. (Even with that variable
enabled, the server does not log queries that would not benefit from the presence of an index due to
the table having fewer than two rows.)

When queries that do not use an index are logged, the slow query log may grow quickly. It is possible
to put a rate limit on these queries by setting the log_throttle_queries_not_using_indexes
system variable. By default, this variable is 0, which means there is no limit. Positive values impose a
per-minute limit on logging of queries that do not use indexes. The first such query opens a 60-second
window within which the server logs queries up to the given limit, then suppresses additional queries.
If there are suppressed queries when the window ends, the server logs a summary that indicates how
many there were and the aggregate time spent in them. The next 60-second window begins when the
server logs the next query that does not use indexes.

The server uses the controlling parameters in the following order to determine whether to write a query
to the slow query log:

1. The query must either not be an administrative statement, or log_slow_admin_statements

must be enabled.

1184

The Slow Query Log

2. The query must have taken at least long_query_time seconds, or

log_queries_not_using_indexes must be enabled and the query used no indexes for row
lookups.

3. The query must have examined at least min_examined_row_limit rows.

4. The query must not be suppressed according to the

log_throttle_queries_not_using_indexes setting.

The log_timestamps system variable controls the time zone of timestamps in messages written to
the slow query log file (as well as to the general query log file and the error log). It does not affect the
time zone of general query log and slow query log messages written to log tables, but rows retrieved
from those tables can be converted from the local system time zone to any desired time zone with
CONVERT_TZ() or by setting the session time_zone system variable.

By default, a replica does not write replicated queries to the slow query log. To change this,
enable the system variable log_slow_replica_statements (from MySQL 8.0.26) or
log_slow_slave_statements (before MySQL 8.0.26). Note that if row-based replication is in
use (binlog_format=ROW), these system variables have no effect. Queries are only added to the
replica's slow query log when they are logged in statement format in the binary log, that is, when
binlog_format=STATEMENT is set, or when binlog_format=MIXED is set and the statement is
logged in statement format. Slow queries that are logged in row format when binlog_format=MIXED
is set, or that are logged when binlog_format=ROW is set, are not added to the replica's slow query
log, even if log_slow_replica_statements or log_slow_slave_statements is enabled.

Slow Query Log Contents

When the slow query log is enabled, the server writes output to any destinations specified by the
log_output system variable. If you enable the log, the server opens the log file and writes startup
messages to it. However, further logging of queries to the file does not occur unless the FILE log
destination is selected. If the destination is NONE, the server writes no queries even if the slow query
log is enabled. Setting the log file name has no effect on logging if FILE is not selected as an output
destination.

If the slow query log is enabled and FILE is selected as an output destination, each statement written
to the log is preceded by a line that begins with a # character and has these fields (with all fields on a
single line):

• Query_time: duration

The statement execution time in seconds.

• Lock_time: duration

The time to acquire locks in seconds.

• Rows_sent: N

The number of rows sent to the client.

• Rows_examined:

The number of rows examined by the server layer (not counting any processing internal to storage
engines).

Enabling the log_slow_extra system variable (available as of MySQL 8.0.14) causes the server
to write the following extra fields to FILE output in addition to those just listed (TABLE output is
unaffected). Some field descriptions refer to status variable names. Consult the status variable
descriptions for more information. However, in the slow query log, the counters are per-statement
values, not cumulative per-session values.

1185

The Slow Query Log

• Thread_id: ID

The statement thread identifier.

• Errno: error_number

The statement error number, or 0 if no error occurred.

• Killed: N

If the statement was terminated, the error number indicating why, or 0 if the statement terminated
normally.

• Bytes_received: N

The Bytes_received value for the statement.

• Bytes_sent: N

The Bytes_sent value for the statement.

• Read_first: N

The Handler_read_first value for the statement.

• Read_last: N

The Handler_read_last value for the statement.

• Read_key: N

The Handler_read_key value for the statement.

• Read_next: N

The Handler_read_next value for the statement.

• Read_prev: N

The Handler_read_prev value for the statement.

• Read_rnd: N

The Handler_read_rnd value for the statement.

• Read_rnd_next: N

The Handler_read_rnd_next value for the statement.

• Sort_merge_passes: N

The Sort_merge_passes value for the statement.

• Sort_range_count: N

The Sort_range value for the statement.

• Sort_rows: N

The Sort_rows value for the statement.

• Sort_scan_count: N

The Sort_scan value for the statement.

1186

Server Log Maintenance

• Created_tmp_disk_tables: N

The Created_tmp_disk_tables value for the statement.

• Created_tmp_tables: N

The Created_tmp_tables value for the statement.

• Start: timestamp

The statement execution start time.

• End: timestamp

The statement execution end time.

A given slow query log file may contain a mix of lines with and without the extra fields added by
enabling log_slow_extra. Log file analyzers can determine whether a line contains the additional
fields by the field count.

Each statement written to the slow query log file is preceded by a SET statement that includes a
timestamp. As of MySQL 8.0.14, the timestamp indicates when the slow statement began executing.
Prior to 8.0.14, the timestamp indicates when the slow statement was logged (which occurs after the
statement finishes executing).

Passwords in statements written to the slow query log are rewritten by the server not to occur literally in
plain text. See Section 8.1.2.3, “Passwords and Logging”.

From MySQL 8.0.29, statements that cannot be parsed (due, for example, to syntax errors) are not
written to the slow query log.

7.4.6 Server Log Maintenance

As described in Section 7.4, “MySQL Server Logs”, MySQL Server can create several different log files
to help you see what activity is taking place. However, you must clean up these files regularly to ensure
that the logs do not take up too much disk space.

When using MySQL with logging enabled, you may want to back up and remove old log files from time
to time and tell MySQL to start logging to new files. See Section 9.2, “Database Backup Methods”.

On a Linux (Red Hat) installation, you can use the mysql-log-rotate script for log maintenance. If
you installed MySQL from an RPM distribution, this script should have been installed automatically. Be
careful with this script if you are using the binary log for replication. You should not remove binary logs
until you are certain that their contents have been processed by all replicas.

On other systems, you must install a short script yourself that you start from cron (or its equivalent) for
handling log files.

Binary log files are automatically removed after the server's binary log expiration period.
Removal of the files can take place at startup and when the binary log is flushed. The default
binary log expiration period is 30 days. To specify an alternative expiration period, use the
binlog_expire_logs_seconds system variable. If you are using replication, you should specify
an expiration period that is no lower than the maximum amount of time your replicas might lag behind
the source. To remove binary logs on demand, use the PURGE BINARY LOGS statement (see
Section 15.4.1.1, “PURGE BINARY LOGS Statement”).

To force MySQL to start using new log files, flush the logs. Log flushing occurs when you execute a
FLUSH LOGS statement or a mysqladmin flush-logs, mysqladmin refresh, mysqldump --
flush-logs, or mysqldump --master-data command. See Section 15.7.8.3, “FLUSH Statement”,
Section 6.5.2, “mysqladmin — A MySQL Server Administration Program”, and Section 6.5.4,

1187

Server Log Maintenance

“mysqldump — A Database Backup Program”. In addition, the server flushes the binary log
automatically when current binary log file size reaches the value of the max_binlog_size system
variable.

FLUSH LOGS supports optional modifiers to enable selective flushing of individual logs (for example,
FLUSH BINARY LOGS). See Section 15.7.8.3, “FLUSH Statement”.

A log-flushing operation has the following effects:

• If binary logging is enabled, the server closes the current binary log file and opens a new log file with

the next sequence number.

• If general query logging or slow query logging to a log file is enabled, the server closes and reopens

the log file.

• If the server was started with the --log-error option to cause the error log to be written to a file,

the server closes and reopens the log file.

Execution of log-flushing statements or commands requires connecting to the server using an account
that has the RELOAD privilege. On Unix and Unix-like systems, another way to flush the logs is to send
a signal to the server, which can be done by root or the account that owns the server process. (See
Section 6.10, “Unix Signal Handling in MySQL”.) Signals enable log flushing to be performed without
having to connect to the server:

• A SIGHUP signal flushes all the logs. However, SIGHUP has additional effects other than log flushing

that might be undesirable.

• As of MySQL 8.0.19, SIGUSR1 causes the server to flush the error log, general query log, and

slow query log. If you are interested in flushing only those logs, SIGUSR1 can be used as a more
“lightweight” signal that does not have the SIGHUP effects that are unrelated to logs.

As mentioned previously, flushing the binary log creates a new binary log file, whereas flushing the
general query log, slow query log, or error log just closes and reopens the log file. For the latter logs,
to cause a new log file to be created on Unix, rename the current log file first before flushing it. At flush
time, the server opens the new log file with the original name. For example, if the general query log,
slow query log, and error log files are named mysql.log, mysql-slow.log, and err.log, you can
use a series of commands like this from the command line:

cd mysql-data-directory
mv mysql.log mysql.log.old
mv mysql-slow.log mysql-slow.log.old
mv err.log err.log.old
mysqladmin flush-logs

On Windows, use rename rather than mv.

At this point, you can make a backup of mysql.log.old, mysql-slow.log.old, and
err.log.old, then remove them from disk.

To rename the general query log or slow query log at runtime, first connect to the server and disable
the log:

SET GLOBAL general_log = 'OFF';
SET GLOBAL slow_query_log = 'OFF';

With the logs disabled, rename the log files externally (for example, from the command line). Then
enable the logs again:

SET GLOBAL general_log = 'ON';
SET GLOBAL slow_query_log = 'ON';

This method works on any platform and does not require a server restart.

1188

MySQL Components

Note

For the server to recreate a given log file after you have renamed the file
externally, the file location must be writable by the server. This may not always
be the case. For example, on Linux, the server might write the error log as /
var/log/mysqld.log, where /var/log is owned by root and not writable
by mysqld. In this case, log-flushing operations fail to create a new log file.

To handle this situation, you must manually create the new log file with the
proper ownership after renaming the original log file. For example, execute
these commands as root:

mv /var/log/mysqld.log /var/log/mysqld.log.old
install -omysql -gmysql -m0644 /dev/null /var/log/mysqld.log

7.5 MySQL Components

MySQL Server includes a component-based infrastructure for extending server capabilities. A
component provides services that are available to the server and other components. (With respect to
service use, the server is a component, equal to other components.) Components interact with each
other only through the services they provide.

MySQL distributions include several components that implement server extensions:

• Components for configuring error logging. See Section 7.4.2, “The Error Log”, and Section 7.5.3,

“Error Log Components”.

• A component for checking passwords. See Section 8.4.3, “The Password Validation Component”.

• Keyring components provide secure storage for sensitive information. See Section 8.4.4, “The

MySQL Keyring”.

• A component that enables applications to add their own message events to the audit log. See

Section 8.4.6, “The Audit Message Component”.

• A component that implements a loadable function for accessing query attributes. See Section 11.6,

“Query Attributes”.

• A component for scheduling actively executing tasks. See Section 7.5.5, “Scheduler Component”.

System and status variables implemented by a component are exposed when the component
is installed and have names that begin with a component-specific prefix. For example, the
log_filter_dragnet error log filter component implements a system variable named
log_error_filter_rules, the full name of which is dragnet.log_error_filter_rules. To
refer to this variable, use the full name.

The following sections describe how to install and uninstall components, and how to determine at
runtime which components are installed and obtain information about them.

For information about the internal implementation of components, see the MySQL Server Doxygen
documentation, available at https://dev.mysql.com/doc/index-other.html. For example, if you intend to
write your own components, this information is important for understanding how components work.

7.5.1 Installing and Uninstalling Components

Components must be loaded into the server before they can be used. MySQL supports manual
component loading at runtime and automatic loading during server startup.

While a component is loaded, information about it is available as described in Section 7.5.2, “Obtaining
Component Information”.

1189

Obtaining Component Information

The INSTALL COMPONENT and UNINSTALL COMPONENT SQL statements enable component loading
and unloading. For example:

INSTALL COMPONENT 'file://component_validate_password';
UNINSTALL COMPONENT 'file://component_validate_password';

A loader service handles component loading and unloading, and also registers loaded components in
the mysql.component system table.

The SQL statements for component manipulation affect server operation and the mysql.component
system table as follows:

• INSTALL COMPONENT loads components into the server. The components become active

immediately. The loader service also registers loaded components in the mysql.component
system table. For subsequent server restarts, the loader service loads any components listed in
mysql.component during the startup sequence. This occurs even if the server is started with
the --skip-grant-tables option. The optional SET clause permits setting component system-
variable values when you install components.

• UNINSTALL COMPONENT deactivates components and unloads them from the server. The loader
service also unregisters the components from the mysql.component system table so that the
server no longer loads them during its startup sequence for subsequent restarts.

Compared to the corresponding INSTALL PLUGIN statement for server plugins, the INSTALL
COMPONENT statement for components offers the significant advantage that it is not necessary to know
any platform-specific file name suffix for naming the component. This means that a given INSTALL
COMPONENT statement can be executed uniformly across platforms.

A component when installed may also automatically install related loadable functions. If so, the
component when uninstalled also automatically uninstalls those functions.

7.5.2 Obtaining Component Information

The mysql.component system table contains information about currently loaded components and
shows which components have been registered using INSTALL COMPONENT. Selecting from the table
shows which components are installed. For example:

mysql> SELECT * FROM mysql.component;
+--------------+--------------------+------------------------------------+
| component_id | component_group_id | component_urn                      |
+--------------+--------------------+------------------------------------+
|            1 |                  1 | file://component_validate_password |
|            2 |                  2 | file://component_log_sink_json     |
+--------------+--------------------+------------------------------------+

The component_id and component_group_id values are for internal use. The component_urn is
the URN used in INSTALL COMPONENT and UNINSTALL COMPONENT statements to load and unload
the component.

7.5.3 Error Log Components

This section describes the characteristics of individual error log components. For general information
about configuring error logging, see Section 7.4.2, “The Error Log”.

A log component can be a filter or a sink:

• A filter processes log events, to add, remove, or modify event fields, or to delete events entirely. The

resulting events pass to the next log component in the list of enabled components.

• A sink is a destination (writer) for log events. Typically, a sink processes log events into log

messages that have a particular format and writes these messages to its associated output, such as
a file or the system log. A sink may also write to the Performance Schema error_log table; see

1190

Error Log Components

Section 29.12.21.2, “The error_log Table”. Events pass unmodified to the next log component in the
list of enabled components (that is, although a sink formats events to produce output messages, it
does not modify events as they pass internally to the next component).

The log_error_services system variable value lists the enabled log components. Components not
named in the list are disabled. From MySQL 8.0.30, log_error_services also implicitly loads error
log components if they are not already loaded. For more information, see Section 7.4.2.1, “Error Log
Configuration”.

The following sections describe individual log components, grouped by component type:

• Filter Error Log Components

• Sink Error Log Components

Component descriptions include these types of information:

• The component name and intended purpose.

• Whether the component is built in or must be loaded. For a loadable component, the description

specifies the URN to use if explicitly loading or unloading the component with the INSTALL
COMPONENT and UNINSTALL COMPONENT statements. Implicitly loading error log components
requires only the component name. For more information, see Section 7.4.2.1, “Error Log
Configuration”.

• Whether the component can be listed multiple times in the log_error_services value.

• For a sink component, the destination to which the component writes output.

• For a sink component, whether it supports an interface to the Performance Schema error_log

table.

Filter Error Log Components

Error log filter components implement filtering of error log events. If no filter component is enabled, no
filtering occurs.

Any enabled filter component affects log events only for components listed later in
the log_error_services value. In particular, for any log sink component listed in
log_error_services earlier than any filter component, no log event filtering occurs.

The log_filter_internal Component

• Purpose: Implements filtering based on log event priority and error code, in combination with
the log_error_verbosity and log_error_suppression_list system variables. See
Section 7.4.2.5, “Priority-Based Error Log Filtering (log_filter_internal)”.

• URN: This component is built in and need not be loaded.

• Multiple uses permitted: No.

If log_filter_internal is disabled, log_error_verbosity and
log_error_suppression_list have no effect.

The log_filter_dragnet Component

• Purpose: Implements filtering based on the rules defined by the

dragnet.log_error_filter_rules system variable setting. See Section 7.4.2.6, “Rule-Based
Error Log Filtering (log_filter_dragnet)”.

• URN: file://component_log_filter_dragnet

1191

Error Log Components

• Multiple uses permitted: No.

Sink Error Log Components

Error log sink components are writers that implement error log output. If no sink component is enabled,
no log output occurs.

Some sink component descriptions refer to the default error log destination. This is the console or
a file and is indicated by the value of the log_error system variable, determined as described in
Section 7.4.2.2, “Default Error Log Destination Configuration”.

The log_sink_internal Component

• Purpose: Implements traditional error log message output format.

• URN: This component is built in and need not be loaded.

• Multiple uses permitted: No.

• Output destination: Writes to the default error log destination.

• Performance Schema support: Writes to the error_log table. Provides a parser for reading error

log files created by previous server instances.

The log_sink_json Component

• Purpose: Implements JSON-format error logging. See Section 7.4.2.7, “Error Logging in JSON

Format”.

• URN: file://component_log_sink_json

• Multiple uses permitted: Yes.

• Output destination: This sink determines its output destination based on the default error log

destination, which is given by the log_error system variable:

• If log_error names a file, the sink bases output file naming on that file name, plus a

numbered .NN.json suffix, with NN starting at 00. For example, if log_error is file_name,
successive instances of log_sink_json named in the log_error_services value write to
file_name.00.json, file_name.01.json, and so forth.

• If log_error is stderr, the sink writes to the console. If log_sink_json is named multiple

times in the log_error_services value, they all write to the console, which is likely not useful.

• Performance Schema support: Writes to the error_log table. Provides a parser for reading error

log files created by previous server instances.

The log_sink_syseventlog Component

• Purpose: Implements error logging to the system log. This is the Event Log on Windows, and

syslog on Unix and Unix-like systems. See Section 7.4.2.8, “Error Logging to the System Log”.

• URN: file://component_log_sink_syseventlog

• Multiple uses permitted: No.

• Output destination: Writes to the system log. Does not use the default error log destination.

• Performance Schema support: Does not write to the error_log table. Does not provide a parser for

reading error log files created by previous server instances.

The log_sink_test Component

1192

Query Attribute Components

• Purpose: Intended for internal use in writing test cases, not for production use.

• URN: file://component_log_sink_test

Sink properties such as whether multiple uses are permitted and the output destination are not
specified for log_sink_test because, as mentioned, it is for internal use. As such, its behavior is
subject to change at any time.

7.5.4 Query Attribute Components

As of MySQL 8.0.23, a component service provides access to query attributes (see Section 11.6,
“Query Attributes”). The query_attributes component uses this service to provide access to query
attributes within SQL statements.

• Purpose: Implements the mysql_query_attribute_string() function that takes an attribute
name argument and returns the attribute value as a string, or NULL if the attribute does not exist.

• URN: file://component_query_attributes

Developers who wish to incorporate the same query-attribute component service used by
query_attributes should consult the mysql_query_attributes.h file in a MySQL source
distribution.

7.5.5 Scheduler Component

Note

The scheduler component is included in MySQL Enterprise Edition, a
commercial product. To learn more about commercial products, see https://
www.mysql.com/products/.

As of MySQL 8.0.34, the scheduler component provides an implementation of the
mysql_scheduler service that enables applications, components, or plugins to configure, run, and
unconfigure tasks every N seconds. For example, the audit_log server plugin calls the scheduler
component at its initialization and configures a regular, recurring flush of its memory cache (see
Enabling the Audit Log Flush Task).

• Purpose: Implements the component_scheduler.enabled system variable that controls whether

the scheduler is actively executing tasks. At startup, the scheduler component registers the
performance_schema.component_scheduler_tasks table, which lists the currently scheduled
tasks and some runtime data about each one.

• URN: file://component_scheduler

For installation instructions, see Section 7.5.1, “Installing and Uninstalling Components”.

The scheduler component implements the service using these elements:

• A priority queue of the registered, inactive scheduled tasks sorted by the next time to run (in

ascending order).

• A list of the registered, active tasks.

• A background thread that:

• Sleeps if there are no tasks or if the top task needs more time to run. It wakes periodically to check

whether it is time to end.

• Compiles a list of the tasks that need to run, moves them from the inactive queue, adds them to

the active queue, and executes each task individually.

1193

MySQL Server Plugins

• After executing the task list, removes the tasks from the active list, adds them to the inactive list,

and calculates the next time they need to run.

When a caller invokes the mysql_scheduler.create() service, it creates a new scheduled task
instance to add to the queue, which signals the semaphore of the background thread. A handle to the
new task is returned to the caller. The calling code should keep this handle and the service reference
to the scheduling service until after calling the mysql_scheduler.destroy() service. When the
caller invokes destroy() and passes in the handle it received from create(), the service waits for
the task to become inactive (if running) and then removes it from the inactive queue.

The component service calls each application-provided callback (function pointer) into the same
scheduler thread, one at a time and in ascending order, based on the time each requires to run.

Developers who wish to incorporate scheduler-queueing capabilities into an application, component, or
plugin should consult the mysql_scheduler.h file in a MySQL source distribution.

7.6 MySQL Server Plugins

MySQL supports an plugin API that enables creation of server plugins. Plugins can be loaded at server
startup, or loaded and unloaded at runtime without restarting the server. The plugins supported by
this interface include, but are not limited to, storage engines, INFORMATION_SCHEMA tables, full-text
parser plugins, and server extensions.

MySQL distributions include several plugins that implement server extensions:

• Plugins for authenticating attempts by clients to connect to MySQL Server. Plugins are available for

several authentication protocols. See Section 8.2.17, “Pluggable Authentication”.

• A connection control plugin that enables administrators to introduce an increasing delay after a
certain number of consecutive failed client connection attempts. See Section 8.4.2, “Connection
Control Plugins”.

• A password-validation plugin implements password strength policies and assesses the strength of

potential passwords. See Section 8.4.3, “The Password Validation Component”.

• Semisynchronous replication plugins implement an interface to replication capabilities that permit
the source to proceed as long as at least one replica has responded to each transaction. See
Section 19.4.10, “Semisynchronous Replication”.

• Group Replication enables you to create a highly available distributed MySQL service across a

group of MySQL server instances, with data consistency, conflict detection and resolution, and group
membership services all built-in. See Chapter 20, Group Replication.

• MySQL Enterprise Edition includes a thread pool plugin that manages connection threads to

increase server performance by efficiently managing statement execution threads for large numbers
of client connections. See Section 7.6.3, “MySQL Enterprise Thread Pool”.

• MySQL Enterprise Edition includes an audit plugin for monitoring and logging of connection and

query activity. See Section 8.4.5, “MySQL Enterprise Audit”.

• MySQL Enterprise Edition includes a firewall plugin that implements an application-level firewall

to enable database administrators to permit or deny SQL statement execution based on matching
against allowlists of accepted statement patterns. See Section 8.4.7, “MySQL Enterprise Firewall”.

• Query rewrite plugins examine statements received by MySQL Server and possibly rewrite them
before the server executes them. See Section 7.6.4, “The Rewriter Query Rewrite Plugin”, and
Section 7.6.5, “The ddl_rewriter Plugin”.

• Version Tokens enables creation of and synchronization around server tokens that applications can
use to prevent accessing incorrect or out-of-date data. Version Tokens is based on a plugin library

1194

Installing and Uninstalling Plugins

that implements a version_tokens plugin and a set of loadable functions. See Section 7.6.6,
“Version Tokens”.

• Keyring plugins provide secure storage for sensitive information. See Section 8.4.4, “The MySQL

Keyring”.

In MySQL 8.0.24, MySQL Keyring began transitioning from plugins to use the component
infrastructure, facilitated using the plugin named daemon_keyring_proxy_plugin that acts as
a bridge between the plugin and component service APIs. See Section 7.6.8, “The Keyring Proxy
Bridge Plugin”.

• X Plugin extends MySQL Server to be able to function as a document store. Running X Plugin
enables MySQL Server to communicate with clients using the X Protocol, which is designed to
expose the ACID compliant storage abilities of MySQL as a document store. See Section 22.5, “X
Plugin”.

• Clone permits cloning InnoDB data from a local or remote MySQL server instance. See

Section 7.6.7, “The Clone Plugin”.

• Test framework plugins test server services. For information about these plugins, see the Plugins for
Testing Plugin Services section of the MySQL Server Doxygen documentation, available at https://
dev.mysql.com/doc/index-other.html.

The following sections describe how to install and uninstall plugins, and how to determine at runtime
which plugins are installed and obtain information about them. For information about writing plugins,
see The MySQL Plugin API.

7.6.1 Installing and Uninstalling Plugins

Server plugins must be loaded into the server before they can be used. MySQL supports plugin loading
at server startup and runtime. It is also possible to control the activation state of loaded plugins at
startup, and to unload them at runtime.

While a plugin is loaded, information about it is available as described in Section 7.6.2, “Obtaining
Server Plugin Information”.

• Installing Plugins

• Controlling Plugin Activation State

• Uninstalling Plugins

• Plugins and Loadable Functions

Installing Plugins

Before a server plugin can be used, it must be installed using one of the following methods.
In the descriptions, plugin_name stands for a plugin name such as innodb, csv, or
validate_password.

• Built-in Plugins

• Plugins Registered in the mysql.plugin System Table

• Plugins Named with Command-Line Options

• Plugins Installed with the INSTALL PLUGIN Statement

Built-in Plugins

A built-in plugin is known by the server automatically. By default, the server enables
the plugin at startup. Some built-in plugins permit this to be changed with the
--plugin_name[=activation_state] option.

1195

Installing and Uninstalling Plugins

Plugins Registered in the mysql.plugin System Table

The mysql.plugin system table serves as a registry of plugins (other than built-in plugins, which
need not be registered). During the normal startup sequence, the server loads plugins registered in the
table. By default, for a plugin loaded from the mysql.plugin table, the server also enables the plugin.
This can be changed with the --plugin_name[=activation_state] option.

If the server is started with the --skip-grant-tables option, plugins registered in the
mysql.plugin table are not loaded and are unavailable.

Plugins Named with Command-Line Options

A plugin located in a plugin library file can be loaded at server startup with the --plugin-
load, --plugin-load-add, or --early-plugin-load option. Normally, for a plugin
loaded at startup, the server also enables the plugin. This can be changed with the
--plugin_name[=activation_state] option.

The --plugin-load and --plugin-load-add options load plugins after built-in plugins and
storage engines have initialized during the server startup sequence. The --early-plugin-load
option is used to load plugins that must be available prior to initialization of built-in plugins and storage
engines.

The value of each plugin-loading option is a semicolon-separated list of plugin_library and
name=plugin_library values. Each plugin_library is the name of a library file that contains
plugin code, and each name is the name of a plugin to load. If a plugin library is named without any
preceding plugin name, the server loads all plugins in the library. With a preceding plugin name, the
server loads only the named plugin from the library. The server looks for plugin library files in the
directory named by the plugin_dir system variable.

Plugin-loading options do not register any plugin in the mysql.plugin table. For subsequent restarts,
the server loads the plugin again only if --plugin-load, --plugin-load-add, or --early-
plugin-load is given again. That is, the option produces a one-time plugin-installation operation that
persists for a single server invocation.

--plugin-load, --plugin-load-add, and --early-plugin-load enable plugins to be loaded
even when --skip-grant-tables is given (which causes the server to ignore the mysql.plugin
table). --plugin-load, --plugin-load-add, and --early-plugin-load also enable plugins to
be loaded at startup that cannot be loaded at runtime.

The --plugin-load-add option complements the --plugin-load option:

• Each instance of --plugin-load resets the set of plugins to load at startup, whereas --plugin-
load-add adds a plugin or plugins to the set of plugins to be loaded without resetting the current
set. Consequently, if multiple instances of --plugin-load are specified, only the last one applies.
With multiple instances of --plugin-load-add, all of them apply.

• The argument format is the same as for --plugin-load, but multiple instances of --plugin-
load-add can be used to avoid specifying a large set of plugins as a single long unwieldy --
plugin-load argument.

• --plugin-load-add can be given in the absence of --plugin-load, but any instance of --

plugin-load-add that appears before --plugin-load has no effect because --plugin-load
resets the set of plugins to load.

For example, these options:

--plugin-load=x --plugin-load-add=y

are equivalent to these options:

--plugin-load-add=x --plugin-load-add=y

1196

Installing and Uninstalling Plugins

and are also equivalent to this option:

--plugin-load="x;y"

But these options:

--plugin-load-add=y --plugin-load=x

are equivalent to this option:

--plugin-load=x

Plugins Installed with the INSTALL PLUGIN Statement

A plugin located in a plugin library file can be loaded at runtime with the INSTALL PLUGIN statement.
The statement also registers the plugin in the mysql.plugin table to cause the server to load it
on subsequent restarts. For this reason, INSTALL PLUGIN requires the INSERT privilege for the
mysql.plugin table.

The plugin library file base name depends on your platform. Common suffixes are .so for Unix and
Unix-like systems, .dll for Windows.

Example: The --plugin-load-add option installs a plugin at server startup. To install a plugin
named myplugin from a plugin library file named somepluglib.so, use these lines in a my.cnf file:

[mysqld]
plugin-load-add=myplugin=somepluglib.so

In this case, the plugin is not registered in mysql.plugin. Restarting the server without the --
plugin-load-add option causes the plugin not to be loaded at startup.

Alternatively, the INSTALL PLUGIN statement causes the server to load the plugin code from the
library file at runtime:

INSTALL PLUGIN myplugin SONAME 'somepluglib.so';

INSTALL PLUGIN also causes “permanent” plugin registration: The plugin is listed in the
mysql.plugin table to ensure that the server loads it on subsequent restarts.

Many plugins can be loaded either at server startup or at runtime. However, if a plugin is designed such
that it must be loaded and initialized during server startup, attempts to load it at runtime using INSTALL
PLUGIN produce an error:

mysql> INSTALL PLUGIN myplugin SONAME 'somepluglib.so';
ERROR 1721 (HY000): Plugin 'myplugin' is marked as not dynamically
installable. You have to stop the server to install it.

In this case, you must use --plugin-load, --plugin-load-add, or --early-plugin-load.

If a plugin is named both using a --plugin-load, --plugin-load-add, or --early-plugin-
load option and (as a result of an earlier INSTALL PLUGIN statement) in the mysql.plugin table,
the server starts but writes these messages to the error log:

[ERROR] Function 'plugin_name' already exists
[Warning] Couldn't load plugin named 'plugin_name'
with soname 'plugin_object_file'.

Controlling Plugin Activation State

If the server knows about a plugin when it starts (for example, because the plugin is named using
a --plugin-load-add option or is registered in the mysql.plugin table), the server loads
and enables the plugin by default. It is possible to control activation state for such a plugin using a
--plugin_name[=activation_state] startup option, where plugin_name is the name of the
plugin to affect, such as innodb, csv, or validate_password. As with other options, dashes and

1197

Installing and Uninstalling Plugins

underscores are interchangeable in option names. Also, activation state values are not case-sensitive.
For example, --my_plugin=ON and --my-plugin=on are equivalent.

• --plugin_name=OFF

Tells the server to disable the plugin. This may not be possible for certain built-in plugins, such as
mysql_native_password.

• --plugin_name[=ON]

Tells the server to enable the plugin. (Specifying the option as --plugin_name without a value has
the same effect.) If the plugin fails to initialize, the server runs with the plugin disabled.

• --plugin_name=FORCE

Tells the server to enable the plugin, but if plugin initialization fails, the server does not start. In other
words, this option forces the server to run with the plugin enabled or not at all.

• --plugin_name=FORCE_PLUS_PERMANENT

Like FORCE, but in addition prevents the plugin from being unloaded at runtime. If a user attempts to
do so with UNINSTALL PLUGIN, an error occurs.

Plugin activation states are visible in the LOAD_OPTION column of the Information Schema PLUGINS
table.

Suppose that CSV, BLACKHOLE, and ARCHIVE are built-in pluggable storage engines and that you
want the server to load them at startup, subject to these conditions: The server is permitted to run
if CSV initialization fails, must require that BLACKHOLE initialization succeeds, and should disable
ARCHIVE. To accomplish that, use these lines in an option file:

[mysqld]
csv=ON
blackhole=FORCE
archive=OFF

The --enable-plugin_name option format is a synonym for --plugin_name=ON. The
--disable-plugin_name and --skip-plugin_name option formats are synonyms for
--plugin_name=OFF.

If a plugin is disabled, either explicitly with OFF or implicitly because it was enabled with ON but fails to
initialize, aspects of server operation requiring the plugin change. For example, if the plugin implements
a storage engine, existing tables for the storage engine become inaccessible, and attempts to create
new tables for the storage engine result in tables that use the default storage engine unless the
NO_ENGINE_SUBSTITUTION SQL mode is enabled to cause an error to occur instead.

Disabling a plugin may require adjustment to other options. For example, if you start the server using
--skip-innodb to disable InnoDB, other innodb_xxx options likely also need to be omitted
at startup. In addition, because InnoDB is the default storage engine, it cannot start unless you
specify another available storage engine with --default_storage_engine. You must also set --
default_tmp_storage_engine.

Uninstalling Plugins

At runtime, the UNINSTALL PLUGIN statement disables and uninstalls a plugin known to the server.
The statement unloads the plugin and removes it from the mysql.plugin system table, if it is
registered there. For this reason, UNINSTALL PLUGIN statement requires the DELETE privilege for the
mysql.plugin table. With the plugin no longer registered in the table, the server does not load the
plugin during subsequent restarts.

UNINSTALL PLUGIN can unload a plugin regardless of whether it was loaded at runtime with
INSTALL PLUGIN or at startup with a plugin-loading option, subject to these conditions:

1198

Obtaining Server Plugin Information

• It cannot unload plugins that are built in to the server. These can be identified as those that have a

library name of NULL in the output from the Information Schema PLUGINS table or SHOW PLUGINS.

• It cannot unload plugins for which the server was started with

--plugin_name=FORCE_PLUS_PERMANENT, which prevents plugin unloading at runtime. These
can be identified from the LOAD_OPTION column of the PLUGINS table.

To uninstall a plugin that currently is loaded at server startup with a plugin-loading option, use this
procedure.

1. Remove from the my.cnf file any options and system variables related to the plugin. If any

plugin system variables were persisted to the mysqld-auto.cnf file, remove them using RESET
PERSIST var_name for each one to remove it.

2. Restart the server.

3. Plugins normally are installed using either a plugin-loading option at startup or with INSTALL

PLUGIN at runtime, but not both. However, removing options for a plugin from the my.cnf file may
not be sufficient to uninstall it if at some point INSTALL PLUGIN has also been used. If the plugin
still appears in the output from PLUGINS or SHOW PLUGINS, use UNINSTALL PLUGIN to remove it
from the mysql.plugin table. Then restart the server again.

Plugins and Loadable Functions

A plugin when installed may also automatically install related loadable functions. If so, the plugin when
uninstalled also automatically uninstalls those functions.

7.6.2 Obtaining Server Plugin Information

There are several ways to determine which plugins are installed in the server:

• The Information Schema PLUGINS table contains a row for each loaded plugin. Any that have a

PLUGIN_LIBRARY value of NULL are built in and cannot be unloaded.

mysql> SELECT * FROM INFORMATION_SCHEMA.PLUGINS\G
*************************** 1. row ***************************
           PLUGIN_NAME: binlog
        PLUGIN_VERSION: 1.0
         PLUGIN_STATUS: ACTIVE
           PLUGIN_TYPE: STORAGE ENGINE
   PLUGIN_TYPE_VERSION: 50158.0
        PLUGIN_LIBRARY: NULL
PLUGIN_LIBRARY_VERSION: NULL
         PLUGIN_AUTHOR: Oracle Corporation
    PLUGIN_DESCRIPTION: This is a pseudo storage engine to represent the binlog in a transaction
        PLUGIN_LICENSE: GPL
           LOAD_OPTION: FORCE
...
*************************** 10. row ***************************
           PLUGIN_NAME: InnoDB
        PLUGIN_VERSION: 1.0
         PLUGIN_STATUS: ACTIVE
           PLUGIN_TYPE: STORAGE ENGINE
   PLUGIN_TYPE_VERSION: 50158.0
        PLUGIN_LIBRARY: ha_innodb_plugin.so
PLUGIN_LIBRARY_VERSION: 1.0
         PLUGIN_AUTHOR: Oracle Corporation
    PLUGIN_DESCRIPTION: Supports transactions, row-level locking,
                        and foreign keys
        PLUGIN_LICENSE: GPL
           LOAD_OPTION: ON
...

• The SHOW PLUGINS statement displays a row for each loaded plugin. Any that have a Library

value of NULL are built in and cannot be unloaded.

1199

MySQL Enterprise Thread Pool

mysql> SHOW PLUGINS\G
*************************** 1. row ***************************
   Name: binlog
 Status: ACTIVE
   Type: STORAGE ENGINE
Library: NULL
License: GPL
...
*************************** 10. row ***************************
   Name: InnoDB
 Status: ACTIVE
   Type: STORAGE ENGINE
Library: ha_innodb_plugin.so
License: GPL
...

• The mysql.plugin table shows which plugins have been registered with INSTALL PLUGIN. The
table contains only plugin names and library file names, so it does not provide as much information
as the PLUGINS table or the SHOW PLUGINS statement.

7.6.3 MySQL Enterprise Thread Pool

Note

MySQL Enterprise Thread Pool is an extension included in MySQL Enterprise
Edition, a commercial product. To learn more about commercial products,
https://www.mysql.com/products/.

MySQL Enterprise Edition includes MySQL Enterprise Thread Pool, implemented using a server
plugin. The default thread-handling model in MySQL Server executes statements using one thread per
client connection. As more clients connect to the server and execute statements, overall performance
degrades. The thread pool plugin provides an alternative thread-handling model designed to reduce
overhead and improve performance. The plugin implements a thread pool that increases server
performance by efficiently managing statement execution threads for large numbers of client
connections.

The thread pool addresses several problems of the model that uses one thread per connection:

• Too many thread stacks make CPU caches almost useless in highly parallel execution workloads.

The thread pool promotes thread stack reuse to minimize the CPU cache footprint.

• With too many threads executing in parallel, context switching overhead is high. This also presents a
challenge to the operating system scheduler. The thread pool controls the number of active threads
to keep the parallelism within the MySQL server at a level that it can handle and that is appropriate
for the server host on which MySQL is executing.

• Too many transactions executing in parallel increases resource contention. In InnoDB, this

increases the time spent holding central mutexes. The thread pool controls when transactions start to
ensure that not too many execute in parallel.

Additional Resources

Section A.15, “MySQL 8.0 FAQ: MySQL Enterprise Thread Pool”

7.6.3.1 Thread Pool Elements

MySQL Enterprise Thread Pool comprises these elements:

• A plugin library file implements a plugin for the thread pool code as well as several associated

monitoring tables that provide information about thread pool operation:

• As of MySQL 8.0.14, the monitoring tables are Performance Schema tables; see Section 29.12.16,

“Performance Schema Thread Pool Tables”.

1200

MySQL Enterprise Thread Pool

• Prior to MySQL 8.0.14, the monitoring tables are INFORMATION_SCHEMA tables; see

Section 28.5, “INFORMATION_SCHEMA Thread Pool Tables”.

The INFORMATION_SCHEMA tables now are deprecated; expect them to be removed in a future
version of MySQL. Applications should transition away from the INFORMATION_SCHEMA tables to
the Performance Schema tables. For example, if an application uses this query:

SELECT * FROM INFORMATION_SCHEMA.TP_THREAD_STATE;

The application should use this query instead:

SELECT * FROM performance_schema.tp_thread_state;

Note

If you do not load all the monitoring tables, some or all MySQL Enterprise
Monitor thread pool graphs may be empty.

For a detailed description of how the thread pool works, see Section 7.6.3.3, “Thread Pool
Operation”.

• Several system variables are related to the thread pool. The thread_handling system variable
has a value of loaded-dynamically when the server successfully loads the thread pool plugin.

The other related system variables are implemented by the thread pool plugin and are not available
unless it is enabled. For information about using these variables, see Section 7.6.3.3, “Thread Pool
Operation”, and Section 7.6.3.4, “Thread Pool Tuning”.

• The Performance Schema has instruments that expose information about the thread pool and may

be used to investigate operational performance. To identify them, use this query:

SELECT * FROM performance_schema.setup_instruments
WHERE NAME LIKE '%thread_pool%';

For more information, see Chapter 29, MySQL Performance Schema.

7.6.3.2 Thread Pool Installation

This section describes how to install MySQL Enterprise Thread Pool. For general information about
installing plugins, see Section 7.6.1, “Installing and Uninstalling Plugins”.

To be usable by the server, the plugin library file must be located in the MySQL plugin directory (the
directory named by the plugin_dir system variable). If necessary, configure the plugin directory
location by setting the value of plugin_dir at server startup.

The plugin library file base name is thread_pool. The file name suffix differs per platform (for
example, .so for Unix and Unix-like systems, .dll for Windows).

• Thread Pool Installation as of MySQL 8.0.14

• Thread Pool Installation Prior to MySQL 8.0.14

Thread Pool Installation as of MySQL 8.0.14

In MySQL 8.0.14 and higher, the thread pool monitoring tables are Performance Schema tables that
are loaded and unloaded along with the thread pool plugin. The INFORMATION_SCHEMA versions
of the tables are deprecated but still available; they are installed per the instructions in Thread Pool
Installation Prior to MySQL 8.0.14.

To enable thread pool capability, load the plugin by starting the server with the --plugin-load-add
option. To do this, put these lines in the server my.cnf file, adjusting the .so suffix for your platform as
necessary:

1201

MySQL Enterprise Thread Pool

[mysqld]
plugin-load-add=thread_pool.so

To verify plugin installation, examine the Information Schema PLUGINS table or use the SHOW
PLUGINS statement (see Section 7.6.2, “Obtaining Server Plugin Information”). For example:

mysql> SELECT PLUGIN_NAME, PLUGIN_STATUS
       FROM INFORMATION_SCHEMA.PLUGINS
       WHERE PLUGIN_NAME LIKE 'thread%';
+-----------------------+---------------+
| PLUGIN_NAME           | PLUGIN_STATUS |
+-----------------------+---------------+
| thread_pool           | ACTIVE        |
+-----------------------+---------------+

To verify that the Performance Schema monitoring tables are available, examine the Information
Schema TABLES table or use the SHOW TABLES statement. For example:

mysql> SELECT TABLE_NAME
       FROM INFORMATION_SCHEMA.TABLES
       WHERE TABLE_SCHEMA = 'performance_schema'
       AND TABLE_NAME LIKE 'tp%';
+-----------------------+
| TABLE_NAME            |
+-----------------------+
| tp_thread_group_state |
| tp_thread_group_stats |
| tp_thread_state       |
+-----------------------+

If the server loads the thread pool plugin successfully, it sets the thread_handling system variable
to loaded-dynamically.

If the plugin fails to initialize, check the server error log for diagnostic messages.

Thread Pool Installation Prior to MySQL 8.0.14

Prior to MySQL 8.0.14, the thread pool monitoring tables are plugins separate from the thread pool
plugin and can be installed separately.

To enable thread pool capability, load the plugins to be used by starting the server with the --plugin-
load-add option. For example, if you name only the plugin library file, the server loads all plugins that
it contains (that is, the thread pool plugin and all the INFORMATION_SCHEMA tables). To do this, put
these lines in the server my.cnf file, adjusting the .so suffix for your platform as necessary:

[mysqld]
plugin-load-add=thread_pool.so

That is equivalent to loading all thread pool plugins by naming them individually:

[mysqld]
plugin-load-add=thread_pool=thread_pool.so
plugin-load-add=tp_thread_state=thread_pool.so
plugin-load-add=tp_thread_group_state=thread_pool.so
plugin-load-add=tp_thread_group_stats=thread_pool.so

If desired, you can load individual plugins from the library file. To load the thread pool plugin but not the
INFORMATION_SCHEMA tables, use an option like this:

[mysqld]
plugin-load-add=thread_pool=thread_pool.so

To load the thread pool plugin and only the TP_THREAD_STATE INFORMATION_SCHEMA table, use
options like this:

[mysqld]

1202

MySQL Enterprise Thread Pool

plugin-load-add=thread_pool=thread_pool.so
plugin-load-add=tp_thread_state=thread_pool.so

To verify plugin installation, examine the Information Schema PLUGINS table or use the SHOW
PLUGINS statement (see Section 7.6.2, “Obtaining Server Plugin Information”). For example:

mysql> SELECT PLUGIN_NAME, PLUGIN_STATUS
       FROM INFORMATION_SCHEMA.PLUGINS
       WHERE PLUGIN_NAME LIKE 'thread%' OR PLUGIN_NAME LIKE 'tp%';
+-----------------------+---------------+
| PLUGIN_NAME           | PLUGIN_STATUS |
+-----------------------+---------------+
| thread_pool           | ACTIVE        |
| TP_THREAD_STATE       | ACTIVE        |
| TP_THREAD_GROUP_STATE | ACTIVE        |
| TP_THREAD_GROUP_STATS | ACTIVE        |
+-----------------------+---------------+

If the server loads the thread pool plugin successfully, it sets the thread_handling system variable
to loaded-dynamically.

If a plugin fails to initialize, check the server error log for diagnostic messages.

7.6.3.3 Thread Pool Operation

The thread pool consists of a number of thread groups, each of which manages a set of client
connections. As connections are established, the thread pool assigns them to thread groups in round-
robin fashion.

The thread pool exposes system variables that may be used to configure its operation:

• thread_pool_algorithm: The concurrency algorithm to use for scheduling.

• thread_pool_dedicated_listeners: Dedicates a listener thread in each thread group to listen

for incoming statements from connections assigned to the group.

• thread_pool_high_priority_connection: How to schedule statement execution for a

session.

• thread_pool_max_active_query_threads: How many active threads per group to permit.

• thread_pool_max_transactions_limit: The maximum number of transactions permitted by

the thread pool plugin.

• thread_pool_max_unused_threads: How many sleeping threads to permit.

• thread_pool_prio_kickup_timer: How long before the thread pool moves a statement

awaiting execution from the low-priority queue to the high-priority queue.

• thread_pool_query_threads_per_group: The number of query threads permitted in a thread
group (the default is a single query thread). Consider increasing the value if you experience slower
response times due to long-running transactions.

• thread_pool_size: The number of thread groups in the thread pool. This is the most important

parameter controlling thread pool performance.

• thread_pool_stall_limit: The time before an executing statement is considered to be stalled.

• thread_pool_transaction_delay: The delay period before starting a new transaction.

To configure the number of thread groups, use the thread_pool_size system variable. The default
number of groups is 16. For guidelines on setting this variable, see Section 7.6.3.4, “Thread Pool
Tuning”.

1203

MySQL Enterprise Thread Pool

The maximum number of threads per group is 4096 (or 4095 on some systems where one thread is
used internally).

The thread pool separates connections and threads, so there is no fixed relationship between
connections and the threads that execute statements received from those connections. This differs
from the default thread-handling model that associates one thread with one connection such that a
given thread executes all statements from its connection.

By default, the thread pool tries to ensure a maximum of one thread executing in each group at any
time, but sometimes permits more threads to execute temporarily for best performance:

• Each thread group has a listener thread that listens for incoming statements from the connections

assigned to the group. When a statement arrives, the thread group either begins executing it
immediately or queues it for later execution:

• Immediate execution occurs if the statement is the only one received, and there are no statements

queued or currently executing.

From MySQL 8.0.31, immediate execution can be delayed by configuring
thread_pool_transaction_delay, which has a throttling effect on transactions. For more
information, refer to the description of this variable in the discussion that follows.

• Queuing occurs if the statement cannot begin executing immediately due to concurrently queued

or executing statements.

• The thread_pool_transaction_delay variable specifies a transaction delay in milliseconds.

Worker threads sleep for the specified period before executing a new transaction.

A transaction delay can be used in cases where parallel transactions affect the performance of other
operations due to resource contention. For example, if parallel transactions affect index creation or
an online buffer pool resizing operation, you can configure a transaction delay to reduce resource
contention while those operations are running. The delay has a throttling effect on transactions.

The thread_pool_transaction_delay setting does not affect queries issued from a privileged
connection (a connection assigned to the Admin thread group). These queries are not subject to a
configured transaction delay.

• If immediate execution occurs, the listener thread performs it. (This means that temporarily no thread
in the group is listening.) If the statement finishes quickly, the executing thread returns to listening
for statements. Otherwise, the thread pool considers the statement stalled and starts another thread
as a listener thread (creating it if necessary). To ensure that no thread group becomes blocked by
stalled statements, the thread pool has a background thread that regularly monitors thread group
states.

By using the listening thread to execute a statement that can begin immediately, there is no need to
create an additional thread if the statement finishes quickly. This ensures the most efficient execution
possible in the case of a low number of concurrent threads.

When the thread pool plugin starts, it creates one thread per group (the listener thread), plus the
background thread. Additional threads are created as necessary to execute statements.

• The value of the thread_pool_stall_limit system variable determines the meaning of “finishes

quickly” in the previous item. The default time before threads are considered stalled is 60ms but
can be set to a maximum of 6s. This parameter is configurable to enable you to strike a balance
appropriate for the server work load. Short wait values permit threads to start more quickly. Short
values are also better for avoiding deadlock situations. Long wait values are useful for workloads that
include long-running statements, to avoid starting too many new statements while the current ones
execute.

• If thread_pool_max_active_query_threads is 0, the default algorithm applies as just
described for determining the maximum number of active threads per group. The default

1204

MySQL Enterprise Thread Pool

algorithm takes stalled threads into account and may temporarily permit more active threads. If
thread_pool_max_active_query_threads is greater than 0, it places a limit on the number of
active threads per group.

• The thread pool focuses on limiting the number of concurrent short-running statements. Before an
executing statement reaches the stall time, it prevents other statements from beginning to execute.
If the statement executes past the stall time, it is permitted to continue but no longer prevents other
statements from starting. In this way, the thread pool tries to ensure that in each thread group there
is never more than one short-running statement, although there might be multiple long-running
statements. It is undesirable to let long-running statements prevent other statements from executing
because there is no limit on the amount of waiting that might be necessary. For example, on a
replication source server, a thread that is sending binary log events to a replica effectively runs
forever.

• A statement becomes blocked if it encounters a disk I/O operation or a user level lock (row lock

or table lock). The block would cause the thread group to become unused, so there are callbacks
to the thread pool to ensure that the thread pool can immediately start a new thread in this group
to execute another statement. When a blocked thread returns, the thread pool permits it to restart
immediately.

• There are two queues, a high-priority queue and a low-priority queue. The first statement in a
transaction goes to the low-priority queue. Any following statements for the transaction go to
the high-priority queue if the transaction is ongoing (statements for it have begun executing),
or to the low-priority queue otherwise. Queue assignment can be affected by enabling the
thread_pool_high_priority_connection system variable, which causes all queued
statements for a session to go into the high-priority queue.

Statements for a nontransactional storage engine, or a transactional engine if autocommit is
enabled, are treated as low-priority statements because in this case each statement is a transaction.
Thus, given a mix of statements for InnoDB and MyISAM tables, the thread pool prioritizes those
for InnoDB over those for MyISAM unless autocommit is enabled. With autocommit enabled, all
statements have low priority.

• When the thread group selects a queued statement for execution, it first looks in the high-priority

queue, then in the low-priority queue. If a statement is found, it is removed from its queue and begins
to execute.

• If a statement stays in the low-priority queue too long, the thread pool moves to the high-priority

queue. The value of the thread_pool_prio_kickup_timer system variable controls the time
before movement. For each thread group, a maximum of one statement per 10ms (100 per second)
is moved from the low-priority queue to the high-priority queue.

• The thread pool reuses the most active threads to obtain a much better use of CPU caches. This is a

small adjustment that has a great impact on performance.

• While a thread executes a statement from a user connection, Performance Schema instrumentation

accounts thread activity to the user connection. Otherwise, Performance Schema accounts activity to
the thread pool.

Here are examples of conditions under which a thread group might have multiple threads started to
execute statements:

• One thread begins executing a statement, but runs long enough to be considered stalled. The thread
group permits another thread to begin executing another statement even through the first thread is
still executing.

• One thread begins executing a statement, then becomes blocked and reports this back to the thread

pool. The thread group permits another thread to begin executing another statement.

• One thread begins executing a statement, becomes blocked, but does not report back that it is
blocked because the block does not occur in code that has been instrumented with thread pool

1205

MySQL Enterprise Thread Pool

callbacks. In this case, the thread appears to the thread group to be still running. If the block lasts
long enough for the statement to be considered stalled, the group permits another thread to begin
executing another statement.

The thread pool is designed to be scalable across an increasing number of connections. It is also
designed to avoid deadlocks that can arise from limiting the number of actively executing statements.
It is important that threads that do not report back to the thread pool do not prevent other statements
from executing and thus cause the thread pool to become deadlocked. Examples of such statements
follow:

• Long-running statements. These would lead to all resources used by only a few statements and they

could prevent all others from accessing the server.

• Binary log dump threads that read the binary log and send it to replicas. This is a kind of long-

running “statement” that runs for a very long time, and that should not prevent other statements from
executing.

• Statements blocked on a row lock, table lock, sleep, or any other blocking activity that has not been

reported back to the thread pool by MySQL Server or a storage engine.

In each case, to prevent deadlock, the statement is moved to the stalled category when it does not
complete quickly, so that the thread group can permit another statement to begin executing. With this
design, when a thread executes or becomes blocked for an extended time, the thread pool moves the
thread to the stalled category and for the rest of the statement's execution, it does not prevent other
statements from executing.

The maximum number of threads that can occur is the sum of max_connections and
thread_pool_size. This can happen in a situation where all connections are in execution mode and
an extra thread is created per group to listen for more statements. This is not necessarily a state that
happens often, but it is theoretically possible.

Privileged Connections

When the limit defined by thread_pool_max_transactions_limit has been reached, new
connections appear to hang until one or more existing transactions are completed. The same occurs
when attempting to start a new transaction on an existing connection. If existing connections are
blocked or long-running, the only way to access the server is using a privileged connection.

To establish a privileged connection, the user initiating the connection must have the
TP_CONNECTION_ADMIN privilege. A privileged connection ignores the limit defined by
thread_pool_max_transactions_limit and permits connecting to the server to increase the
limit, remove the limit, or kill running transactions. TP_CONNECTION_ADMIN privilege must be granted
explicitly. It is not granted to any user by default.

A privileged connection can execute statements and start transactions, and is assigned to a thread
group designated as the Admin thread group.

When querying the performance_schema.tp_thread_group_stats table, which reports
statistics per thread group, Admin thread group statistics are reported in the last row of the result set.
For example, if SELECT * FROM performance_schema.tp_thread_group_stats\G returns 17
rows (one row per thread group), the Admin thread group statistics are reported in the 17th row.

7.6.3.4 Thread Pool Tuning

This section provides guidelines on determining the best configuration for thread pool performance, as
measured using a metric such as transactions per second.

Of chief importance is the number of thread groups in the thread pool, which can be set on server
startup using the --thread-pool-size option; this cannot be changed at runtime. Recommended
values for this option depend on whether the primary storage engine in use is InnoDB or MyISAM:

1206

MySQL Enterprise Thread Pool

• If the primary storage engine is InnoDB, the recommended value for the thread pool size is the

number of physical cores available on the host machine, up to a maximum of 512.

• If the primary storage engine is MyISAM, the thread pool size should be fairly low. Optimal

performance is often seen with values from 4 to 8. Higher values tend to have a slightly negative but
not dramatic impact on performance.

The upper limit on the number of concurrent transactions that can be processed by the thread
pool plugin is determined by the value of thread_pool_max_transactions_limit. The
recommendation initial setting for this system variable is the number of physical cores times 32. You
may need to adjust the value from this starting point to suit a given workload; a reasonable upper
bound for this value is the maximum number of concurrent connections expected; the value of the
Max_used_connections status variable can serve as a guide to determining this. A good way to
proceed is to start with thread_pool_max_transactions_limit set to this value, then adjust it
downwards while observing the effect on throughput.

The maximum number of query threads permitted in a thread group is determined by the value of
thread_pool_query_threads_per_group, which can be adjusted at runtime. The product of
this value and the thread pool size is approximately equal to the total number of threads available to
process queries. Obtaining the best performance usually means striking the proper balance for your
application between thread_pool_query_threads_per_group and the thread pool size. Greater
values for thread_pool_query_threads_per_group value make it less likely that all the threads
in the thread group simultaneously execute long running queries while blocking shorter ones when the
workload includes both long and short running queries. You should bear in mind that the overhead of
the connection polling operation for each thread group increases when using smaller values for the
thread pool size with larger values for thread_pool_query_threads_per_group. For this reason,
we recommend a starting value of 2 for thread_pool_query_threads_per_group; setting this
variable to a lower value usually does not offer any performance benefit.

For best performance under normal conditions, we also recommend that you set
thread_pool_algorithm to 1 for high concurrency.

In addition, the value of the thread_pool_stall_limit system variable determines the
handling of blocked and long-running statements. If all calls blocking the MySQL Server were
reported to the thread pool, it would always know when execution threads are blocked, but this
may not always be true. For example, blocks could occur in code that has not been instrumented
with thread pool callbacks. For such cases, the thread pool must be able to identify threads
that appear to be blocked. This is done by means of a timeout determined by the value of
thread_pool_stall_limit, which ensures that the server does not become completely blocked.
The value of thread_pool_stall_limit represents a number of 10-millisecond intervals, so that
600 (the maximum) represents 6 seconds.

thread_pool_stall_limit also enables the thread pool to handle long-running statements. If a
long-running statement were permitted to block a thread group, all other connections assigned to the
group would be blocked and unable to start execution until the long-running statement completed. In
the worst case, this could take hours or even days.

The value of thread_pool_stall_limit should be chosen such that statements that execute
longer than its value are considered stalled. Stalled statements generate a lot of extra overhead since
they involve extra context switches and in some cases even extra thread creations. On the other hand,
setting the thread_pool_stall_limit parameter too high means that long-running statements
block a number of short-running statements for longer than necessary. Short wait values permit threads
to start more quickly. Short values are also better for avoiding deadlock situations. Long wait values are
useful for workloads that include long-running statements, to avoid starting too many new statements
while the current ones execute.

Suppose a server executes a workload where 99.9% of the statements complete within 100ms even
when the server is loaded, and the remaining statements take between 100ms and 2 hours fairly
evenly spread. In this case, it would make sense to set thread_pool_stall_limit to 10 (10 ×

1207

The Rewriter Query Rewrite Plugin

10ms = 100ms). The default value of 6 (60ms) is suitable for servers that primarily execute very simple
statements.

The thread_pool_stall_limit parameter can be changed at runtime to enable you to strike a
balance appropriate for the server work load. Assuming that the tp_thread_group_stats table is
enabled, you can use the following query to determine the fraction of executed statements that stalled:

SELECT SUM(STALLED_QUERIES_EXECUTED) / SUM(QUERIES_EXECUTED)
FROM performance_schema.tp_thread_group_stats;

This number should be as low as possible. To decrease the likelihood of statements stalling, increase
the value of thread_pool_stall_limit.

When a statement arrives, what is the maximum time it can be delayed before it actually starts
executing? Suppose that the following conditions apply:

• There are 200 statements queued in the low-priority queue.

• There are 10 statements queued in the high-priority queue.

• thread_pool_prio_kickup_timer is set to 10000 (10 seconds).

• thread_pool_stall_limit is set to 100 (1 second).

In the worst case, the 10 high-priority statements represent 10 transactions that continue executing for
a long time. Thus, in the worst case, no statements can be moved to the high-priority queue because it
always already contains statements awaiting execution. After 10 seconds, the new statement is eligible
to be moved to the high-priority queue. However, before it can be moved, all the statements before it
must be moved as well. This could take another 2 seconds because a maximum of 100 statements
per second are moved to the high-priority queue. Now when the statement reaches the high-priority
queue, there could potentially be many long-running statements ahead of it. In the worst case, every
one of those becomes stalled and 1 second is required for each statement before the next statement
is retrieved from the high-priority queue. Thus, in this scenario, it takes 222 seconds before the new
statement starts executing.

This example shows a worst case for an application. How to handle it depends on the application. If
the application has high requirements for the response time, it should most likely throttle users at a
higher level itself. Otherwise, it can use the thread pool configuration parameters to set some kind of a
maximum waiting time.

7.6.4 The Rewriter Query Rewrite Plugin

MySQL supports query rewrite plugins that can examine and possibly modify SQL statements received
by the server before the server executes them. See Query Rewrite Plugins.

MySQL distributions include a postparse query rewrite plugin named Rewriter and scripts for
installing the plugin and its associated elements. These elements work together to provide statement-
rewriting capability:

• A server-side plugin named Rewriter examines statements and may rewrite them, based on its in-

memory cache of rewrite rules.

• These statements are subject to rewriting:

• As of MySQL 8.0.12: SELECT, INSERT, REPLACE, UPDATE, and DELETE.

• Prior to MySQL 8.0.12: SELECT only.

Standalone statements and prepared statements are subject to rewriting. Statements occurring
within view definitions or stored programs are not subject to rewriting.

1208

The Rewriter Query Rewrite Plugin

• The Rewriter plugin uses a database named query_rewrite containing a table named

rewrite_rules. The table provides persistent storage for the rules that the plugin uses to decide
whether to rewrite statements. Users communicate with the plugin by modifying the set of rules
stored in this table. The plugin communicates with users by setting the message column of table
rows.

• The query_rewrite database contains a stored procedure named flush_rewrite_rules()

that loads the contents of the rules table into the plugin.

• A loadable function named load_rewrite_rules() is used by the flush_rewrite_rules()

stored procedure.

• The Rewriter plugin exposes system variables that enable plugin configuration and status

variables that provide runtime operational information. In MySQL 8.0.31 and later, this plugin also
supports a privilege (SKIP_QUERY_REWRITE) that protects a given user's queries from being
rewritten.

The following sections describe how to install and use the Rewriter plugin, and provide reference
information for its associated elements.

7.6.4.1 Installing or Uninstalling the Rewriter Query Rewrite Plugin

Note

If installed, the Rewriter plugin involves some overhead even when disabled.
To avoid this overhead, do not install the plugin unless you plan to use it.

To install or uninstall the Rewriter query rewrite plugin, choose the appropriate script located in the
share directory of your MySQL installation:

• install_rewriter.sql: Choose this script to install the Rewriter plugin and its associated

elements.

• uninstall_rewriter.sql: Choose this script to uninstall the Rewriter plugin and its

associated elements.

Run the chosen script as follows:

$> mysql -u root -p < install_rewriter.sql
Enter password: (enter root password here)

The example here uses the install_rewriter.sql installation script. Substitute
uninstall_rewriter.sql if you are uninstalling the plugin.

Running an installation script should install and enable the plugin. To verify that, connect to the server
and execute this statement:

mysql> SHOW GLOBAL VARIABLES LIKE 'rewriter_enabled';
+------------------+-------+
| Variable_name    | Value |
+------------------+-------+
| rewriter_enabled | ON    |
+------------------+-------+

For usage instructions, see Section 7.6.4.2, “Using the Rewriter Query Rewrite Plugin”. For reference
information, see Section 7.6.4.3, “Rewriter Query Rewrite Plugin Reference”.

7.6.4.2 Using the Rewriter Query Rewrite Plugin

To enable or disable the plugin, enable or disable the rewriter_enabled system variable. By
default, the Rewriter plugin is enabled when you install it (see Section 7.6.4.1, “Installing or

1209

The Rewriter Query Rewrite Plugin

Uninstalling the Rewriter Query Rewrite Plugin”). To set the initial plugin state explicitly, you can set the
variable at server startup. For example, to enable the plugin in an option file, use these lines:

[mysqld]
rewriter_enabled=ON

It is also possible to enable or disable the plugin at runtime:

SET GLOBAL rewriter_enabled = ON;
SET GLOBAL rewriter_enabled = OFF;

Assuming that the Rewriter plugin is enabled, it examines and possibly modifies each rewritable
statement received by the server. The plugin determines whether to rewrite statements based on
its in-memory cache of rewriting rules, which are loaded from the rewrite_rules table in the
query_rewrite database.

These statements are subject to rewriting:

• As of MySQL 8.0.12: SELECT, INSERT, REPLACE, UPDATE, and DELETE.

• Prior to MySQL 8.0.12: SELECT only.

Standalone statements and prepared statements are subject to rewriting. Statements occurring within
view definitions or stored programs are not subject to rewriting.

Beginning with MySQL 8.0.31, statements run by users with the
SKIP_QUERY_REWRITE privilege are not subject to rewriting, provided that the
rewriter_enabled_for_threads_without_privilege_checks system variable is set
to OFF (default ON). This can be used for control statements and statements that should be
replicated unchanged, such as those from the SOURCE_USER specified by CHANGE REPLICATION
SOURCE TO. This is also true for statements executed by MySQL client programs including
mysqlbinlog, mysqladmin, mysqldump, and mysqlpump; for this reason, you should grant
SKIP_QUERY_REWRITE to the user account or accounts used by these utilities to connect to MySQL.

• Adding Rewrite Rules

• How Statement Matching Works

• Rewriting Prepared Statements

• Rewriter Plugin Operational Information

• Rewriter Plugin Use of Character Sets

Adding Rewrite Rules

To add rules for the Rewriter plugin, add rows to the rewrite_rules table, then invoke the
flush_rewrite_rules() stored procedure to load the rules from the table into the plugin. The
following example creates a simple rule to match statements that select a single literal value:

INSERT INTO query_rewrite.rewrite_rules (pattern, replacement)
VALUES('SELECT ?', 'SELECT ? + 1');

The resulting table contents look like this:

mysql> SELECT * FROM query_rewrite.rewrite_rules\G
*************************** 1. row ***************************
                id: 1
           pattern: SELECT ?
  pattern_database: NULL
       replacement: SELECT ? + 1
           enabled: YES
           message: NULL
    pattern_digest: NULL

1210

The Rewriter Query Rewrite Plugin

normalized_pattern: NULL

The rule specifies a pattern template indicating which SELECT statements to match, and a
replacement template indicating how to rewrite matching statements. However, adding the rule to the
rewrite_rules table is not sufficient to cause the Rewriter plugin to use the rule. You must invoke
flush_rewrite_rules() to load the table contents into the plugin in-memory cache:

mysql> CALL query_rewrite.flush_rewrite_rules();

Tip

If your rewrite rules seem not to be working properly, make sure that you have
reloaded the rules table by calling flush_rewrite_rules().

When the plugin reads each rule from the rules table, it computes a normalized (statement digest) form
from the pattern and a digest hash value, and uses them to update the normalized_pattern and
pattern_digest columns:

mysql> SELECT * FROM query_rewrite.rewrite_rules\G
*************************** 1. row ***************************
                id: 1
           pattern: SELECT ?
  pattern_database: NULL
       replacement: SELECT ? + 1
           enabled: YES
           message: NULL
    pattern_digest: d1b44b0c19af710b5a679907e284acd2ddc285201794bc69a2389d77baedddae
normalized_pattern: select ?

For information about statement digesting, normalized statements, and digest hash values, see
Section 29.10, “Performance Schema Statement Digests and Sampling”.

If a rule cannot be loaded due to some error, calling flush_rewrite_rules() produces an error:

mysql> CALL query_rewrite.flush_rewrite_rules();
ERROR 1644 (45000): Loading of some rule(s) failed.

When this occurs, the plugin writes an error message to the message column of the rule row to
communicate the problem. Check the rewrite_rules table for rows with non-NULL message column
values to see what problems exist.

Patterns use the same syntax as prepared statements (see Section 15.5.1, “PREPARE Statement”).
Within a pattern template, ? characters act as parameter markers that match data values. The ?
characters should not be enclosed within quotation marks. Parameter markers can be used only where
data values should appear, and they cannot be used for SQL keywords, identifiers, functions, and
so on. The plugin parses a statement to identify the literal values (as defined in Section 11.1, “Literal
Values”), so you can put a parameter marker in place of any literal value.

Like the pattern, the replacement can contain ? characters. For a statement that matches a pattern
template, the plugin rewrites it, replacing ? parameter markers in the replacement using data values
matched by the corresponding markers in the pattern. The result is a complete statement string. The
plugin asks the server to parse it, and returns the result to the server as the representation of the
rewritten statement.

After adding and loading the rule, check whether rewriting occurs according to whether statements
match the rule pattern:

mysql> SELECT PI();
+----------+
| PI()     |
+----------+
| 3.141593 |
+----------+
1 row in set (0.01 sec)

1211

The Rewriter Query Rewrite Plugin

mysql> SELECT 10;
+--------+
| 10 + 1 |
+--------+
|     11 |
+--------+
1 row in set, 1 warning (0.00 sec)

No rewriting occurs for the first SELECT statement, but does for the second. The second statement
illustrates that when the Rewriter plugin rewrites a statement, it produces a warning message. To
view the message, use SHOW WARNINGS:

mysql> SHOW WARNINGS\G
*************************** 1. row ***************************
  Level: Note
   Code: 1105
Message: Query 'SELECT 10' rewritten to 'SELECT 10 + 1' by a query rewrite plugin

A statement need not be rewritten to a statement of the same type. The following example loads a rule
that rewrites DELETE statements to UPDATE statements:

INSERT INTO query_rewrite.rewrite_rules (pattern, replacement)
VALUES('DELETE FROM db1.t1 WHERE col = ?',
       'UPDATE db1.t1 SET col = NULL WHERE col = ?');
CALL query_rewrite.flush_rewrite_rules();

To enable or disable an existing rule, modify its enabled column and reload the table into the plugin.
To disable rule 1:

UPDATE query_rewrite.rewrite_rules SET enabled = 'NO' WHERE id = 1;
CALL query_rewrite.flush_rewrite_rules();

This enables you to deactivate a rule without removing it from the table.

To re-enable rule 1:

UPDATE query_rewrite.rewrite_rules SET enabled = 'YES' WHERE id = 1;
CALL query_rewrite.flush_rewrite_rules();

The rewrite_rules table contains a pattern_database column that Rewriter uses for matching
table names that are not qualified with a database name:

• Qualified table names in statements match qualified names in the pattern if corresponding database

and table names are identical.

• Unqualified table names in statements match unqualified names in the pattern only if the default

database is the same as pattern_database and the table names are identical.

Suppose that a table named appdb.users has a column named id and that applications are
expected to select rows from the table using a query of one of these forms, where the second can be
used when appdb is the default database:

SELECT * FROM users WHERE appdb.id = id_value;
SELECT * FROM users WHERE id = id_value;

Suppose also that the id column is renamed to user_id (perhaps the table must be modified to
add another type of ID and it is necessary to indicate more specifically what type of ID the id column
represents).

The change means that applications must refer to user_id rather than id in the WHERE clause, but
old applications that cannot be updated no longer work properly. The Rewriter plugin can solve this
problem by matching and rewriting problematic statements. To match the statement SELECT * FROM
appdb.users WHERE id = value and rewrite it as SELECT * FROM appdb.users WHERE
user_id = value, you can insert a row representing a replacement rule into the rewrite rules table.

1212

The Rewriter Query Rewrite Plugin

If you also want to match this SELECT using the unqualified table name, it is also necessary to add an
explicit rule. Using ? as a value placeholder, the two INSERT statements needed look like this:

INSERT INTO query_rewrite.rewrite_rules
    (pattern, replacement) VALUES(
    'SELECT * FROM appdb.users WHERE id = ?',
    'SELECT * FROM appdb.users WHERE user_id = ?'
    );
INSERT INTO query_rewrite.rewrite_rules
    (pattern, replacement, pattern_database) VALUES(
    'SELECT * FROM users WHERE id = ?',
    'SELECT * FROM users WHERE user_id = ?',
    'appdb'
    );

After adding the two new rules, execute the following statement to cause them to take effect:

CALL query_rewrite.flush_rewrite_rules();

Rewriter uses the first rule to match statements that use the qualified table name, and the second
to match statements that use the unqualified name. The second rule works only when appdb is the
default database.

How Statement Matching Works

The Rewriter plugin uses statement digests and digest hash values to match incoming statements
against rewrite rules in stages. The max_digest_length system variable determines the size of
the buffer used for computing statement digests. Larger values enable computation of digests that
distinguish longer statements. Smaller values use less memory but increase the likelihood of longer
statements colliding with the same digest value.

The plugin matches each statement to the rewrite rules as follows:

1. Compute the statement digest hash value and compare it to the rule digest hash values. This is

subject to false positives, but serves as a quick rejection test.

2.

3.

If the statement digest hash value matches any pattern digest hash values, match the normalized
(statement digest) form of the statement to the normalized form of the matching rule patterns.

If the normalized statement matches a rule, compare the literal values in the statement and the
pattern. A ? character in the pattern matches any literal value in the statement. If the statement
prepares a statement, ? in the pattern also matches ? in the statement. Otherwise, corresponding
literals must be the same.

If multiple rules match a statement, it is nondeterministic which one the plugin uses to rewrite the
statement.

If a pattern contains more markers than the replacement, the plugin discards excess data values. If a
pattern contains fewer markers than the replacement, it is an error. The plugin notices this when the
rules table is loaded, writes an error message to the message column of the rule row to communicate
the problem, and sets the Rewriter_reload_error status variable to ON.

Rewriting Prepared Statements

Prepared statements are rewritten at parse time (that is, when they are prepared), not when they are
executed later.

Prepared statements differ from nonprepared statements in that they may contain ? characters as
parameter markers. To match a ? in a prepared statement, a Rewriter pattern must contain ? in the
same location. Suppose that a rewrite rule has this pattern:

SELECT ?, 3

1213

The Rewriter Query Rewrite Plugin

The following table shows several prepared SELECT statements and whether the rule pattern matches
them.

Prepared Statement

Whether Pattern Matches Statement

PREPARE s AS 'SELECT 3, 3'

PREPARE s AS 'SELECT ?, 3'

PREPARE s AS 'SELECT 3, ?'

PREPARE s AS 'SELECT ?, ?'

Yes

Yes

No

No

Rewriter Plugin Operational Information

The Rewriter plugin makes information available about its operation by means of several status
variables:

mysql> SHOW GLOBAL STATUS LIKE 'Rewriter%';
+-----------------------------------+-------+
| Variable_name                     | Value |
+-----------------------------------+-------+
| Rewriter_number_loaded_rules      | 1     |
| Rewriter_number_reloads           | 5     |
| Rewriter_number_rewritten_queries | 1     |
| Rewriter_reload_error             | ON    |
+-----------------------------------+-------+

For descriptions of these variables, see Rewriter Query Rewrite Plugin Status Variables.

When you load the rules table by calling the flush_rewrite_rules() stored procedure, if
an error occurs for some rule, the CALL statement produces an error, and the plugin sets the
Rewriter_reload_error status variable to ON:

mysql> CALL query_rewrite.flush_rewrite_rules();
ERROR 1644 (45000): Loading of some rule(s) failed.

mysql> SHOW GLOBAL STATUS LIKE 'Rewriter_reload_error';
+-----------------------+-------+
| Variable_name         | Value |
+-----------------------+-------+
| Rewriter_reload_error | ON    |
+-----------------------+-------+

In this case, check the rewrite_rules table for rows with non-NULL message column values to see
what problems exist.

Rewriter Plugin Use of Character Sets

When the rewrite_rules table is loaded into the Rewriter plugin, the plugin interprets statements
using the current global value of the character_set_client system variable. If the global
character_set_client value is changed subsequently, the rules table must be reloaded.

A client must have a session character_set_client value identical to what the global value was
when the rules table was loaded or rule matching does not work for that client.

7.6.4.3 Rewriter Query Rewrite Plugin Reference

The following discussion serves as a reference to these elements associated with the Rewriter query
rewrite plugin:

• The Rewriter rules table in the query_rewrite database

• Rewriter procedures and functions

• Rewriter system and status variables

1214

The Rewriter Query Rewrite Plugin

Rewriter Query Rewrite Plugin Rules Table

The rewrite_rules table in the query_rewrite database provides persistent storage for the rules
that the Rewriter plugin uses to decide whether to rewrite statements.

Users communicate with the plugin by modifying the set of rules stored in this table. The plugin
communicates information to users by setting the table's message column.

Note

The rules table is loaded into the plugin by the flush_rewrite_rules stored
procedure. Unless that procedure has been called following the most recent
table modification, the table contents do not necessarily correspond to the set of
rules the plugin is using.

The rewrite_rules table has these columns:

• id

The rule ID. This column is the table primary key. You can use the ID to uniquely identify any rule.

• pattern

The template that indicates the pattern for statements that the rule matches. Use ? to represent
parameter markers that match data values.

• pattern_database

The database used to match unqualified table names in statements. Qualified table names in
statements match qualified names in the pattern if corresponding database and table names are
identical. Unqualified table names in statements match unqualified names in the pattern only if the
default database is the same as pattern_database and the table names are identical.

• replacement

The template that indicates how to rewrite statements matching the pattern column value. Use ?
to represent parameter markers that match data values. In rewritten statements, the plugin replaces
? parameter markers in replacement using data values matched by the corresponding markers in
pattern.

• enabled

Whether the rule is enabled. Load operations (performed by invoking the
flush_rewrite_rules() stored procedure) load the rule from the table into the Rewriter in-
memory cache only if this column is YES.

This column makes it possible to deactivate a rule without removing it: Set the column to a value
other than YES and reload the table into the plugin.

• message

The plugin uses this column for communicating with users. If no error occurs when the rules table is
loaded into memory, the plugin sets the message column to NULL. A non-NULL value indicates an
error and the column contents are the error message. Errors can occur under these circumstances:

• Either the pattern or the replacement is an incorrect SQL statement that produces syntax errors.

• The replacement contains more ? parameter markers than the pattern.

If a load error occurs, the plugin also sets the Rewriter_reload_error status variable to ON.

• pattern_digest

1215

The Rewriter Query Rewrite Plugin

This column is used for debugging and diagnostics. If the column exists when the rules table is
loaded into memory, the plugin updates it with the pattern digest. This column may be useful if you
are trying to determine why some statement fails to be rewritten.

• normalized_pattern

This column is used for debugging and diagnostics. If the column exists when the rules table is
loaded into memory, the plugin updates it with the normalized form of the pattern. This column may
be useful if you are trying to determine why some statement fails to be rewritten.

Rewriter Query Rewrite Plugin Procedures and Functions

Rewriter plugin operation uses a stored procedure that loads the rules table into its in-memory
cache, and a helper loadable function. Under normal operation, users invoke only the stored
procedure. The function is intended to be invoked by the stored procedure, not directly by users.

• flush_rewrite_rules()

This stored procedure uses the load_rewrite_rules() function to load the contents of the
rewrite_rules table into the Rewriter in-memory cache.

Calling flush_rewrite_rules() implies COMMIT.

Invoke this procedure after you modify the rules table to cause the plugin to update its cache from
the new table contents. If any errors occur, the plugin sets the message column for the appropriate
rule rows in the table and sets the Rewriter_reload_error status variable to ON.

• load_rewrite_rules()

This function is a helper routine used by the flush_rewrite_rules() stored procedure.

Rewriter Query Rewrite Plugin System Variables

The Rewriter query rewrite plugin supports the following system variables. These variables are
available only if the plugin is installed (see Section 7.6.4.1, “Installing or Uninstalling the Rewriter Query
Rewrite Plugin”).

• rewriter_enabled

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Valid Values

rewriter_enabled

Global

Yes

No

Boolean

ON

OFF

Whether the Rewriter query rewrite plugin is enabled.

• rewriter_enabled_for_threads_without_privilege_checks

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

1216

8.0.31

rewriter_enabled_for_threads_without_privilege_checks

Global

Yes

No

The ddl_rewriter Plugin

Type

Default Value

Valid Values

Boolean

ON

OFF

Whether to apply rewrites for replication threads which execute with privilege checks disabled. If set
to OFF, such rewrites are skipped. Requires the SYSTEM_VARIABLES_ADMIN privilege or SUPER
privilege to set.

This variable has no effect if rewriter_enabled is OFF.

• rewriter_verbose

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

For internal use.

rewriter_verbose

Global

Yes

No

Integer

Rewriter Query Rewrite Plugin Status Variables

The Rewriter query rewrite plugin supports the following status variables. These variables are
available only if the plugin is installed (see Section 7.6.4.1, “Installing or Uninstalling the Rewriter Query
Rewrite Plugin”).

• Rewriter_number_loaded_rules

The number of rewrite plugin rewrite rules successfully loaded from the rewrite_rules table into
memory for use by the Rewriter plugin.

• Rewriter_number_reloads

The number of times the rewrite_rules table has been loaded into the in-memory cache used by
the Rewriter plugin.

• Rewriter_number_rewritten_queries

The number of queries rewritten by the Rewriter query rewrite plugin since it was loaded.

• Rewriter_reload_error

Whether an error occurred the most recent time that the rewrite_rules table was loaded into
the in-memory cache used by the Rewriter plugin. If the value is OFF, no error occurred. If the
value is ON, an error occurred; check the message column of the rewriter_rules table for error
messages.

7.6.5 The ddl_rewriter Plugin

MySQL 8.0.16 and higher includes a ddl_rewriter plugin that modifies CREATE TABLE statements
received by the server before it parses and executes them. The plugin removes ENCRYPTION, DATA
DIRECTORY, and INDEX DIRECTORY clauses, which may be helpful when restoring tables from SQL
dump files created from databases that are encrypted or that have their tables stored outside the data
directory. For example, the plugin may enable restoring such dump files into an unencrypted instance
or in an environment where the paths outside the data directory are not accessible.

Before using the ddl_rewriter plugin, install it according to the instructions provided in
Section 7.6.5.1, “Installing or Uninstalling ddl_rewriter”.

1217

The ddl_rewriter Plugin

ddl_rewriter examines SQL statements received by the server prior to parsing, rewriting them
according to these conditions:

• ddl_rewriter considers only CREATE TABLE statements, and only if they are standalone

statements that occur at the beginning of an input line or at the beginning of prepared statement text.
ddl_rewriter does not consider CREATE TABLE statements within stored program definitions.
Statements can extend over multiple lines.

• Within statements considered for rewrite, instances of the following clauses are rewritten and each

instance replaced by a single space:

• ENCRYPTION

• DATA DIRECTORY (at the table and partition levels)

• INDEX DIRECTORY (at the table and partition levels)

• Rewriting does not depend on lettercase.

If ddl_rewriter rewrites a statement, it generates a warning:

mysql> CREATE TABLE t (i INT) DATA DIRECTORY '/var/mysql/data';
Query OK, 0 rows affected, 1 warning (0.03 sec)

mysql> SHOW WARNINGS\G
*************************** 1. row ***************************
  Level: Note
   Code: 1105
Message: Query 'CREATE TABLE t (i INT) DATA DIRECTORY '/var/mysql/data''
         rewritten to 'CREATE TABLE t (i INT) ' by a query rewrite plugin
1 row in set (0.00 sec)

If the general query log or binary log is enabled, the server writes to it statements as they appear after
any rewriting by ddl_rewriter.

When installed, ddl_rewriter exposes the Performance Schema memory/rewriter/
ddl_rewriter instrument for tracking plugin memory use. See Section 29.12.20.10, “Memory
Summary Tables”

7.6.5.1 Installing or Uninstalling ddl_rewriter

This section describes how to install or uninstall the ddl_rewriter plugin. For general information
about installing plugins, see Section 7.6.1, “Installing and Uninstalling Plugins”.

Note

If installed, the ddl_rewriter plugin involves some minimal overhead even
when disabled. To avoid this overhead, install ddl_rewriter only for the
period during which you intend to use it.

The primary use case is modification of statements restored from dump files, so
the typical usage pattern is: 1) Install the plugin; 2) restore the dump file or files;
3) uninstall the plugin.

To be usable by the server, the plugin library file must be located in the MySQL plugin directory (the
directory named by the plugin_dir system variable). If necessary, configure the plugin directory
location by setting the value of plugin_dir at server startup.

The plugin library file base name is ddl_rewriter. The file name suffix differs per platform (for
example, .so for Unix and Unix-like systems, .dll for Windows).

To install the ddl_rewriter plugin, use the INSTALL PLUGIN statement, adjusting the .so suffix for
your platform as necessary:

1218

Version Tokens

INSTALL PLUGIN ddl_rewriter SONAME 'ddl_rewriter.so';

To verify plugin installation, examine the Information Schema PLUGINS table or use the SHOW
PLUGINS statement (see Section 7.6.2, “Obtaining Server Plugin Information”). For example:

mysql> SELECT PLUGIN_NAME, PLUGIN_STATUS, PLUGIN_TYPE
       FROM INFORMATION_SCHEMA.PLUGINS
       WHERE PLUGIN_NAME LIKE 'ddl%';
+--------------+---------------+-------------+
| PLUGIN_NAME  | PLUGIN_STATUS | PLUGIN_TYPE |
+--------------+---------------+-------------+
| ddl_rewriter | ACTIVE        | AUDIT       |
+--------------+---------------+-------------+

As the preceding result shows, ddl_rewriter is implemented as an audit plugin.

If the plugin fails to initialize, check the server error log for diagnostic messages.

Once installed as just described, ddl_rewriter remains installed until uninstalled. To remove it, use
UNINSTALL PLUGIN:

UNINSTALL PLUGIN ddl_rewriter;

If ddl_rewriter is installed, you can use the --ddl-rewriter option for subsequent server
startups to control ddl_rewriter plugin activation. For example, to prevent the plugin from being
enabled at runtime, use this option:

[mysqld]
ddl-rewriter=OFF

7.6.5.2 ddl_rewriter Plugin Options

This section describes the command options that control operation of the ddl_rewriter plugin. If
values specified at startup time are incorrect, the ddl_rewriter plugin may fail to initialize properly
and the server does not load it.

To control activation of the ddl_rewriter plugin, use this option:

• --ddl-rewriter[=value]

Command-Line Format

--ddl-rewriter[=value]

Introduced

Type

Default Value

Valid Values

8.0.16

Enumeration

ON

ON

OFF

FORCE

FORCE_PLUS_PERMANENT

This option controls how the server loads the ddl_rewriter plugin at startup. It is available only if
the plugin has been previously registered with INSTALL PLUGIN or is loaded with --plugin-load
or --plugin-load-add. See Section 7.6.5.1, “Installing or Uninstalling ddl_rewriter”.

The option value should be one of those available for plugin-loading options, as described in
Section 7.6.1, “Installing and Uninstalling Plugins”. For example, --ddl-rewriter=OFF disables
the plugin at server startup.

7.6.6 Version Tokens

1219

Version Tokens

MySQL includes Version Tokens, a feature that enables creation of and synchronization around server
tokens that applications can use to prevent accessing incorrect or out-of-date data.

The Version Tokens interface has these characteristics:

• Version tokens are pairs consisting of a name that serves as a key or identifier, plus a value.

• Version tokens can be locked. An application can use token locks to indicate to other cooperating

applications that tokens are in use and should not be modified.

• Version token lists are established per server (for example, to specify the server assignment or

operational state). In addition, an application that communicates with a server can register its own
list of tokens that indicate the state it requires the server to be in. An SQL statement sent by the
application to a server not in the required state produces an error. This is a signal to the application
that it should seek a different server in the required state to receive the SQL statement.

The following sections describe the elements of Version Tokens, discuss how to install and use it, and
provide reference information for its elements.

7.6.6.1 Version Tokens Elements

Version Tokens is based on a plugin library that implements these elements:

• A server-side plugin named version_tokens holds the list of version tokens associated with the

server and subscribes to notifications for statement execution events. The version_tokens plugin
uses the audit plugin API to monitor incoming statements from clients and matches each client's
session-specific version token list against the server version token list. If there is a match, the plugin
lets the statement through and the server continues to process it. Otherwise, the plugin returns an
error to the client and the statement fails.

• A set of loadable functions provides an SQL-level API for manipulating and inspecting the list of
server version tokens maintained by the plugin. The VERSION_TOKEN_ADMIN privilege (or the
deprecated SUPER privilege) is required to call any of the Version Token functions.

• When the version_tokens plugin loads, it defines the VERSION_TOKEN_ADMIN dynamic

privilege. This privilege can be granted to users of the functions.

• A system variable enables clients to specify the list of version tokens that register the required server
state. If the server has a different state when a client sends a statement, the client receives an error.

7.6.6.2 Installing or Uninstalling Version Tokens

Note

If installed, Version Tokens involves some overhead. To avoid this overhead, do
not install it unless you plan to use it.

This section describes how to install or uninstall Version Tokens, which is implemented in a plugin
library file containing a plugin and loadable functions. For general information about installing or
uninstalling plugins and loadable functions, see Section 7.6.1, “Installing and Uninstalling Plugins”, and
Section 7.7.1, “Installing and Uninstalling Loadable Functions”.

To be usable by the server, the plugin library file must be located in the MySQL plugin directory (the
directory named by the plugin_dir system variable). If necessary, configure the plugin directory
location by setting the value of plugin_dir at server startup.

The plugin library file base name is version_tokens. The file name suffix differs per platform (for
example, .so for Unix and Unix-like systems, .dll for Windows).

To install the Version Tokens plugin and functions, use the INSTALL PLUGIN and CREATE
FUNCTION statements, adjusting the .so suffix for your platform as necessary:

1220

Version Tokens

INSTALL PLUGIN version_tokens SONAME 'version_token.so';
CREATE FUNCTION version_tokens_set RETURNS STRING
  SONAME 'version_token.so';
CREATE FUNCTION version_tokens_show RETURNS STRING
  SONAME 'version_token.so';
CREATE FUNCTION version_tokens_edit RETURNS STRING
  SONAME 'version_token.so';
CREATE FUNCTION version_tokens_delete RETURNS STRING
  SONAME 'version_token.so';
CREATE FUNCTION version_tokens_lock_shared RETURNS INT
  SONAME 'version_token.so';
CREATE FUNCTION version_tokens_lock_exclusive RETURNS INT
  SONAME 'version_token.so';
CREATE FUNCTION version_tokens_unlock RETURNS INT
  SONAME 'version_token.so';

You must install the functions to manage the server's version token list, but you must also install the
plugin because the functions do not work correctly without it.

If the plugin and functions are used on a replication source server, install them on all replica servers as
well to avoid replication problems.

Once installed as just described, the plugin and functions remain installed until uninstalled. To remove
them, use the UNINSTALL PLUGIN and DROP FUNCTION statements:

UNINSTALL PLUGIN version_tokens;
DROP FUNCTION version_tokens_set;
DROP FUNCTION version_tokens_show;
DROP FUNCTION version_tokens_edit;
DROP FUNCTION version_tokens_delete;
DROP FUNCTION version_tokens_lock_shared;
DROP FUNCTION version_tokens_lock_exclusive;
DROP FUNCTION version_tokens_unlock;

7.6.6.3 Using Version Tokens

Before using Version Tokens, install it according to the instructions provided at Section 7.6.6.2,
“Installing or Uninstalling Version Tokens”.

A scenario in which Version Tokens can be useful is a system that accesses a collection of MySQL
servers but needs to manage them for load balancing purposes by monitoring them and adjusting
server assignments according to load changes. Such a system comprises these elements:

• The collection of MySQL servers to be managed.

• An administrative or management application that communicates with the servers and organizes

them into high-availability groups. Groups serve different purposes, and servers within each group
may have different assignments. Assignment of a server within a certain group can change at any
time.

• Client applications that access the servers to retrieve and update data, choosing servers according
to the purposes assigned them. For example, a client should not send an update to a read-only
server.

Version Tokens permit server access to be managed according to assignment without requiring clients
to repeatedly query the servers about their assignments:

• The management application performs server assignments and establishes version tokens on each
server to reflect its assignment. The application caches this information to provide a central access
point to it.

If at some point the management application needs to change a server assignment (for example, to
change it from permitting writes to read only), it changes the server's version token list and updates
its cache.

1221

Version Tokens

• To improve performance, client applications obtain cache information from the management

application, enabling them to avoid having to retrieve information about server assignments for each
statement. Based on the type of statements it issues (for example, reads versus writes), a client
selects an appropriate server and connects to it.

• In addition, the client sends to the server its own client-specific version tokens to register the

assignment it requires of the server. For each statement sent by the client to the server, the server
compares its own token list with the client token list. If the server token list contains all tokens
present in the client token list with the same values, there is a match and the server executes the
statement.

On the other hand, perhaps the management application has changed the server assignment and its
version token list. In this case, the new server assignment may now be incompatible with the client
requirements. A token mismatch between the server and client token lists occurs and the server
returns an error in reply to the statement. This is an indication to the client to refresh its version token
information from the management application cache, and to select a new server to communicate
with.

The client-side logic for detecting version token errors and selecting a new server can be implemented
different ways:

• The client can handle all version token registration, mismatch detection, and connection switching

itself.

• The logic for those actions can be implemented in a connector that manages connections between

clients and MySQL servers. Such a connector might handle mismatch error detection and statement
resending itself, or it might pass the error to the application and leave it to the application to resend
the statement.

The following example illustrates the preceding discussion in more concrete form.

When Version Tokens initializes on a given server, the server's version token list is empty. Token
list maintenance is performed by calling functions. The VERSION_TOKEN_ADMIN privilege (or the
deprecated SUPER privilege) is required to call any of the Version Token functions, so token list
modification is expected to be done by a management or administrative application that has that
privilege.

Suppose that a management application communicates with a set of servers that are queried by clients
to access employee and product databases (named emp and prod, respectively). All servers are
permitted to process data retrieval statements, but only some of them are permitted to make database
updates. To handle this on a database-specific basis, the management application establishes a list
of version tokens on each server. In the token list for a given server, token names represent database
names and token values are read or write depending on whether the database must be used in
read-only fashion or whether it can take reads and writes.

Client applications register a list of version tokens they require the server to match by setting a system
variable. Variable setting occurs on a client-specific basis, so different clients can register different
requirements. By default, the client token list is empty, which matches any server token list. When a
client sets its token list to a nonempty value, matching may succeed or fail, depending on the server
version token list.

To define the version token list for a server, the management application calls the
version_tokens_set() function. (There are also functions for modifying and displaying the token
list, described later.) For example, the application might send these statements to a group of three
servers:

Server 1:

mysql> SELECT version_tokens_set('emp=read;prod=read');
+------------------------------------------+
| version_tokens_set('emp=read;prod=read') |

1222

Version Tokens

+------------------------------------------+
| 2 version tokens set.                    |
+------------------------------------------+

Server 2:

mysql> SELECT version_tokens_set('emp=write;prod=read');
+-------------------------------------------+
| version_tokens_set('emp=write;prod=read') |
+-------------------------------------------+
| 2 version tokens set.                     |
+-------------------------------------------+

Server 3:

mysql> SELECT version_tokens_set('emp=read;prod=write');
+-------------------------------------------+
| version_tokens_set('emp=read;prod=write') |
+-------------------------------------------+
| 2 version tokens set.                     |
+-------------------------------------------+

The token list in each case is specified as a semicolon-separated list of name=value pairs. The
resulting token list values result in these server assignments:

• Any server accepts reads for either database.

• Only server 2 accepts updates for the emp database.

• Only server 3 accepts updates for the prod database.

In addition to assigning each server a version token list, the management application also maintains a
cache that reflects the server assignments.

Before communicating with the servers, a client application contacts the management application
and retrieves information about server assignments. Then the client selects a server based on those
assignments. Suppose that a client wants to perform both reads and writes on the emp database.
Based on the preceding assignments, only server 2 qualifies. The client connects to server 2 and
registers its server requirements there by setting its version_tokens_session system variable:

mysql> SET @@SESSION.version_tokens_session = 'emp=write';

For subsequent statements sent by the client to server 2, the server compares its own version token list
to the client list to check whether they match. If so, statements execute normally:

mysql> UPDATE emp.employee SET salary = salary * 1.1 WHERE id = 4981;
Query OK, 1 row affected (0.07 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql> SELECT last_name, first_name FROM emp.employee WHERE id = 4981;
+-----------+------------+
| last_name | first_name |
+-----------+------------+
| Smith     | Abe        |
+-----------+------------+
1 row in set (0.01 sec)

Discrepancies between the server and client version token lists can occur two ways:

• A token name in the version_tokens_session value is not present in the server token list. In this

case, an ER_VTOKEN_PLUGIN_TOKEN_NOT_FOUND error occurs.

• A token value in the version_tokens_session value differs from the value of the corresponding

token in the server token list. In this case, an ER_VTOKEN_PLUGIN_TOKEN_MISMATCH error occurs.

As long as the assignment of server 2 does not change, the client continues to use it for reads
and writes. But suppose that the management application wants to change server assignments so

1223

Version Tokens

that writes for the emp database must be sent to server 1 instead of server 2. To do this, it uses
version_tokens_edit() to modify the emp token value on the two servers (and updates its cache
of server assignments):

Server 1:

mysql> SELECT version_tokens_edit('emp=write');
+----------------------------------+
| version_tokens_edit('emp=write') |
+----------------------------------+
| 1 version tokens updated.        |
+----------------------------------+

Server 2:

mysql> SELECT version_tokens_edit('emp=read');
+---------------------------------+
| version_tokens_edit('emp=read') |
+---------------------------------+
| 1 version tokens updated.       |
+---------------------------------+

version_tokens_edit() modifies the named tokens in the server token list and leaves other tokens
unchanged.

The next time the client sends a statement to server 2, its own token list no longer matches the server
token list and an error occurs:

mysql> UPDATE emp.employee SET salary = salary * 1.1 WHERE id = 4982;
ERROR 3136 (42000): Version token mismatch for emp. Correct value read

In this case, the client should contact the management application to obtain updated information about
server assignments, select a new server, and send the failed statement to the new server.

Note

Each client must cooperate with Version Tokens by sending only statements in
accordance with the token list that it registers with a given server. For example,
if a client registers a token list of 'emp=read', there is nothing in Version
Tokens to prevent the client from sending updates for the emp database. The
client itself must refrain from doing so.

For each statement received from a client, the server implicitly uses locking, as follows:

• Take a shared lock for each token named in the client token list (that is, in the

version_tokens_session value)

• Perform the comparison between the server and client token lists

• Execute the statement or produce an error depending on the comparison result

• Release the locks

The server uses shared locks so that comparisons for multiple sessions can occur without blocking,
while preventing changes to the tokens for any session that attempts to acquire an exclusive lock
before it manipulates tokens of the same names in the server token list.

The preceding example uses only a few of the functions included in the Version Tokens plugin library,
but there are others. One set of functions permits the server's list of version tokens to be manipulated
and inspected. Another set of functions permits version tokens to be locked and unlocked.

These functions permit the server's list of version tokens to be created, changed, removed, and
inspected:

1224

Version Tokens

• version_tokens_set() completely replaces the current list and assigns a new list. The argument

is a semicolon-separated list of name=value pairs.

• version_tokens_edit() enables partial modifications to the current list. It can add new tokens

or change the values of existing tokens. The argument is a semicolon-separated list of name=value
pairs.

• version_tokens_delete() deletes tokens from the current list. The argument is a semicolon-

separated list of token names.

• version_tokens_show() displays the current token list. It takes no argument.

Each of those functions, if successful, returns a binary string indicating what action occurred. The
following example establishes the server token list, modifies it by adding a new token, deletes some
tokens, and displays the resulting token list:

mysql> SELECT version_tokens_set('tok1=a;tok2=b');
+-------------------------------------+
| version_tokens_set('tok1=a;tok2=b') |
+-------------------------------------+
| 2 version tokens set.               |
+-------------------------------------+
mysql> SELECT version_tokens_edit('tok3=c');
+-------------------------------+
| version_tokens_edit('tok3=c') |
+-------------------------------+
| 1 version tokens updated.     |
+-------------------------------+
mysql> SELECT version_tokens_delete('tok2;tok1');
+------------------------------------+
| version_tokens_delete('tok2;tok1') |
+------------------------------------+
| 2 version tokens deleted.          |
+------------------------------------+
mysql> SELECT version_tokens_show();
+-----------------------+
| version_tokens_show() |
+-----------------------+
| tok3=c;               |
+-----------------------+

Warnings occur if a token list is malformed:

mysql> SELECT version_tokens_set('tok1=a; =c');
+----------------------------------+
| version_tokens_set('tok1=a; =c') |
+----------------------------------+
| 1 version tokens set.            |
+----------------------------------+
1 row in set, 1 warning (0.00 sec)

mysql> SHOW WARNINGS\G
*************************** 1. row ***************************
  Level: Warning
   Code: 42000
Message: Invalid version token pair encountered. The list provided
         is only partially updated.
1 row in set (0.00 sec)

As mentioned previously, version tokens are defined using a semicolon-separated list of name=value
pairs. Consider this invocation of version_tokens_set():

mysql> SELECT version_tokens_set('tok1=b;;; tok2= a = b ; tok1 = 1\'2 3"4')
+---------------------------------------------------------------+
| version_tokens_set('tok1=b;;; tok2= a = b ; tok1 = 1\'2 3"4') |
+---------------------------------------------------------------+
| 3 version tokens set.                                         |
+---------------------------------------------------------------+

Version Tokens interprets the argument as follows:

1225

Version Tokens

• Whitespace around names and values is ignored. Whitespace within names and values is permitted.
(For version_tokens_delete(), which takes a list of names without values, whitespace around
names is ignored.)

• There is no quoting mechanism.

• Order of tokens is not significant except that if a token list contains multiple instances of a given

token name, the last value takes precedence over earlier values.

Given those rules, the preceding version_tokens_set() call results in a token list with
two tokens: tok1 has the value 1'2 3"4, and tok2 has the value a = b. To verify this, call
version_tokens_show():

mysql> SELECT version_tokens_show();
+--------------------------+
| version_tokens_show()    |
+--------------------------+
| tok2=a = b;tok1=1'2 3"4; |
+--------------------------+

If the token list contains two tokens, why did version_tokens_set() return the value 3 version
tokens set? That occurred because the original token list contained two definitions for tok1, and the
second definition replaced the first.

The Version Tokens token-manipulation functions place these constraints on token names and values:

• Token names cannot contain = or ; characters and have a maximum length of 64 characters.

• Token values cannot contain ; characters. Length of values is constrained by the value of the

max_allowed_packet system variable.

• Version Tokens treats token names and values as binary strings, so comparisons are case-sensitive.

Version Tokens also includes a set of functions enabling tokens to be locked and unlocked:

• version_tokens_lock_exclusive() acquires exclusive version token locks. It takes a list of

one or more lock names and a timeout value.

• version_tokens_lock_shared() acquires shared version token locks. It takes a list of one or

more lock names and a timeout value.

• version_tokens_unlock() releases version token locks (exclusive and shared). It takes no

argument.

Each locking function returns nonzero for success. Otherwise, an error occurs:

mysql> SELECT version_tokens_lock_shared('lock1', 'lock2', 0);
+-------------------------------------------------+
| version_tokens_lock_shared('lock1', 'lock2', 0) |
+-------------------------------------------------+
|                                               1 |
+-------------------------------------------------+

mysql> SELECT version_tokens_lock_shared(NULL, 0);
ERROR 3131 (42000): Incorrect locking service lock name '(null)'.

Locking using Version Tokens locking functions is advisory; applications must agree to cooperate.

It is possible to lock nonexisting token names. This does not create the tokens.

Note

Version Tokens locking functions are based on the locking service described at
Section 7.6.9.1, “The Locking Service”, and thus have the same semantics for
shared and exclusive locks. (Version Tokens uses the locking service routines
built into the server, not the locking service function interface, so those functions

1226

Version Tokens

need not be installed to use Version Tokens.) Locks acquired by Version
Tokens use a locking service namespace of version_token_locks. Locking
service locks can be monitored using the Performance Schema, so this is also
true for Version Tokens locks. For details, see Locking Service Monitoring.

For the Version Tokens locking functions, token name arguments are used exactly as specified.
Surrounding whitespace is not ignored and = and ; characters are permitted. This is because Version
Tokens simply passes the token names to be locked as is to the locking service.

7.6.6.4 Version Tokens Reference

The following discussion serves as a reference to these Version Tokens elements:

• Version Tokens Functions

• Version Tokens System Variables

Version Tokens Functions

The Version Tokens plugin library includes several functions. One set of functions permits the server's
list of version tokens to be manipulated and inspected. Another set of functions permits version tokens
to be locked and unlocked. The VERSION_TOKEN_ADMIN privilege (or the deprecated SUPER privilege)
is required to invoke any Version Tokens function.

The following functions permit the server's list of version tokens to be created, changed, removed, and
inspected. Interpretation of name_list and token_list arguments (including whitespace handling)
occurs as described in Section 7.6.6.3, “Using Version Tokens”, which provides details about the
syntax for specifying tokens, as well as additional examples.

• version_tokens_delete(name_list)

Deletes tokens from the server's list of version tokens using the name_list argument and returns a
binary string that indicates the outcome of the operation. name_list is a semicolon-separated list of
version token names to delete.

mysql> SELECT version_tokens_delete('tok1;tok3');
+------------------------------------+
| version_tokens_delete('tok1;tok3') |
+------------------------------------+
| 2 version tokens deleted.          |
+------------------------------------+

An argument of NULL is treated as an empty string, which has no effect on the token list.

version_tokens_delete() deletes the tokens named in its argument, if they exist. (It is not an
error to delete nonexisting tokens.) To clear the token list entirely without knowing which tokens are
in the list, pass NULL or a string containing no tokens to version_tokens_set():

mysql> SELECT version_tokens_set(NULL);
+------------------------------+
| version_tokens_set(NULL)     |
+------------------------------+
| Version tokens list cleared. |
+------------------------------+
mysql> SELECT version_tokens_set('');
+------------------------------+
| version_tokens_set('')       |
+------------------------------+
| Version tokens list cleared. |
+------------------------------+

• version_tokens_edit(token_list)

Modifies the server's list of version tokens using the token_list argument and returns a binary
string that indicates the outcome of the operation. token_list is a semicolon-separated list of

1227

Version Tokens

name=value pairs specifying the name of each token to be defined and its value. If a token exists,
its value is updated with the given value. If a token does not exist, it is created with the given value. If
the argument is NULL or a string containing no tokens, the token list remains unchanged.

mysql> SELECT version_tokens_set('tok1=value1;tok2=value2');
+-----------------------------------------------+
| version_tokens_set('tok1=value1;tok2=value2') |
+-----------------------------------------------+
| 2 version tokens set.                         |
+-----------------------------------------------+
mysql> SELECT version_tokens_edit('tok2=new_value2;tok3=new_value3');
+--------------------------------------------------------+
| version_tokens_edit('tok2=new_value2;tok3=new_value3') |
+--------------------------------------------------------+
| 2 version tokens updated.                              |
+--------------------------------------------------------+

• version_tokens_set(token_list)

Replaces the server's list of version tokens with the tokens defined in the token_list argument
and returns a binary string that indicates the outcome of the operation. token_list is a semicolon-
separated list of name=value pairs specifying the name of each token to be defined and its value. If
the argument is NULL or a string containing no tokens, the token list is cleared.

mysql> SELECT version_tokens_set('tok1=value1;tok2=value2');
+-----------------------------------------------+
| version_tokens_set('tok1=value1;tok2=value2') |
+-----------------------------------------------+
| 2 version tokens set.                         |
+-----------------------------------------------+

• version_tokens_show()

Returns the server's list of version tokens as a binary string containing a semicolon-separated list of
name=value pairs.

mysql> SELECT version_tokens_show();
+--------------------------+
| version_tokens_show()    |
+--------------------------+
| tok2=value2;tok1=value1; |
+--------------------------+

The following functions permit version tokens to be locked and unlocked:

• version_tokens_lock_exclusive(token_name[, token_name] ..., timeout)

Acquires exclusive locks on one or more version tokens, specified by name as strings, timing out
with an error if the locks are not acquired within the given timeout value.

mysql> SELECT version_tokens_lock_exclusive('lock1', 'lock2', 10);
+-----------------------------------------------------+
| version_tokens_lock_exclusive('lock1', 'lock2', 10) |
+-----------------------------------------------------+
|                                                   1 |
+-----------------------------------------------------+

• version_tokens_lock_shared(token_name[, token_name] ..., timeout)

Acquires shared locks on one or more version tokens, specified by name as strings, timing out with
an error if the locks are not acquired within the given timeout value.

mysql> SELECT version_tokens_lock_shared('lock1', 'lock2', 10);
+--------------------------------------------------+
| version_tokens_lock_shared('lock1', 'lock2', 10) |
+--------------------------------------------------+
|                                                1 |
+--------------------------------------------------+

1228

Version Tokens

• version_tokens_unlock()

Releases all locks that were acquired within the current session using
version_tokens_lock_exclusive() and version_tokens_lock_shared().

mysql> SELECT version_tokens_unlock();
+-------------------------+
| version_tokens_unlock() |
+-------------------------+
|                       1 |
+-------------------------+

The locking functions share these characteristics:

• The return value is nonzero for success. Otherwise, an error occurs.

• Token names are strings.

• In contrast to argument handling for the functions that manipulate the server token list, whitespace

surrounding token name arguments is not ignored and = and ; characters are permitted.

• It is possible to lock nonexisting token names. This does not create the tokens.

• Timeout values are nonnegative integers representing the time in seconds to wait to acquire locks
before timing out with an error. If the timeout is 0, there is no waiting and the function produces an
error if locks cannot be acquired immediately.

• Version Tokens locking functions are based on the locking service described at Section 7.6.9.1, “The

Locking Service”.

Version Tokens System Variables

Version Tokens supports the following system variables. These variables are unavailable unless the
Version Tokens plugin is installed (see Section 7.6.6.2, “Installing or Uninstalling Version Tokens”).

System variables:

• version_tokens_session

Command-Line Format

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--version-tokens-session=value

version_tokens_session

Global, Session

Yes

No

String

NULL

The session value of this variable specifies the client version token list and indicates the tokens that
the client session requires the server version token list to have.

If the version_tokens_session variable is NULL (the default) or has an empty value, any server
version token list matches. (In effect, an empty value disables matching requirements.)

If the version_tokens_session variable has a nonempty value, any mismatch between its value
and the server version token list results in an error for any statement the session sends to the server.
A mismatch occurs under these conditions:

• A token name in the version_tokens_session value is not present in the server token list. In

this case, an ER_VTOKEN_PLUGIN_TOKEN_NOT_FOUND error occurs.

1229

Version Tokens

• A token value in the version_tokens_session value differs from the
value of the corresponding token in the server token list. In this case, an
ER_VTOKEN_PLUGIN_TOKEN_MISMATCH error occurs.

It is not a mismatch for the server version token list to include a token not named in the
version_tokens_session value.

Suppose that a management application has set the server token list as follows:

mysql> SELECT version_tokens_set('tok1=a;tok2=b;tok3=c');
+--------------------------------------------+
| version_tokens_set('tok1=a;tok2=b;tok3=c') |
+--------------------------------------------+
| 3 version tokens set.                      |
+--------------------------------------------+

A client registers the tokens it requires the server to match by setting its
version_tokens_session value. Then, for each subsequent statement sent by the client, the
server checks its token list against the client version_tokens_session value and produces an
error if there is a mismatch:

mysql> SET @@SESSION.version_tokens_session = 'tok1=a;tok2=b';
mysql> SELECT 1;
+---+
| 1 |
+---+
| 1 |
+---+

mysql> SET @@SESSION.version_tokens_session = 'tok1=b';
mysql> SELECT 1;
ERROR 3136 (42000): Version token mismatch for tok1. Correct value a

The first SELECT succeeds because the client tokens tok1 and tok2 are present in the server
token list and each token has the same value in the server list. The second SELECT fails because,
although tok1 is present in the server token list, it has a different value than specified by the client.

At this point, any statement sent by the client fails, unless the server token list changes such that it
matches again. Suppose that the management application changes the server token list as follows:

mysql> SELECT version_tokens_edit('tok1=b');
+-------------------------------+
| version_tokens_edit('tok1=b') |
+-------------------------------+
| 1 version tokens updated.     |
+-------------------------------+
mysql> SELECT version_tokens_show();
+-----------------------+
| version_tokens_show() |
+-----------------------+
| tok3=c;tok1=b;tok2=b; |
+-----------------------+

Now the client version_tokens_session value matches the server token list and the client can
once again successfully execute statements:

mysql> SELECT 1;
+---+
| 1 |
+---+
| 1 |
+---+

• version_tokens_session_number

Command-Line Format

--version-tokens-session-number=#

1230

The Clone Plugin

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

version_tokens_session_number

Global, Session

No

No

Integer

0

This variable is for internal use.

7.6.7 The Clone Plugin

The clone plugin, introduced in MySQL 8.0.17, permits cloning data locally or from a remote MySQL
server instance. Cloned data is a physical snapshot of data stored in InnoDB that includes schemas,
tables, tablespaces, and data dictionary metadata. The cloned data comprises a fully functional data
directory, which permits using the clone plugin for MySQL server provisioning.

Figure 7.1 Local Cloning Operation

A local cloning operation clones data from the MySQL server instance where the cloning operation is
initiated to a directory on the same server or node where MySQL server instance runs.

Figure 7.2 Remote Cloning Operation

A remote cloning operation involves a local MySQL server instance (the “recipient”) where the cloning
operation is initiated, and a remote MySQL server instance (the “donor”) where the source data is

1231

The Clone Plugin

located. When a remote cloning operation is initiated on the recipient, cloned data is transferred over
the network from the donor to the recipient. By default, a remote cloning operation removes existing
user-created data (schemas, tables, tablespaces) and binary logs from the recipient data directory
before cloning data from the donor. Optionally, you can clone data to a different directory on the
recipient to avoid removing data from the current recipient data directory.

There is no difference with respect to data that is cloned by a local cloning operation as compared to a
remote cloning operation. Both operations clone the same set of data.

The clone plugin supports replication. In addition to cloning data, a cloning operation extracts and
transfers replication coordinates from the donor and applies them on the recipient, which enables
using the clone plugin for provisioning Group Replication members and replicas. Using the clone
plugin for provisioning is considerably faster and more efficient than replicating a large number of
transactions (see Section 7.6.7.7, “Cloning for Replication”). Group Replication members can also be
configured to use the clone plugin as an alternative method of recovery, so that members automatically
choose the most efficient way to retrieve group data from seed members. For more information, see
Section 20.5.4.2, “Cloning for Distributed Recovery”.

The clone plugin supports cloning of encrypted and page-compressed data. See Section 7.6.7.5,
“Cloning Encrypted Data”, and Section 7.6.7.6, “Cloning Compressed Data”.

The clone plugin must be installed before you can use it. For installation instructions, see
Section 7.6.7.1, “Installing the Clone Plugin”. For cloning instructions, see Section 7.6.7.2, “Cloning
Data Locally”, and Section 7.6.7.3, “Cloning Remote Data”.

Performance Schema tables and instrumentation are provided for monitoring cloning operations. See
Section 7.6.7.10, “Monitoring Cloning Operations”.

7.6.7.1 Installing the Clone Plugin

This section describes how to install and configure the clone plugin. For remote cloning operations, the
clone plugin must be installed on the donor and recipient MySQL server instances.

For general information about installing or uninstalling plugins, see Section 7.6.1, “Installing and
Uninstalling Plugins”.

To be usable by the server, the plugin library file must be located in the MySQL plugin directory (the
directory named by the plugin_dir system variable). If necessary, set the value of plugin_dir at
server startup to tell the server the plugin directory location.

The plugin library file base name is mysql_clone.so. The file name suffix differs by platform (for
example, .so for Unix and Unix-like systems, .dll for Windows).

To load the plugin at server startup, use the --plugin-load-add option to name the library file that
contains it. With this plugin-loading method, the option must be given each time the server starts. For
example, put these lines in your my.cnf file, adjusting the plugin library file name extension for your
platform as necessary. (The plugin library file name extension depends on your platform. Common
suffixes are .so for Unix and Unix-like systems, .dll for Windows.)

[mysqld]
plugin-load-add=mysql_clone.so

After modifying my.cnf, restart the server to cause the new settings to take effect.

Note

The --plugin-load-add option cannot be used to load the clone plugin
when restarting the server during an upgrade from a previous MySQL
version. For example, after upgrading binaries or packages from MySQL

1232

The Clone Plugin

5.7 to MySQL 8.0, attempting to restart the server with plugin-load-
add=mysql_clone.so causes this error: [ERROR] [MY-013238]
[Server] Error installing plugin 'clone': Cannot install
during upgrade. The workaround is to upgrade the server before attempting
to start the server with plugin-load-add=mysql_clone.so.

Alternatively, to load the plugin at runtime, use this statement, adjusting the .so suffix for your platform
as necessary:

INSTALL PLUGIN clone SONAME 'mysql_clone.so';

INSTALL PLUGIN loads the plugin, and also registers it in the mysql.plugins system table to cause
the plugin to be loaded for each subsequent normal server startup without the need for --plugin-
load-add.

To verify plugin installation, examine the Information Schema PLUGINS table or use the SHOW
PLUGINS statement (see Section 7.6.2, “Obtaining Server Plugin Information”). For example:

mysql> SELECT PLUGIN_NAME, PLUGIN_STATUS
       FROM INFORMATION_SCHEMA.PLUGINS
       WHERE PLUGIN_NAME = 'clone';
+------------------------+---------------+
| PLUGIN_NAME            | PLUGIN_STATUS |
+------------------------+---------------+
| clone                  | ACTIVE        |
+------------------------+---------------+

If the plugin fails to initialize, check the server error log for clone or plugin-related diagnostic messages.

If the plugin has been previously registered with INSTALL PLUGIN or is loaded with --plugin-
load-add, you can use the --clone option at server startup to control the plugin activation state. For
example, to load the plugin at startup and prevent it from being removed at runtime, use these options:

[mysqld]
plugin-load-add=mysql_clone.so
clone=FORCE_PLUS_PERMANENT

If you want to prevent the server from running without the clone plugin, use --clone with a value
of FORCE or FORCE_PLUS_PERMANENT to force server startup to fail if the plugin does not initialize
successfully.

For more information about plugin activation states, see Controlling Plugin Activation State.

7.6.7.2 Cloning Data Locally

The clone plugin supports the following syntax for cloning data locally; that is, cloning data from the
local MySQL data directory to another directory on the same server or node where the MySQL server
instance runs:

CLONE LOCAL DATA DIRECTORY [=] 'clone_dir';

To use CLONE syntax, the clone plugin must be installed. For installation instructions, see
Section 7.6.7.1, “Installing the Clone Plugin”.

The BACKUP_ADMIN privilege is required to execute CLONE LOCAL DATA DIRECTORY statements.

mysql> GRANT BACKUP_ADMIN ON *.* TO 'clone_user';

where clone_user is the MySQL user that performs the cloning operation. The user you select to
perform the cloning operation can be any MySQL user with the BACKUP_ADMIN privilege on *.*.

The following example demonstrates cloning data locally:

1233

The Clone Plugin

mysql> CLONE LOCAL DATA DIRECTORY = '/path/to/clone_dir';

where /path/to/clone_dir is the full path of the local directory that data is cloned to. An absolute
path is required, and the specified directory (“clone_dir”) must not exist, but the specified path must
be an existent path. The MySQL server must have the necessary write access to create the directory.

Note

A local cloning operation does not support cloning of user-created tables or
tablespaces that reside outside of the data directory. Attempting to clone such
tables or tablespaces causes the following error: ERROR 1086 (HY000):
File '/path/to/tablespace_name.ibd' already exists. Cloning a
tablespace with the same path as the source tablespace would cause a conflict
and is therefore prohibited.

All other user-created InnoDB tables and tablespaces, the InnoDB system
tablespace, redo logs, and undo tablespaces are cloned to the specified
directory.

If desired, you can start the MySQL server on the cloned directory after the cloning operation is
complete.

$> mysqld_safe --datadir=clone_dir

where clone_dir is the directory that data was cloned to.

For information about monitoring cloning operation status and progress, see Section 7.6.7.10,
“Monitoring Cloning Operations”.

7.6.7.3 Cloning Remote Data

The clone plugin supports the following syntax for cloning remote data; that is, cloning data from a
remote MySQL server instance (the donor) and transferring it to the MySQL instance where the cloning
operation was initiated (the recipient).

CLONE INSTANCE FROM 'user'@'host':port
IDENTIFIED BY 'password'
[DATA DIRECTORY [=] 'clone_dir']
[REQUIRE [NO] SSL];

where:

• user is the clone user on the donor MySQL server instance.

• password is the user password.

• host is the hostname address of the donor MySQL server instance. Internet Protocol version 6

(IPv6) address format is not supported. An alias to the IPv6 address can be used instead. An IPv4
address can be used as is.

• port is the port number of the donor MySQL server instance. (The X Protocol port specified by
mysqlx_port is not supported. Connecting to the donor MySQL server instance through MySQL
Router is also not supported.)

• DATA DIRECTORY [=] 'clone_dir' is an optional clause used to specify a directory on the
recipient for the data you are cloning. Use this option if you do not want to remove existing user-
created data (schemas, tables, tablespaces) and binary logs from the recipient data directory.
An absolute path is required, and the directory must not exist. The MySQL server must have the
necessary write access to create the directory.

When the optional DATA DIRECTORY [=] 'clone_dir' clause is not used, a cloning operation
removes user-created data (schemas, tables, tablespaces) and binary logs from the recipient data

1234

The Clone Plugin

directory, clones the new data to the recipient data directory, and automatically restarts the server
afterward.

• [REQUIRE [NO] SSL] explicitly specifies whether an encrypted connection is to be used or not
when transferring cloned data over the network. An error is returned if the explicit specification
cannot be satisfied. If an SSL clause is not specified, clone attempts to establish an encrypted
connection by default, falling back to an insecure connection if the secure connection attempt fails.
A secure connection is required when cloning encrypted data regardless of whether this clause is
specified. For more information, see Configuring an Encrypted Connection for Cloning.

Note

By default, user-created InnoDB tables and tablespaces that reside in the
data directory on the donor MySQL server instance are cloned to the data
directory on the recipient MySQL server instance. If the DATA DIRECTORY [=]
'clone_dir' clause is specified, they are cloned to the specified directory.

User-created InnoDB tables and tablespaces that reside outside of the data
directory on the donor MySQL server instance are cloned to the same path
on the recipient MySQL server instance. An error is reported if a table or
tablespace already exists.

By default, the InnoDB system tablespace, redo logs, and undo tablespaces
are cloned to the same locations that are configured on the donor (as
defined by innodb_data_home_dir and innodb_data_file_path,
innodb_log_group_home_dir, and innodb_undo_directory,
respectively). If the DATA DIRECTORY [=] 'clone_dir' clause is specified,
those tablespaces and logs are cloned to the specified directory.

Remote Cloning Prerequisites

To perform a cloning operation, the clone plugin must be active on both the donor and recipient MySQL
server instances. For installation instructions, see Section 7.6.7.1, “Installing the Clone Plugin”.

A MySQL user on the donor and recipient is required for executing the cloning operation (the “clone
user”).

• On the donor, the clone user requires the BACKUP_ADMIN privilege for accessing and transferring
data from the donor and blocking concurrent DDL during the cloning operation. Concurrent DDL
during the cloning operation is blocked on the donor prior to MySQL 8.0.27. From MySQL 8.0.27,
concurrent DDL is permitted on the donor by default. See Section 7.6.7.4, “Cloning and Concurrent
DDL”.

• On the recipient, the clone user requires the CLONE_ADMIN privilege for replacing recipient data,

blocking DDL on the recipient during the cloning operation, and automatically restarting the server.
The CLONE_ADMIN privilege includes BACKUP_ADMIN and SHUTDOWN privileges implicitly.

Instructions for creating the clone user and granting the required privileges are included in the remote
cloning example that follows this prerequisite information.

The following prerequisites are checked when the CLONE INSTANCE statement is executed:

• The clone plugin is supported in MySQL 8.0.17 and higher. The donor and recipient must be the

same MySQL server series, such as 8.0.37 and 8.0.41. They must also be the same point release for
versions before 8.0.37.

mysql> SHOW VARIABLES LIKE 'version';
 +---------------+--------+
| Variable_name | Value  |
+---------------+--------+
| version       | 8.0.42 |
+---------------+--------+

1235

The Clone Plugin

Cloning from a donor MySQL server instance to a hotfix MySQL server instance of the same version
and release is supported as of MySQL 8.0.26.

Cloning from different point releases within a series is supported as of MySQL 8.0.37. Previous
restrictions still apply to versions older than 8.0.37. For example, cloning 8.0.36 to 8.0.42 or vice-
versa is not permitted.

• The donor and recipient MySQL server instances must run on the same operating system and

platform. For example, if the donor instance runs on a Linux 64-bit platform, the recipient instance
must also run on that platform. Refer to your operating system documentation for information about
how to determine your operating system platform.

• The recipient must have enough disk space for the cloned data. By default, user-created data

(schemas, tables, tablespaces) and binary logs are removed on the recipient prior to cloning the
donor data, so you only require enough space for the donor data. If you clone to a named directory
using the DATA DIRECTORY clause, you must have enough disk space for the existing recipient
data and the cloned data. You can estimate the size of your data by checking the data directory size
on your file system and the size of any tablespaces that reside outside of the data directory. When
estimating data size on the donor, remember that only InnoDB data is cloned. If you store data in
other storage engines, adjust your data size estimate accordingly.

• InnoDB permits creating some tablespace types outside of the data directory. If the donor MySQL

server instance has tablespaces that reside outside of the data directory, the cloning operation must
be able access those tablespaces. You can query the Information Schema FILES table to identify
tablespaces that reside outside of the data directory. Files that reside outside of the data directory
have a fully qualified path to a directory other than the data directory.

mysql> SELECT FILE_NAME FROM INFORMATION_SCHEMA.FILES;

• Plugins that are active on the donor, including any keyring plugin, must also be active on the

recipient. You can identify active plugins by issuing a SHOW PLUGINS statement or by querying the
Information Schema PLUGINS table.

• The donor and recipient must have the same MySQL server character set and collation. For

information about MySQL server character set and collation configuration, see Section 12.15,
“Character Set Configuration”.

• The same innodb_page_size and innodb_data_file_path settings are required on the donor

and recipient. The innodb_data_file_path setting on the donor and recipient must specify
the same number of data files of an equivalent size. You can check variable settings using SHOW
VARIABLES syntax.

mysql> SHOW VARIABLES LIKE 'innodb_page_size';
mysql> SHOW VARIABLES LIKE 'innodb_data_file_path';

• If cloning encrypted or page-compressed data, the donor and recipient must have the same file

system block size. For page-compressed data, the recipient file system must support sparse files
and hole punching for hole punching to occur on the recipient. For information about these features
and how to identify tables and tablespaces that use them, see Section 7.6.7.5, “Cloning Encrypted
Data”, and Section 7.6.7.6, “Cloning Compressed Data”. To determine your file system block size,
refer to your operating system documentation.

• A secure connection is required if you are cloning encrypted data. See Configuring an Encrypted

Connection for Cloning.

• The clone_valid_donor_list setting on the recipient must include the host address of the donor
MySQL server instance. You can only clone data from a host on the valid donor list. A MySQL user
with the SYSTEM_VARIABLES_ADMIN privilege is required to configure this variable. Instructions
for setting the clone_valid_donor_list variable are provided in the remote cloning example
that follows this section. You can check the clone_valid_donor_list setting using SHOW
VARIABLES syntax.

1236

The Clone Plugin

mysql> SHOW VARIABLES LIKE 'clone_valid_donor_list';

• There must be no other cloning operation running. Only a single cloning operation is permitted at a
time. To determine if a clone operation is running, query the clone_status table. See Monitoring
Cloning Operations using Performance Schema Clone Tables.

• The clone plugin transfers data in 1MB packets plus metadata. The minimum required

max_allowed_packet value is therefore 2MB on the donor and the recipient MySQL server
instances. A max_allowed_packet value less than 2MB results in an error. Use the following
query to check your max_allowed_packet setting:

mysql> SHOW VARIABLES LIKE 'max_allowed_packet';

The following prerequisites also apply:

• Undo tablespace file names on the donor must be unique. When data is cloned to the recipient, undo
tablespaces, regardless of their location on the donor, are cloned to the innodb_undo_directory
location on the recipient or to the directory specified by the DATA DIRECTORY [=] 'clone_dir'
clause, if used. Duplicate undo tablespace file names on the donor are not permitted for this reason.
As of MySQL 8.0.18, an error is reported if duplicate undo tablespace file names are encountered
during a cloning operation. Prior to MySQL 8.0.18, cloning undo tablespaces with the same file name
could result in undo tablespace files being overwritten on the recipient.

To view undo tablespace file names on the donor to ensure that they are unique, query
INFORMATION_SCHEMA.FILES:

mysql> SELECT TABLESPACE_NAME, FILE_NAME FROM INFORMATION_SCHEMA.FILES
       WHERE FILE_TYPE LIKE 'UNDO LOG';

For information about dropping and adding undo tablespace files, see Section 17.6.3.4, “Undo
Tablespaces”.

• By default, the recipient MySQL server instance is restarted (stopped and started) automatically after
the data is cloned. For an automatic restart to occur, a monitoring process must be available on the
recipient to detect server shutdowns. Otherwise, the cloning operation halts with the following error
after the data is cloned, and the recipient MySQL server instance is shut down:

ERROR 3707 (HY000): Restart server failed (mysqld is not managed by supervisor process).

This error does not indicate a cloning failure. It means that the recipient MySQL server instance
must be started again manually after the data is cloned. After starting the server manually, you can
connect to the recipient MySQL server instance and check the Performance Schema clone tables to
verify that the cloning operation completed successfully (see Monitoring Cloning Operations using
Performance Schema Clone Tables.) The RESTART statement has the same monitoring process
requirement. For more information, see Section 15.7.8.8, “RESTART Statement”. This requirement
is not applicable if cloning to a named directory using the DATA DIRECTORY clause, as an automatic
restart is not performed in this case.

• Several variables control various aspects of a remote cloning operation. Before performing a remote

cloning operation, review the variables and adjust settings as necessary to suit your computing
environment. Clone variables are set on recipient MySQL server instance where the cloning
operation is executed. See Section 7.6.7.13, “Clone System Variables”.

Cloning Remote Data

The following example demonstrates cloning remote data. By default, a remote cloning operation
removes user-created data (schemas, tables, tablespaces) and binary logs on the recipient, clones the
new data to the recipient data directory, and restarts the MySQL server afterward.

The example assumes that remote cloning prerequisites are met. See Remote Cloning Prerequisites.

1. Login to the donor MySQL server instance with an administrative user account.

1237

The Clone Plugin

a. Create a clone user with the BACKUP_ADMIN privilege.

mysql> CREATE USER 'donor_clone_user'@'example.donor.host.com' IDENTIFIED BY 'password';
mysql> GRANT BACKUP_ADMIN on *.* to 'donor_clone_user'@'example.donor.host.com';

b.

Install the clone plugin:

mysql> INSTALL PLUGIN clone SONAME 'mysql_clone.so';

2. Login to the recipient MySQL server instance with an administrative user account.

a. Create a clone user with the CLONE_ADMIN privilege.

mysql> CREATE USER 'recipient_clone_user'@'example.recipient.host.com' IDENTIFIED BY 'password';
mysql> GRANT CLONE_ADMIN on *.* to 'recipient_clone_user'@'example.recipient.host.com';

b.

Install the clone plugin:

mysql> INSTALL PLUGIN clone SONAME 'mysql_clone.so';

c. Add the host address of the donor MySQL server instance to the clone_valid_donor_list

variable setting.

mysql> SET GLOBAL clone_valid_donor_list = 'example.donor.host.com:3306';

3. Log on to the recipient MySQL server instance as the clone user you created previously

(recipient_clone_user'@'example.recipient.host.com) and execute the CLONE
INSTANCE statement.

mysql> CLONE INSTANCE FROM 'donor_clone_user'@'example.donor.host.com':3306
       IDENTIFIED BY 'password';

After the data is cloned, the MySQL server instance on the recipient is restarted automatically.

For information about monitoring cloning operation status and progress, see Section 7.6.7.10,
“Monitoring Cloning Operations”.

Cloning to a Named Directory

By default, a remote cloning operation removes user-created data (schemas, tables, tablespaces)
and binary logs from the recipient data directory before cloning data from the donor MySQL Server
instance. By cloning to a named directory, you can avoid removing data from the current recipient data
directory.

The procedure for cloning to a named directory is the same procedure described in Cloning Remote
Data with one exception: The CLONE INSTANCE statement must include the DATA DIRECTORY
clause. For example:

mysql> CLONE INSTANCE FROM 'user'@'example.donor.host.com':3306
       IDENTIFIED BY 'password'
       DATA DIRECTORY = '/path/to/clone_dir';

An absolute path is required, and the directory must not exist. The MySQL server must have the
necessary write access to create the directory.

When cloning to a named directory, the recipient MySQL server instance is not restarted automatically
after the data is cloned. If you want to restart the MySQL server on the named directory, you must do
so manually:

$> mysqld_safe --datadir=/path/to/clone_dir

where /path/to/clone_dir is the path to the named directory on the recipient.

Configuring an Encrypted Connection for Cloning

1238

The Clone Plugin

You can configure an encrypted connection for remote cloning operations to protect data as it is cloned
over the network. An encrypted connection is required by default when cloning encrypted data. (see
Section 7.6.7.5, “Cloning Encrypted Data”.)

The instructions that follow describe how to configure the recipient MySQL server instance to use
an encrypted connection. It is assumed that the donor MySQL server instance is already configured
to use encrypted connections. If not, refer to Section 8.3.1, “Configuring MySQL to Use Encrypted
Connections” for server-side configuration instructions.

To configure the recipient MySQL server instance to use an encrypted connection:

1. Make the client certificate and key files of the donor MySQL server instance available to the

recipient host. Either distribute the files to the recipient host using a secure channel or place them
on a mounted partition that is accessible to the recipient host. The client certificate and key files to
make available include:

• ca.pem

The self-signed certificate authority (CA) file.

• client-cert.pem

The client public key certificate file.

• client-key.pem

The client private key file.

2. Configure the following SSL options on the recipient MySQL server instance.

• clone_ssl_ca

Specifies the path to the self-signed certificate authority (CA) file.

• clone_ssl_cert

Specifies the path to the client public key certificate file.

• clone_ssl_key

Specifies the path to the client private key file.

For example:

clone_ssl_ca=/path/to/ca.pem
clone_ssl_cert=/path/to/client-cert.pem
clone_ssl_key=/path/to/client-key.pem

3. To require that an encrypted connection is used, include the REQUIRE SSL clause when issuing

the CLONE statement on the recipient.

mysql> CLONE INSTANCE FROM 'user'@'example.donor.host.com':3306
       IDENTIFIED BY 'password'
       DATA DIRECTORY = '/path/to/clone_dir'
       REQUIRE SSL;

If an SSL clause is not specified, the clone plugin attempts to establish an encrypted connection by
default, falling back to an unencrypted connection if the encrypted connection attempt fails.

Note

If you are cloning encrypted data, an encrypted connection is required by
default regardless of whether the REQUIRE SSL clause is specified. Using
REQUIRE NO SSL causes an error if you attempt to clone encrypted data.

1239

The Clone Plugin

7.6.7.4 Cloning and Concurrent DDL

Prior to MySQL 8.0.27, DDL operations on the donor and recipient MySQL Server instances,
including TRUNCATE TABLE, are not permitted during a cloning operation. This limitation should be
considered when selecting data sources. A workaround is to use dedicated donor instances, which can
accommodate DDL operations being blocked while data is cloned.

To prevent concurrent DDL during a cloning operation, an exclusive backup lock is acquired on the
donor and recipient. The clone_ddl_timeout variable defines the time in seconds on the donor
and recipient that a cloning operation waits for a backup lock. The default setting is 300 seconds. If a
backup lock is not obtained with the specified time limit, the cloning operation fails with an error.

From MySQL 8.0.27, concurrent DDL is permitted on the donor by default. Concurrent DDL support on
the donor is controlled by the clone_block_ddl variable. Concurrent DDL support can be enabled
and disabled dynamically using a SET statement.

SET GLOBAL clone_block_ddl={OFF|ON}

The default setting is clone_block_ddl=OFF, which permits concurrent DDL on the donor.

Whether the effect of a concurrent DDL operation is cloned or not depends on whether the DDL
operation finishes before the dynamic snapshot is taken by the cloning operation.

DDL operations that are not permitted during a cloning operation regardless of the clone_block_ddl
setting include:

• ALTER TABLE tbl_name DISCARD TABLESPACE;

• ALTER TABLE tbl_name IMPORT TABLESPACE;

• ALTER INSTANCE DISABLE INNODB REDO_LOG;

7.6.7.5 Cloning Encrypted Data

Cloning of encrypted data is supported. The following requirements apply:

• A secure connection is required when cloning remote data to ensure safe transfer of unencrypted
tablespace keys over the network. Tablespace keys are decrypted at the donor before transport
and re-encrypted at the recipient using the recipient master key. An error is reported if an encrypted
connection is not available or the REQUIRE NO SSL clause is used in the CLONE INSTANCE
statement. For information about configuring an encrypted connection for cloning, see Configuring an
Encrypted Connection for Cloning.

• When cloning data to a local data directory that uses a locally managed keyring, the same keyring

must be used when starting the MySQL server on the clone directory.

• When cloning data to a remote data directory (the recipient directory) that uses a locally managed

keyring, the recipient keyring must be used when starting the MySQL sever on the cloned directory.

Note

The innodb_redo_log_encrypt and innodb_undo_log_encrypt
variable settings cannot be modified while a cloning operation is in progress.

For information about the data encryption feature, see Section 17.13, “InnoDB Data-at-Rest
Encryption”.

7.6.7.6 Cloning Compressed Data

Cloning of page-compressed data is supported. The following requirements apply when cloning remote
data:

1240

The Clone Plugin

• The recipient file system must support sparse files and hole punching for hole punching to occur on

the recipient.

• The donor and recipient file systems must have the same block size. If file system block sizes differ,
an error similar to the following is reported: ERROR 3868 (HY000): Clone Configuration FS
Block Size: Donor value: 114688 is different from Recipient value: 4096.

For information about the page compression feature, see Section 17.9.2, “InnoDB Page Compression”.

7.6.7.7 Cloning for Replication

The clone plugin supports replication. In addition to cloning data, a cloning operation extracts
replication coordinates from the donor and transfers them to the recipient, which enables using the
clone plugin for provisioning Group Replication members and replicas. Using the clone plugin for
provisioning is considerably faster and more efficient than replicating a large number of transactions.

Group Replication members can also be configured to use the clone plugin as an option for distributed
recovery, in which case joining members automatically choose the most efficient way to retrieve group
data from existing group members. For more information, see Section 20.5.4.2, “Cloning for Distributed
Recovery”.

During the cloning operation, both the binary log position (filename, offset) and the gtid_executed
GTID set are extracted and transferred from the donor MySQL server instance to the recipient. This
data permits initiating replication at a consistent position in the replication stream. The binary logs and
relay logs, which are held in files, are not copied from the donor to the recipient. To initiate replication,
the binary logs required for the recipient to catch up to the donor must not be purged between the
time that the data is cloned and the time that replication is started. If the required binary logs are not
available, a replication handshake error is reported. A cloned instance should therefore be added to
a replication group without excessive delay to avoid required binary logs being purged or the new
member lagging behind significantly, requiring more recovery time.

• Issue this query on a cloned MySQL server instance to check the binary log position that was

transferred to the recipient:

mysql> SELECT BINLOG_FILE, BINLOG_POSITION FROM performance_schema.clone_status;

• Issue this query on a cloned MySQL server instance to check the gtid_executed GTID set that

was transferred to the recipient:

mysql> SELECT @@GLOBAL.GTID_EXECUTED;

By default in MySQL 8.0, the replication metadata repositories are held in tables that are copied from
the donor to the recipient during the cloning operation. The replication metadata repositories hold
replication-related configuration settings that can be used to resume replication correctly after the
cloning operation.

• In MySQL 8.0.17 and 8.0.18, only the table mysql.slave_master_info (the connection metadata

repository) is copied.

• From MySQL 8.0.19, the tables mysql.slave_relay_log_info (the applier metadata repository)

and mysql.slave_worker_info (the applier worker metadata repository) are also copied.

For a list of what is included in each table, see Section 19.2.4.2, “Replication Metadata
Repositories”. Note that if the settings master_info_repository=FILE and
relay_log_info_repository=FILE are used on the server (which is not the default in MySQL 8.0
and is deprecated), the replication metadata repositories are not cloned; they are only cloned if TABLE
is set.

To clone for replication, perform the following steps:

1. For a new group member for Group Replication, first configure the MySQL Server instance for

Group Replication, following the instructions in Section 20.2.1.6, “Adding Instances to the Group”.

1241

The Clone Plugin

Also set up the prerequisites for cloning described in Section 20.5.4.2, “Cloning for Distributed
Recovery”. When you issue START GROUP_REPLICATION on the joining member, the cloning
operation is managed automatically by Group Replication, so you do not need to carry out the
operation manually, and you do not need to perform any further setup steps on the joining member.

2. For a replica in a source/replica MySQL replication topology, first clone the data from the donor
MySQL server instance to the recipient manually. The donor must be a source or replica in the
replication topology. For cloning instructions, see Section 7.6.7.3, “Cloning Remote Data”.

3. After the cloning operation completes successfully, if you want to use the same replication channels
on the recipient MySQL server instance that were present on the donor, verify which of them can
resume replication automatically in the source/replica MySQL replication topology, and which need
to be set up manually.

• For GTID-based replication, if the recipient is configured with gtid_mode=ON and has

cloned from a donor with gtid_mode=ON, ON_PERMISSIVE, or OFF_PERMISSIVE, the
gtid_executed GTID set from the donor is applied on the recipient. If the recipient is cloned
from a replica already in the topology, replication channels on the recipient that use GTID auto-
positioning can resume replication automatically after the cloning operation when the channel
is started. You do not need to perform any manual setup if you just want to use these same
channels.

• For binary log file position based replication, if the recipient is at MySQL 8.0.17 or 8.0.18,
the binary log position from the donor is not applied on the recipient, only recorded in the
Performance Schema clone_status table. Replication channels on the recipient that use
binary log file position based replication must therefore be set up manually to resume replication
after the cloning operation. Ensure that these channels are not configured to start replication
automatically at server startup, as they do not yet have the binary log position and attempt to
start replication from the beginning.

• For binary log file position based replication, if the recipient is at MySQL 8.0.19 or above,
the binary log position from the donor is applied on the recipient. Replication channels
on the recipient that use binary log file position based replication automatically attempt
to carry out the relay log recovery process, using the cloned relay log information, before
restarting replication. For a single-threaded replica (replica_parallel_workers or
slave_parallel_workers is set to 0), relay log recovery should succeed in the absence
of any other issues, enabling the channel to resume replication with no further setup. For
a multithreaded replica (replica_parallel_workers or slave_parallel_workers
is greater than 0), relay log recovery is likely to fail because it cannot usually be completed
automatically. In this case, an error message is issued, and you must set the channel up
manually.

4.

If you need to set up cloned replication channels manually, or want to use different replication
channels on the recipient, the following instructions provide a summary and abbreviated examples
for adding a recipient MySQL server instance to a replication topology. Also refer to the detailed
instructions that apply to your replication setup.

• To add a recipient MySQL server instance to a MySQL replication topology that uses GTID-

based transactions as the replication data source, configure the instance as required, following
the instructions in Section 19.1.3.4, “Setting Up Replication Using GTIDs”. Add replication
channels for the instance as shown in the following abbreviated example. The CHANGE
REPLICATION SOURCE TO statement (from MySQL 8.0.23) or CHANGE MASTER TO statement
(before MySQL 8.0.23) must define the host address and port number of the source, and the
SOURCE_AUTO_POSITION | MASTER_AUTO_POSITION option should be enabled, as shown:

mysql> CHANGE MASTER TO MASTER_HOST = 'source_host_name', MASTER_PORT = source_port_num,
       ...
       MASTER_AUTO_POSITION = 1,
       FOR CHANNEL 'setup_channel';
mysql> START SLAVE USER = 'user_name' PASSWORD = 'password' FOR CHANNEL 'setup_channel';

1242

The Clone Plugin

Or from MySQL 8.0.22 and 8.0.23:

mysql> CHANGE SOURCE TO SOURCE_HOST = 'source_host_name', SOURCE_PORT = source_port_num,
       ...
       SOURCE_AUTO_POSITION = 1,
       FOR CHANNEL 'setup_channel';
mysql> START REPLICA USER = 'user_name' PASSWORD = 'password' FOR CHANNEL 'setup_channel';

• To add a recipient MySQL server instance to a MySQL replication topology that uses binary log
file position based replication, configure the instance as required, following the instructions in
Section 19.1.2, “Setting Up Binary Log File Position Based Replication”. Add replication channels
for the instance as shown in the following abbreviated example, using the binary log position that
was transferred to the recipient during the cloning operation:

mysql> SELECT BINLOG_FILE, BINLOG_POSITION FROM performance_schema.clone_status;
mysql> CHANGE MASTER TO MASTER_HOST = 'source_host_name', MASTER_PORT = source_port_num,
       ...
       MASTER_LOG_FILE = 'source_log_name',
       MASTER_LOG_POS = source_log_pos,
       FOR CHANNEL 'setup_channel';
mysql> START SLAVE USER = 'user_name' PASSWORD = 'password' FOR CHANNEL 'setup_channel';

Or from MySQL 8.0.22 and 8.0.23:

mysql> SELECT BINLOG_FILE, BINLOG_POSITION FROM performance_schema.clone_status;
mysql> CHANGE SOURCE TO SOURCE_HOST = 'source_host_name', SOURCE_PORT = source_port_num,
       ...
       SOURCE_LOG_FILE = 'source_log_name',
       SOURCE_LOG_POS = source_log_pos,
       FOR CHANNEL 'setup_channel';
mysql> START REPLICA USER = 'user_name' PASSWORD = 'password' FOR CHANNEL 'setup_channel';

7.6.7.8 Directories and Files Created During a Cloning Operation

When data is cloned, the following directories and files are created for internal use. They should not be
modified.

• #clone: Contains internal clone files used by the cloning operation. Created in the directory that

data is cloned to.

• #ib_archive: Contains internally archived log files, archived on the donor during the cloning

operation.

• *.#clone files: Temporary data files created on the recipient while data is removed from the

recipient data directory and new data is cloned during a remote cloning operation.

7.6.7.9 Remote Cloning Operation Failure Handling

This section describes failure handing at different stages of a cloning operation.

1. Prerequisites are checked (see Remote Cloning Prerequisites).

• If a failure occurs during the prerequisite check, the CLONE INSTANCE operation reports an

error.

2. Prior to MySQL 8.0.27, a backup lock on the donor and recipient blocks concurrent DDL operations.

From MySQL 8.0.27, concurrent DDL on the donor is blocked only if the clone_block_ddl
variable is set to ON (the default setting is OFF). See Section 7.6.7.4, “Cloning and Concurrent
DDL”.

• If the cloning operation is unable to obtain a DDL lock within the time limit specified by the

clone_ddl_timeout variable, an error is reported.

3. User-created data (schemas, tables, tablespaces) and binary logs on the recipient are removed

before data is cloned to the recipient data directory.

1243

The Clone Plugin

• When user-created data and binary logs are removed from the recipient data directory during a

remote cloning operation, the data is not saved and may be lost if a failure occurs. If the data is of
importance, a backup should be taken before initiating a remote cloning operation.

For informational purposes, warnings are printed to the server error log to specify when data
removal starts and finishes:

[Warning] [MY-013453] [InnoDB] Clone removing all user data for provisioning:
Started...

[Warning] [MY-013453] [InnoDB] Clone removing all user data for provisioning:
Finished

If a failure occurs while removing data, the recipient may be left with a partial set of schemas,
tables, and tablespaces that existed before the cloning operation. Any time during the execution
of a cloning operation or after a failure, the server is always in a consistent state.

4. Data is cloned from the donor. User-created data, dictionary metadata, and other system data are

cloned.

• If a failure occurs while cloning data, the cloning operation is rolled back and all cloned data

removed. At this stage, the previously existing user-created data and binary logs on the recipient
have also been removed.

Should this scenario occur, you can either rectify the cause of the failure and re-execute the
cloning operation, or forgo the cloning operation and restore the recipient data from a backup
taken before the cloning operation.

5. The server is restarted automatically (applies to remote cloning operations that do not clone to a

named directory). During startup, typical server startup tasks are performed.

• If the automatic server restart fails, you can restart the server manually to complete the cloning

operation.

Before MySQL 8.0.24, if a network error occurs during a cloning operation, the operation resumes if the
error is resolved within five minutes. From MySQL 8.0.24, the operation resumes if the error is resolved
within the time specified by the clone_donor_timeout_after_network_failure variable
defined on the donor instance. The clone_donor_timeout_after_network_failure default
setting is 5 minutes but a range of 0 to 30 minutes is supported. If the operation does not resume within
the allotted time, it aborts and returns an error, and the donor drops the snapshot. A setting of zero
causes the donor to drop the snapshot immediately when a network error occurs. Configuring a longer
timeout allows more time for resolving network issues but also increases the size of the delta on the
donor instance, which increases clone recovery time as well as replication lag in cases where the clone
is intended as a replica or replication group member.

Prior to MySQL 8.0.24, donor threads use the MySQL Server wait_timeout setting when listening
for Clone protocol commands. As a result, a low wait_timeout setting could cause a long running
remote cloning operation to timeout. From MySQL 8.0.24, the Clone idle timeout is set to the default
wait_timeout setting, which is 28800 seconds (8 hours).

7.6.7.10 Monitoring Cloning Operations

This section describes options for monitoring cloning operations.

• Monitoring Cloning Operations using Performance Schema Clone Tables

• Monitoring Cloning Operations Using Performance Schema Stage Events

• Monitoring Cloning Operations Using Performance Schema Clone Instrumentation

• The Com_clone Status Variable

1244

The Clone Plugin

Monitoring Cloning Operations using Performance Schema Clone Tables

A cloning operation may take some time to complete, depending on the amount of data and other
factors related to data transfer. You can monitor the status and progress of a cloning operation on
the recipient MySQL server instance using the clone_status and clone_progress Performance
Schema tables.

Note

The clone_status and clone_progress Performance Schema tables can
be used to monitor a cloning operation on the recipient MySQL server instance
only. To monitor a cloning operation on the donor MySQL server instance, use
the clone stage events, as described in Monitoring Cloning Operations Using
Performance Schema Stage Events.

• The clone_status table provides the state of the current or last executed cloning operation. A

clone operation has four possible states: Not Started, In Progress, Completed, and Failed.

• The clone_progress table provides progress information for the current or last executed

clone operation, by stage. The stages of a cloning operation include DROP DATA, FILE COPY,
PAGE_COPY, REDO_COPY, FILE_SYNC, RESTART, and RECOVERY.

The SELECT and EXECUTE privileges on the Performance Schema is required to access the
Performance Schema clone tables.

To check the state of a cloning operation:

1. Connect to the recipient MySQL server instance.

2. Query the clone_status table:

mysql> SELECT STATE FROM performance_schema.clone_status;
+-----------+
| STATE     |
+-----------+
| Completed |
+-----------+

Should a failure occur during a cloning operation, you can query the clone_status table for error
information:

mysql> SELECT STATE, ERROR_NO, ERROR_MESSAGE FROM performance_schema.clone_status;
+-----------+----------+---------------+
| STATE     | ERROR_NO | ERROR_MESSAGE |
+-----------+----------+---------------+
| Failed    |      xxx | "xxxxxxxxxxx" |
+-----------+----------+---------------+

To review the details of each stage of a cloning operation:

1. Connect to the recipient MySQL server instance.

2. Query the clone_progress table. For example, the following query provides state and end time

data for each stage of the cloning operation:

mysql> SELECT STAGE, STATE, END_TIME FROM performance_schema.clone_progress;
+-----------+-----------+----------------------------+
| stage     | state     | end_time                   |
+-----------+-----------+----------------------------+
| DROP DATA | Completed | 2019-01-27 22:45:43.141261 |
| FILE COPY | Completed | 2019-01-27 22:45:44.457572 |
| PAGE COPY | Completed | 2019-01-27 22:45:44.577330 |
| REDO COPY | Completed | 2019-01-27 22:45:44.679570 |
| FILE SYNC | Completed | 2019-01-27 22:45:44.918547 |
| RESTART   | Completed | 2019-01-27 22:45:48.583565 |
| RECOVERY  | Completed | 2019-01-27 22:45:49.626595 |

1245

The Clone Plugin

+-----------+-----------+----------------------------+

For other clone status and progress data points that you can monitor, refer to Section 29.12.19,
“Performance Schema Clone Tables”.

Monitoring Cloning Operations Using Performance Schema Stage Events

A cloning operation may take some time to complete, depending on the amount of data and other
factors related to data transfer. There are three stage events for monitoring the progress of a cloning
operation. Each stage event reports WORK_COMPLETED and WORK_ESTIMATED values. Reported
values are revised as the operation progresses.

This method of monitoring a cloning operation can be used on the donor or recipient MySQL server
instance.

In order of occurrence, cloning operation stage events include:

• stage/innodb/clone (file copy): Indicates progress of the file copy phase of the cloning
operation. WORK_ESTIMATED and WORK_COMPLETED units are file chunks. The number of files to
be transferred is known at the start of the file copy phase, and the number of chunks is estimated
based on the number of files. WORK_ESTIMATED is set to the number of estimated file chunks.
WORK_COMPLETED is updated after each chunk is sent.

• stage/innodb/clone (page copy): Indicates progress of the page copy phase of cloning

operation. WORK_ESTIMATED and WORK_COMPLETED units are pages. Once the file copy phase is
completed, the number of pages to be transferred is known, and WORK_ESTIMATED is set to this
value. WORK_COMPLETED is updated after each page is sent.

• stage/innodb/clone (redo copy): Indicates progress of the redo copy phase of cloning

operation. WORK_ESTIMATED and WORK_COMPLETED units are redo chunks. Once the page copy
phase is completed, the number of redo chunks to be transferred is known, and WORK_ESTIMATED
is set to this value. WORK_COMPLETED is updated after each chunk is sent.

The following example demonstrates how to enable stage/innodb/clone% event instruments and
related consumer tables to monitor a cloning operation. For information about Performance Schema
stage event instruments and related consumers, see Section 29.12.5, “Performance Schema Stage
Event Tables”.

1. Enable the stage/innodb/clone% instruments:

mysql> UPDATE performance_schema.setup_instruments SET ENABLED = 'YES'
       WHERE NAME LIKE 'stage/innodb/clone%';

2. Enable the stage event consumer tables, which include events_stages_current,

events_stages_history, and events_stages_history_long.

mysql> UPDATE performance_schema.setup_consumers SET ENABLED = 'YES'
       WHERE NAME LIKE '%stages%';

3. Run a cloning operation. In this example, a local data directory is cloned to a directory named

cloned_dir.

mysql> CLONE LOCAL DATA DIRECTORY = '/path/to/cloned_dir';

4. Check the progress of the cloning operation by querying the Performance Schema

events_stages_current table. The stage event shown differs depending on the cloning
phase that is in progress. The WORK_COMPLETED column shows the work completed. The
WORK_ESTIMATED column shows the work required in total.

mysql> SELECT EVENT_NAME, WORK_COMPLETED, WORK_ESTIMATED FROM performance_schema.events_stages_current
       WHERE EVENT_NAME LIKE 'stage/innodb/clone%';
+--------------------------------+----------------+----------------+
| EVENT_NAME                     | WORK_COMPLETED | WORK_ESTIMATED |

1246

The Clone Plugin

+--------------------------------+----------------+----------------+
| stage/innodb/clone (redo copy) |              1 |              1 |
+--------------------------------+----------------+----------------+

The events_stages_current table returns an empty set if the cloning operation has finished.
In this case, you can check the events_stages_history table to view event data for the
completed operation. For example:

mysql> SELECT EVENT_NAME, WORK_COMPLETED, WORK_ESTIMATED FROM events_stages_history
       WHERE EVENT_NAME LIKE 'stage/innodb/clone%';
+--------------------------------+----------------+----------------+
| EVENT_NAME                     | WORK_COMPLETED | WORK_ESTIMATED |
+--------------------------------+----------------+----------------+
| stage/innodb/clone (file copy) |            301 |            301 |
| stage/innodb/clone (page copy) |              0 |              0 |
| stage/innodb/clone (redo copy) |              1 |              1 |
+--------------------------------+----------------+----------------+

Monitoring Cloning Operations Using Performance Schema Clone Instrumentation

Performance Schema provides instrumentation for advanced performance monitoring of clone
operations. To view the available clone instrumentation, and issue the following query:

mysql> SELECT NAME,ENABLED FROM performance_schema.setup_instruments
       WHERE NAME LIKE '%clone%';
+---------------------------------------------------+---------+
| NAME                                              | ENABLED |
+---------------------------------------------------+---------+
| wait/synch/mutex/innodb/clone_snapshot_mutex      | NO      |
| wait/synch/mutex/innodb/clone_sys_mutex           | NO      |
| wait/synch/mutex/innodb/clone_task_mutex          | NO      |
| wait/synch/mutex/group_rpl/LOCK_clone_donor_list  | NO      |
| wait/synch/mutex/group_rpl/LOCK_clone_handler_run | NO      |
| wait/synch/mutex/group_rpl/LOCK_clone_query       | NO      |
| wait/synch/mutex/group_rpl/LOCK_clone_read_mode   | NO      |
| wait/synch/cond/group_rpl/COND_clone_handler_run  | NO      |
| wait/io/file/innodb/innodb_clone_file             | YES     |
| stage/innodb/clone (file copy)                    | YES     |
| stage/innodb/clone (redo copy)                    | YES     |
| stage/innodb/clone (page copy)                    | YES     |
| statement/abstract/clone                          | YES     |
| statement/clone/local                             | YES     |
| statement/clone/client                            | YES     |
| statement/clone/server                            | YES     |
| memory/innodb/clone                               | YES     |
| memory/clone/data                                 | YES     |
+---------------------------------------------------+---------+

Wait Instruments

Performance schema wait instruments track events that take time. Clone wait event instruments
include:

• wait/synch/mutex/innodb/clone_snapshot_mutex: Tracks wait events for the clone

snapshot mutex, which synchronizes access to the dynamic snapshot object (on the donor and
recipient) between multiple clone threads.

• wait/synch/mutex/innodb/clone_sys_mutex: Tracks wait events for the clone sys mutex.
There is one clone system object in a MySQL server instance. This mutex synchronizes access
to the clone system object on the donor and recipient. It is acquired by clone threads and other
foreground and background threads.

• wait/synch/mutex/innodb/clone_task_mutex: Tracks wait events for the clone task mutex,

used for clone task management. The clone_task_mutex is acquired by clone threads.

• wait/io/file/innodb/innodb_clone_file: Tracks all I/O wait operations for files that clone

operates on.

1247

The Clone Plugin

For information about monitoring InnoDB mutex waits, see Section 17.16.2, “Monitoring InnoDB Mutex
Waits Using Performance Schema”. For information about monitoring wait events in general, see
Section 29.12.4, “Performance Schema Wait Event Tables”.

Stage Instruments

Performance Schema stage events track steps that occur during the statement-execution process.
Clone stage event instruments include:

• stage/innodb/clone (file copy): Indicates progress of the file copy phase of the cloning

operation.

• stage/innodb/clone (redo copy): Indicates progress of the redo copy phase of cloning

operation.

• stage/innodb/clone (page copy): Indicates progress of the page copy phase of cloning

operation.

For information about monitoring cloning operations using stage events, see Monitoring Cloning
Operations Using Performance Schema Stage Events. For general information about monitoring stage
events, see Section 29.12.5, “Performance Schema Stage Event Tables”.

Statement Instruments

Performance Schema statement events track statement execution. When a clone operation is
initiated, the different statement types tracked by clone statement instruments may be executed
in parallel. You can observe these statement events in the Performance Schema statement event
tables. The number of statements that execute depends on the clone_max_concurrency and
clone_autotune_concurrency settings.

Clone statement event instruments include:

• statement/abstract/clone: Tracks statement events for any clone operation before it is

classified as a local, client, or server operation type.

• statement/clone/local: Tracks clone statement events for local clone operations; generated

when executing a CLONE LOCAL statement.

• statement/clone/client: Tracks remote cloning statement events that occur on the recipient

MySQL server instance; generated when executing a CLONE INSTANCE statement on the recipient.

• statement/clone/server: Tracks remote cloning statement events that occur on the donor

MySQL server instance; generated when executing a CLONE INSTANCE statement on the recipient.

For information about monitoring Performance Schema statement events, see Section 29.12.6,
“Performance Schema Statement Event Tables”.

Memory Instruments

Performance Schema memory instruments track memory usage. Clone memory usage instruments
include:

• memory/innodb/clone: Tracks memory allocated by InnoDB for the dynamic snapshot.

• memory/clone/data: Tracks memory allocated by the clone plugin during a clone operation.

For information about monitoring memory usage using Performance Schema, see Section 29.12.20.10,
“Memory Summary Tables”.

The Com_clone Status Variable

The Com_clone status variable provides a count of CLONE statement executions.

For more information, refer to the discussion about Com_xxx statement counter variables in
Section 7.1.10, “Server Status Variables”.

1248

The Clone Plugin

7.6.7.11 Stopping a Cloning Operation

If necessary, you can stop a cloning operation with a KILL QUERY processlist_id statement.

On the recipient MySQL server instance, you can retrieve the processlist identifier (PID) for a cloning
operation from the PID column of the clone_status table.

mysql> SELECT * FROM performance_schema.clone_status\G
*************************** 1. row ***************************
             ID: 1
            PID: 8
          STATE: In Progress
     BEGIN_TIME: 2019-07-15 11:58:36.767
       END_TIME: NULL
         SOURCE: LOCAL INSTANCE
    DESTINATION: /path/to/clone_dir/
       ERROR_NO: 0
  ERROR_MESSAGE:
    BINLOG_FILE:
BINLOG_POSITION: 0
  GTID_EXECUTED:

You can also retrieve the processlist identifier from the ID column of the INFORMATION_SCHEMA
PROCESSLIST table, the Id column of SHOW PROCESSLIST output, or the PROCESSLIST_ID column
of the Performance Schema threads table. These methods of obtaining the PID information can be
used on the donor or recipient MySQL server instance.

7.6.7.12 Clone System Variable Reference

Table 7.7 Clone System Variable Reference

Name

Cmd-Line

Option File System Var Status Var

Var Scope

Dynamic

clone_autotune_concurrency

Yes

Yes

clone_block_ddlYes

clone_buffer_sizeYes

clone_ddl_timeoutYes

Yes

Yes

Yes

clone_delay_after_data_drop

Yes

Yes

clone_donor_timeout_after_network_failure

Yes

Yes

clone_enable_compression

Yes

Yes

clone_max_concurrency

Yes

Yes

clone_max_data_bandwidth

Yes

Yes

Yes
clone_max_network_bandwidth

Yes

clone_ssl_ca Yes

clone_ssl_cert Yes

clone_ssl_key Yes

clone_valid_donor_list

Yes

Yes

Yes

Yes

Yes

7.6.7.13 Clone System Variables

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Global

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

Yes

This section describes the system variables that control operation of the clone plugin. If values
specified at startup are incorrect, the clone plugin may fail to initialize properly and the server does not
load it. In this case, the server may also produce error messages for other clone settings because it
does not recognize them.

Each system variable has a default value. System variables can be set at server startup using options
on the command line or in an option file. They can be changed dynamically at runtime using the SET
statement, which enables you to modify operation of the server without having to stop and restart it.

1249

The Clone Plugin

Setting a global system variable runtime value normally requires the SYSTEM_VARIABLES_ADMIN
privilege (or the deprecated SUPER privilege). For more information, see Section 7.1.9.1, “System
Variable Privileges”.

Clone variables are configured on the recipient MySQL server instance where the cloning operation is
executed.

• clone_autotune_concurrency

Command-Line Format

--clone-autotune-concurrency

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

8.0.17

clone_autotune_concurrency

Global

Yes

No

Boolean

ON

When clone_autotune_concurrency is enabled (the default), additional threads for remote
cloning operations are spawned dynamically to optimize data transfer speed. The setting is
applicable to recipient MySQL server instance only.

During a cloning operation, the number of threads increases incrementally toward a target of double
the current thread count. The effect on the data transfer speed is evaluated at each increment. The
process either continues or stops according to the following rules:

• If the data transfer speed degrades more than 5% with an incremental increase, the process stops.

• If there is at least a 5% improvement after reaching 25% of the target, the process continues.

Otherwise, the process stops.

• If there is at least a 10% improvement after reaching 50% of the target, the process continues.

Otherwise, the process stops.

• If there is at least a 25% improvement after reaching the target, the process continues toward a

new target of double the current thread count. Otherwise, the process stops.

The autotuning process does not support decreasing the number of threads.

The clone_max_concurrency variable defines the maximum number of threads that can be
spawned.

If clone_autotune_concurrency is disabled, clone_max_concurrency defines the number of
threads spawned for a remote cloning operation.

• clone_buffer_size

Command-Line Format

--clone-buffer-size

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

1250

8.0.17

clone_buffer_size

Global

Yes

No

Integer

Default Value

Minimum Value

Maximum Value

Unit

The Clone Plugin

4194304

1048576

268435456

bytes

Defines the size of the intermediate buffer used when transferring data during a local cloning
operation. The default value is 4 mebibytes (MiB). A larger buffer size may permit I/O device drivers
to fetch data in parallel, which can improve cloning performance.

• clone_block_ddl

Command-Line Format

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--clone-block-ddl

8.0.27

clone_block_ddl

Global

Yes

No

Boolean

OFF

Enables an exclusive backup lock on the donor MySQL Server instance during a cloning operation,
which blocks concurrent DDL operations on the donor. See Section 7.6.7.4, “Cloning and Concurrent
DDL”.

• clone_delay_after_data_drop

Command-Line Format

--clone-delay-after-data-drop

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

8.0.29

clone_delay_after_data_drop

Global

Yes

No

Integer

0

0

3600

bytes

Specifies a delay period immediately after removing existing data on the recipient MySQL Server
instance at the start of a remote cloning operation. The delay is intended to provide enough time
for the file system on the recipient host to free space before data is cloned from the donor MySQL
Server instance. Certain file systems such as VxFS free space asynchronously in a background
process. On these file systems, cloning data too soon after dropping existing data can result in clone
operation failures due to insufficient space. The maximum delay period is 3600 seconds (1 hour).
The default setting is 0 (no delay).

This variable is applicable to remote cloning operation only and is configured on the recipient MySQL
Server instance.

1251

The Clone Plugin

• clone_ddl_timeout

Command-Line Format

--clone-ddl-timeout

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

8.0.17

clone_ddl_timeout

Global

Yes

No

Integer

300

0

2592000

seconds

The time in seconds that a cloning operation waits for a backup lock. The backup lock blocks
concurrent DDL when executing a cloning operation. This setting is applied on both the donor and
recipient MySQL server instances.

A setting of 0 means that the cloning operation does not wait for a backup lock. In this case,
executing a concurrent DDL operation can cause the cloning operation to fail.

Prior to MySQL 8.0.27, the backup lock blocks concurrent DDL operations on both the donor
and recipient during a cloning operation, and a cloning operation cannot proceed until current
DDL operations finish. As of MySQL 8.0.27, concurrent DDL is permitted on the donor during a
cloning operation if clone_block_ddl variable is set to OFF (the default). In this case, the cloning
operation does not have to wait for a backup lock on the donor. See Section 7.6.7.4, “Cloning and
Concurrent DDL”.

• clone_donor_timeout_after_network_failure

Command-Line Format

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

--clone-donor-timeout-after-network-
failure

8.0.24

clone_donor_timeout_after_network_failure

Global

Yes

No

Integer

5

0

30

minutes

Defines the amount of time in minutes the donor allows for the recipient to reconnect and restart a
cloning operation after a network failure. For more information, see Section 7.6.7.9, “Remote Cloning
Operation Failure Handling”.

This variable is set on the donor MySQL server instance. Setting it on the recipient MySQL server
instance has no effect.

1252

The Clone Plugin

• clone_enable_compression

Command-Line Format

--clone-enable-compression

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

8.0.17

clone_enable_compression

Global

Yes

No

Boolean

OFF

Enables compression of data at the network layer during a remote cloning operation. Compression
saves network bandwidth at the cost of CPU. Enabling compression may improve the data transfer
rate. This setting is only applied on the recipient MySQL server instance.

• clone_max_concurrency

Command-Line Format

--clone-max-concurrency

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

8.0.17

clone_max_concurrency

Global

Yes

No

Integer

16

1

128

threads

Defines the maximum number of concurrent threads for a remote cloning operation. The default
value is 16. A greater number of threads can improve cloning performance but also reduces the
number of permitted simultaneous client connections, which can affect the performance of existing
client connections. This setting is only applied on the recipient MySQL server instance.

If clone_autotune_concurrency is enabled (the default), clone_max_concurrency is the
maximum number of threads that can be dynamically spawned for a remote cloning operation. If
clone_autotune_concurrency is disabled, clone_max_concurrency defines the number of
threads spawned for a remote cloning operation.

A minimum data transfer rate of 1 mebibyte (MiB) per thread is recommended for remote
cloning operations. The data transfer rate for a remote cloning operation is controlled by the
clone_max_data_bandwidth variable.

• clone_max_data_bandwidth

Command-Line Format

--clone-max-data-bandwidth

Introduced

System Variable

Scope

Dynamic

8.0.17

clone_max_data_bandwidth

Global

Yes

1253

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

The Clone Plugin

No

Integer

0

0

1048576

miB/second

Defines the maximum data transfer rate in mebibytes (MiB) per second for a remote cloning
operation. This variable helps manage the performance impact of a cloning operation. A limit should
be set only when donor disk I/O bandwidth is saturated, affecting performance. A value of 0 means
“unlimited”, which permits cloning operations to run at the highest possible data transfer rate. This
setting is only applicable to the recipient MySQL server instance.

The minimum data transfer rate is 1 MiB per second, per thread. For example, if there are 8 threads,
the minimum transfer rate is 8 MiB per second. The clone_max_concurrency variable controls
the maximum number threads spawned for a remote cloning operation.

The requested data transfer rate specified by clone_max_data_bandwidth may
differ from the actual data transfer rate reported by the DATA_SPEED column in the
performance_schema.clone_progress table. If your cloning operation is not achieving the
desired data transfer rate and you have available bandwidth, check I/O usage on the recipient and
donor. If there is underutilized bandwidth, I/O is the next mostly likely bottleneck.

• clone_max_network_bandwidth

Command-Line Format

--clone-max-network-bandwidth

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

Minimum Value

Maximum Value

Unit

8.0.17

clone_max_network_bandwidth

Global

Yes

No

Integer

0

0

1048576

miB/second

Specifies the maximum approximate network transfer rate in mebibytes (MiB) per second for a
remote cloning operation. This variable can be used to manage the performance impact of a cloning
operation on network bandwidth. It should be set only when network bandwidth is saturated, affecting
performance on the donor instance. A value of 0 means “unlimited”, which permits cloning at the
highest possible data transfer rate over the network, providing the best performance. This setting is
only applicable to the recipient MySQL server instance.

• clone_ssl_ca

Command-Line Format

--clone-ssl-ca=file_name

Introduced

System Variable

Scope

Dynamic

1254

8.0.14

clone_ssl_ca

Global

Yes

The Clone Plugin

SET_VAR Hint Applies

Type

Default Value

No

File name

empty string

Specifies the path to the certificate authority (CA) file. Used to configure an encrypted connection for
a remote cloning operation. This setting configured on the recipient and used when connecting to the
donor.

• clone_ssl_cert

Command-Line Format

--clone-ssl-cert=file_name

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

8.0.14

clone_ssl_cert

Global

Yes

No

File name

empty string

Specifies the path to the public key certificate. Used to configure an encrypted connection for a
remote cloning operation. This setting configured on the recipient and used when connecting to the
donor.

• clone_ssl_key

Command-Line Format

--clone-ssl-key=file_name

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

8.0.14

clone_ssl_key

Global

Yes

No

File name

empty string

Specifies the path to the private key file. Used to configure an encrypted connection for a remote
cloning operation. This setting configured on the recipient and used when connecting to the donor.

• clone_valid_donor_list

Command-Line Format

--clone-valid-donor-list=value

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

8.0.17

clone_valid_donor_list

Global

Yes

No

String

1255

The Keyring Proxy Bridge Plugin

Default Value

NULL

Defines valid donor host addresses for remote cloning operations. This setting is applied on the
recipient MySQL server instance. A comma-separated list of values is permitted in the following
format: “HOST1:PORT1,HOST2:PORT2,HOST3:PORT3”. Spaces are not permitted.

The clone_valid_donor_list variable adds a layer of security by providing control over
the sources of cloned data. The privilege required to configure clone_valid_donor_list is
different from the privilege required to execute remote cloning operations, which permits assigning
those responsibilities to different roles. Configuring clone_valid_donor_list requires the
SYSTEM_VARIABLES_ADMIN privilege, whereas executing a remote cloning operation requires the
CLONE_ADMIN privilege.

Internet Protocol version 6 (IPv6) address format is not supported. Internet Protocol version 6 (IPv6)
address format is not supported. An alias to the IPv6 address can be used instead. An IPv4 address
can be used as is.

7.6.7.14 Clone Plugin Limitations

The clone plugin is subject to these limitations:

• An instance cannot be cloned from a different MySQL server series. For example, you cannot clone

between MySQL 8.0 and MySQL 8.4, but can clone within a series such as MySQL 8.0.37 and
MySQL 8.0.42. Before 8.0.37, the point release number also had to match, so cloning the likes of
8.0.36 to 8.0.42 or vice-versa is not permitted

• Prior to MySQL 8.0.27, DDL on the donor and recipient, including TRUNCATE TABLE, is not

permitted during a cloning operation. This limitation should be considered when selecting data
sources. A workaround is to use dedicated donor instances, which can accommodate DDL
operations being blocked while data is cloned. Concurrent DML is permitted.

From MySQL 8.0.27, concurrent DDL is permitted on the donor by default. Support for concurrent
DDL on the donor is controlled by the clone_block_ddl variable. See Section 7.6.7.4, “Cloning
and Concurrent DDL”.

• Cloning from a donor MySQL server instance to a hotfix MySQL server instance of the same version

and release is only supported with MySQL 8.0.26 and higher.

• Only a single MySQL instance can be cloned at a time. Cloning multiple MySQL instances in a single

cloning operation is not supported.

• The X Protocol port specified by mysqlx_port is not supported for remote cloning operations (when
specifying the port number of the donor MySQL server instance in a CLONE INSTANCE statement).

• The clone plugin does not support cloning of MySQL server configurations. The recipient MySQL

server instance retains its configuration, including persisted system variable settings (see
Section 7.1.9.3, “Persisted System Variables”.)

• The clone plugin does not support cloning of binary logs.

• The clone plugin only clones data stored in InnoDB. Other storage engine data is not cloned.

MyISAM and CSV tables stored in any schema including the sys schema are cloned as empty tables.

• Connecting to the donor MySQL server instance through MySQL Router is not supported.

• Local cloning operations do not support cloning of general tablespaces that were created with an

absolute path. A cloned tablespace file with the same path as the source tablespace file would cause
a conflict.

7.6.8 The Keyring Proxy Bridge Plugin

1256

MySQL Plugin Services

MySQL Keyring originally implemented keystore capabilities using server plugins, but began
transitioning to use the component infrastructure in MySQL 8.0.24. The transition includes revising the
underlying implementation of keyring plugins to use the component infrastructure. This is facilitated
using the plugin named daemon_keyring_proxy_plugin that acts as a bridge between the plugin
and component service APIs, and enables keyring plugins to continue to be used with no change to
user-visible characteristics.

daemon_keyring_proxy_plugin is built in and nothing need be done to install or enable it.

7.6.9 MySQL Plugin Services

MySQL server plugins have access to server “plugin services.” The plugin services interface
complements the plugin API by exposing server functionality that plugins can call. For developer
information about writing plugin services, see MySQL Services for Plugins. The following sections
describe plugin services available at the SQL and C-language levels.

7.6.9.1 The Locking Service

MySQL distributions provide a locking interface that is accessible at two levels:

• At the SQL level, as a set of loadable functions that each map onto calls to the service routines.

• As a C language interface, callable as a plugin service from server plugins or loadable functions.

For general information about plugin services, see Section 7.6.9, “MySQL Plugin Services”. For general
information about loadable functions, see Adding a Loadable Function.

The locking interface has these characteristics:

• Locks have three attributes: Lock namespace, lock name, and lock mode:

• Locks are identified by the combination of namespace and lock name. The namespace enables
different applications to use the same lock names without colliding by creating locks in separate
namespaces. For example, if applications A and B use namespaces of ns1 and ns2, respectively,
each application can use lock names lock1 and lock2 without interfering with the other
application.

• A lock mode is either read or write. Read locks are shared: If a session has a read lock on a

given lock identifier, other sessions can acquire a read lock on the same identifier. Write locks are
exclusive: If a session has a write lock on a given lock identifier, other sessions cannot acquire a
read or write lock on the same identifier.

• Namespace and lock names must be non-NULL, nonempty, and have a maximum length of 64

characters. A namespace or lock name specified as NULL, the empty string, or a string longer than
64 characters results in an ER_LOCKING_SERVICE_WRONG_NAME error.

• The locking interface treats namespace and lock names as binary strings, so comparisons are case-

sensitive.

• The locking interface provides functions to acquire locks and release locks. No special privilege is
required to call these functions. Privilege checking is the responsibility of the calling application.

• Locks can be waited for if not immediately available. Lock acquisition calls take an integer timeout
value that indicates how many seconds to wait to acquire locks before giving up. If the timeout is
reached without successful lock acquisition, an ER_LOCKING_SERVICE_TIMEOUT error occurs.
If the timeout is 0, there is no waiting and the call produces an error if locks cannot be acquired
immediately.

• The locking interface detects deadlock between lock-acquisition calls in different sessions. In

this case, the locking service chooses a caller and terminates its lock-acquisition request with an
ER_LOCKING_SERVICE_DEADLOCK error. This error does not cause transactions to roll back. To

1257

MySQL Plugin Services

choose a session in case of deadlock, the locking service prefers sessions that hold read locks over
sessions that hold write locks.

• A session can acquire multiple locks with a single lock-acquisition call. For a given call, lock

acquisition is atomic: The call succeeds if all locks are acquired. If acquisition of any lock fails,
the call acquires no locks and fails, typically with an ER_LOCKING_SERVICE_TIMEOUT or
ER_LOCKING_SERVICE_DEADLOCK error.

• A session can acquire multiple locks for the same lock identifier (namespace and lock name

combination). These lock instances can be read locks, write locks, or a mix of both.

• Locks acquired within a session are released explicitly by calling a release-locks function, or

implicitly when the session terminates (either normally or abnormally). Locks are not released when
transactions commit or roll back.

• Within a session, all locks for a given namespace when released are released together.

The interface provided by the locking service is distinct from that provided by GET_LOCK() and
related SQL functions (see Section 14.14, “Locking Functions”). For example, GET_LOCK() does not
implement namespaces and provides only exclusive locks, not distinct read and write locks.

The Locking Service C Interface

This section describes how to use the locking service C language interface. To use the function
interface instead, see The Locking Service Function Interface For general characteristics of the locking
service interface, see Section 7.6.9.1, “The Locking Service”. For general information about plugin
services, see Section 7.6.9, “MySQL Plugin Services”.

Source files that use the locking service should include this header file:

#include <mysql/service_locking.h>

To acquire one or more locks, call this function:

int mysql_acquire_locking_service_locks(MYSQL_THD opaque_thd,
                                        const char* lock_namespace,
                                        const char**lock_names,
                                        size_t lock_num,
                                        enum enum_locking_service_lock_type lock_type,
                                        unsigned long lock_timeout);

The arguments have these meanings:

• opaque_thd: A thread handle. If specified as NULL, the handle for the current thread is used.

• lock_namespace: A null-terminated string that indicates the lock namespace.

• lock_names: An array of null-terminated strings that provides the names of the locks to acquire.

• lock_num: The number of names in the lock_names array.

• lock_type: The lock mode, either LOCKING_SERVICE_READ or LOCKING_SERVICE_WRITE to

acquire read locks or write locks, respectively.

• lock_timeout: An integer number of seconds to wait to acquire the locks before giving up.

To release locks acquired for a given namespace, call this function:

int mysql_release_locking_service_locks(MYSQL_THD opaque_thd,
                                        const char* lock_namespace);

The arguments have these meanings:

• opaque_thd: A thread handle. If specified as NULL, the handle for the current thread is used.

• lock_namespace: A null-terminated string that indicates the lock namespace.

1258

MySQL Plugin Services

Locks acquired or waited for by the locking service can be monitored at the SQL level using the
Performance Schema. For details, see Locking Service Monitoring.

The Locking Service Function Interface

This section describes how to use the locking service interface provided by its loadable functions. To
use the C language interface instead, see The Locking Service C Interface For general characteristics
of the locking service interface, see Section 7.6.9.1, “The Locking Service”. For general information
about loadable functions, see Adding a Loadable Function.

• Installing or Uninstalling the Locking Service Function Interface

• Using the Locking Service Function Interface

• Locking Service Monitoring

• Locking Service Interface Function Reference

Installing or Uninstalling the Locking Service Function Interface

The locking service routines described in The Locking Service C Interface need not be installed
because they are built into the server. The same is not true of the loadable functions that map onto
calls to the service routines: The functions must be installed before use. This section describes how to
do that. For general information about loadable function installation, see Section 7.7.1, “Installing and
Uninstalling Loadable Functions”.

The locking service functions are implemented in a plugin library file located in the directory named
by the plugin_dir system variable. The file base name is locking_service. The file name suffix
differs per platform (for example, .so for Unix and Unix-like systems, .dll for Windows).

To install the locking service functions, use the CREATE FUNCTION statement, adjusting the .so suffix
for your platform as necessary:

CREATE FUNCTION service_get_read_locks RETURNS INT
  SONAME 'locking_service.so';
CREATE FUNCTION service_get_write_locks RETURNS INT
  SONAME 'locking_service.so';
CREATE FUNCTION service_release_locks RETURNS INT
  SONAME 'locking_service.so';

If the functions are used on a replication source server, install them on all replica servers as well to
avoid replication problems.

Once installed, the functions remain installed until uninstalled. To remove them, use the DROP
FUNCTION statement:

DROP FUNCTION service_get_read_locks;
DROP FUNCTION service_get_write_locks;
DROP FUNCTION service_release_locks;

Using the Locking Service Function Interface

Before using the locking service functions, install them according to the instructions provided at
Installing or Uninstalling the Locking Service Function Interface.

To acquire one or more read locks, call this function:

mysql> SELECT service_get_read_locks('mynamespace', 'rlock1', 'rlock2', 10);
+---------------------------------------------------------------+
| service_get_read_locks('mynamespace', 'rlock1', 'rlock2', 10) |
+---------------------------------------------------------------+
|                                                             1 |
+---------------------------------------------------------------+

The first argument is the lock namespace. The final argument is an integer timeout indicating how
many seconds to wait to acquire the locks before giving up. The arguments in between are the lock
names.

1259

MySQL Plugin Services

For the example just shown, the function acquires locks with lock identifiers (mynamespace,
rlock1) and (mynamespace, rlock2).

To acquire write locks rather than read locks, call this function:

mysql> SELECT service_get_write_locks('mynamespace', 'wlock1', 'wlock2', 10);
+----------------------------------------------------------------+
| service_get_write_locks('mynamespace', 'wlock1', 'wlock2', 10) |
+----------------------------------------------------------------+
|                                                              1 |
+----------------------------------------------------------------+

In this case, the lock identifiers are (mynamespace, wlock1) and (mynamespace, wlock2).

To release all locks for a namespace, use this function:

mysql> SELECT service_release_locks('mynamespace');
+--------------------------------------+
| service_release_locks('mynamespace') |
+--------------------------------------+
|                                    1 |
+--------------------------------------+

Each locking function returns nonzero for success. If the function fails, an error occurs. For example,
the following error occurs because lock names cannot be empty:

mysql> SELECT service_get_read_locks('mynamespace', '', 10);
ERROR 3131 (42000): Incorrect locking service lock name ''.

A session can acquire multiple locks for the same lock identifier. As long as a different session does
not have a write lock for an identifier, the session can acquire any number of read or write locks. Each
lock request for the identifier acquires a new lock. The following statements acquire three write locks
with the same identifier, then three read locks for the same identifier:

SELECT service_get_write_locks('ns', 'lock1', 'lock1', 'lock1', 0);
SELECT service_get_read_locks('ns', 'lock1', 'lock1', 'lock1', 0);

If you examine the Performance Schema metadata_locks table at this point, you should find that
the session holds six distinct locks with the same (ns, lock1) identifier. (For details, see Locking
Service Monitoring.)

Because the session holds at least one write lock on (ns, lock1), no other session can acquire a
lock for it, either read or write. If the session held only read locks for the identifier, other sessions could
acquire read locks for it, but not write locks.

Locks for a single lock-acquisition call are acquired atomically, but atomicity does not hold across calls.
Thus, for a statement such as the following, where service_get_write_locks() is called once per
row of the result set, atomicity holds for each individual call, but not for the statement as a whole:

SELECT service_get_write_locks('ns', 'lock1', 'lock2', 0) FROM t1 WHERE ... ;

Caution

Because the locking service returns a separate lock for each successful request
for a given lock identifier, it is possible for a single statement to acquire a large
number of locks. For example:

INSERT INTO ... SELECT service_get_write_locks('ns', t1.col_name, 0) FROM t1;

These types of statements may have certain adverse effects. For example,
if the statement fails part way through and rolls back, locks acquired up to
the point of failure still exist. If the intent is for there to be a correspondence
between rows inserted and locks acquired, that intent is not satisfied. Also, if it
is important that locks are granted in a certain order, be aware that result set
order may differ depending on which execution plan the optimizer chooses. For

1260

MySQL Plugin Services

these reasons, it may be best to limit applications to a single lock-acquisition
call per statement.

Locking Service Monitoring

The locking service is implemented using the MySQL Server metadata locks framework, so you
monitor locking service locks acquired or waited for by examining the Performance Schema
metadata_locks table.

First, enable the metadata lock instrument:

mysql> UPDATE performance_schema.setup_instruments SET ENABLED = 'YES'
    -> WHERE NAME = 'wait/lock/metadata/sql/mdl';

Then acquire some locks and check the contents of the metadata_locks table:

mysql> SELECT service_get_write_locks('mynamespace', 'lock1', 0);
+----------------------------------------------------+
| service_get_write_locks('mynamespace', 'lock1', 0) |
+----------------------------------------------------+
|                                                  1 |
+----------------------------------------------------+
mysql> SELECT service_get_read_locks('mynamespace', 'lock2', 0);
+---------------------------------------------------+
| service_get_read_locks('mynamespace', 'lock2', 0) |
+---------------------------------------------------+
|                                                 1 |
+---------------------------------------------------+
mysql> SELECT OBJECT_TYPE, OBJECT_SCHEMA, OBJECT_NAME, LOCK_TYPE, LOCK_STATUS
    -> FROM performance_schema.metadata_locks
    -> WHERE OBJECT_TYPE = 'LOCKING SERVICE'\G
*************************** 1. row ***************************
  OBJECT_TYPE: LOCKING SERVICE
OBJECT_SCHEMA: mynamespace
  OBJECT_NAME: lock1
    LOCK_TYPE: EXCLUSIVE
  LOCK_STATUS: GRANTED
*************************** 2. row ***************************
  OBJECT_TYPE: LOCKING SERVICE
OBJECT_SCHEMA: mynamespace
  OBJECT_NAME: lock2
    LOCK_TYPE: SHARED
  LOCK_STATUS: GRANTED

Locking service locks have an OBJECT_TYPE value of LOCKING SERVICE. This is distinct from, for
example, locks acquired with the GET_LOCK() function, which have an OBJECT_TYPE of USER LEVEL
LOCK.

The lock namespace, name, and mode appear in the OBJECT_SCHEMA, OBJECT_NAME, and
LOCK_TYPE columns. Read and write locks have LOCK_TYPE values of SHARED and EXCLUSIVE,
respectively.

The LOCK_STATUS value is GRANTED for an acquired lock, PENDING for a lock that is being waited for.
You can expect to see PENDING if one session holds a write lock and another session is attempting to
acquire a lock having the same identifier.

Locking Service Interface Function Reference

The SQL interface to the locking service implements the loadable functions described in this section.
For usage examples, see Using the Locking Service Function Interface.

The functions share these characteristics:

• The return value is nonzero for success. Otherwise, an error occurs.

• Namespace and lock names must be non-NULL, nonempty, and have a maximum length of 64

characters.

1261

MySQL Plugin Services

• Timeout values must be integers indicating how many seconds to wait to acquire locks before giving
up with an error. If the timeout is 0, there is no waiting and the function produces an error if locks
cannot be acquired immediately.

These locking service functions are available:

• service_get_read_locks(namespace, lock_name[, lock_name] ..., timeout)

Acquires one or more read (shared) locks in the given namespace using the given lock names,
timing out with an error if the locks are not acquired within the given timeout value.

• service_get_write_locks(namespace, lock_name[, lock_name] ..., timeout)

Acquires one or more write (exclusive) locks in the given namespace using the given lock names,
timing out with an error if the locks are not acquired within the given timeout value.

• service_release_locks(namespace)

For the given namespace, releases all locks that were acquired within the current session using
service_get_read_locks() and service_get_write_locks().

It is not an error for there to be no locks in the namespace.

7.6.9.2 The Keyring Service

MySQL Server supports a keyring service that enables internal components and plugins to securely
store sensitive information for later retrieval. MySQL distributions provide a keyring interface that is
accessible at two levels:

• At the SQL level, as a set of loadable functions that each map onto calls to the service routines.

• As a C language interface, callable as a plugin service from server plugins or loadable functions.

This section describes how to use the keyring service functions to store, retrieve, and remove
keys in the MySQL keyring keystore. For information about the SQL interface that uses functions,
Section 8.4.4.15, “General-Purpose Keyring Key-Management Functions”. For general keyring
information, see Section 8.4.4, “The MySQL Keyring”.

The keyring service uses whatever underlying keyring plugin is enabled, if any. If no keyring plugin is
enabled, keyring service calls fail.

A “record” in the keystore consists of data (the key itself) and a unique identifier through which the key
is accessed. The identifier has two parts:

• key_id: The key ID or name. key_id values that begin with mysql_ are reserved by MySQL

Server.

• user_id: The session effective user ID. If there is no user context, this value can be NULL. The

value need not actually be a “user”; the meaning depends on the application.

Functions that implement the keyring function interface pass the value of CURRENT_USER() as the
user_id value to keyring service functions.

The keyring service functions have these characteristics in common:

• Each function returns 0 for success, 1 for failure.

• The key_id and user_id arguments form a unique combination indicating which key in the keyring

to use.

• The key_type argument provides additional information about the key, such as its encryption

method or intended use.

1262

MySQL Plugin Services

• Keyring service functions treat key IDs, user names, types, and values as binary strings, so

comparisons are case-sensitive. For example, IDs of MyKey and mykey refer to different keys.

These keyring service functions are available:

• my_key_fetch()

Deobfuscates and retrieves a key from the keyring, along with its type. The function allocates the
memory for the buffers used to store the returned key and key type. The caller should zero or
obfuscate the memory when it is no longer needed, then free it.

Syntax:

bool my_key_fetch(const char *key_id, const char **key_type,
                  const char* user_id, void **key, size_t *key_len)

Arguments:

• key_id, user_id: Null-terminated strings that as a pair form a unique identifier indicating which

key to fetch.

• key_type: The address of a buffer pointer. The function stores into it a pointer to a null-

terminated string that provides additional information about the key (stored when the key was
added).

• key: The address of a buffer pointer. The function stores into it a pointer to the buffer containing

the fetched key data.

• key_len: The address of a variable into which the function stores the size in bytes of the *key

buffer.

Return value:

Returns 0 for success, 1 for failure.

• my_key_generate()

Generates a new random key of a given type and length and stores it in the keyring. The key has a
length of key_len and is associated with the identifier formed from key_id and user_id. The type
and length values must be consistent with the values supported by the underlying keyring plugin.
See Section 8.4.4.13, “Supported Keyring Key Types and Lengths”.

Syntax:

bool my_key_generate(const char *key_id, const char *key_type,
                     const char *user_id, size_t key_len)

Arguments:

• key_id, user_id: Null-terminated strings that as a pair form a unique identifier for the key to be

generated.

• key_type: A null-terminated string that provides additional information about the key.

• key_len: The size in bytes of the key to be generated.

Return value:

Returns 0 for success, 1 for failure.

• my_key_remove()

Removes a key from the keyring.

1263

MySQL Server Loadable Functions

Syntax:

bool my_key_remove(const char *key_id, const char* user_id)

Arguments:

• key_id, user_id: Null-terminated strings that as a pair form a unique identifier for the key to be

removed.

Return value:

Returns 0 for success, 1 for failure.

• my_key_store()

Obfuscates and stores a key in the keyring.

Syntax:

bool my_key_store(const char *key_id, const char *key_type,
                  const char* user_id, void *key, size_t key_len)

Arguments:

• key_id, user_id: Null-terminated strings that as a pair form a unique identifier for the key to be

stored.

• key_type: A null-terminated string that provides additional information about the key.

• key: The buffer containing the key data to be stored.

• key_len: The size in bytes of the key buffer.

Return value:

Returns 0 for success, 1 for failure.

7.7 MySQL Server Loadable Functions

MySQL supports loadable functions, that is, functions that are not built in but can be loaded at runtime
(either during startup or later) to extend server capabilities, or unloaded to remove capabilities. For a
table describing the available loadable functions, see Section 14.2, “Loadable Function Reference”.
Loadable functions contrast with built-in (native) functions, which are implemented as part of the server
and are always available; for a table, see Section 14.1, “Built-In Function and Operator Reference”.

Note

Loadable functions previously were known as user-defined functions (UDFs).
That terminology was something of a misnomer because “user-defined” also
can apply to other types of functions, such as stored functions (a type of stored
object written using SQL) and native functions added by modifying the server
source code.

MySQL distributions include loadable functions that implement, in whole or in part, these server
capabilities:

• Group Replication enables you to create a highly available distributed MySQL service across a

group of MySQL server instances, with data consistency, conflict detection and resolution, and group
membership services all built-in. See Chapter 20, Group Replication.

• MySQL Enterprise Edition includes functions that perform encryption operations based on the

OpenSSL library. See Section 8.6, “MySQL Enterprise Encryption”.

1264

Installing and Uninstalling Loadable Functions

• MySQL Enterprise Edition includes functions that provide an SQL-level API for masking and de-
identification operations. See MySQL Enterprise Data Masking and De-Identification Elements.

• MySQL Enterprise Edition includes audit logging for monitoring and logging of connection and

query activity. See Section 8.4.5, “MySQL Enterprise Audit”, and Section 8.4.6, “The Audit Message
Component”.

• MySQL Enterprise Edition includes a firewall capability that implements an application-level firewall
to enable database administrators to permit or deny SQL statement execution based on matching
against patterns for accepted statement. See Section 8.4.7, “MySQL Enterprise Firewall”.

• A query rewriter examines statements received by MySQL Server and possibly rewrites them before

the server executes them. See Section 7.6.4, “The Rewriter Query Rewrite Plugin”

• Version Tokens enables creation of and synchronization around server tokens that applications can

use to prevent accessing incorrect or out-of-date data. See Section 7.6.6, “Version Tokens”.

• The MySQL Keyring provides secure storage for sensitive information. See Section 8.4.4, “The

MySQL Keyring”.

• A locking service provides a locking interface for application use. See Section 7.6.9.1, “The Locking

Service”.

• A function provides access to query attributes. See Section 11.6, “Query Attributes”.

The following sections describe how to install and uninstall loadable functions, and how to determine at
runtime which loadable functions are installed and obtain information about them.

In some cases, a loadable function is loaded by installing the component that implements the function,
rather than by loading the function directly. For details about a particular loadable function, see the
installation instructions for the server feature that includes it.

For information about writing loadable functions, see Adding Functions to MySQL.

7.7.1 Installing and Uninstalling Loadable Functions

Loadable functions, as the name implies, must be loaded into the server before they can be used.
MySQL supports automatic function loading during server startup and manual loading thereafter.

While a loadable function is loaded, information about it is available as described in Section 7.7.2,
“Obtaining Information About Loadable Functions”.

• Installing Loadable Functions

• Uninstalling Loadable Functions

• Reinstalling or Upgrading Loadable Functions

Installing Loadable Functions

To load a loadable function manually, use the CREATE FUNCTION statement. For example:

CREATE FUNCTION metaphon
  RETURNS STRING
  SONAME 'udf_example.so';

The file base name depends on your platform. Common suffixes are .so for Unix and Unix-like
systems, .dll for Windows.

CREATE FUNCTION has these effects:

• It loads the function into the server to make it available immediately.

• It registers the function in the mysql.func system table to make it persistent across server restarts.
For this reason, CREATE FUNCTION requires the INSERT privilege for the mysql system database.

1265

Obtaining Information About Loadable Functions

• It adds the function to the Performance Schema user_defined_functions table that provides
runtime information about installed loadable functions. See Section 7.7.2, “Obtaining Information
About Loadable Functions”.

Automatic loading of loadable functions occurs during the normal server startup sequence:

• Functions registered in the mysql.func table are installed.

• Components or plugins that are installed at startup may automatically install related functions.

• Automatic function installation adds the functions to the Performance Schema

user_defined_functions table that provides runtime information about installed functions.

If the server is started with the --skip-grant-tables option, functions registered in the
mysql.func table are not loaded and are unavailable. This does not apply to functions installed
automatically by a component or plugin.

Uninstalling Loadable Functions

To remove a loadable function, use the DROP FUNCTION statement. For example:

DROP FUNCTION metaphon;

DROP FUNCTION has these effects:

• It unloads the function to make it unavailable.

• It removes the function from the mysql.func system table. For this reason, DROP FUNCTION

requires the DELETE privilege for the mysql system database. With the function no longer registered
in the mysql.func table, the server does not load the function during subsequent restarts.

• It removes the function from the Performance Schema user_defined_functions table that

provides runtime information about installed loadable functions.

DROP FUNCTION cannot be used to drop a loadable function that is installed automatically by
components or plugins rather than by using CREATE FUNCTION. Such a function is also dropped
automatically, when the component or plugin that installed it is uninstalled.

Reinstalling or Upgrading Loadable Functions

To reinstall or upgrade the shared library associated with a loadable function, issue a DROP FUNCTION
statement, upgrade the shared library, and then issue a CREATE FUNCTION statement. If you upgrade
the shared library first and then use DROP FUNCTION, the server may unexpectedly shut down.

7.7.2 Obtaining Information About Loadable Functions

The Performance Schema user_defined_functions table contains information about the currently
installed loadable functions:

SELECT * FROM performance_schema.user_defined_functions;

The mysql.func system table also lists installed loadable functions, but only those installed using
CREATE FUNCTION. The user_defined_functions table lists loadable functions installed using
CREATE FUNCTION as well as loadable functions installed automatically by components or plugins.
This difference makes user_defined_functions preferable to mysql.func for checking which
loadable functions are installed. See Section 29.12.21.10, “The user_defined_functions Table”.

7.8 Running Multiple MySQL Instances on One Machine

In some cases, you might want to run multiple instances of MySQL on a single machine. You might
want to test a new MySQL release while leaving an existing production setup undisturbed. Or you
might want to give different users access to different mysqld servers that they manage themselves.
(For example, you might be an Internet Service Provider that wants to provide independent MySQL
installations for different customers.)

1266

Running Multiple MySQL Instances on One Machine

It is possible to use a different MySQL server binary per instance, or use the same binary for multiple
instances, or any combination of the two approaches. For example, you might run a server from
MySQL 5.7 and one from MySQL 8.0, to see how different versions handle a given workload. Or
you might run multiple instances of the current production version, each managing a different set of
databases.

Whether or not you use distinct server binaries, each instance that you run must be configured with
unique values for several operating parameters. This eliminates the potential for conflict between
instances. Parameters can be set on the command line, in option files, or by setting environment
variables. See Section 6.2.2, “Specifying Program Options”. To see the values used by a given
instance, connect to it and execute a SHOW VARIABLES statement.

The primary resource managed by a MySQL instance is the data directory. Each instance should use a
different data directory, the location of which is specified using the --datadir=dir_name option. For
methods of configuring each instance with its own data directory, and warnings about the dangers of
failing to do so, see Section 7.8.1, “Setting Up Multiple Data Directories”.

In addition to using different data directories, several other options must have different values for each
server instance:

• --port=port_num

--port controls the port number for TCP/IP connections. Alternatively, if the host has multiple
network addresses, you can set the bind_address system variable to cause each server to listen
to a different address.

• --socket={file_name|pipe_name}

--socket controls the Unix socket file path on Unix or the named-pipe name on Windows. On
Windows, it is necessary to specify distinct pipe names only for those servers configured to permit
named-pipe connections.

• --shared-memory-base-name=name

This option is used only on Windows. It designates the shared-memory name used by a Windows
server to permit clients to connect using shared memory. It is necessary to specify distinct shared-
memory names only for those servers configured to permit shared-memory connections.

• --pid-file=file_name

This option indicates the path name of the file in which the server writes its process ID.

If you use the following log file options, their values must differ for each server:

• --general_log_file=file_name

• --log-bin[=file_name]

• --slow_query_log_file=file_name

• --log-error[=file_name]

For further discussion of log file options, see Section 7.4, “MySQL Server Logs”.

To achieve better performance, you can specify the following option differently for each server, to
spread the load between several physical disks:

• --tmpdir=dir_name

Having different temporary directories also makes it easier to determine which MySQL server created
any given temporary file.

If you have multiple MySQL installations in different locations, you can specify the base directory for
each installation with the --basedir=dir_name option. This causes each instance to automatically

1267

Setting Up Multiple Data Directories

use a different data directory, log files, and PID file because the default for each of those parameters
is relative to the base directory. In that case, the only other options you need to specify are the --
socket and --port options. Suppose that you install different versions of MySQL using tar file
binary distributions. These install in different locations, so you can start the server for each installation
using the command bin/mysqld_safe under its corresponding base directory. mysqld_safe
determines the proper --basedir option to pass to mysqld, and you need specify only the --
socket and --port options to mysqld_safe.

As discussed in the following sections, it is possible to start additional servers by specifying appropriate
command options or by setting environment variables. However, if you need to run multiple servers
on a more permanent basis, it is more convenient to use option files to specify for each server those
option values that must be unique to it. The --defaults-file option is useful for this purpose.

7.8.1 Setting Up Multiple Data Directories

Each MySQL Instance on a machine should have its own data directory. The location is specified using
the --datadir=dir_name option.

There are different methods of setting up a data directory for a new instance:

• Create a new data directory.

• Copy an existing data directory.

The following discussion provides more detail about each method.

Warning

Normally, you should never have two servers that update data in the same
databases. This may lead to unpleasant surprises if your operating system does
not support fault-free system locking. If (despite this warning) you run multiple
servers using the same data directory and they have logging enabled, you must
use the appropriate options to specify log file names that are unique to each
server. Otherwise, the servers try to log to the same files.

Even when the preceding precautions are observed, this kind of setup works
only with MyISAM and MERGE tables, and not with any of the other storage
engines. Also, this warning against sharing a data directory among servers
always applies in an NFS environment. Permitting multiple MySQL servers
to access a common data directory over NFS is a very bad idea. The primary
problem is that NFS is the speed bottleneck. It is not meant for such use.
Another risk with NFS is that you must devise a way to ensure that two or more
servers do not interfere with each other. Usually NFS file locking is handled
by the lockd daemon, but at the moment there is no platform that performs
locking 100% reliably in every situation.

Create a New Data Directory

With this method, the data directory is in the same state as when you first install MySQL, and has the
default set of MySQL accounts and no user data.

On Unix, initialize the data directory. See Section 2.9, “Postinstallation Setup and Testing”.

On Windows, the data directory is included in the MySQL distribution:

• MySQL Zip archive distributions for Windows contain an unmodified data directory. You can unpack
such a distribution into a temporary location, then copy it data directory to where you are setting up
the new instance.

• Windows MSI package installers create and set up the data directory that the installed server uses,

but also create a pristine “template” data directory named data under the installation directory. After

1268

Running Multiple MySQL Instances on Windows

an installation has been performed using an MSI package, the template data directory can be copied
to set up additional MySQL instances.

Copy an Existing Data Directory

With this method, any MySQL accounts or user data present in the data directory are carried over to
the new data directory.

1. Stop the existing MySQL instance using the data directory. This must be a clean shutdown so that

the instance flushes any pending changes to disk.

2. Copy the data directory to the location where the new data directory should be.

3. Copy the my.cnf or my.ini option file used by the existing instance. This serves as a basis for

the new instance.

4. Modify the new option file so that any pathnames referring to the original data directory refer to the
new data directory. Also, modify any other options that must be unique per instance, such as the
TCP/IP port number and the log files. For a list of parameters that must be unique per instance, see
Section 7.8, “Running Multiple MySQL Instances on One Machine”.

5. Start the new instance, telling it to use the new option file.

7.8.2 Running Multiple MySQL Instances on Windows

You can run multiple servers on Windows by starting them manually from the command line, each with
appropriate operating parameters, or by installing several servers as Windows services and running
them that way. General instructions for running MySQL from the command line or as a service are
given in Section 2.3, “Installing MySQL on Microsoft Windows”. The following sections describe how
to start each server with different values for those options that must be unique per server, such as the
data directory. These options are listed in Section 7.8, “Running Multiple MySQL Instances on One
Machine”.

7.8.2.1 Starting Multiple MySQL Instances at the Windows Command Line

The procedure for starting a single MySQL server manually from the command line is described in
Section 2.3.4.6, “Starting MySQL from the Windows Command Line”. To start multiple servers this way,
you can specify the appropriate options on the command line or in an option file. It is more convenient
to place the options in an option file, but it is necessary to make sure that each server gets its own set
of options. To do this, create an option file for each server and tell the server the file name with a --
defaults-file option when you run it.

Suppose that you want to run one instance of mysqld on port 3307 with a data directory of C:
\mydata1, and another instance on port 3308 with a data directory of C:\mydata2. Use this
procedure:

1. Make sure that each data directory exists, including its own copy of the mysql database that

contains the grant tables.

2. Create two option files. For example, create one file named C:\my-opts1.cnf that looks like this:

[mysqld]
datadir = C:/mydata1
port = 3307

Create a second file named C:\my-opts2.cnf that looks like this:

[mysqld]
datadir = C:/mydata2
port = 3308

3. Use the --defaults-file option to start each server with its own option file:

C:\> C:\mysql\bin\mysqld --defaults-file=C:\my-opts1.cnf

1269

Running Multiple MySQL Instances on Windows

C:\> C:\mysql\bin\mysqld --defaults-file=C:\my-opts2.cnf

Each server starts in the foreground (no new prompt appears until the server exits later), so you
need to issue those two commands in separate console windows.

To shut down the servers, connect to each using the appropriate port number:

C:\> C:\mysql\bin\mysqladmin --port=3307 --host=127.0.0.1 --user=root --password shutdown
C:\> C:\mysql\bin\mysqladmin --port=3308 --host=127.0.0.1 --user=root --password shutdown

Servers configured as just described permit clients to connect over TCP/IP. If your version of Windows
supports named pipes and you also want to permit named-pipe connections, specify options that
enable the named pipe and specify its name. Each server that supports named-pipe connections must
use a unique pipe name. For example, the C:\my-opts1.cnf file might be written like this:

[mysqld]
datadir = C:/mydata1
port = 3307
enable-named-pipe
socket = mypipe1

Modify C:\my-opts2.cnf similarly for use by the second server. Then start the servers as described
previously.

A similar procedure applies for servers that you want to permit shared-memory connections. Enable
such connections by starting the server with the shared_memory system variable enabled and specify
a unique shared-memory name for each server by setting the shared_memory_base_name system
variable.

7.8.2.2 Starting Multiple MySQL Instances as Windows Services

On Windows, a MySQL server can run as a Windows service. The procedures for installing, controlling,
and removing a single MySQL service are described in Section 2.3.4.8, “Starting MySQL as a Windows
Service”.

To set up multiple MySQL services, you must make sure that each instance uses a different service
name in addition to the other parameters that must be unique per instance.

For the following instructions, suppose that you want to run the mysqld server from two different
versions of MySQL that are installed at C:\mysql-5.7.9 and C:\mysql-8.0.42, respectively. (This
might be the case if you are running 5.7.9 as your production server, but also want to conduct tests
using 8.0.42.)

To install MySQL as a Windows service, use the --install or --install-manual option. For
information about these options, see Section 2.3.4.8, “Starting MySQL as a Windows Service”.

Based on the preceding information, you have several ways to set up multiple services. The following
instructions describe some examples. Before trying any of them, shut down and remove any existing
MySQL services.

• Approach 1: Specify the options for all services in one of the standard option files. To do this, use
a different service name for each server. Suppose that you want to run the 5.7.9 mysqld using the
service name of mysqld1 and the 8.0.42 mysqld using the service name mysqld2. In this case,
you can use the [mysqld1] group for 5.7.9 and the [mysqld2] group for 8.0.42. For example, you
can set up C:\my.cnf like this:

# options for mysqld1 service
[mysqld1]
basedir = C:/mysql-5.7.9
port = 3307
enable-named-pipe
socket = mypipe1

# options for mysqld2 service
[mysqld2]

1270

Running Multiple MySQL Instances on Unix

basedir = C:/mysql-8.0.42
port = 3308
enable-named-pipe
socket = mypipe2

Install the services as follows, using the full server path names to ensure that Windows registers the
correct executable program for each service:

C:\> C:\mysql-5.7.9\bin\mysqld --install mysqld1
C:\> C:\mysql-8.0.42\bin\mysqld --install mysqld2

To start the services, use the services manager, or NET START or SC START with the appropriate
service names:

C:\> SC START mysqld1
C:\> SC START mysqld2

To stop the services, use the services manager, or use NET STOP or SC STOP with the appropriate
service names:

C:\> SC STOP mysqld1
C:\> SC STOP mysqld2

• Approach 2: Specify options for each server in separate files and use --defaults-file when
you install the services to tell each server what file to use. In this case, each file should list options
using a [mysqld] group.

With this approach, to specify options for the 5.7.9 mysqld, create a file C:\my-opts1.cnf that
looks like this:

[mysqld]
basedir = C:/mysql-5.7.9
port = 3307
enable-named-pipe
socket = mypipe1

For the 8.0.42 mysqld, create a file C:\my-opts2.cnf that looks like this:

[mysqld]
basedir = C:/mysql-8.0.42
port = 3308
enable-named-pipe
socket = mypipe2

Install the services as follows (enter each command on a single line):

C:\> C:\mysql-5.7.9\bin\mysqld --install mysqld1
           --defaults-file=C:\my-opts1.cnf
C:\> C:\mysql-8.0.42\bin\mysqld --install mysqld2
           --defaults-file=C:\my-opts2.cnf

When you install a MySQL server as a service and use a --defaults-file option, the service
name must precede the option.

After installing the services, start and stop them the same way as in the preceding example.

To remove multiple services, use SC DELETE mysqld_service_name for each one. Alternatively,
use mysqld --remove for each one, specifying a service name following the --remove option. If the
service name is the default (MySQL), you can omit it when using mysqld --remove.

7.8.3 Running Multiple MySQL Instances on Unix

Note

The discussion here uses mysqld_safe to launch multiple instances of
MySQL. For MySQL installation using an RPM distribution, server startup

1271

Running Multiple MySQL Instances on Unix

and shutdown is managed by systemd on several Linux platforms. On these
platforms, mysqld_safe is not installed because it is unnecessary. For
information about using systemd to handle multiple MySQL instances, see
Section 2.5.9, “Managing MySQL Server with systemd”.

One way is to run multiple MySQL instances on Unix is to compile different servers with different
default TCP/IP ports and Unix socket files so that each one listens on different network interfaces.
Compiling in different base directories for each installation also results automatically in a separate,
compiled-in data directory, log file, and PID file location for each server.

Assume that an existing 5.7 server is configured for the default TCP/IP port number (3306) and
Unix socket file (/tmp/mysql.sock). To configure a new 8.0.42 server to have different operating
parameters, use a CMake command something like this:

$> cmake . -DMYSQL_TCP_PORT=port_number \
             -DMYSQL_UNIX_ADDR=file_name \
             -DCMAKE_INSTALL_PREFIX=/usr/local/mysql-8.0.42

Here, port_number and file_name must be different from the default TCP/IP port number and Unix
socket file path name, and the CMAKE_INSTALL_PREFIX value should specify an installation directory
different from the one under which the existing MySQL installation is located.

If you have a MySQL server listening on a given port number, you can use the following command to
find out what operating parameters it is using for several important configurable variables, including the
base directory and Unix socket file name:

$> mysqladmin --host=host_name --port=port_number variables

With the information displayed by that command, you can tell what option values not to use when
configuring an additional server.

If you specify localhost as the host name, mysqladmin defaults to using a Unix socket file rather
than TCP/IP. To explicitly specify the transport protocol, use the --protocol={TCP|SOCKET|PIPE|
MEMORY} option.

You need not compile a new MySQL server just to start with a different Unix socket file and TCP/IP port
number. It is also possible to use the same server binary and start each invocation of it with different
parameter values at runtime. One way to do so is by using command-line options:

$> mysqld_safe --socket=file_name --port=port_number

To start a second server, provide different --socket and --port option values, and pass a --
datadir=dir_name option to mysqld_safe so that the server uses a different data directory.

Alternatively, put the options for each server in a different option file, then start each server using a --
defaults-file option that specifies the path to the appropriate option file. For example, if the option
files for two server instances are named /usr/local/mysql/my.cnf and /usr/local/mysql/
my.cnf2, start the servers like this: command:

$> mysqld_safe --defaults-file=/usr/local/mysql/my.cnf
$> mysqld_safe --defaults-file=/usr/local/mysql/my.cnf2

Another way to achieve a similar effect is to use environment variables to set the Unix socket file name
and TCP/IP port number:

$> MYSQL_UNIX_PORT=/tmp/mysqld-new.sock
$> MYSQL_TCP_PORT=3307
$> export MYSQL_UNIX_PORT MYSQL_TCP_PORT
$> bin/mysqld --initialize --user=mysql
$> mysqld_safe --datadir=/path/to/datadir &

This is a quick way of starting a second server to use for testing. The nice thing about this method is
that the environment variable settings apply to any client programs that you invoke from the same shell.
Thus, connections for those clients are automatically directed to the second server.

1272

Using Client Programs in a Multiple-Server Environment

Section 6.9, “Environment Variables”, includes a list of other environment variables you can use to
affect MySQL programs.

On Unix, the mysqld_multi script provides another way to start multiple servers. See Section 6.3.4,
“mysqld_multi — Manage Multiple MySQL Servers”.

7.8.4 Using Client Programs in a Multiple-Server Environment

To connect with a client program to a MySQL server that is listening to different network interfaces from
those compiled into your client, you can use one of the following methods:

• Start the client with --host=host_name --port=port_number to connect using TCP/IP to a
remote server, with --host=127.0.0.1 --port=port_number to connect using TCP/IP to a
local server, or with --host=localhost --socket=file_name to connect to a local server using
a Unix socket file or a Windows named pipe.

• Start the client with --protocol=TCP to connect using TCP/IP, --protocol=SOCKET to
connect using a Unix socket file, --protocol=PIPE to connect using a named pipe, or --
protocol=MEMORY to connect using shared memory. For TCP/IP connections, you may also need
to specify --host and --port options. For the other types of connections, you may need to specify
a --socket option to specify a Unix socket file or Windows named-pipe name, or a --shared-
memory-base-name option to specify the shared-memory name. Shared-memory connections are
supported only on Windows.

•     On Unix, set the MYSQL_UNIX_PORT and MYSQL_TCP_PORT environment variables to point to the
Unix socket file and TCP/IP port number before you start your clients. If you normally use a specific
socket file or port number, you can place commands to set these environment variables in your
.login file so that they apply each time you log in. See Section 6.9, “Environment Variables”.

• Specify the default Unix socket file and TCP/IP port number in the [client] group of an option file.
For example, you can use C:\my.cnf on Windows, or the .my.cnf file in your home directory on
Unix. See Section 6.2.2.2, “Using Option Files”.

• In a C program, you can specify the socket file or port number arguments in the

mysql_real_connect() call. You can also have the program read option files by calling
mysql_options(). See C API Basic Function Descriptions.

• If you are using the Perl DBD::mysql module, you can read options from MySQL option files. For

example:

$dsn = "DBI:mysql:test;mysql_read_default_group=client;"
        . "mysql_read_default_file=/usr/local/mysql/data/my.cnf";
$dbh = DBI->connect($dsn, $user, $password);

See Section 31.9, “MySQL Perl API”.

Other programming interfaces may provide similar capabilities for reading option files.

7.9 Debugging MySQL

This section describes debugging techniques that assist efforts to track down problems in MySQL.

7.9.1 Debugging a MySQL Server

If you are using some functionality that is very new in MySQL, you can try to run mysqld with the --
skip-new option (which disables all new, potentially unsafe functionality). See Section B.3.3.3, “What
to Do If MySQL Keeps Crashing”.

If mysqld does not want to start, verify that you have no my.cnf files that interfere with your setup!
You can check your my.cnf arguments with mysqld --print-defaults and avoid using them by
starting with mysqld --no-defaults ....

1273

Debugging a MySQL Server

If mysqld starts to eat up CPU or memory or if it “hangs,” you can use mysqladmin processlist
status to find out if someone is executing a query that takes a long time. It may be a good idea to run
mysqladmin -i10 processlist status in some window if you are experiencing performance
problems or problems when new clients cannot connect.

The command mysqladmin debug dumps some information about locks in use, used memory and
query usage to the MySQL log file. This may help solve some problems. This command also provides
some useful information even if you have not compiled MySQL for debugging!

If the problem is that some tables are getting slower and slower you should try to optimize the table
with OPTIMIZE TABLE or myisamchk. See Chapter 7, MySQL Server Administration. You should also
check the slow queries with EXPLAIN.

You should also read the OS-specific section in this manual for problems that may be unique to your
environment. See Section 2.1, “General Installation Guidance”.

7.9.1.1 Compiling MySQL for Debugging

If you have some very specific problem, you can always try to debug MySQL. To do this you must
configure MySQL with the -DWITH_DEBUG=1 option. You can check whether MySQL was compiled
with debugging by doing: mysqld --help. If the --debug flag is listed with the options then you have
debugging enabled. mysqladmin ver also lists the mysqld version as mysql ... --debug in this
case.

If mysqld stops crashing when you configure it with the -DWITH_DEBUG=1 CMake option, you
probably have found a compiler bug or a timing bug within MySQL. In this case, you can try to add -g
using the CMAKE_C_FLAGS and CMAKE_CXX_FLAGS CMake options and not use -DWITH_DEBUG=1.
If mysqld dies, you can at least attach to it with gdb or use gdb on the core file to find out what
happened.

When you configure MySQL for debugging you automatically enable a lot of extra safety check
functions that monitor the health of mysqld. If they find something “unexpected,” an entry is written
to stderr, which mysqld_safe directs to the error log! This also means that if you are having some
unexpected problems with MySQL and are using a source distribution, the first thing you should do is to
configure MySQL for debugging. If you believe that you have found a bug, please use the instructions
at Section 1.5, “How to Report Bugs or Problems”.

In the Windows MySQL distribution, mysqld.exe is by default compiled with support for trace files.

7.9.1.2 Creating Trace Files

If the mysqld server does not start or it crashes easily, you can try to create a trace file to find the
problem.

To do this, you must have a mysqld that has been compiled with debugging support. You can check
this by executing mysqld -V. If the version number ends with -debug, it is compiled with support for
trace files. (On Windows, the debugging server is named mysqld-debug rather than mysqld.)

Start the mysqld server with a trace log in /tmp/mysqld.trace on Unix or \mysqld.trace on
Windows:

$> mysqld --debug

On Windows, you should also use the --standalone flag to not start mysqld as a service. In a
console window, use this command:

C:\> mysqld-debug --debug --standalone

After this, you can use the mysql.exe command-line tool in a second console window to reproduce
the problem. You can stop the mysqld server with mysqladmin shutdown.

1274

Debugging a MySQL Server

The trace file can become very large! To generate a smaller trace file, you can use debugging options
something like this:

mysqld --debug=d,info,error,query,general,where:O,/tmp/mysqld.trace

This only prints information with the most interesting tags to the trace file.

If you file a bug, please add only those lines from the trace file to the bug report that indicate where
something seems to go wrong. If you cannot locate the wrong place, open a bug report and upload
the whole trace file to the report, so that a MySQL developer can take a look at it. For instructions, see
Section 1.5, “How to Report Bugs or Problems”.

The trace file is made with the DBUG package by Fred Fish. See Section 7.9.4, “The DBUG Package”.

7.9.1.3 Using WER with PDB to create a Windows crashdump

Program Database files (with suffix pdb) are included in the ZIP Archive Debug Binaries & Test
Suite distribution of MySQL. These files provide information for debugging your MySQL installation in
the event of a problem. This is a separate download from the standard MSI or Zip file.

Note

The PDB files are available in a separate file labeled "ZIP Archive Debug
Binaries & Test Suite".

The PDB file contains more detailed information about mysqld and other tools that enables more
detailed trace and dump files to be created. You can use these with WinDbg or Visual Studio to debug
mysqld.

For more information on PDB files and the debugging options available, see Debugging Tools for
Windows.

To use WinDbg, either install the full Windows Driver Kit (WDK) or install the standalone version.

Important

The .exe and .pdb files must be an exact match (both version number and
MySQL server edition); otherwise, or WinDBG complains while attempting to
load the symbols.

1. To generate a minidump mysqld.dmp, enable the core-file option under the [mysqld] section in

my.ini. Restart the MySQL server after making these changes.

2. Create a directory to store the generated files, such as c:\symbols

3. Determine the path to your windbg.exe executable using the Find GUI or from the command line,
for example: dir /s /b windbg.exe -- a common default is C:\Program Files\Debugging Tools
for Windows (x64)\windbg.exe

4. Launch windbg.exe giving it the paths to mysqld.exe, mysqld.pdb, mysqld.dmp, and the

source code. Alternatively, pass in each path from the WinDbg GUI. For example:

windbg.exe -i "C:\mysql-8.0.42-winx64\bin\"^
 -z "C:\mysql-8.0.42-winx64\data\mysqld.dmp"^
 -srcpath "E:\ade\mysql_archives\8.0\8.0.42\mysql-8.0.42"^
 -y "C:\mysql-8.0.42-winx64\bin;SRV*c:\symbols*http://msdl.microsoft.com/download/symbols"^
 -v -n -c "!analyze -vvvvv"

Note

The ^ character and newline are removed by the Windows command line
processor, so be sure the spaces remain intact.

1275

Debugging a MySQL Server

7.9.1.4 Debugging mysqld under gdb

On most systems you can also start mysqld from gdb to get more information if mysqld crashes.

With some older gdb versions on Linux you must use run --one-thread if you want to be able to
debug mysqld threads. In this case, you can only have one thread active at a time.

NPTL threads (the new thread library on Linux) may cause problems while running mysqld under gdb.
Some symptoms are:

• mysqld hangs during startup (before it writes ready for connections).

• mysqld crashes during a pthread_mutex_lock() or pthread_mutex_unlock() call.

In this case, you should set the following environment variable in the shell before starting gdb:

LD_ASSUME_KERNEL=2.4.1
export LD_ASSUME_KERNEL

When running mysqld under gdb, you should disable the stack trace with --skip-stack-trace to
be able to catch segfaults within gdb.

Use the --gdb option to mysqld to install an interrupt handler for SIGINT (needed to stop mysqld
with ^C to set breakpoints) and disable stack tracing and core file handling.

It is very hard to debug MySQL under gdb if you do a lot of new connections the whole time as
gdb does not free the memory for old threads. You can avoid this problem by starting mysqld with
thread_cache_size set to a value equal to max_connections + 1. In most cases just using --
thread_cache_size=5' helps a lot!

If you want to get a core dump on Linux if mysqld dies with a SIGSEGV signal, you can start mysqld
with the --core-file option. This core file can be used to make a backtrace that may help you find
out why mysqld died:

$> gdb mysqld core
gdb>   backtrace full
gdb>   quit

See Section B.3.3.3, “What to Do If MySQL Keeps Crashing”.

If you are using gdb on Linux, you should install a .gdb file, with the following information, in your
current directory:

set print sevenbit off
handle SIGUSR1 nostop noprint
handle SIGUSR2 nostop noprint
handle SIGWAITING nostop noprint
handle SIGLWP nostop noprint
handle SIGPIPE nostop
handle SIGALRM nostop
handle SIGHUP nostop
handle SIGTERM nostop noprint

Here is an example how to debug mysqld:

$> gdb /usr/local/libexec/mysqld
gdb> run
...
backtrace full # Do this when mysqld crashes

Include the preceding output in a bug report, which you can file using the instructions in Section 1.5,
“How to Report Bugs or Problems”.

If mysqld hangs, you can try to use some system tools like strace or /usr/proc/bin/pstack to
examine where mysqld has hung.

strace /tmp/log libexec/mysqld

1276

Debugging a MySQL Server

If you are using the Perl DBI interface, you can turn on debugging information by using the trace
method or by setting the DBI_TRACE environment variable.

7.9.1.5 Using a Stack Trace

On some operating systems, the error log contains a stack trace if mysqld dies unexpectedly. You can
use this to find out where (and maybe why) mysqld died. See Section 7.4.2, “The Error Log”. To get
a stack trace, you must not compile mysqld with the -fomit-frame-pointer option to gcc. See
Section 7.9.1.1, “Compiling MySQL for Debugging”.

A stack trace in the error log looks something like this:

mysqld got signal 11;
Attempting backtrace. You can use the following information
to find out where mysqld died. If you see no messages after
this, something went terribly wrong...

stack_bottom = 0x41fd0110 thread_stack 0x40000
mysqld(my_print_stacktrace+0x32)[0x9da402]
mysqld(handle_segfault+0x28a)[0x6648e9]
/lib/libpthread.so.0[0x7f1a5af000f0]
/lib/libc.so.6(strcmp+0x2)[0x7f1a5a10f0f2]
mysqld(_Z21check_change_passwordP3THDPKcS2_Pcj+0x7c)[0x7412cb]
mysqld(_ZN16set_var_password5checkEP3THD+0xd0)[0x688354]
mysqld(_Z17sql_set_variablesP3THDP4ListI12set_var_baseE+0x68)[0x688494]
mysqld(_Z21mysql_execute_commandP3THD+0x41a0)[0x67a170]
mysqld(_Z11mysql_parseP3THDPKcjPS2_+0x282)[0x67f0ad]
mysqld(_Z16dispatch_command19enum_server_commandP3THDPcj+0xbb7[0x67fdf8]
mysqld(_Z10do_commandP3THD+0x24d)[0x6811b6]
mysqld(handle_one_connection+0x11c)[0x66e05e]

If resolution of function names for the trace fails, the trace contains less information:

mysqld got signal 11;
Attempting backtrace. You can use the following information
to find out where mysqld died. If you see no messages after
this, something went terribly wrong...

stack_bottom = 0x41fd0110 thread_stack 0x40000
[0x9da402]
[0x6648e9]
[0x7f1a5af000f0]
[0x7f1a5a10f0f2]
[0x7412cb]
[0x688354]
[0x688494]
[0x67a170]
[0x67f0ad]
[0x67fdf8]
[0x6811b6]
[0x66e05e]

Newer versions of glibc stack trace functions also print the address as relative to the object. On
glibc-based systems (Linux), the trace for an unexpected exit within a plugin looks something like:

plugin/auth/auth_test_plugin.so(+0x9a6)[0x7ff4d11c29a6]

To translate the relative address (+0x9a6) into a file name and line number, use this command:

$> addr2line -fie auth_test_plugin.so 0x9a6
auth_test_plugin
mysql-trunk/plugin/auth/test_plugin.c:65

The addr2line utility is part of the binutils package on Linux.

On Solaris, the procedure is similar. The Solaris printstack() already prints relative addresses:

plugin/auth/auth_test_plugin.so:0x1510

1277

Debugging a MySQL Server

To translate, use this command:

$> gaddr2line -fie auth_test_plugin.so 0x1510
mysql-trunk/plugin/auth/test_plugin.c:88

Windows already prints the address, function name and line:

000007FEF07E10A4 auth_test_plugin.dll!auth_test_plugin()[test_plugin.c:72]

7.9.1.6 Using Server Logs to Find Causes of Errors in mysqld

Note that before starting mysqld with the general query log enabled, you should check all your tables
with myisamchk. See Chapter 7, MySQL Server Administration.

If mysqld dies or hangs, you should start mysqld with the general query log enabled. See
Section 7.4.3, “The General Query Log”. When mysqld dies again, you can examine the end of the log
file for the query that killed mysqld.

If you use the default general query log file, the log is stored in the database directory as
host_name.log In most cases it is the last query in the log file that killed mysqld, but if possible you
should verify this by restarting mysqld and executing the found query from the mysql command-line
tools. If this works, you should also test all complicated queries that did not complete.

You can also try the command EXPLAIN on all SELECT statements that takes a long time to ensure
that mysqld is using indexes properly. See Section 15.8.2, “EXPLAIN Statement”.

You can find the queries that take a long time to execute by starting mysqld with the slow query log
enabled. See Section 7.4.5, “The Slow Query Log”.

If you find the text mysqld restarted in the error log (normally a file named host_name.err) you
probably have found a query that causes mysqld to fail. If this happens, you should check all your
tables with myisamchk (see Chapter 7, MySQL Server Administration), and test the queries in the
MySQL log files to see whether one fails. If you find such a query, try first upgrading to the newest
MySQL version. If this does not help, report a bug, see Section 1.5, “How to Report Bugs or Problems”.

If you have started mysqld with the myisam_recover_options system variable set, MySQL
automatically checks and tries to repair MyISAM tables if they are marked as 'not closed properly' or
'crashed'. If this happens, MySQL writes an entry in the hostname.err file 'Warning: Checking
table ...' which is followed by Warning: Repairing table if the table needs to be repaired. If
you get a lot of these errors, without mysqld having died unexpectedly just before, then something is
wrong and needs to be investigated further. See Section 7.1.7, “Server Command Options”.

When the server detects MyISAM table corruption, it writes additional information to the error log, such
as the name and line number of the source file, and the list of threads accessing the table. Example:
Got an error from thread_id=1, mi_dynrec.c:368. This is useful information to include in
bug reports.

It is not a good sign if mysqld did die unexpectedly, but in this case, you should not investigate the
Checking table... messages, but instead try to find out why mysqld died.

7.9.1.7 Making a Test Case If You Experience Table Corruption

The following procedure applies to MyISAM tables. For information about steps to take when
encountering InnoDB table corruption, see Section 1.5, “How to Report Bugs or Problems”.

If you encounter corrupted MyISAM tables or if mysqld always fails after some update statements, you
can test whether the issue is reproducible by doing the following:

1. Stop the MySQL daemon with mysqladmin shutdown.

2. Make a backup of the tables to guard against the very unlikely case that the repair does something

bad.

1278

Debugging a MySQL Client

3. Check all tables with myisamchk -s database/*.MYI. Repair any corrupted tables with

myisamchk -r database/table.MYI.

4. Make a second backup of the tables.

5. Remove (or move away) any old log files from the MySQL data directory if you need more space.

6. Start mysqld with the binary log enabled. If you want to find a statement that crashes mysqld, you
should start the server with the general query log enabled as well. See Section 7.4.3, “The General
Query Log”, and Section 7.4.4, “The Binary Log”.

7. When you have gotten a crashed table, stop the mysqld server.

8. Restore the backup.

9. Restart the mysqld server without the binary log enabled.

10. Re-execute the statements with mysqlbinlog binary-log-file | mysql. The binary log is

saved in the MySQL database directory with the name hostname-bin.NNNNNN.

11. If the tables are corrupted again or you can get mysqld to die with the above command, you

have found a reproducible bug. FTP the tables and the binary log to our bugs database using the
instructions given in Section 1.5, “How to Report Bugs or Problems”. If you are a support customer,
you can use the MySQL Customer Support Center (https://www.mysql.com/support/) to alert the
MySQL team about the problem and have it fixed as soon as possible.

7.9.2 Debugging a MySQL Client

To be able to debug a MySQL client with the integrated debug package, you should configure MySQL
with -DWITH_DEBUG=1. See Section 2.8.7, “MySQL Source-Configuration Options”.

Before running a client, you should set the MYSQL_DEBUG environment variable:

$> MYSQL_DEBUG=d:t:O,/tmp/client.trace
$> export MYSQL_DEBUG

This causes clients to generate a trace file in /tmp/client.trace.

If you have problems with your own client code, you should attempt to connect to the server and
run your query using a client that is known to work. Do this by running mysql in debugging mode
(assuming that you have compiled MySQL with debugging on):

$> mysql --debug=d:t:O,/tmp/client.trace

This provides useful information in case you mail a bug report. See Section 1.5, “How to Report Bugs
or Problems”.

If your client crashes at some 'legal' looking code, you should check that your mysql.h include file
matches your MySQL library file. A very common mistake is to use an old mysql.h file from an old
MySQL installation with new MySQL library.

7.9.3 The LOCK_ORDER Tool

The MySQL server is a multithreaded application that uses numerous internal locking and lock-related
primitives, such as mutexes, rwlocks (including prlocks and sxlocks), conditions, and files. Within
the server, the set of lock-related objects changes with implementation of new features and code
refactoring for performance improvements. As with any multithreaded application that uses locking
primitives, there is always a risk of encountering a deadlock during execution when multiple locks are
held at once. For MySQL, the effect of a deadlock is catastrophic, causing a complete loss of service.

As of MySQL 8.0.17, to enable detection of lock-acquisition deadlocks and enforcement that
runtime execution is free of them, MySQL supports LOCK_ORDER tooling. This enables a lock-order

1279

The LOCK_ORDER Tool

dependency graph to be defined as part of server design, and server runtime checking to ensure that
lock acquisition is acyclic and that execution paths comply with the graph.

This section provides information about using the LOCK_ORDER tool, but only at a basic level. For
complete details, see the Lock Order section of the MySQL Server Doxygen documentation, available
at https://dev.mysql.com/doc/index-other.html.

The LOCK_ORDER tool is intended for debugging the server, not for production use.

To use the LOCK_ORDER tool, follow this procedure:

1. Build MySQL from source, configuring it with the -DWITH_LOCK_ORDER=ON CMake option so that

the build includes LOCK_ORDER tooling.

Note

With the WITH_LOCK_ORDER option enabled, MySQL builds require the
flex program.

2. To run the server with the LOCK_ORDER tool enabled, enable the lock_order system variable at
server startup. Several other system variables for LOCK_ORDER configuration are available as well.

3. For MySQL test suite operation, mysql-test-run.pl has a --lock-order option that controls

whether to enable the LOCK_ORDER tool during test case execution.

The system variables described following configure operation of the LOCK_ORDER tool, assuming that
MySQL has been built to include LOCK_ORDER tooling. The primary variable is lock_order, which
indicates whether to enable the LOCK_ORDER tool at runtime:

• If lock_order is disabled (the default), no other LOCK_ORDER system variables have any effect.

• If lock_order is enabled, the other system variables configure which LOCK_ORDER features to

enable.

Note

In general, it is intended that the LOCK_ORDER tool be configured by executing
mysql-test-run.pl with the --lock-order option, and for mysql-test-
run.pl to set LOCK_ORDER system variables to appropriate values.

All LOCK_ORDER system variables must be set at server startup. At runtime, their values are visible but
cannot be changed.

Some system variables exist in pairs, such as lock_order_debug_loop and
lock_order_trace_loop. For such pairs, the variables are distinguished as follows when the
condition occurs with which they are associated:

• If the _debug_ variable is enabled, a debug assertion is raised.

• If the _trace_ variable is enabled, an error is printed to the logs.

Table 7.8 LOCK_ORDER System Variable Summary

Variable Type

Variable Scope

Variable Name

lock_order

lock_order_debug_loop

Boolean

Boolean

lock_order_debug_missing_arc

Boolean

lock_order_debug_missing_key Boolean

lock_order_debug_missing_unlockBoolean

lock_order_dependencies

File name

1280

Global

Global

Global

Global

Global

Global

The LOCK_ORDER Tool

Variable Name

Variable Type

Variable Scope

lock_order_extra_dependencies File name

lock_order_output_directory

Directory name

lock_order_print_txt

lock_order_trace_loop

Boolean

Boolean

lock_order_trace_missing_arc

Boolean

lock_order_trace_missing_key

Boolean

lock_order_trace_missing_unlock Boolean

• lock_order

Global

Global

Global

Global

Global

Global

Global

Command-Line Format

--lock-order[={OFF|ON}]

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

8.0.17

lock_order

Global

No

No

Boolean

OFF

Whether to enable the LOCK_ORDER tool at runtime. If lock_order is disabled (the default), no
other LOCK_ORDER system variables have any effect. If lock_order is enabled, the other system
variables configure which LOCK_ORDER features to enable.

If lock_order is enabled, an error is raised if the server encounters a lock-acquisition sequence
that is not declared in the lock-order graph.

• lock_order_debug_loop

Command-Line Format

--lock-order-debug-loop[={OFF|ON}]

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

8.0.17

lock_order_debug_loop

Global

No

No

Boolean

OFF

Whether the LOCK_ORDER tool causes a debug assertion failure when it encounters a dependency
that is flagged as a loop in the lock-order graph.

• lock_order_debug_missing_arc

Command-Line Format

Introduced

System Variable

Scope

Dynamic

--lock-order-debug-missing-
arc[={OFF|ON}]

8.0.17

lock_order_debug_missing_arc

Global

No

1281

The LOCK_ORDER Tool

SET_VAR Hint Applies

Type

Default Value

No

Boolean

OFF

Whether the LOCK_ORDER tool causes a debug assertion failure when it encounters a dependency
that is not declared in the lock-order graph.

• lock_order_debug_missing_key

Command-Line Format

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--lock-order-debug-missing-
key[={OFF|ON}]

8.0.17

lock_order_debug_missing_key

Global

No

No

Boolean

OFF

Whether the LOCK_ORDER tool causes a debug assertion failure when it encounters an object that is
not properly instrumented with the Performance Schema.

• lock_order_debug_missing_unlock

Command-Line Format

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--lock-order-debug-missing-
unlock[={OFF|ON}]

8.0.17

lock_order_debug_missing_unlock

Global

No

No

Boolean

OFF

Whether the LOCK_ORDER tool causes a debug assertion failure when it encounters a lock that is
destroyed while still held.

• lock_order_dependencies

Command-Line Format

--lock-order-dependencies=file_name

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

8.0.17

lock_order_dependencies

Global

No

No

File name

empty string

The path to the lock_order_dependencies.txt file that defines the server lock-order
dependency graph.

1282

The LOCK_ORDER Tool

It is permitted to specify no dependencies. An empty dependency graph is used in this case.

• lock_order_extra_dependencies

Command-Line Format

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--lock-order-extra-
dependencies=file_name

8.0.17

lock_order_extra_dependencies

Global

No

No

File name

empty string

The path to a file containing additional dependencies for the lock-order dependency
graph. This is useful to amend the primary server dependency graph, defined in the
lock_order_dependencies.txt file, with additional dependencies describing the behavior of
third party code. (The alternative is to modify lock_order_dependencies.txt itself, which is not
encouraged.)

If this variable is not set, no secondary file is used.

• lock_order_output_directory

Command-Line Format

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--lock-order-output-
directory=dir_name

8.0.17

lock_order_output_directory

Global

No

No

Directory name

empty string

The directory where the LOCK_ORDER tool writes its logs. If this variable is not set, the default is the
current directory.

• lock_order_print_txt

Command-Line Format

--lock-order-print-txt[={OFF|ON}]

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

8.0.17

lock_order_print_txt

Global

No

No

Boolean

OFF

Whether the LOCK_ORDER tool performs a lock-order graph analysis and prints a textual report. The
report includes any lock-acquisition cycles detected.

1283

The LOCK_ORDER Tool

• lock_order_trace_loop

Command-Line Format

--lock-order-trace-loop[={OFF|ON}]

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

8.0.17

lock_order_trace_loop

Global

No

No

Boolean

OFF

Whether the LOCK_ORDER tool prints a trace in the log file when it encounters a dependency that is
flagged as a loop in the lock-order graph.

• lock_order_trace_missing_arc

Command-Line Format

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--lock-order-trace-missing-
arc[={OFF|ON}]

8.0.17

lock_order_trace_missing_arc

Global

No

No

Boolean

ON

Whether the LOCK_ORDER tool prints a trace in the log file when it encounters a dependency that is
not declared in the lock-order graph.

• lock_order_trace_missing_key

Command-Line Format

Introduced

System Variable

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

--lock-order-trace-missing-
key[={OFF|ON}]

8.0.17

lock_order_trace_missing_key

Global

No

No

Boolean

OFF

Whether the LOCK_ORDER tool prints a trace in the log file when it encounters an object that is not
properly instrumented with the Performance Schema.

• lock_order_trace_missing_unlock

Command-Line Format

Introduced

System Variable

--lock-order-trace-missing-
unlock[={OFF|ON}]

8.0.17

lock_order_trace_missing_unlock

1284

Scope

Dynamic

SET_VAR Hint Applies

Type

Default Value

The DBUG Package

Global

No

No

Boolean

ON

Whether the LOCK_ORDER tool prints a trace in the log file when it encounters a lock that is
destroyed while still held.

7.9.4 The DBUG Package

The MySQL server and most MySQL clients are compiled with the DBUG package originally created by
Fred Fish. When you have configured MySQL for debugging, this package makes it possible to get a
trace file of what the program is doing. See Section 7.9.1.2, “Creating Trace Files”.

This section summarizes the argument values that you can specify in debug options on the command
line for MySQL programs that have been built with debugging support.

The DBUG package can be used by invoking a program with the --debug[=debug_options] or -#
[debug_options] option. If you specify the --debug or -# option without a debug_options value,
most MySQL programs use a default value. The server default is d:t:i:o,/tmp/mysqld.trace on
Unix and d:t:i:O,\mysqld.trace on Windows. The effect of this default is:

• d: Enable output for all debug macros

• t: Trace function calls and exits

• i: Add PID to output lines

• o,/tmp/mysqld.trace, O,\mysqld.trace: Set the debug output file.

Most client programs use a default debug_options value of d:t:o,/tmp/program_name.trace,
regardless of platform.

Here are some example debug control strings as they might be specified on a shell command line:

--debug=d:t
--debug=d:f,main,subr1:F:L:t,20
--debug=d,input,output,files:n
--debug=d:t:i:O,\\mysqld.trace

For mysqld, it is also possible to change DBUG settings at runtime by setting the debug system
variable. This variable has global and session values:

mysql> SET GLOBAL debug = 'debug_options';
mysql> SET SESSION debug = 'debug_options';

Changing the global debug value requires privileges sufficient to set global system variables. Changing
the session debug value requires privileges sufficient to set restricted session system variables. See
Section 7.1.9.1, “System Variable Privileges”.

The debug_options value is a sequence of colon-separated fields:

field_1:field_2:...:field_N

Each field within the value consists of a mandatory flag character, optionally preceded by a + or -
character, and optionally followed by a comma-separated list of modifiers:

[+|-]flag[,modifier,modifier,...,modifier]

1285

The DBUG Package

The following table describes the permitted flag characters. Unrecognized flag characters are silently
ignored.

Flag

d

D

f

F

i

L

n

N

o

O

a

A

p

P

r

t

1286

Description

Enable output from DBUG_XXX macros for
the current state. May be followed by a list of
keywords, which enables output only for the
DBUG macros with that keyword. An empty list of
keywords enables output for all macros.

In MySQL, common debug macro keywords to
enable are enter, exit, error, warning,
info, and loop.

Delay after each debugger output line. The
argument is the delay, in tenths of seconds,
subject to machine capabilities. For example,
D,20 specifies a delay of two seconds.

Limit debugging, tracing, and profiling to the list
of named functions. An empty list enables all
functions. The appropriate d or t flags must still
be given; this flag only limits their actions if they
are enabled.

Identify the source file name for each line of debug
or trace output.

Identify the process with the PID or thread ID for
each line of debug or trace output.

Identify the source file line number for each line of
debug or trace output.

Print the current function nesting depth for each
line of debug or trace output.

Number each line of debug output.

Redirect the debugger output stream to the
specified file. The default output is stderr.

Like o, but the file is really flushed between
each write. When needed, the file is closed and
reopened between each write.

Like o, but opens for append.

Like O, but opens for append.

Limit debugger actions to specified processes.
A process must be identified with the
DBUG_PROCESS macro and match one in the list
for debugger actions to occur.

Print the current process name for each line of
debug or trace output.

When pushing a new state, do not inherit the
previous state's function nesting level. Useful
when the output is to start at the left margin.

Enable function call/exit trace lines. May be
followed by a list (containing only one modifier)
giving a numeric maximum trace level, beyond
which no output occurs for either debugging or

The DBUG Package

Flag

T

Description
tracing macros. The default is a compile time
option.

Print the current timestamp for every line of
output.

The leading + or - character and trailing list of modifiers are used for flag characters such as d or f
that can enable a debug operation for all applicable modifiers or just some of them:

• With no leading + or -, the flag value is set to exactly the modifier list as given.

• With a leading + or -, the modifiers in the list are added to or subtracted from the current modifier list.

The following examples show how this works for the d flag. An empty d list enabled output for all debug
macros. A nonempty list enables output only for the macro keywords in the list.

These statements set the d value to the modifier list as given:

mysql> SET debug = 'd';
mysql> SELECT @@debug;
+---------+
| @@debug |
+---------+
| d       |
+---------+
mysql> SET debug = 'd,error,warning';
mysql> SELECT @@debug;
+-----------------+
| @@debug         |
+-----------------+
| d,error,warning |
+-----------------+

A leading + or - adds to or subtracts from the current d value:

mysql> SET debug = '+d,loop';
mysql> SELECT @@debug;
+----------------------+
| @@debug              |
+----------------------+
| d,error,warning,loop |
+----------------------+

mysql> SET debug = '-d,error,loop';
mysql> SELECT @@debug;
+-----------+
| @@debug   |
+-----------+
| d,warning |
+-----------+

Adding to “all macros enabled” results in no change:

mysql> SET debug = 'd';
mysql> SELECT @@debug;
+---------+
| @@debug |
+---------+
| d       |
+---------+

mysql> SET debug = '+d,loop';
mysql> SELECT @@debug;
+---------+
| @@debug |
+---------+
| d       |

1287

The DBUG Package

+---------+

Disabling all enabled macros disables the d flag entirely:

mysql> SET debug = 'd,error,loop';
mysql> SELECT @@debug;
+--------------+
| @@debug      |
+--------------+
| d,error,loop |
+--------------+

mysql> SET debug = '-d,error,loop';
mysql> SELECT @@debug;
+---------+
| @@debug |
+---------+
|         |
+---------+

1288

